let e=class e{constructor(){this.debugMode=!1,this.verboseMode=!1,this.logLevel="error",this.debugCategories={api:{enabled:!1,subsystems:{calls:!1,responses:!1,errors:!1,fallbacks:!1,throttling:!1}},parameters:{enabled:!1,subsystems:{updates:!1,conditions:!1,filtering:!1,actions:!1}},websocket:{enabled:!1,subsystems:{connection:!1,messages:!1,events:!1,plugin:!1,subscriptions:!1,authentication:!1}},redux:{enabled:!1,subsystems:{actions:!1,state:!1,components:!1,middleware:!1,dispatch:!1,sync:!1,parameters:!1,migration:!1}},layouts:{enabled:!1,subsystems:{rendering:!1,filtering:!1,updates:!1}},rendering:{enabled:!1,subsystems:{updates:!1,performance:!1,cycle:!1,debounce:!1}},cache:{enabled:!1,subsystems:{hits:!1,misses:!1,pruning:!1,performance:!1}},card:{enabled:!1,subsystems:{initialization:!1,lifecycle:!1,rendering:!1,updates:!1}},diagnostics:{enabled:!1,subsystems:{performance:!1,memory:!1,errors:!1}}},this._logSequence=0,this._recentLogs=new Map,this._dedupeTimeWindow=2e3,this._maxDuplicatesPerWindow=1}static getInstance(){return e.instance||(e.instance=new e),e.instance}isEnabled(e,t){var n;return!(!this.verboseMode&&!this.anyCategoryEnabled())&&(!!this.debugCategories[e]&&(!!this.verboseMode||!!this.debugCategories[e].enabled&&(!t||!0===(null===(n=this.debugCategories[e].subsystems)||void 0===n?void 0:n[t]))))}anyCategoryEnabled(){return Object.keys(this.debugCategories).some((e=>this.debugCategories[e].enabled))}getNextSequence(){return++this._logSequence}setDebug(e){this.debugMode=e,e?this.logLevel="debug":(this.logLevel="error",this.verboseMode=!1),console.info("Logger debug mode "+(e?"ENABLED":"DISABLED"))}setVerboseMode(e){e&&!this.debugMode&&this.setDebug(!0),this.verboseMode=e,console.info("Logger verbose mode "+(e?"ENABLED - ALL categories will log":"DISABLED - only selected categories will log"))}setDebugConfig(e){var t,n,r,a,o,i,s,l;e&&(this.setDebug(e.debug||!1),this.setVerboseMode(e.debug_verbose||!1),e.debug_hierarchical?this.processHierarchicalConfig(e.debug_hierarchical):(this.setCategoryDebug("api",null!==(t=e.debug_api)&&void 0!==t&&t),this.setCategoryDebug("parameters",null!==(n=e.debug_parameters)&&void 0!==n&&n),this.setCategoryDebug("websocket",null!==(r=e.debug_websocket)&&void 0!==r&&r),this.setCategoryDebug("layouts",null!==(a=e.debug_layouts)&&void 0!==a&&a),this.setCategoryDebug("rendering",null!==(o=e.debug_rendering)&&void 0!==o&&o),this.setCategoryDebug("cache",null!==(i=e.debug_cache)&&void 0!==i&&i),this.setCategoryDebug("card",null!==(s=e.debug_card)&&void 0!==s&&s),this.setCategoryDebug("diagnostics",null!==(l=e.debug_diagnostics)&&void 0!==l&&l)),this.logConfigStatus())}processHierarchicalConfig(e){var t,n;for(const r in this.debugCategories){const a=e[r];if(a){if(this.setCategoryDebug(r,null!==(t=a.enabled)&&void 0!==t&&t),a.subsystems)for(const e in a.subsystems)this.setSubsystemDebug(r,e,null!==(n=a.subsystems[e])&&void 0!==n&&n)}else this.setCategoryDebug(r,!1)}}formatSystemStatus(e){if(!this.debugCategories[e])return"Not configured";if(!this.debugCategories[e].enabled)return"Disabled";const t=this.debugCategories[e].subsystems,n=Object.keys(t).filter((e=>t[e])).join(", ");return n?`Enabled with subsystems: ${n}`:"Enabled (no subsystems)"}setLogLevel(e){this.logLevel=e}setCategoryDebug(e,t){this.debugCategories[e]?this.debugCategories[e].enabled=t:console.warn(`Logger: Unknown debug category '${e}'`)}setSubsystemDebug(e,t,n){this.debugCategories[e]&&this.debugCategories[e].subsystems.hasOwnProperty(t)?this.debugCategories[e].subsystems[t]=n:console.warn(`Logger: Unknown debug subsystem '${t}' for system '${e}'`)}isDuplicate(e){const t=Date.now(),n=this._recentLogs.get(e);return!!(n&&t-n<this._dedupeTimeWindow)||(this._recentLogs.set(e,t),this._logSequence%10==0&&this.pruneRecentLogs(),!1)}pruneRecentLogs(){const e=Date.now();for(const[t,n]of this._recentLogs.entries())e-n>this._dedupeTimeWindow&&this._recentLogs.delete(t)}log(e,t,n,...r){n&&(n instanceof Error||"object"!=typeof n||Array.isArray(n))&&(r=[n,...r],n={});const a=n&&"object"==typeof n?n.category:void 0,o=n&&"object"==typeof n?n.subsystem:void 0,i=n&&"object"==typeof n&&n.level||"debug",s=n&&"object"==typeof n?n.performance:void 0;if(a&&!this.isEnabled(a,o))return;if(!a&&!this.debugMode)return;if("none"===this.logLevel)return;if("error"===this.logLevel&&"error"!==i)return;if("warn"===this.logLevel&&"error"!==i&&"warn"!==i)return;const l=`${e}:${a||"main"}:${o||""}:${t}`;if(this.isDuplicate(l))return;const c=this.getNextSequence(),u=Date.now().toString(),d=a?o?`${e}:${a}:${o}`:`${e}:${a}`:e;if("trace"===i){if(console.groupCollapsed(`[${u}][${c}][${d}] ${t}`),r.length>0&&console.log(...r),s){const{startTime:e,duration:t}=s;t?console.log(`‚è±Ô∏è Duration: ${t.toFixed(2)}ms`):e&&console.log(`‚è±Ô∏è Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}console.groupEnd()}else if(console.log(`üîç [${u}][${c}][${d}] ${t}`,...r),s){const{startTime:e,duration:t}=s;t?console.log(`‚è±Ô∏è [${u}][${c}][${d}] Duration: ${t.toFixed(2)}ms`):e&&console.log(`‚è±Ô∏è [${u}][${c}][${d}] Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}}info(e,t,...n){const r=n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])?n.shift():{};if("none"===this.logLevel||"error"===this.logLevel||"warn"===this.logLevel)return;const a=null==r?void 0:r.category,o=null==r?void 0:r.subsystem;if(a&&!this.isEnabled(a,o))return;const i=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),s=this.getNextSequence(),l=a?o?`${e}:${a}:${o}`:`${e}:${a}`:e;if(console.info(`‚ÑπÔ∏è [${i}][${s}][${l}] ${t}`,...n),null==r?void 0:r.performance){const{startTime:e,duration:t}=r.performance;t?console.info(`‚è±Ô∏è [${i}][${s}][${l}] Duration: ${t.toFixed(2)}ms`):e&&console.info(`‚è±Ô∏è [${i}][${s}][${l}] Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}}warn(e,t,...n){const r=n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])?n.shift():{};if("none"===this.logLevel||"error"===this.logLevel)return;const a=null==r?void 0:r.category,o=null==r?void 0:r.subsystem,i=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),s=this.getNextSequence(),l=a?o?`${e}:${a}:${o}`:`${e}:${a}`:e;console.warn(`‚ö†Ô∏è [${i}][${s}][${l}] ${t}`,...n)}error(e,t,...n){const r=n.length>0?n[0]:void 0,a=r instanceof Error||r&&"object"==typeof r&&"stack"in r||"string"==typeof r||!r||"object"!=typeof r||Array.isArray(r)?{}:n.shift();if("none"===this.logLevel)return;const o=null==a?void 0:a.category,i=null==a?void 0:a.subsystem,s=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),l=this.getNextSequence(),c=o?i?`${e}:${o}:${i}`:`${e}:${o}`:e;console.error(`‚ùå [${s}][${l}][${c}] ${t}`,...n)}startPerformance(e){return Date.now()}endPerformance(e,t,n,r){const a=Date.now()-n;this.log(e,t,Object.assign(Object.assign({},r),{performance:{duration:a}}))}resetDebugConfig(){console.log("Resetting logger config to defaults"),this.debugMode=!1,this.verboseMode=!1,this.logLevel="error";for(const e in this.debugCategories){this.debugCategories[e].enabled=!1;for(const t in this.debugCategories[e].subsystems)this.debugCategories[e].subsystems[t]=!1}this._recentLogs.clear(),console.info("Logger debug settings reset - all logging disabled")}setEnabled(e,t){this.setCategoryDebug(e,t)}getSystemsStatus(){const e={};for(const t in this.debugCategories){const n=this.debugCategories[t];e[t]={enabled:n.enabled,subsystems:Object.assign({},n.subsystems)}}return e}getSubsystems(e){return this.debugCategories[e]?Object.keys(this.debugCategories[e].subsystems):[]}isCategoryEnabled(e){return this.isEnabled(e)}logConfigStatus(){console.log("Logger configuration:"),console.log(`      Debug mode: ${this.debugMode} (controls debug UI view)`),console.log(`      Verbose mode: ${this.verboseMode} (logs everything when true)`);for(const e in this.debugCategories){const t=this.debugCategories[e].enabled;if(console.log(`      ${e.charAt(0).toUpperCase()+e.slice(1)}: ${t?"Enabled":"Disabled"}`),t&&!this.verboseMode)for(const t in this.debugCategories[e].subsystems){const n=this.debugCategories[e].subsystems[t];console.log(`        - ${t}: ${n?"Enabled":"Disabled"}`)}}}};const t=new WeakSet;const n="inventree-card",r="inventree-card";function a(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const o=window,i=o.ShadowRoot&&(void 0===o.ShadyCSS||o.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),l=new WeakMap;let c=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=l.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&l.set(t,e))}return e}toString(){return this.cssText}};const u=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1]),e[0]);return new c(n,e,s)},d=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new c("string"==typeof e?e:e+"",void 0,s))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var p;const f=window,h=f.trustedTypes,g=h?h.emptyScript:"",m=f.reactiveElementPolyfillSupport,y={toAttribute(e,t){switch(t){case Boolean:e=e?g:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},v=(e,t)=>t!==e&&(t==t||e==e),b={attribute:!0,type:String,converter:y,reflect:!1,hasChanged:v},S="finalized";let k=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const r=this._$Ep(n,t);void 0!==r&&(this._$Ev.set(r,n),e.push(r))})),e}static createProperty(e,t=b){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const a=this[e];this[t]=r,this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||b}static finalize(){if(this.hasOwnProperty(S))return!1;this[S]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(d(e))}else void 0!==e&&t.push(d(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{i?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),r=o.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=b){var r;const a=this.constructor._$Ep(e,n);if(void 0!==a&&!0===n.reflect){const o=(void 0!==(null===(r=n.converter)||void 0===r?void 0:r.toAttribute)?n.converter:y).toAttribute(t,n.type);this._$El=e,null==o?this.removeAttribute(a):this.setAttribute(a,o),this._$El=null}}_$AK(e,t){var n;const r=this.constructor,a=r._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=r.getPropertyOptions(a),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:y;this._$El=a,this[a]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||v)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var w;k[S]=!0,k.elementProperties=new Map,k.elementStyles=[],k.shadowRootOptions={mode:"open"},null==m||m({ReactiveElement:k}),(null!==(p=f.reactiveElementVersions)&&void 0!==p?p:f.reactiveElementVersions=[]).push("1.6.3");const _=window,x=_.trustedTypes,C=x?x.createPolicy("lit-html",{createHTML:e=>e}):void 0,E="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,I="?"+A,P=`<${I}>`,j=document,R=()=>j.createComment(""),T=e=>null===e||"object"!=typeof e&&"function"!=typeof e,N=Array.isArray,O="[ \t\n\f\r]",$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,D=/-->/g,L=/>/g,M=RegExp(`>|${O}(?:([^\\s"'>=/]+)(${O}*=${O}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),z=/'/g,F=/"/g,G=/^(?:script|style|textarea|title)$/i,q=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),U=Symbol.for("lit-noChange"),B=Symbol.for("lit-nothing"),H=new WeakMap,V=j.createTreeWalker(j,129,null,!1);function W(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==C?C.createHTML(t):t}const Q=(e,t)=>{const n=e.length-1,r=[];let a,o=2===t?"<svg>":"",i=$;for(let t=0;t<n;t++){const n=e[t];let s,l,c=-1,u=0;for(;u<n.length&&(i.lastIndex=u,l=i.exec(n),null!==l);)u=i.lastIndex,i===$?"!--"===l[1]?i=D:void 0!==l[1]?i=L:void 0!==l[2]?(G.test(l[2])&&(a=RegExp("</"+l[2],"g")),i=M):void 0!==l[3]&&(i=M):i===M?">"===l[0]?(i=null!=a?a:$,c=-1):void 0===l[1]?c=-2:(c=i.lastIndex-l[2].length,s=l[1],i=void 0===l[3]?M:'"'===l[3]?F:z):i===F||i===z?i=M:i===D||i===L?i=$:(i=M,a=void 0);const d=i===M&&e[t+1].startsWith("/>")?" ":"";o+=i===$?n+P:c>=0?(r.push(s),n.slice(0,c)+E+n.slice(c)+A+d):n+A+(-2===c?(r.push(void 0),t):d)}return[W(e,o+(e[n]||"<?>")+(2===t?"</svg>":"")),r]};class K{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let a=0,o=0;const i=e.length-1,s=this.parts,[l,c]=Q(e,t);if(this.el=K.createElement(l,n),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(r=V.nextNode())&&s.length<i;){if(1===r.nodeType){if(r.hasAttributes()){const e=[];for(const t of r.getAttributeNames())if(t.endsWith(E)||t.startsWith(A)){const n=c[o++];if(e.push(t),void 0!==n){const e=r.getAttribute(n.toLowerCase()+E).split(A),t=/([.?@])?(.*)/.exec(n);s.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?ee:"?"===t[1]?ne:"@"===t[1]?re:Z})}else s.push({type:6,index:a})}for(const t of e)r.removeAttribute(t)}if(G.test(r.tagName)){const e=r.textContent.split(A),t=e.length-1;if(t>0){r.textContent=x?x.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],R()),V.nextNode(),s.push({type:2,index:++a});r.append(e[t],R())}}}else if(8===r.nodeType)if(r.data===I)s.push({type:2,index:a});else{let e=-1;for(;-1!==(e=r.data.indexOf(A,e+1));)s.push({type:7,index:a}),e+=A.length-1}a++}}static createElement(e,t){const n=j.createElement("template");return n.innerHTML=e,n}}function J(e,t,n=e,r){var a,o,i,s;if(t===U)return t;let l=void 0!==r?null===(a=n._$Co)||void 0===a?void 0:a[r]:n._$Cl;const c=T(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,n,r)),void 0!==r?(null!==(i=(s=n)._$Co)&&void 0!==i?i:s._$Co=[])[r]=l:n._$Cl=l),void 0!==l&&(t=J(e,l._$AS(e,t.values),l,r)),t}class X{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:n},parts:r}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:j).importNode(n,!0);V.currentNode=a;let o=V.nextNode(),i=0,s=0,l=r[0];for(;void 0!==l;){if(i===l.index){let t;2===l.type?t=new Y(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new ae(o,this,e)),this._$AV.push(t),l=r[++s]}i!==(null==l?void 0:l.index)&&(o=V.nextNode(),i++)}return V.currentNode=j,a}v(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class Y{constructor(e,t,n,r){var a;this.type=2,this._$AH=B,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cp=null===(a=null==r?void 0:r.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=J(this,e,t),T(e)?e===B||null==e||""===e?(this._$AH!==B&&this._$AR(),this._$AH=B):e!==this._$AH&&e!==U&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>N(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==B&&T(this._$AH)?this._$AA.nextSibling.data=e:this.$(j.createTextNode(e)),this._$AH=e}g(e){var t;const{values:n,_$litType$:r}=e,a="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=K.createElement(W(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.v(n);else{const e=new X(a,this),t=e.u(this.options);e.v(n),this.$(t),this._$AH=e}}_$AC(e){let t=H.get(e.strings);return void 0===t&&H.set(e.strings,t=new K(e)),t}T(e){N(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const a of e)r===t.length?t.push(n=new Y(this.k(R()),this.k(R()),this,this.options)):n=t[r],n._$AI(a),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class Z{constructor(e,t,n,r,a){this.type=1,this._$AH=B,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=B}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){const a=this.strings;let o=!1;if(void 0===a)e=J(this,e,t,0),o=!T(e)||e!==this._$AH&&e!==U,o&&(this._$AH=e);else{const r=e;let i,s;for(e=a[0],i=0;i<a.length-1;i++)s=J(this,r[n+i],t,i),s===U&&(s=this._$AH[i]),o||(o=!T(s)||s!==this._$AH[i]),s===B?e=B:e!==B&&(e+=(null!=s?s:"")+a[i+1]),this._$AH[i]=s}o&&!r&&this.j(e)}j(e){e===B?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ee extends Z{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===B?void 0:e}}const te=x?x.emptyScript:"";class ne extends Z{constructor(){super(...arguments),this.type=4}j(e){e&&e!==B?this.element.setAttribute(this.name,te):this.element.removeAttribute(this.name)}}class re extends Z{constructor(e,t,n,r,a){super(e,t,n,r,a),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=J(this,e,t,0))&&void 0!==n?n:B)===U)return;const r=this._$AH,a=e===B&&r!==B||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==B&&(r===B||a);a&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class ae{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){J(this,e)}}const oe=_.litHtmlPolyfillSupport;null==oe||oe(K,Y),(null!==(w=_.litHtmlVersions)&&void 0!==w?w:_.litHtmlVersions=[]).push("2.8.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var ie,se;class le extends k{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var r,a;const o=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t;let i=o._$litPart$;if(void 0===i){const e=null!==(a=null==n?void 0:n.renderBefore)&&void 0!==a?a:null;o._$litPart$=i=new Y(t.insertBefore(R(),e),e,void 0,null!=n?n:{})}return i._$AI(e),i})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return U}}le.finalized=!0,le._$litElement$=!0,null===(ie=globalThis.litElementHydrateSupport)||void 0===ie||ie.call(globalThis,{LitElement:le});const ce=globalThis.litElementPolyfillSupport;null==ce||ce({LitElement:le}),(null!==(se=globalThis.litElementVersions)&&void 0!==se?se:globalThis.litElementVersions=[]).push("3.3.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ue=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:n,elements:r}=t;return{kind:n,elements:r,finisher(t){customElements.define(e,t)}}})(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,de=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},pe=(e,t,n)=>{t.constructor.createProperty(n,e)};function fe(e){return(t,n)=>void 0!==n?((e,t,n)=>{t.constructor.createProperty(n,e)})(e,t,n):de(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function he(e){return fe({...e,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ge;null===(ge=window.HTMLSlotElement)||void 0===ge||ge.prototype.assignedElements;const me={view_type:"detail",data_sources:{inventree_hass_sensors:[],ha_entities:[],inventree_pks:[],inventree_parameters:[],inventree_parameters_to_fetch:[],inventree_pk_thumbnail_overrides:[]},layout_options:{columns:3,grid_spacing:8,item_height:170},display:{show_header:!0,show_image:!0,show_name:!0,show_stock:!0,show_description:!1,show_category:!1,show_ipn:!1,show_location:!1,show_supplier:!1,show_manufacturer:!1,show_notes:!1,show_buttons:!0,show_stock_status_border:!0,show_stock_status_colors:!0,show_related_parts:!1,show_parameters:!0,show_part_details_component:!0,show_stock_status_border_for_templates:!1,show_buttons_for_variants:!0,show_part_details_component_for_variants:!0,show_image_for_variants:!0,show_stock_for_variants:!0,show_name_for_variants:!0},direct_api:{enabled:!1,url:"",api_key:"",method:"websocket",websocket_url:"",idle_render_time:60,performance:{api:{throttle:.2,cacheLifetime:60,batchSize:20,failedRequestRetryDelaySeconds:30},websocket:{reconnectInterval:5e3,messageDebounce:50}}},parameters:{enabled:!0,show_section:!0,collapsed_by_default:!1,group_parameters:!1,filter_fallback_mode:"all"},conditional_logic:{definedLogics:[]},style:{background:"var(--ha-card-background, var(--card-background-color, white))",spacing:8,image_size:50},interactions:{buttons:[]},performance:{rendering:{debounceTime:50,idleRenderInterval:5e3,maxRenderFrequency:10},api:{throttle:.2,cacheLifetime:60,batchSize:20,failedRequestRetryDelaySeconds:30},websocket:{reconnectInterval:5e3,messageDebounce:50},parameters:{updateFrequency:1e3,conditionEvalFrequency:1e3}},debug:!1,debug_verbose:!1,show_debug:!1},ye=e.getInstance();function ve(e,t,n={}){try{n.source,ye.log("MetricsTracker",`${e}/${t} [${n.source||"unknown"}]`,Object.assign({category:"metrics",subsystem:"tracking"},n))}catch(e){ye.error("MetricsTracker",`Error tracking metrics: ${e}`,{category:"metrics",subsystem:"error"})}}function be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Se,ke={exports:{}},we={};ke.exports=function(){if(Se)return we;Se=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,h={};function g(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||p}function m(){}function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var v=y.prototype=new m;v.constructor=y,f(v,g.prototype),v.isPureReactComponent=!0;var b=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function w(t,n,r,a,o,i){return r=i.ref,{$$typeof:e,type:t,key:n,ref:void 0!==r?r:null,props:i}}function _(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var x=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function E(){}function A(n,r,a,o,i){var s=typeof n;"undefined"!==s&&"boolean"!==s||(n=null);var l,c,p=!1;if(null===n)p=!0;else switch(s){case"bigint":case"string":case"number":p=!0;break;case"object":switch(n.$$typeof){case e:case t:p=!0;break;case u:return A((p=n._init)(n._payload),r,a,o,i)}}if(p)return i=i(n),p=""===o?"."+C(n,0):o,b(i)?(a="",null!=p&&(a=p.replace(x,"$&/")+"/"),A(i,r,a,"",(function(e){return e}))):null!=i&&(_(i)&&(l=i,c=a+(null==i.key||n&&n.key===i.key?"":(""+i.key).replace(x,"$&/")+"/")+p,i=w(l.type,c,void 0,0,0,l.props)),r.push(i)),1;p=0;var f,h=""===o?".":o+":";if(b(n))for(var g=0;g<n.length;g++)p+=A(o=n[g],r,a,s=h+C(o,g),i);else if("function"==typeof(g=null===(f=n)||"object"!=typeof f?null:"function"==typeof(f=d&&f[d]||f["@@iterator"])?f:null))for(n=g.call(n),g=0;!(o=n.next()).done;)p+=A(o=o.value,r,a,s=h+C(o,g++),i);else if("object"===s){if("function"==typeof n.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,a,o,i);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return p}function I(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}return we.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},we.Component=g,we.Fragment=n,we.Profiler=a,we.PureComponent=y,we.StrictMode=r,we.Suspense=l,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,we.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},we.cache=function(e){return function(){return e.apply(null,arguments)}},we.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key;if(null!=t)for(o in t.ref,void 0!==t.key&&(a=""+t.key),t)!k.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),s=0;s<o;s++)i[s]=arguments[s+2];r.children=i}return w(e.type,a,void 0,0,0,r)},we.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},we.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return w(e,o,void 0,0,0,a)},we.createRef=function(){return{current:null}},we.forwardRef=function(e){return{$$typeof:s,render:e}},we.isValidElement=_,we.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:P}},we.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},we.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),a=S.S;null!==a&&a(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(R,j)}catch(e){j(e)}finally{S.T=t}},we.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},we.use=function(e){return S.H.use(e)},we.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},we.useCallback=function(e,t){return S.H.useCallback(e,t)},we.useContext=function(e){return S.H.useContext(e)},we.useDebugValue=function(){},we.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},we.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},we.useId=function(){return S.H.useId()},we.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},we.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},we.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},we.useMemo=function(e,t){return S.H.useMemo(e,t)},we.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},we.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},we.useRef=function(e){return S.H.useRef(e)},we.useState=function(e){return S.H.useState(e)},we.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},we.useTransition=function(){return S.H.useTransition()},we.version="19.1.0",we}();var _e,xe,Ce=ke.exports,Ee=be(Ce),Ae={exports:{}},Ie={},Pe={exports:{}},je={};function Re(){return xe||(xe=1,Pe.exports=(_e||(_e=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var l=[],c=[],u=1,d=null,p=3,f=!1,h=!1,g=!1,m=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function k(e){if(g=!1,S(e),!h)if(null!==n(l))h=!0,_||(_=!0,w());else{var t=n(c);null!==t&&R(k,t.startTime-e)}}var w,_=!1,x=-1,C=5,E=-1;function A(){return!(!m&&e.unstable_now()-E<C)}function I(){if(m=!1,_){var t=e.unstable_now();E=t;var a=!0;try{e:{h=!1,g&&(g=!1,v(x),x=-1),f=!0;var o=p;try{t:{for(S(t),d=n(l);null!==d&&!(d.expirationTime>t&&A());){var i=d.callback;if("function"==typeof i){d.callback=null,p=d.priorityLevel;var s=i(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,S(t),a=!0;break t}d===n(l)&&r(l),S(t)}else r(l);d=n(l)}if(null!==d)a=!0;else{var u=n(c);null!==u&&R(k,u.startTime-t),a=!1}}break e}finally{d=null,p=o,f=!1}a=void 0}}finally{a?w():_=!1}}}if("function"==typeof b)w=function(){b(I)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,j=P.port2;P.port1.onmessage=I,w=function(){j.postMessage(null)}}else w=function(){y(I,0)};function R(t,n){x=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_requestPaint=function(){m=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,a,o){var i=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?i+o:i,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(r.sortIndex=o,t(c,r),null===n(l)&&r===n(c)&&(g?(v(x),x=-1):g=!0,R(k,o-i))):(r.sortIndex=s,t(l,r),h||f||(h=!0,_||(_=!0,w()))),r},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(je)),je)),Pe.exports}var Te,Ne,Oe,$e={exports:{}},De={};function Le(){if(Te)return De;Te=1;var e=Ce;function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,De.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},De.flushSync=function(e){var t=o.T,n=r.p;try{if(o.T=null,r.p=2,e)return e()}finally{o.T=t,r.p=n,r.d.f()}},De.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},De.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},De.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,a=i(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:o,fetchPriority:s}):"script"===n&&r.d.X(e,{crossOrigin:a,integrity:o,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},De.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=i(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},De.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,a=i(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:a,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},De.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=i(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},De.requestFormReset=function(e){r.d.r(e)},De.unstable_batchedUpdates=function(e,t){return e(t)},De.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},De.useFormStatus=function(){return o.H.useHostTransitionStatus()},De.version="19.1.0",De}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Ae.exports=function(){if(Oe)return Ie;Oe=1;var e=Re(),t=Ce,n=(Ne||(Ne=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),$e.exports=Le()),$e.exports);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function s(e){if(o(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var c=Object.assign,u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case g:return"Profiler";case h:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case x:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case v:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return P(e(t))}catch(e){}}return null}var j=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},O=[],$=-1;function D(e){return{current:e}}function L(e){0>$||(e.current=O[$],O[$]=null,$--)}function M(e,t){$++,O[$]=e.current,e.current=t}var z=D(null),F=D(null),G=D(null),q=D(null);function U(e,t){switch(M(G,t),M(F,e),M(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ld(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=cd(t=ld(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(z),M(z,e)}function B(){L(z),L(F),L(G)}function H(e){null!==e.memoizedState&&M(q,e);var t=z.current,n=cd(t,e.type);t!==n&&(M(F,e),M(z,n))}function V(e){F.current===e&&(L(z),L(F)),q.current===e&&(L(q),Yd._currentValue=N)}var W=Object.prototype.hasOwnProperty,Q=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,J=e.unstable_shouldYield,X=e.unstable_requestPaint,Y=e.unstable_now,Z=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,te=e.unstable_UserBlockingPriority,ne=e.unstable_NormalPriority,re=e.unstable_LowPriority,ae=e.unstable_IdlePriority,oe=e.log,ie=e.unstable_setDisableYieldValue,se=null,le=null;function ce(e){if("function"==typeof oe&&ie(e),le&&"function"==typeof le.setStrictMode)try{le.setStrictMode(se,e)}catch(e){}}var ue=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(de(e)/pe|0)|0},de=Math.log,pe=Math.LN2,fe=256,he=4194304;function ge(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function me(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!=(r=s&~o)?a=ge(r):0!=(i&=s)?a=ge(i):n||0!=(n=s&~e)&&(a=ge(n)):0!=(s=r&~o)?a=ge(s):0!==i?a=ge(i):n||0!=(n=r&~e)&&(a=ge(n)),0===a?0:0===t||t===a||t&o||!((o=a&-a)>=(n=t&-t)||32===o&&4194048&n)?a:t}function ye(e,t){return!(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ve(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function be(){var e=fe;return!(4194048&(fe<<=1))&&(fe=256),e}function Se(){var e=he;return!(62914560&(he<<=1))&&(he=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function we(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _e(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ue(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function xe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ue(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Pe(){var e=T.p;return 0!==e?e:void 0===(e=window.event)?32:fp(e.type)}var je=Math.random().toString(36).slice(2),Te="__reactFiber$"+je,De="__reactProps$"+je,Me="__reactContainer$"+je,ze="__reactEvents$"+je,Fe="__reactListeners$"+je,Ge="__reactHandles$"+je,qe="__reactResources$"+je,Ue="__reactMarker$"+je;function Be(e){delete e[Te],delete e[De],delete e[ze],delete e[Fe],delete e[Ge]}function He(e){var t=e[Te];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Me]||n[Te]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_d(e);null!==e;){if(n=e[Te])return n;e=_d(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[Te]||e[Me]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Qe(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Ue]=!0}var Je=new Set,Xe={};function Ye(e,t){Ze(e,t),Ze(e+"Capture",t)}function Ze(e,t){for(Xe[e]=t,e=0;e<t.length;e++)Je.add(t[e])}var et,tt,nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rt={},at={};function ot(e,t,n){if(a=t,W.call(at,a)||!W.call(rt,a)&&(nt.test(a)?at[a]=!0:(rt[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function it(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function st(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function lt(e){if(void 0===et)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||"",tt=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+et+e+tt}var ct=!1;function ut(e,t){if(!e||ct)return"";ct=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),i=o[0],s=o[1];if(i&&s){var l=i.split("\n"),c=s.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{ct=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?lt(n):""}function dt(e){switch(e.tag){case 26:case 27:case 5:return lt(e.type);case 16:return lt("Lazy");case 13:return lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return ut(e.type,!1);case 11:return ut(e.type.render,!1);case 1:return ut(e.type,!0);case 31:return lt("Activity");default:return""}}function pt(e){try{var t="";do{t+=dt(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function gt(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function yt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var vt=/[\n"\\]/g;function bt(e){return e.replace(vt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function St(e,t,n,r,a,o,i,s){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ft(t)):e.value!==""+ft(t)&&(e.value=""+ft(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?wt(e,i,ft(t)):null!=n?wt(e,i,ft(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=o&&(e.defaultChecked=!!o),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+ft(s):e.removeAttribute("name")}function kt(e,t,n,r,a,o,i,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+ft(n):"",t=null!=t?""+ft(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function wt(e,t,n){"number"===t&&yt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ft(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ft(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ft(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(r(92));if(j(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ft(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Pt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var o in t)a=t[o],t.hasOwnProperty(o)&&n[o]!==a&&It(e,o,a)}else for(var i in t)t.hasOwnProperty(i)&&It(e,i,t[i])}function jt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ot=null;function $t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Lt=null;function Mt(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(St(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var o=a[De]||null;if(!o)throw Error(r(90));St(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&mt(a)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var zt=!1;function Ft(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Dt||null!==Lt)&&(Hc(),Dt&&(t=Dt,e=Lt,Lt=Dt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Gt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[De]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var qt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ut=!1;if(qt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(e){Ut=!1}var Ht=null,Vt=null,Wt=null;function Qt(){if(Wt)return Wt;var e,t,n=Vt,r=n.length,a="value"in Ht?Ht.value:Ht.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Wt=a.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Xt(){return!1}function Yt(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Jt:Xt,this.isPropagationStopped=Xt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Zt,en,tn,nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rn=Yt(nn),an=c({},nn,{view:0,detail:0}),on=Yt(an),sn=c({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tn&&(tn&&"mousemove"===e.type?(Zt=e.screenX-tn.screenX,en=e.screenY-tn.screenY):en=Zt=0,tn=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:en}}),ln=Yt(sn),cn=Yt(c({},sn,{dataTransfer:0})),un=Yt(c({},an,{relatedTarget:0})),dn=Yt(c({},nn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=Yt(c({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fn=Yt(c({},nn,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return yn}var bn=Yt(c({},an,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sn=Yt(c({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=Yt(c({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),wn=Yt(c({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Yt(c({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Yt(c({},nn,{newState:0,oldState:0})),Cn=[9,13,27,32],En=qt&&"CompositionEvent"in window,An=null;qt&&"documentMode"in document&&(An=document.documentMode);var In=qt&&"TextEvent"in window&&!An,Pn=qt&&(!En||An&&8<An&&11>=An),jn=String.fromCharCode(32),Rn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1,$n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Ln(e,t,n,r){Dt?Lt?Lt.push(r):Lt=[r]:Dt=r,0<(t=Qu(t,"onChange")).length&&(n=new rn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,zn=null;function Fn(e){Fu(e,0)}function Gn(e){if(mt(We(e)))return e}function qn(e,t){if("change"===e)return t}var Un=!1;if(qt){var Bn;if(qt){var Hn="oninput"in document;if(!Hn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Hn="function"==typeof Vn.oninput}Bn=Hn}else Bn=!1;Un=Bn&&(!document.documentMode||9<document.documentMode)}function Wn(){Mn&&(Mn.detachEvent("onpropertychange",Qn),zn=Mn=null)}function Qn(e){if("value"===e.propertyName&&Gn(zn)){var t=[];Ln(t,zn,e,$t(e)),Ft(Fn,t)}}function Kn(e,t,n){"focusin"===e?(Wn(),zn=n,(Mn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Wn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(zn)}function Xn(e,t){if("click"===e)return Gn(t)}function Yn(e,t){if("input"===e||"change"===e)return Gn(t)}var Zn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function er(e,t){if(Zn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!W.call(t,a)||!Zn(e[a],t[a]))return!1}return!0}function tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nr(e,t){var n,r=tr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tr(r)}}function rr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?rr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ar(e){for(var t=yt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=yt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=qt&&"documentMode"in document&&11>=document.documentMode,sr=null,lr=null,cr=null,ur=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==sr||sr!==yt(r)||(r="selectionStart"in(r=sr)&&or(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&er(cr,r)||(cr=r,0<(r=Qu(lr,"onSelect")).length&&(t=new rn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},hr={},gr={};function mr(e){if(hr[e])return hr[e];if(!fr[e])return e;var t,n=fr[e];for(t in n)if(n.hasOwnProperty(t)&&t in gr)return hr[e]=n[t];return e}qt&&(gr=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);var yr=mr("animationend"),vr=mr("animationiteration"),br=mr("animationstart"),Sr=mr("transitionrun"),kr=mr("transitionstart"),wr=mr("transitioncancel"),_r=mr("transitionend"),xr=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){xr.set(e,t),Ye(t,[e])}Cr.push("scrollEnd");var Ar=new WeakMap;function Ir(e,t){if("object"==typeof e&&null!==e){var n=Ar.get(e);return void 0!==n?n:(t={value:e,source:t,stack:pt(t)},Ar.set(e,t),t)}return{value:e,source:t,stack:pt(t)}}var Pr=[],jr=0,Rr=0;function Tr(){for(var e=jr,t=Rr=jr=0;t<e;){var n=Pr[t];Pr[t++]=null;var r=Pr[t];Pr[t++]=null;var a=Pr[t];Pr[t++]=null;var o=Pr[t];if(Pr[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==o&&Dr(n,a,o)}}function Nr(e,t,n,r){Pr[jr++]=e,Pr[jr++]=t,Pr[jr++]=n,Pr[jr++]=r,Rr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Or(e,t,n,r){return Nr(e,t,n,r),Lr(e)}function $r(e,t){return Nr(e,null,null,t),Lr(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(a=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,a&&null!==t&&(a=31-ue(n),null===(r=(e=o.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),o):null}function Lr(e){if(50<Dc)throw Dc=0,Lc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function zr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new zr(e,t,n,r)}function Gr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,a,o,i){var s=0;if(a=e,"function"==typeof e)Gr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case x:return(e=Fr(31,n,t,o)).elementType=x,e.lanes=i,e;case f:return Hr(n.children,o,i,t);case h:s=8,o|=24;break;case g:return(e=Fr(12,n,t,2|o)).elementType=g,e.lanes=i,e;case S:return(e=Fr(13,n,t,o)).elementType=S,e.lanes=i,e;case k:return(e=Fr(19,n,t,o)).elementType=k,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case m:case v:s=10;break e;case y:s=9;break e;case b:s=11;break e;case w:s=14;break e;case _:s=16,a=null;break e}s=29,n=Error(r(130,null===e?"null":typeof e,"")),a=null}return(t=Fr(s,n,t,o)).elementType=e,t.type=a,t.lanes=i,t}function Hr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qr=[],Kr=0,Jr=null,Xr=0,Yr=[],Zr=0,ea=null,ta=1,na="";function ra(e,t){Qr[Kr++]=Xr,Qr[Kr++]=Jr,Jr=e,Xr=t}function aa(e,t,n){Yr[Zr++]=ta,Yr[Zr++]=na,Yr[Zr++]=ea,ea=e;var r=ta;e=na;var a=32-ue(r)-1;r&=~(1<<a),n+=1;var o=32-ue(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,ta=1<<32-ue(t)+a|n<<a|r,na=o+e}else ta=1<<o|n<<a|r,na=e}function oa(e){null!==e.return&&(ra(e,1),aa(e,1,0))}function ia(e){for(;e===Jr;)Jr=Qr[--Kr],Qr[Kr]=null,Xr=Qr[--Kr],Qr[Kr]=null;for(;e===ea;)ea=Yr[--Zr],Yr[Zr]=null,na=Yr[--Zr],Yr[Zr]=null,ta=Yr[--Zr],Yr[Zr]=null}var sa=null,la=null,ca=!1,ua=null,da=!1,pa=Error(r(519));function fa(e){throw ba(Ir(Error(r(418,"")),e)),pa}function ha(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Te]=e,t[De]=r,n){case"dialog":Gu("cancel",t),Gu("close",t);break;case"iframe":case"object":case"embed":Gu("load",t);break;case"video":case"audio":for(n=0;n<Mu.length;n++)Gu(Mu[n],t);break;case"source":Gu("error",t);break;case"img":case"image":case"link":Gu("error",t),Gu("load",t);break;case"details":Gu("toggle",t);break;case"input":Gu("invalid",t),kt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),gt(t);break;case"select":Gu("invalid",t);break;case"textarea":Gu("invalid",t),Ct(t,r.value,r.defaultValue,r.children),gt(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ed(t.textContent,n)?(null!=r.popover&&(Gu("beforetoggle",t),Gu("toggle",t)),null!=r.onScroll&&Gu("scroll",t),null!=r.onScrollEnd&&Gu("scrollend",t),null!=r.onClick&&(t.onclick=td),t=!0):t=!1,t||fa(e)}function ga(e){for(sa=e.return;sa;)switch(sa.tag){case 5:case 13:return void(da=!1);case 27:case 3:return void(da=!0);default:sa=sa.return}}function ma(e){if(e!==sa)return!1;if(!ca)return ga(e),ca=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ud(e.type,e.memoizedProps)),t=!t),t&&la&&fa(e),ga(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){la=kd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}la=null}}else 27===n?(n=la,yd(e.type)?(e=wd,wd=null,la=e):la=n):la=sa?kd(e.stateNode.nextSibling):null;return!0}function ya(){la=sa=null,ca=!1}function va(){var e=ua;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),ua=null),e}function ba(e){null===ua?ua=[e]:ua.push(e)}var Sa=D(null),ka=null,wa=null;function _a(e,t,n){M(Sa,t._currentValue),t._currentValue=n}function xa(e){e._currentValue=Sa.current,L(Sa)}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t,n,a){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var s=o.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ca(i.return,n,e),a||(s=null);break e}i=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(r(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),Ca(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function Aa(e,t,n,a){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(524288&o.flags)i=!0;else if(262144&o.flags)break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(r(387));if(null!==(s=s.memoizedProps)){var l=o.type;Zn(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===q.current){if(null===(s=o.alternate))throw Error(r(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}o=o.return}null!==e&&Ea(t,e,n,a),t.flags|=262144}function Ia(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pa(e){ka=e,wa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ja(e){return Ta(ka,e)}function Ra(e,t){return null===ka&&Pa(e),Ta(e,t)}function Ta(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===wa){if(null===e)throw Error(r(308));wa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wa=wa.next=t;return n}var Na="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Oa=e.unstable_scheduleCallback,$a=e.unstable_NormalPriority,Da={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function La(){return{controller:new Na,data:new Map,refCount:0}}function Ma(e){e.refCount--,0===e.refCount&&Oa($a,(function(){e.controller.abort()}))}var za=null,Fa=0,Ga=0,qa=null;function Ua(){if(0==--Fa&&null!==za){null!==qa&&(qa.status="fulfilled");var e=za;za=null,Ga=0,qa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ba=R.S;R.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===za){var n=za=[];Fa=0,Ga=Nu(),qa={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fa++,t.then(Ua,Ua)}(0,t),null!==Ba&&Ba(e,t)};var Ha=D(null);function Va(){var e=Ha.current;return null!==e?e:sc.pooledCache}function Wa(e,t){M(Ha,null===t?Ha.current:t.pool)}function Qa(){var e=Va();return null===e?null:{parent:Da._currentValue,pool:e}}var Ka=Error(r(460)),Ja=Error(r(474)),Xa=Error(r(542)),Ya={then:function(){}};function Za(e){return"fulfilled"===(e=e.status)||"rejected"===e}function eo(){}function to(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(eo,eo),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ao(e=t.reason),e;default:if("string"==typeof t.status)t.then(eo,eo);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ao(e=t.reason),e}throw no=t,Ka}}var no=null;function ro(){if(null===no)throw Error(r(459));var e=no;return no=null,e}function ao(e){if(e===Ka||e===Xa)throw Error(r(483))}var oo=!1;function io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function lo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function co(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&ic){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Lr(e),Dr(e,null,n),t}return Nr(e,r,t,n),Lr(e)}function uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xe(e,n)}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var fo=!1;function ho(){if(fo&&null!==qa)throw qa}function go(e,t,n,r){fo=!1;var a=e.updateQueue;oo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,u=l.next;l.next=null,null===i?o=u:i.next=u,i=l;var d=e.alternate;null!==d&&(s=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===s?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l)}if(null!==o){var p=a.baseState;for(i=0,d=u=l=null,s=o;;){var f=-536870913&s.lane,h=f!==s.lane;if(h?(cc&f)===f:(r&f)===f){0!==f&&f===Ga&&(fo=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,m=s;f=t;var y=n;switch(m.tag){case 1:if("function"==typeof(g=m.payload)){p=g.call(y,p,f);break e}p=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(y,p,f):g))break e;p=c({},p,f);break e;case 2:oo=!0}}null!==(f=s.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=a.callbacks)?a.callbacks=[f]:h.push(f))}else h={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(u=d=h,l=p):d=d.next=h,i|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}null===d&&(l=p),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=d,null===o&&(a.shared.lanes=0),yc|=i,e.lanes=i,e.memoizedState=p}}function mo(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function yo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)mo(n[e],t)}var vo=D(null),bo=D(0);function So(e,t){M(bo,e=gc),M(vo,t),gc=e|t.baseLanes}function ko(){M(bo,gc),M(vo,vo.current)}function wo(){gc=bo.current,L(vo),L(bo)}var _o=0,xo=null,Co=null,Eo=null,Ao=!1,Io=!1,Po=!1,jo=0,Ro=0,To=null,No=0;function Oo(){throw Error(r(321))}function $o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function Do(e,t,n,r,a,o){return _o=o,xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Ji:Xi,Po=!1,o=n(r,a),Po=!1,Io&&(o=Mo(t,n,r,a)),Lo(e),o}function Lo(e){R.H=Ki;var t=null!==Co&&null!==Co.next;if(_o=0,Eo=Co=xo=null,Ao=!1,Ro=0,To=null,t)throw Error(r(300));null===e||Rs||null!==(e=e.dependencies)&&Ia(e)&&(Rs=!0)}function Mo(e,t,n,a){xo=e;var o=0;do{if(Io&&(To=null),Ro=0,Io=!1,25<=o)throw Error(r(301));if(o+=1,Eo=Co=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}R.H=Yi,i=t(n,a)}while(Io);return i}function zo(){var e=R.H,t=e.useState()[0];return t="function"==typeof t.then?Ho(t):t,e=e.useState()[0],(null!==Co?Co.memoizedState:null)!==e&&(xo.flags|=1024),t}function Fo(){var e=0!==jo;return jo=0,e}function Go(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function qo(e){if(Ao){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ao=!1}_o=0,Eo=Co=xo=null,Io=!1,Ro=jo=0,To=null}function Uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Eo?xo.memoizedState=Eo=e:Eo=Eo.next=e,Eo}function Bo(){if(null===Co){var e=xo.alternate;e=null!==e?e.memoizedState:null}else e=Co.next;var t=null===Eo?xo.memoizedState:Eo.next;if(null!==t)Eo=t,Co=e;else{if(null===e){if(null===xo.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Co=e).memoizedState,baseState:Co.baseState,baseQueue:Co.baseQueue,queue:Co.queue,next:null},null===Eo?xo.memoizedState=Eo=e:Eo=Eo.next=e}return Eo}function Ho(e){var t=Ro;return Ro+=1,null===To&&(To=[]),e=to(To,e,t),t=xo,null===(null===Eo?t.memoizedState:Eo.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Ji:Xi),e}function Vo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ho(e);if(e.$$typeof===v)return ja(e)}throw Error(r(438,String(e)))}function Wo(e){var t=null,n=xo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xo.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Qo(e,t){return"function"==typeof t?t(e):t}function Ko(e){return Jo(Bo(),Co,e)}function Jo(e,t,n){var a=e.queue;if(null===a)throw Error(r(311));a.lastRenderedReducer=n;var o=e.baseQueue,i=a.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}t.baseQueue=o=i,a.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var l=s=null,c=null,u=t=o.next,d=!1;do{var p=-536870913&u.lane;if(p!==u.lane?(cc&p)===p:(_o&p)===p){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===Ga&&(d=!0);else{if((_o&f)===f){u=u.next,f===Ga&&(d=!0);continue}p={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=i):c=c.next=p,xo.lanes|=f,yc|=f}p=u.action,Po&&n(i,p),i=u.hasEagerState?u.eagerState:n(i,p)}else f={lane:p,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,s=i):c=c.next=f,xo.lanes|=p,yc|=p;u=u.next}while(null!==u&&u!==t);if(null===c?s=i:c.next=l,!Zn(i,e.memoizedState)&&(Rs=!0,d&&null!==(n=qa)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=c,a.lastRenderedState=i}return null===o&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Xo(e){var t=Bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);Zn(i,t.memoizedState)||(Rs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Yo(e,t,n){var a=xo,o=Bo(),i=ca;if(i){if(void 0===n)throw Error(r(407));n=n()}else n=t();var s=!Zn((Co||o).memoizedState,n);if(s&&(o.memoizedState=n,Rs=!0),o=o.queue,ki(2048,8,ti.bind(null,a,o,e),[e]),o.getSnapshot!==t||s||null!==Eo&&1&Eo.memoizedState.tag){if(a.flags|=2048,vi(9,{destroy:void 0,resource:void 0},ei.bind(null,a,o,n,t),null),null===sc)throw Error(r(349));i||124&_o||Zo(a,t,n)}return n}function Zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ei(e,t,n,r){t.value=n,t.getSnapshot=r,ni(t)&&ri(e)}function ti(e,t,n){return n((function(){ni(t)&&ri(e)}))}function ni(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(e){return!0}}function ri(e){var t=$r(e,2);null!==t&&Fc(t,e,2)}function ai(e){var t=Uo();if("function"==typeof e){var n=e;if(e=n(),Po){ce(!0);try{n()}finally{ce(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:e},t}function oi(e,t,n,r){return e.baseState=n,Jo(e,Co,"function"==typeof r?r:Qo)}function ii(e,t,n,a,o){if(Vi(e))throw Error(r(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==R.T?n(!0):i.isTransition=!1,a(i),null===(n=t.pending)?(i.next=t.pending=i,si(t,i)):(i.next=n.next,t.pending=n.next=i)}}function si(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var o=R.T,i={};R.T=i;try{var s=n(a,r),l=R.S;null!==l&&l(i,s),li(e,t,s)}catch(n){ui(e,t,n)}finally{R.T=o}}else try{li(e,t,o=n(a,r))}catch(n){ui(e,t,n)}}function li(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){ci(e,t,n)}),(function(n){return ui(e,t,n)})):ci(e,t,n)}function ci(e,t,n){t.status="fulfilled",t.value=n,di(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,si(e,n)))}function ui(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,di(t),t=t.next}while(t!==r)}e.action=null}function di(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function pi(e,t){return t}function fi(e,t){if(ca){var n=sc.formState;if(null!==n){e:{var r=xo;if(ca){if(la){t:{for(var a=la,o=da;8!==a.nodeType;){if(!o){a=null;break t}if(null===(a=kd(a.nextSibling))){a=null;break t}}a="F!"===(o=a.data)||"F"===o?a:null}if(a){la=kd(a.nextSibling),r="F!"===a.data;break e}}fa(r)}r=!1}r&&(t=n[0])}}return(n=Uo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:t},n.queue=r,n=Ui.bind(null,xo,r),r.dispatch=n,r=ai(!1),o=Hi.bind(null,xo,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Uo()).queue=a,n=ii.bind(null,xo,a,o,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function hi(e){return gi(Bo(),Co,e)}function gi(e,t,n){if(t=Jo(e,t,pi)[0],e=Ko(Qo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ho(t)}catch(e){if(e===Ka)throw Xa;throw e}else r=t;var a=(t=Bo()).queue,o=a.dispatch;return n!==t.memoizedState&&(xo.flags|=2048,vi(9,{destroy:void 0,resource:void 0},mi.bind(null,a,n),null)),[r,o,e]}function mi(e,t){e.action=t}function yi(e){var t=Bo(),n=Co;if(null!==n)return gi(t,n,e);Bo(),t=t.memoizedState;var r=(n=Bo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function vi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function bi(){return Bo().memoizedState}function Si(e,t,n,r){var a=Uo();r=void 0===r?null:r,xo.flags|=e,a.memoizedState=vi(1|t,{destroy:void 0,resource:void 0},n,r)}function ki(e,t,n,r){var a=Bo();r=void 0===r?null:r;var o=a.memoizedState.inst;null!==Co&&null!==r&&$o(r,Co.memoizedState.deps)?a.memoizedState=vi(t,o,n,r):(xo.flags|=e,a.memoizedState=vi(1|t,o,n,r))}function wi(e,t){Si(8390656,8,e,t)}function _i(e,t){ki(2048,8,e,t)}function xi(e,t){return ki(4,2,e,t)}function Ci(e,t){return ki(4,4,e,t)}function Ei(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ai(e,t,n){n=null!=n?n.concat([e]):null,ki(4,4,Ei.bind(null,t,e),n)}function Ii(){}function Pi(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ji(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$o(t,r[1]))return r[0];if(r=e(),Po){ce(!0);try{e()}finally{ce(!1)}}return n.memoizedState=[r,t],r}function Ri(e,t,n){return void 0===n||1073741824&_o?e.memoizedState=t:(e.memoizedState=n,e=zc(),xo.lanes|=e,yc|=e,n)}function Ti(e,t,n,r){return Zn(n,t)?n:null!==vo.current?(e=Ri(e,n,r),Zn(e,t)||(Rs=!0),e):42&_o?(e=zc(),xo.lanes|=e,yc|=e,t):(Rs=!0,e.memoizedState=n)}function Ni(e,t,n,r,a){var o=T.p;T.p=0!==o&&8>o?o:8;var i,s,l,c=R.T,u={};R.T=u,Hi(e,!1,t,n);try{var d=a(),p=R.S;if(null!==p&&p(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var f=(i=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then((function(){l.status="fulfilled",l.value=i;for(var e=0;e<s.length;e++)(0,s[e])(i)}),(function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)})),l);Bi(e,t,f,Mc())}else Bi(e,t,r,Mc())}catch(n){Bi(e,t,{then:function(){},status:"rejected",reason:n},Mc())}finally{T.p=o,R.T=c}}function Oi(){}function $i(e,t,n,a){if(5!==e.tag)throw Error(r(476));var o=Di(e).queue;Ni(e,o,t,N,null===n?Oi:function(){return Li(e),n(a)})}function Di(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:N},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Li(e){Bi(e,Di(e).next.queue,{},Mc())}function Mi(){return ja(Yd)}function zi(){return Bo().memoizedState}function Fi(){return Bo().memoizedState}function Gi(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mc(),r=co(t,e=lo(n),n);return null!==r&&(Fc(r,t,n),uo(r,t,n)),t={cache:La()},void(e.payload=t)}t=t.return}}function qi(e,t,n){var r=Mc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vi(e)?Wi(t,n):null!==(n=Or(e,t,n,r))&&(Fc(n,e,r),Qi(n,t,r))}function Ui(e,t,n){Bi(e,t,n,Mc())}function Bi(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vi(e))Wi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,Zn(s,i))return Nr(e,t,a,0),null===sc&&Tr(),!1}catch(e){}if(null!==(n=Or(e,t,a,r)))return Fc(n,e,r),Qi(n,t,r),!0}return!1}function Hi(e,t,n,a){if(a={lane:2,revertLane:Nu(),action:a,hasEagerState:!1,eagerState:null,next:null},Vi(e)){if(t)throw Error(r(479))}else null!==(t=Or(e,n,a,2))&&Fc(t,e,2)}function Vi(e){var t=e.alternate;return e===xo||null!==t&&t===xo}function Wi(e,t){Io=Ao=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xe(e,n)}}var Ki={readContext:ja,use:Vo,useCallback:Oo,useContext:Oo,useEffect:Oo,useImperativeHandle:Oo,useLayoutEffect:Oo,useInsertionEffect:Oo,useMemo:Oo,useReducer:Oo,useRef:Oo,useState:Oo,useDebugValue:Oo,useDeferredValue:Oo,useTransition:Oo,useSyncExternalStore:Oo,useId:Oo,useHostTransitionStatus:Oo,useFormState:Oo,useActionState:Oo,useOptimistic:Oo,useMemoCache:Oo,useCacheRefresh:Oo},Ji={readContext:ja,use:Vo,useCallback:function(e,t){return Uo().memoizedState=[e,void 0===t?null:t],e},useContext:ja,useEffect:wi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Si(4194308,4,Ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Si(4194308,4,e,t)},useInsertionEffect:function(e,t){Si(4,2,e,t)},useMemo:function(e,t){var n=Uo();t=void 0===t?null:t;var r=e();if(Po){ce(!0);try{e()}finally{ce(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Uo();if(void 0!==n){var a=n(t);if(Po){ce(!0);try{n(t)}finally{ce(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=qi.bind(null,xo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Uo().memoizedState=e},useState:function(e){var t=(e=ai(e)).queue,n=Ui.bind(null,xo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ii,useDeferredValue:function(e,t){return Ri(Uo(),e,t)},useTransition:function(){var e=ai(!1);return e=Ni.bind(null,xo,e.queue,!0,!1),Uo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=xo,o=Uo();if(ca){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===sc)throw Error(r(349));124&cc||Zo(a,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,wi(ti.bind(null,a,i,e),[e]),a.flags|=2048,vi(9,{destroy:void 0,resource:void 0},ei.bind(null,a,i,n,t),null),n},useId:function(){var e=Uo(),t=sc.identifierPrefix;if(ca){var n=na;t="¬´"+t+"R"+(n=(ta&~(1<<32-ue(ta)-1)).toString(32)+n),0<(n=jo++)&&(t+="H"+n.toString(32)),t+="¬ª"}else t="¬´"+t+"r"+(n=No++).toString(32)+"¬ª";return e.memoizedState=t},useHostTransitionStatus:Mi,useFormState:fi,useActionState:fi,useOptimistic:function(e){var t=Uo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Hi.bind(null,xo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Wo,useCacheRefresh:function(){return Uo().memoizedState=Gi.bind(null,xo)}},Xi={readContext:ja,use:Vo,useCallback:Pi,useContext:ja,useEffect:_i,useImperativeHandle:Ai,useInsertionEffect:xi,useLayoutEffect:Ci,useMemo:ji,useReducer:Ko,useRef:bi,useState:function(){return Ko(Qo)},useDebugValue:Ii,useDeferredValue:function(e,t){return Ti(Bo(),Co.memoizedState,e,t)},useTransition:function(){var e=Ko(Qo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:Ho(e),t]},useSyncExternalStore:Yo,useId:zi,useHostTransitionStatus:Mi,useFormState:hi,useActionState:hi,useOptimistic:function(e,t){return oi(Bo(),0,e,t)},useMemoCache:Wo,useCacheRefresh:Fi},Yi={readContext:ja,use:Vo,useCallback:Pi,useContext:ja,useEffect:_i,useImperativeHandle:Ai,useInsertionEffect:xi,useLayoutEffect:Ci,useMemo:ji,useReducer:Xo,useRef:bi,useState:function(){return Xo(Qo)},useDebugValue:Ii,useDeferredValue:function(e,t){var n=Bo();return null===Co?Ri(n,e,t):Ti(n,Co.memoizedState,e,t)},useTransition:function(){var e=Xo(Qo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:Ho(e),t]},useSyncExternalStore:Yo,useId:zi,useHostTransitionStatus:Mi,useFormState:yi,useActionState:yi,useOptimistic:function(e,t){var n=Bo();return null!==Co?oi(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Wo,useCacheRefresh:Fi},Zi=null,es=0;function ts(e){var t=es;return es+=1,null===Zi&&(Zi=[]),to(Zi,e,t)}function ns(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function rs(e,t){if(t.$$typeof===u)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function as(e){return(0,e._init)(e._payload)}function os(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=qr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===f?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===_&&as(a)===t.type)?(ns(t=o(t,n.props),n),t.return=e,t):(ns(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function g(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return ns(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Wr(t,e.mode,n)).return=e,t;case _:return g(e,t=(0,t._init)(t._payload),n)}if(j(t)||A(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return g(e,ts(t),n);if(t.$$typeof===v)return g(e,Ra(e,t),n);rs(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===a?c(e,t,n,r):null;case p:return n.key===a?u(e,t,n,r):null;case _:return m(e,t,n=(a=n._init)(n._payload),r)}if(j(n)||A(n))return null!==a?null:h(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,ts(n),r);if(n.$$typeof===v)return m(e,t,Ra(e,n),r);rs(e,n)}return null}function y(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case _:return y(e,t,n,r=(0,r._init)(r._payload),a)}if(j(r)||A(r))return h(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return y(e,t,n,ts(r),a);if(r.$$typeof===v)return y(e,t,n,Ra(t,r),a);rs(t,r)}return null}function b(l,c,u,h){if("object"==typeof u&&null!==u&&u.type===f&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case d:e:{for(var S=u.key;null!==c;){if(c.key===S){if((S=u.type)===f){if(7===c.tag){n(l,c.sibling),(h=o(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===S||"object"==typeof S&&null!==S&&S.$$typeof===_&&as(S)===c.type){n(l,c.sibling),ns(h=o(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===f?((h=Hr(u.props.children,l.mode,h,u.key)).return=l,l=h):(ns(h=Br(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return s(l);case p:e:{for(S=u.key;null!==c;){if(c.key===S){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=o(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Wr(u,l.mode,h)).return=l,l=h}return s(l);case _:return b(l,c,u=(S=u._init)(u._payload),h)}if(j(u))return function(r,o,s,l){for(var c=null,u=null,d=o,p=o=0,f=null;null!==d&&p<s.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var h=m(r,d,s[p],l);if(null===h){null===d&&(d=f);break}e&&d&&null===h.alternate&&t(r,d),o=i(h,o,p),null===u?c=h:u.sibling=h,u=h,d=f}if(p===s.length)return n(r,d),ca&&ra(r,p),c;if(null===d){for(;p<s.length;p++)null!==(d=g(r,s[p],l))&&(o=i(d,o,p),null===u?c=d:u.sibling=d,u=d);return ca&&ra(r,p),c}for(d=a(d);p<s.length;p++)null!==(f=y(d,r,p,s[p],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?p:f.key),o=i(f,o,p),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(r,e)})),ca&&ra(r,p),c}(l,c,u,h);if(A(u)){if("function"!=typeof(S=A(u)))throw Error(r(150));return function(o,s,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,p=s,f=s=0,h=null,v=l.next();null!==p&&!v.done;f++,v=l.next()){p.index>f?(h=p,p=null):h=p.sibling;var b=m(o,p,v.value,c);if(null===b){null===p&&(p=h);break}e&&p&&null===b.alternate&&t(o,p),s=i(b,s,f),null===d?u=b:d.sibling=b,d=b,p=h}if(v.done)return n(o,p),ca&&ra(o,f),u;if(null===p){for(;!v.done;f++,v=l.next())null!==(v=g(o,v.value,c))&&(s=i(v,s,f),null===d?u=v:d.sibling=v,d=v);return ca&&ra(o,f),u}for(p=a(p);!v.done;f++,v=l.next())null!==(v=y(p,o,f,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?f:v.key),s=i(v,s,f),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(o,e)})),ca&&ra(o,f),u}(l,c,u=S.call(u),h)}if("function"==typeof u.then)return b(l,c,ts(u),h);if(u.$$typeof===v)return b(l,c,Ra(l,u),h);rs(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=o(c,u)).return=l,l=h):(n(l,c),(h=Vr(u,l.mode,h)).return=l,l=h),s(l)):n(l,c)}return function(e,t,n,r){try{es=0;var a=b(e,t,n,r);return Zi=null,a}catch(t){if(t===Ka||t===Xa)throw t;var o=Fr(29,t,null,e.mode);return o.lanes=r,o.return=e,o}}}var is=os(!0),ss=os(!1),ls=D(null),cs=null;function us(e){var t=e.alternate;M(hs,1&hs.current),M(ls,e),null===cs&&(null===t||null!==vo.current||null!==t.memoizedState)&&(cs=e)}function ds(e){if(22===e.tag){if(M(hs,hs.current),M(ls,e),null===cs){var t=e.alternate;null!==t&&null!==t.memoizedState&&(cs=e)}}else ps()}function ps(){M(hs,hs.current),M(ls,ls.current)}function fs(e){L(ls),cs===e&&(cs=null),L(hs)}var hs=D(0);function gs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||Sd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ms(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ys={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mc(),a=lo(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=co(e,a,r))&&(Fc(t,e,r),uo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mc(),a=lo(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=co(e,a,r))&&(Fc(t,e,r),uo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mc(),r=lo(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=co(e,r,n))&&(Fc(t,e,n),uo(t,e,n))}};function vs(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!(t.prototype&&t.prototype.isPureReactComponent&&er(n,r)&&er(a,o))}function bs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ys.enqueueReplaceState(t,t.state,null)}function Ss(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=c({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var ks="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ws(e){ks(e)}function _s(e){console.error(e)}function xs(e){ks(e)}function Cs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout((function(){throw e}))}}function Es(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout((function(){throw e}))}}function As(e,t,n){return(n=lo(n)).tag=3,n.payload={element:null},n.callback=function(){Cs(e,t)},n}function Is(e){return(e=lo(e)).tag=3,e}function Ps(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var o=r.value;e.payload=function(){return a(o)},e.callback=function(){Es(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Es(t,n,r),"function"!=typeof a&&(null===Ic?Ic=new Set([this]):Ic.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var js=Error(r(461)),Rs=!1;function Ts(e,t,n,r){t.child=null===e?ss(t,null,n,r):is(t,e.child,n,r)}function Ns(e,t,n,r,a){n=n.render;var o=t.ref;if("ref"in r){var i={};for(var s in r)"ref"!==s&&(i[s]=r[s])}else i=r;return Pa(t),r=Do(e,t,n,i,o,a),s=Fo(),null===e||Rs?(ca&&s&&oa(t),t.flags|=1,Ts(e,t,r,a),t.child):(Go(e,t,a),Zs(e,t,a))}function Os(e,t,n,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Gr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,$s(e,t,o,r,a))}if(o=e.child,!el(e,a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:er)(i,r)&&e.ref===t.ref)return Zs(e,t,a)}return t.flags|=1,(e=qr(o,r)).ref=t.ref,e.return=t,t.child=e}function $s(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(er(o,r)&&e.ref===t.ref){if(Rs=!1,t.pendingProps=r=o,!el(e,a))return t.lanes=e.lanes,Zs(e,t,a);131072&e.flags&&(Rs=!0)}}return zs(e,t,n,r,a)}function Ds(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=t.child=e.child,o=0;null!==a;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ls(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Ls(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wa(0,null!==o?o.cachePool:null),null!==o?So(t,o):ko(),ds(t)}else null!==o?(Wa(0,o.cachePool),So(t,o),ps(),t.memoizedState=null):(null!==e&&Wa(0,null),ko(),ps());return Ts(e,t,a,n),t.child}function Ls(e,t,n,r){var a=Va();return a=null===a?null:{parent:Da._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Wa(0,null),ko(),ds(t),null!==e&&Aa(e,t,r,!0),null}function Ms(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function zs(e,t,n,r,a){return Pa(t),n=Do(e,t,n,r,void 0,a),r=Fo(),null===e||Rs?(ca&&r&&oa(t),t.flags|=1,Ts(e,t,n,a),t.child):(Go(e,t,a),Zs(e,t,a))}function Fs(e,t,n,r,a,o){return Pa(t),t.updateQueue=null,n=Mo(t,r,n,a),Lo(e),r=Fo(),null===e||Rs?(ca&&r&&oa(t),t.flags|=1,Ts(e,t,n,o),t.child):(Go(e,t,o),Zs(e,t,o))}function Gs(e,t,n,r,a){if(Pa(t),null===t.stateNode){var o=Mr,i=n.contextType;"object"==typeof i&&null!==i&&(o=ja(i)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ys,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},io(t),i=n.contextType,o.context="object"==typeof i&&null!==i?ja(i):Mr,o.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(ms(t,n,i,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(i=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),i!==o.state&&ys.enqueueReplaceState(o,o.state,null),go(t,r,o,a),ho(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=Ss(n,s);o.props=l;var c=o.context,u=n.contextType;i=Mr,"object"==typeof u&&null!==u&&(i=ja(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||c!==i)&&bs(t,o,r,i),oo=!1;var p=t.memoizedState;o.state=p,go(t,r,o,a),ho(),c=t.memoizedState,s||p!==c||oo?("function"==typeof d&&(ms(t,n,d,r),c=t.memoizedState),(l=oo||vs(t,n,l,r,p,c,i))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=i,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,so(e,t),u=Ss(n,i=t.memoizedProps),o.props=u,d=t.pendingProps,p=o.context,c=n.contextType,l=Mr,"object"==typeof c&&null!==c&&(l=ja(c)),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(i!==d||p!==l)&&bs(t,o,r,l),oo=!1,p=t.memoizedState,o.state=p,go(t,r,o,a),ho();var f=t.memoizedState;i!==d||p!==f||oo||null!==e&&null!==e.dependencies&&Ia(e.dependencies)?("function"==typeof s&&(ms(t,n,s,r),f=t.memoizedState),(u=oo||vs(t,n,u,r,p,f,l)||null!==e&&null!==e.dependencies&&Ia(e.dependencies))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ms(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=is(t,e.child,null,a),t.child=is(t,null,n,a)):Ts(e,t,n,a),t.memoizedState=o.state,e=t.child):e=Zs(e,t,a),e}function qs(e,t,n,r){return ya(),t.flags|=256,Ts(e,t,n,r),t.child}var Us={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bs(e){return{baseLanes:e,cachePool:Qa()}}function Hs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Sc),e}function Vs(e,t,n){var a,o=t.pendingProps,i=!1,s=!!(128&t.flags);if((a=s)||(a=(null===e||null!==e.memoizedState)&&!!(2&hs.current)),a&&(i=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(ca){if(i?us(t):ps(),ca){var l,c=la;if(l=c){e:{for(l=c,c=da;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=kd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==ea?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},(l=Fr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,sa=t,la=null,l=!0):l=!1}l||fa(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return Sd(c)?t.lanes=32:t.lanes=536870912,null;fs(t)}return c=o.children,o=o.fallback,i?(ps(),c=Qs({mode:"hidden",children:c},i=t.mode),o=Hr(o,i,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(i=t.child).memoizedState=Bs(n),i.childLanes=Hs(e,a,n),t.memoizedState=Us,o):(us(t),Ws(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(s)256&t.flags?(us(t),t.flags&=-257,t=Ks(e,t,n)):null!==t.memoizedState?(ps(),t.child=e.child,t.flags|=128,t=null):(ps(),i=o.fallback,c=t.mode,o=Qs({mode:"visible",children:o.children},c),(i=Hr(i,c,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,is(t,e.child,null,n),(o=t.child).memoizedState=Bs(n),o.childLanes=Hs(e,a,n),t.memoizedState=Us,t=i);else if(us(t),Sd(c)){if(a=c.nextSibling&&c.nextSibling.dataset)var u=a.dgst;a=u,(o=Error(r(419))).stack="",o.digest=a,ba({value:o,source:null,stack:null}),t=Ks(e,t,n)}else if(Rs||Aa(e,t,n,!1),a=!!(n&e.childLanes),Rs||a){if(null!==(a=sc)&&0!==(o=(o=42&(o=n&-n)?1:Ee(o))&(a.suspendedLanes|n)?0:o)&&o!==l.retryLane)throw l.retryLane=o,$r(e,o),Fc(a,e,o),js;"$?"===c.data||Xc(),t=Ks(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,la=kd(c.nextSibling),sa=t,ca=!0,ua=null,da=!1,null!==e&&(Yr[Zr++]=ta,Yr[Zr++]=na,Yr[Zr++]=ea,ta=e.id,na=e.overflow,ea=t),(t=Ws(t,o.children)).flags|=4096);return t}return i?(ps(),i=o.fallback,c=t.mode,u=(l=e.child).sibling,(o=qr(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=qr(u,i):(i=Hr(i,c,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(c=e.child.memoizedState)?c=Bs(n):(null!==(l=c.cachePool)?(u=Da._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Qa(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Hs(e,a,n),t.memoizedState=Us,o):(us(t),e=(n=e.child).sibling,(n=qr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Ws(e,t){return(t=Qs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Qs(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ks(e,t,n){return is(t,e.child,null,n),(e=Ws(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function Xs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Ys(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Ts(e,t,r.children,n),2&(r=hs.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n,t);else if(19===e.tag)Js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(M(hs,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===gs(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Xs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===gs(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Xs(t,!0,n,null,o);break;case"together":Xs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),yc|=t.lanes,!(n&t.childLanes)){if(null===e)return null;if(Aa(e,t,n,!1),!(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=qr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function el(e,t){return!!(e.lanes&t)||!(null===(e=e.dependencies)||!Ia(e))}function tl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Rs=!0;else{if(!(el(e,n)||128&t.flags))return Rs=!1,function(e,t,n){switch(t.tag){case 3:U(t,t.stateNode.containerInfo),_a(0,Da,e.memoizedState.cache),ya();break;case 27:case 5:H(t);break;case 4:U(t,t.stateNode.containerInfo);break;case 10:_a(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(us(t),t.flags|=128,null):n&t.child.childLanes?Vs(e,t,n):(us(t),null!==(e=Zs(e,t,n))?e.sibling:null);us(t);break;case 19:var a=!!(128&e.flags);if((r=!!(n&t.childLanes))||(Aa(e,t,n,!1),r=!!(n&t.childLanes)),a){if(r)return Ys(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),M(hs,hs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ds(e,t,n);case 24:_a(0,Da,e.memoizedState.cache)}return Zs(e,t,n)}(e,t,n);Rs=!!(131072&e.flags)}else Rs=!1,ca&&1048576&t.flags&&aa(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,o=a._init;if(a=o(a._payload),t.type=a,"function"!=typeof a){if(null!=a){if((o=a.$$typeof)===b){t.tag=11,t=Ns(null,t,a,e,n);break e}if(o===w){t.tag=14,t=Os(null,t,a,e,n);break e}}throw t=P(a)||a,Error(r(306,t,""))}Gr(a)?(e=Ss(a,e),t.tag=1,t=Gs(null,t,a,e,n)):(t.tag=0,t=zs(null,t,a,e,n))}return t;case 0:return zs(e,t,t.type,t.pendingProps,n);case 1:return Gs(e,t,a=t.type,o=Ss(a,t.pendingProps),n);case 3:e:{if(U(t,t.stateNode.containerInfo),null===e)throw Error(r(387));a=t.pendingProps;var i=t.memoizedState;o=i.element,so(e,t),go(t,a,null,n);var s=t.memoizedState;if(a=s.cache,_a(0,Da,a),a!==i.cache&&Ea(t,[Da],n,!0),ho(),a=s.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=qs(e,t,a,n);break e}if(a!==o){ba(o=Ir(Error(r(424)),t)),t=qs(e,t,a,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,la=kd(e.firstChild),sa=t,ca=!0,ua=null,da=!0,n=ss(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ya(),a===o){t=Zs(e,t,n);break e}Ts(e,t,a,n)}t=t.child}return t;case 26:return Ms(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:ca||(n=t.type,e=t.pendingProps,(a=sd(G.current).createElement(n))[Te]=t,a[De]=e,ad(a,n,e),Ke(a),t.stateNode=a):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return H(t),null===e&&ca&&(a=t.stateNode=xd(t.type,t.pendingProps,G.current),sa=t,da=!0,o=la,yd(t.type)?(wd=o,la=kd(a.firstChild)):la=o),Ts(e,t,t.pendingProps.children,n),Ms(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ca&&((o=a=la)&&(null!==(a=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===o)return e}if(null===(e=kd(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,da))?(t.stateNode=a,sa=t,la=kd(a.firstChild),da=!1,o=!0):o=!1),o||fa(t)),H(t),o=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ud(o,i)?a=null:null!==s&&ud(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=Do(e,t,zo,null,null,n),Yd._currentValue=o),Ms(e,t),Ts(e,t,a,n),t.child;case 6:return null===e&&ca&&((e=n=la)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=kd(e.nextSibling)))return null}return e}(n,t.pendingProps,da))?(t.stateNode=n,sa=t,la=null,e=!0):e=!1),e||fa(t)),null;case 13:return Vs(e,t,n);case 4:return U(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=is(t,null,a,n):Ts(e,t,a,n),t.child;case 11:return Ns(e,t,t.type,t.pendingProps,n);case 7:return Ts(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ts(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,_a(0,t.type,a.value),Ts(e,t,a.children,n),t.child;case 9:return o=t.type._context,a=t.pendingProps.children,Pa(t),a=a(o=ja(o)),t.flags|=1,Ts(e,t,a,n),t.child;case 14:return Os(e,t,t.type,t.pendingProps,n);case 15:return $s(e,t,t.type,t.pendingProps,n);case 19:return Ys(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},null===e?((n=Qs(a,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=qr(e.child,a)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ds(e,t,n);case 24:return Pa(t),a=ja(Da),null===e?(null===(o=Va())&&(o=sc,i=La(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:a,cache:o},io(t),_a(0,Da,o)):(!!(e.lanes&n)&&(so(e,t),go(t,null,null,n),ho()),o=e.memoizedState,i=t.memoizedState,o.parent!==a?(o={parent:a,cache:a},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),_a(0,Da,a)):(a=i.cache,_a(0,Da,a),a!==o.cache&&Ea(t,[Da],n,!0))),Ts(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function nl(e){e.flags|=4}function rl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Hd(t)){if(null!==(t=ls.current)&&((4194048&cc)===cc?null!==cs:(62914560&cc)!==cc&&!(536870912&cc)||t!==cs))throw no=Ya,Ja;e.flags|=8192}}function al(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,kc|=t)}function ol(e,t){if(!ca)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var a=t.pendingProps;switch(ia(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),xa(Da),B(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ma(t)?nl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,va())),il(t),null;case 26:return n=t.memoizedState,null===e?(nl(t),null!==n?(il(t),rl(t,n)):(il(t),t.flags&=-16777217)):n?n!==e.memoizedState?(nl(t),il(t),rl(t,n)):(il(t),t.flags&=-16777217):(e.memoizedProps!==a&&nl(t),il(t),t.flags&=-16777217),null;case 27:V(t),n=G.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==a&&nl(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return il(t),null}e=z.current,ma(t)?ha(t):(e=xd(o,a,n),t.stateNode=e,nl(t))}return il(t),null;case 5:if(V(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&nl(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return il(t),null}if(e=z.current,ma(t))ha(t);else{switch(o=sd(G.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof a.is?o.createElement("select",{is:a.is}):o.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e="string"==typeof a.is?o.createElement(n,{is:a.is}):o.createElement(n)}}e[Te]=t,e[De]=a;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(ad(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&nl(t)}}return il(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&nl(t);else{if("string"!=typeof a&&null===t.stateNode)throw Error(r(166));if(e=G.current,ma(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(o=sa))switch(o.tag){case 27:case 5:a=o.memoizedProps}e[Te]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||ed(e.nodeValue,n)))||fa(t)}else(e=sd(e).createTextNode(a))[Te]=t,t.stateNode=e}return il(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ma(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[Te]=t}else ya(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),o=!1}else o=va(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(fs(t),t):(fs(t),null)}if(fs(t),128&t.flags)return t.lanes=n,t;if(n=null!==a,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(o=a.alternate.memoizedState.cachePool.pool);var i=null;null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(i=a.memoizedState.cachePool.pool),i!==o&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),al(t,t.updateQueue),il(t),null;case 4:return B(),null===e&&Bu(t.stateNode.containerInfo),il(t),null;case 10:return xa(t.type),il(t),null;case 19:if(L(hs),null===(o=t.memoizedState))return il(t),null;if(a=!!(128&t.flags),null===(i=o.rendering))if(a)ol(o,!1);else{if(0!==mc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=gs(e))){for(t.flags|=128,ol(o,!1),e=i.updateQueue,t.updateQueue=e,al(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return M(hs,1&hs.current|2),t.child}e=e.sibling}null!==o.tail&&Y()>Ec&&(t.flags|=128,a=!0,ol(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=gs(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,al(t,e),ol(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!ca)return il(t),null}else 2*Y()-o.renderingStartTime>Ec&&536870912!==n&&(t.flags|=128,a=!0,ol(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Y(),t.sibling=null,e=hs.current,M(hs,a?1&e|2:1&e),t):(il(t),null);case 22:case 23:return fs(t),wo(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null!==(n=t.updateQueue)&&al(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&L(Ha),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xa(Da),il(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function ll(e,t){switch(ia(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xa(Da),B(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return V(t),null;case 13:if(fs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));ya()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return L(hs),null;case 4:return B(),null;case 10:return xa(t.type),null;case 22:case 23:return fs(t),wo(),null!==e&&L(Ha),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xa(Da),null;default:return null}}function cl(e,t){switch(ia(t),t.tag){case 3:xa(Da),B();break;case 26:case 27:case 5:V(t);break;case 4:B();break;case 13:fs(t);break;case 19:L(hs);break;case 10:xa(t.type);break;case 22:case 23:fs(t),wo(),null!==e&&L(Ha);break;case 24:xa(Da)}}function ul(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var o=n.create,i=n.inst;r=o(),i.destroy=r}n=n.next}while(n!==a)}}catch(e){hu(t,t.return,e)}}function dl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var o=a.next;r=o;do{if((r.tag&e)===e){var i=r.inst,s=i.destroy;if(void 0!==s){i.destroy=void 0,a=t;var l=n,c=s;try{c()}catch(e){hu(a,l,e)}}}r=r.next}while(r!==o)}}catch(e){hu(t,t.return,e)}}function pl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{yo(t,n)}catch(t){hu(e,e.return,t)}}}function fl(e,t,n){n.props=Ss(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){hu(e,t,n)}}function hl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){hu(e,t,n)}}function gl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){hu(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){hu(e,t,n)}else n.current=null}function ml(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){hu(e,e.return,t)}}function yl(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,s=null,l=null,c=null,u=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&null!=p)switch(h){case"checked":case"value":break;case"defaultValue":c=p;default:a.hasOwnProperty(h)||nd(e,t,h,null,a,p)}}for(var f in a){var h=a[f];if(p=n[f],a.hasOwnProperty(f)&&(null!=h||null!=p))switch(f){case"type":i=h;break;case"name":o=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:h!==p&&nd(e,t,f,h,a,p)}}return void St(e,s,l,c,u,d,i,o);case"select":for(i in h=s=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":h=c;default:a.hasOwnProperty(i)||nd(e,t,i,null,a,c)}for(o in a)if(i=a[o],c=n[o],a.hasOwnProperty(o)&&(null!=i||null!=c))switch(o){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==c&&nd(e,t,o,i,a,c)}return t=l,n=s,a=h,void(null!=f?_t(e,!!n,f,!1):!!a!=!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in h=f=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!a.hasOwnProperty(l))switch(l){case"value":case"children":break;default:nd(e,t,l,null,a,o)}for(s in a)if(o=a[s],i=n[s],a.hasOwnProperty(s)&&(null!=o||null!=i))switch(s){case"value":f=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==i&&nd(e,t,s,o,a,i)}return void xt(e,f,h);case"option":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!a.hasOwnProperty(g)&&("selected"===g?e.selected=!1:nd(e,t,g,null,a,f));for(c in a)f=a[c],h=n[c],!a.hasOwnProperty(c)||f===h||null==f&&null==h||("selected"===c?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:nd(e,t,c,f,a,h));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!a.hasOwnProperty(m)&&nd(e,t,m,null,a,f);for(u in a)if(f=a[u],h=n[u],a.hasOwnProperty(u)&&f!==h&&(null!=f||null!=h))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:nd(e,t,u,f,a,h)}return;default:if(jt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!a.hasOwnProperty(y)&&rd(e,t,y,void 0,a,f);for(d in a)f=a[d],h=n[d],!a.hasOwnProperty(d)||f===h||void 0===f&&void 0===h||rd(e,t,d,f,a,h);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!a.hasOwnProperty(v)&&nd(e,t,v,null,a,f);for(p in a)f=a[p],h=n[p],!a.hasOwnProperty(p)||f===h||null==f&&null==h||nd(e,t,p,f,a,h)}(a,e.type,n,t),a[De]=t}catch(t){hu(e,e.return,t)}}function vl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&yd(e.type)||4===e.tag}function bl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||vl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&yd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Sl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=td));else if(4!==r&&(27===r&&yd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Sl(e,t,n),e=e.sibling;null!==e;)Sl(e,t,n),e=e.sibling}function kl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&yd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(kl(e,t,n),e=e.sibling;null!==e;)kl(e,t,n),e=e.sibling}function wl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ad(t,r,n),t[Te]=e,t[De]=n}catch(t){hu(e,e.return,t)}}var _l=!1,xl=!1,Cl=!1,El="function"==typeof WeakSet?WeakSet:Set,Al=null;function Il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Gl(e,n),4&r&&ul(5,n);break;case 1:if(Gl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){hu(n,n.return,e)}else{var a=Ss(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){hu(n,n.return,e)}}64&r&&pl(n),512&r&&hl(n,n.return);break;case 3:if(Gl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{yo(e,t)}catch(e){hu(n,n.return,e)}}break;case 27:null===t&&4&r&&wl(n);case 26:case 5:Gl(e,n),null===t&&4&r&&ml(n),512&r&&hl(n,n.return);break;case 12:Gl(e,n);break;case 13:Gl(e,n),4&r&&Ol(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=vu.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||xl,a=_l;var o=xl;_l=r,(xl=t)&&!o?Ul(e,n,!!(8772&n.subtreeFlags)):Gl(e,n),_l=a,xl=o}break;case 30:break;default:Gl(e,n)}}function Pl(e){var t=e.alternate;null!==t&&(e.alternate=null,Pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Be(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jl=null,Rl=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Nl(e,t,n),n=n.sibling}function Nl(e,t,n){if(le&&"function"==typeof le.onCommitFiberUnmount)try{le.onCommitFiberUnmount(se,n)}catch(e){}switch(n.tag){case 26:xl||gl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||gl(n,t);var r=jl,a=Rl;yd(n.type)&&(jl=n.stateNode,Rl=!1),Tl(e,t,n),Cd(n.stateNode),jl=r,Rl=a;break;case 5:xl||gl(n,t);case 6:if(r=jl,a=Rl,jl=null,Tl(e,t,n),Rl=a,null!==(jl=r))if(Rl)try{(9===jl.nodeType?jl.body:"HTML"===jl.nodeName?jl.ownerDocument.body:jl).removeChild(n.stateNode)}catch(e){hu(n,t,e)}else try{jl.removeChild(n.stateNode)}catch(e){hu(n,t,e)}break;case 18:null!==jl&&(Rl?(vd(9===(e=jl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Rp(e)):vd(jl,n.stateNode));break;case 4:r=jl,a=Rl,jl=n.stateNode.containerInfo,Rl=!0,Tl(e,t,n),jl=r,Rl=a;break;case 0:case 11:case 14:case 15:xl||dl(2,n,t),xl||dl(4,n,t),Tl(e,t,n);break;case 1:xl||(gl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&fl(n,t,r)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Tl(e,t,n),xl=r;break;default:Tl(e,t,n)}}function Ol(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Rp(e)}catch(e){hu(t,t.return,e)}}function $l(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new El),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new El),t;default:throw Error(r(435,e.tag))}}(e);t.forEach((function(t){var r=bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Dl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var o=n[a],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(yd(l.type)){jl=l.stateNode,Rl=!1;break e}break;case 5:jl=l.stateNode,Rl=!1;break e;case 3:case 4:jl=l.stateNode.containerInfo,Rl=!0;break e}l=l.return}if(null===jl)throw Error(r(160));Nl(i,s,o),jl=null,Rl=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ml(t,e),t=t.sibling}var Ll=null;function Ml(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dl(t,e),zl(e),4&a&&(dl(3,e,e.return),ul(3,e),dl(5,e,e.return));break;case 1:Dl(t,e),zl(e),512&a&&(xl||null===n||gl(n,n.return)),64&a&&_l&&null!==(e=e.updateQueue)&&null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a));break;case 26:var o=Ll;if(Dl(t,e),zl(e),512&a&&(xl||null===n||gl(n,n.return)),4&a){var i=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(a){case"title":(!(i=o.getElementsByTagName("title")[0])||i[Ue]||i[Te]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(a),o.head.insertBefore(i,o.querySelector("head > title"))),ad(i,a,n),i[Te]=e,Ke(i),a=i;break e;case"link":var s=Ud("link","href",o).get(a+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ad(i=o.createElement(a),a,n),o.head.appendChild(i);break;case"meta":if(s=Ud("meta","content",o).get(a+(n.content||"")))for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ad(i=o.createElement(a),a,n),o.head.appendChild(i);break;default:throw Error(r(468,a))}i[Te]=e,Ke(i),a=i}e.stateNode=a}else Bd(o,e.type,e.stateNode);else e.stateNode=Md(o,a,e.memoizedProps);else i!==a?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===a?Bd(o,e.type,e.stateNode):Md(o,a,e.memoizedProps)):null===a&&null!==e.stateNode&&yl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Dl(t,e),zl(e),512&a&&(xl||null===n||gl(n,n.return)),null!==n&&4&a&&yl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Dl(t,e),zl(e),512&a&&(xl||null===n||gl(n,n.return)),32&e.flags){o=e.stateNode;try{Et(o,"")}catch(t){hu(e,e.return,t)}}4&a&&null!=e.stateNode&&yl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&a&&(Cl=!0);break;case 6:if(Dl(t,e),zl(e),4&a){if(null===e.stateNode)throw Error(r(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(t){hu(e,e.return,t)}}break;case 3:if(qd=null,o=Ll,Ll=Id(t.containerInfo),Dl(t,e),Ll=o,zl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Rp(t.containerInfo)}catch(t){hu(e,e.return,t)}Cl&&(Cl=!1,Fl(e));break;case 4:a=Ll,Ll=Id(e.stateNode.containerInfo),Dl(t,e),zl(e),Ll=a;break;case 12:default:Dl(t,e),zl(e);break;case 13:Dl(t,e),zl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Cc=Y()),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,$l(e,a));break;case 22:o=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,d=xl;if(_l=u||o,xl=d||c,Dl(t,e),xl=d,_l=u,zl(e),8192&a)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||c||_l||xl||ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,o)"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,f=null!=p&&p.hasOwnProperty("display")?p.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(e){hu(c,c.return,e)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(e){hu(c,c.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&null!==(a=e.updateQueue)&&null!==(n=a.retryQueue)&&(a.retryQueue=null,$l(e,n));break;case 19:Dl(t,e),zl(e),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,$l(e,a));case 30:case 21:}}function zl(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(vl(a)){n=a;break}a=a.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var o=n.stateNode;kl(e,bl(e),o);break;case 5:var i=n.stateNode;32&n.flags&&(Et(i,""),n.flags&=-33),kl(e,bl(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;Sl(e,bl(e),s);break;default:throw Error(r(161))}}catch(t){hu(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Gl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Il(e,t.alternate,t),t=t.sibling}function ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:dl(4,t,t.return),ql(t);break;case 1:gl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&fl(t,t.return,n),ql(t);break;case 27:Cd(t.stateNode);case 26:case 5:gl(t,t.return),ql(t);break;case 22:null===t.memoizedState&&ql(t);break;default:ql(t)}e=e.sibling}}function Ul(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Ul(a,o,n),ul(4,o);break;case 1:if(Ul(a,o,n),"function"==typeof(a=(r=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){hu(r,r.return,e)}if(null!==(a=(r=o).updateQueue)){var s=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)mo(l[a],s)}catch(e){hu(r,r.return,e)}}n&&64&i&&pl(o),hl(o,o.return);break;case 27:wl(o);case 26:case 5:Ul(a,o,n),n&&null===r&&4&i&&ml(o),hl(o,o.return);break;case 12:Ul(a,o,n);break;case 13:Ul(a,o,n),n&&4&i&&Ol(a,o);break;case 22:null===o.memoizedState&&Ul(a,o,n),hl(o,o.return);break;case 30:break;default:Ul(a,o,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ma(n))}function Hl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ma(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,r),t=t.sibling}function Wl(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&a&&ul(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ma(e)));break;case 12:if(2048&a){Vl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,s=o.onPostCommit;"function"==typeof s&&s(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){hu(t,t.return,e)}}else Vl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,null!==t.memoizedState?2&o._visibility?Vl(e,t,n,r):Kl(e,t):2&o._visibility?Vl(e,t,n,r):(o._visibility|=2,Ql(e,t,n,r,!!(10256&t.subtreeFlags))),2048&a&&Bl(i,t);break;case 24:Vl(e,t,n,r),2048&a&&Hl(t.alternate,t)}}function Ql(e,t,n,r,a){for(a=a&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,i=t,s=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:Ql(o,i,s,l,a),ul(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?Ql(o,i,s,l,a):Kl(o,i):(u._visibility|=2,Ql(o,i,s,l,a)),a&&2048&c&&Bl(i.alternate,i);break;case 24:Ql(o,i,s,l,a),a&&2048&c&&Hl(i.alternate,i);break;default:Ql(o,i,s,l,a)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Kl(n,r),2048&a&&Bl(r.alternate,r);break;case 24:Kl(n,r),2048&a&&Hl(r.alternate,r);break;default:Kl(n,r)}t=t.sibling}}var Jl=8192;function Xl(e){if(e.subtreeFlags&Jl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Xl(e),e.flags&Jl&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(r(475));var a=Vd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=Nd(n.href),i=e.querySelector(Od(o));if(i)return null!==(e=i._p)&&"object"==typeof e&&"function"==typeof e.then&&(a.count++,a=Qd.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=i,void Ke(i);i=e.ownerDocument||e,n=$d(n),(o=Ed.get(o))&&Fd(n,o),Ke(i=i.createElement("link"));var s=i;s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),ad(i,"link",n),t.instance=i}null===a.stylesheets&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(a.count++,t=Qd.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Ll;Ll=Id(e.stateNode.containerInfo),Xl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Jl,Jl=16777216,Xl(e),Jl=t):Xl(e))}}function Zl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Al=r,rc(r,e)}Zl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)tc(e),e=e.sibling}function tc(e){switch(e.tag){case 0:case 11:case 15:ec(e),2048&e.flags&&dl(9,e,e.return);break;case 3:case 12:default:ec(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,nc(e)):ec(e)}}function nc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Al=r,rc(r,e)}Zl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:dl(8,t,t.return),nc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,nc(t));break;default:nc(t)}e=e.sibling}}function rc(e,t){for(;null!==Al;){var n=Al;switch(n.tag){case 0:case 11:case 15:dl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ma(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Al=r;else e:for(n=e;null!==Al;){var a=(r=Al).sibling,o=r.return;if(Pl(r),r===n){Al=null;break e}if(null!==a){a.return=o,Al=a;break e}Al=o}}}var ac={getCacheForType:function(e){var t=ja(Da),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},oc="function"==typeof WeakMap?WeakMap:Map,ic=0,sc=null,lc=null,cc=0,uc=0,dc=null,pc=!1,fc=!1,hc=!1,gc=0,mc=0,yc=0,vc=0,bc=0,Sc=0,kc=0,wc=null,_c=null,xc=!1,Cc=0,Ec=1/0,Ac=null,Ic=null,Pc=0,jc=null,Rc=null,Tc=0,Nc=0,Oc=null,$c=null,Dc=0,Lc=null;function Mc(){return 2&ic&&0!==cc?cc&-cc:null!==R.T?0!==Ga?Ga:Nu():Pe()}function zc(){0===Sc&&(Sc=536870912&cc&&!ca?536870912:be());var e=ls.current;return null!==e&&(e.flags|=32),Sc}function Fc(e,t,n){(e!==sc||2!==uc&&9!==uc)&&null===e.cancelPendingCommit||(Wc(e,0),Bc(e,cc,Sc,!1)),we(e,n),2&ic&&e===sc||(e===sc&&(!(2&ic)&&(vc|=n),4===mc&&Bc(e,cc,Sc,!1)),Eu(e))}function Gc(e,t,n){if(6&ic)throw Error(r(327));for(var a=!n&&!(124&t)&&!(t&e.expiredLanes)||ye(e,t),o=a?function(e,t){var n=ic;ic|=2;var a=Kc(),o=Jc();sc!==e||cc!==t?(Ac=null,Ec=Y()+500,Wc(e,t)):fc=ye(e,t);e:for(;;)try{if(0!==uc&&null!==lc){t=lc;var i=dc;t:switch(uc){case 1:uc=0,dc=null,ru(e,t,i,1);break;case 2:case 9:if(Za(i)){uc=0,dc=null,nu(t);break}t=function(){2!==uc&&9!==uc||sc!==e||(uc=7),Eu(e)},i.then(t,t);break e;case 3:uc=7;break e;case 4:uc=5;break e;case 7:Za(i)?(uc=0,dc=null,nu(t)):(uc=0,dc=null,ru(e,t,i,7));break;case 5:var s=null;switch(lc.tag){case 26:s=lc.memoizedState;case 5:case 27:var l=lc;if(!s||Hd(s)){uc=0,dc=null;var c=l.sibling;if(null!==c)lc=c;else{var u=l.return;null!==u?(lc=u,au(u)):lc=null}break t}}uc=0,dc=null,ru(e,t,i,5);break;case 6:uc=0,dc=null,ru(e,t,i,6);break;case 8:Vc(),mc=6;break e;default:throw Error(r(462))}}eu();break}catch(t){Qc(e,t)}return wa=ka=null,R.H=a,R.A=o,ic=n,null!==lc?0:(sc=null,cc=0,Tr(),mc)}(e,t):Yc(e,t,!0),i=a;;){if(0===o){fc&&!a&&Bc(e,t,0,!1);break}if(n=e.current.alternate,!i||Uc(n)){if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!=(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=wc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,s).flags|=256),2!==(s=Yc(l,s,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=i,vc|=i,o=4;break e}i=_c,_c=o,null!==i&&(null===_c?_c=i:_c.push.apply(_c,i))}o=s}if(i=!1,2!==o)continue}}if(1===o){Wc(e,0),Bc(e,t,0,!0);break}e:{switch(a=e,i=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Bc(a,t,Sc,!pc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=Cc+300-Y())){if(Bc(a,t,Sc,!pc),0!==me(a,0,!0))break e;a.timeoutHandle=pd(qc.bind(null,a,n,_c,Ac,xc,t,Sc,vc,kc,pc,i,2,-0,0),o)}else qc(a,n,_c,Ac,xc,t,Sc,vc,kc,pc,i,0,-0,0)}break}o=Yc(e,t,!1),i=!1}Eu(e)}function qc(e,t,n,a,o,i,s,l,c,u,d,p,f,h){if(e.timeoutHandle=-1,(8192&(p=t.subtreeFlags)||!(16785408&~p))&&(Vd={stylesheets:null,count:0,unsuspend:Wd},Yl(t),null!==(p=function(){if(null===Vd)throw Error(r(475));var e=Vd;return e.stylesheets&&0===e.count&&Jd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Jd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=p(iu.bind(null,e,t,i,n,a,o,s,l,c,d,1,f,h)),void Bc(e,i,s,!u);iu(e,t,i,n,a,o,s,l,c)}function Uc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Zn(o(),a))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,n,r){t&=~bc,t&=~vc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var o=31-ue(a),i=1<<o;r[o]=-1,a&=~i}0!==n&&_e(e,n,t)}function Hc(){return!!(6&ic)||(Au(0,!1),!1)}function Vc(){if(null!==lc){if(0===uc)var e=lc.return;else wa=ka=null,qo(e=lc),Zi=null,es=0,e=lc;for(;null!==e;)cl(e.alternate,e),e=e.return;lc=null}}function Wc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,fd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),sc=e,lc=n=qr(e.current,null),cc=t,uc=0,dc=null,pc=!1,fc=ye(e,t),hc=!1,kc=Sc=bc=vc=yc=mc=0,_c=wc=null,xc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-ue(r),o=1<<a;t|=e[a],r&=~o}return gc=t,Tr(),n}function Qc(e,t){xo=null,R.H=Ki,t===Ka||t===Xa?(t=ro(),uc=3):t===Ja?(t=ro(),uc=4):uc=t===js?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,dc=t,null===lc&&(mc=1,Cs(e,Ir(t,e.current)))}function Kc(){var e=R.H;return R.H=Ki,null===e?Ki:e}function Jc(){var e=R.A;return R.A=ac,e}function Xc(){mc=4,pc||(4194048&cc)!==cc&&null!==ls.current||(fc=!0),!(134217727&yc)&&!(134217727&vc)||null===sc||Bc(sc,cc,Sc,!1)}function Yc(e,t,n){var r=ic;ic|=2;var a=Kc(),o=Jc();sc===e&&cc===t||(Ac=null,Wc(e,t)),t=!1;var i=mc;e:for(;;)try{if(0!==uc&&null!==lc){var s=lc,l=dc;switch(uc){case 8:Vc(),i=6;break e;case 3:case 2:case 9:case 6:null===ls.current&&(t=!0);var c=uc;if(uc=0,dc=null,ru(e,s,l,c),n&&fc){i=0;break e}break;default:c=uc,uc=0,dc=null,ru(e,s,l,c)}}Zc(),i=mc;break}catch(t){Qc(e,t)}return t&&e.shellSuspendCounter++,wa=ka=null,ic=r,R.H=a,R.A=o,null===lc&&(sc=null,cc=0,Tr()),i}function Zc(){for(;null!==lc;)tu(lc)}function eu(){for(;null!==lc&&!J();)tu(lc)}function tu(e){var t=tl(e.alternate,e,gc);e.memoizedProps=e.pendingProps,null===t?au(e):lc=t}function nu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fs(n,t,t.pendingProps,t.type,void 0,cc);break;case 11:t=Fs(n,t,t.pendingProps,t.type.render,t.ref,cc);break;case 5:qo(t);default:cl(n,t),t=tl(n,t=lc=Ur(t,gc),gc)}e.memoizedProps=e.pendingProps,null===t?au(e):lc=t}function ru(e,t,n,a){wa=ka=null,qo(t),Zi=null,es=0;var o=t.return;try{if(function(e,t,n,a,o){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&Aa(t,n,o,!0),null!==(n=ls.current)){switch(n.tag){case 13:return null===cs?Xc():null===n.alternate&&0===mc&&(mc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,a===Ya?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),gu(e,a,o)),!1;case 22:return n.flags|=65536,a===Ya?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),gu(e,a,o)),!1}throw Error(r(435,n.tag))}return gu(e,a,o),Xc(),!1}if(ca)return null!==(t=ls.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,a!==pa&&ba(Ir(e=Error(r(422),{cause:a}),n))):(a!==pa&&ba(Ir(t=Error(r(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,a=Ir(a,n),po(e,o=As(e.stateNode,a,o)),4!==mc&&(mc=2)),!1;var i=Error(r(520),{cause:a});if(i=Ir(i,n),null===wc?wc=[i]:wc.push(i),4!==mc&&(mc=2),null===t)return!0;a=Ir(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,po(n,e=As(n.stateNode,a,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Ic&&Ic.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Ps(o=Is(o),e,n,a),po(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,cc))return mc=1,Cs(e,Ir(n,e.current)),void(lc=null)}catch(t){if(null!==o)throw lc=o,t;return mc=1,Cs(e,Ir(n,e.current)),void(lc=null)}32768&t.flags?(ca||1===a?e=!0:fc||536870912&cc?e=!1:(pc=e=!0,(2===a||9===a||3===a||6===a)&&null!==(a=ls.current)&&13===a.tag&&(a.flags|=16384)),ou(t,e)):au(t)}function au(e){var t=e;do{if(32768&t.flags)return void ou(t,pc);e=t.return;var n=sl(t.alternate,t,gc);if(null!==n)return void(lc=n);if(null!==(t=t.sibling))return void(lc=t);lc=t=e}while(null!==t);0===mc&&(mc=5)}function ou(e,t){do{var n=ll(e.alternate,e);if(null!==n)return n.flags&=32767,void(lc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(lc=e);lc=e=n}while(null!==e);mc=6,lc=null}function iu(e,t,n,a,o,i,s,l,c){e.cancelPendingCommit=null;do{du()}while(0!==Pc);if(6&ic)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-ue(n),d=1<<u;s[u]=0,l[u]=-1;var p=c[u];if(null!==p)for(c[u]=null,u=0;u<p.length;u++){var f=p[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&_e(e,r,0),0!==o&&0===a&&0!==e.tag&&(e.suspendedLanes|=o&~(i&~t))}(e,n,i|=Rr,s,l,c),e===sc&&(lc=sc=null,cc=0),Rc=t,jc=e,Tc=n,Nc=i,Oc=o,$c=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,Q(ne,(function(){return pu(),null}))):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=R.T,R.T=null,o=T.p,T.p=2,s=ic,ic|=4;try{!function(e,t){if(e=e.containerInfo,od=ip,or(e=ar(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var o=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||0!==o&&3!==p.nodeType||(l=s+o),p!==i||0!==a&&3!==p.nodeType||(c=s+a),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++u===o&&(l=s),f===i&&++d===a&&(c=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},ip=!1,Al=t;null!==Al;)if(e=(t=Al).child,1024&t.subtreeFlags&&null!==e)e.return=t,Al=e;else for(;null!==Al;){switch(i=(t=Al).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var g=Ss(n.type,o,(n.elementType,n.type));e=a.getSnapshotBeforeUpdate(g,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(e){hu(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))bd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Al=e;break}Al=t.return}}(e,t)}finally{ic=s,T.p=o,R.T=a}}Pc=1,su(),lu(),cu()}}function su(){if(1===Pc){Pc=0;var e=jc,t=Rc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=R.T,R.T=null;var r=T.p;T.p=2;var a=ic;ic|=4;try{Ml(t,e);var o=id,i=ar(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(i!==s&&s&&s.ownerDocument&&rr(s.ownerDocument.documentElement,s)){if(null!==l&&or(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var f=p.getSelection(),h=s.textContent.length,g=Math.min(l.start,h),m=void 0===l.end?g:Math.min(l.end,h);!f.extend&&g>m&&(i=m,m=g,g=i);var y=nr(s,g),v=nr(s,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var S=d[s];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}ip=!!od,id=od=null}finally{ic=a,T.p=r,R.T=n}}e.current=t,Pc=2}}function lu(){if(2===Pc){Pc=0;var e=jc,t=Rc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=R.T,R.T=null;var r=T.p;T.p=2;var a=ic;ic|=4;try{Il(e,t.alternate,t)}finally{ic=a,T.p=r,R.T=n}}Pc=3}}function cu(){if(4===Pc||3===Pc){Pc=0,X();var e=jc,t=Rc,n=Tc,r=$c;10256&t.subtreeFlags||10256&t.flags?Pc=5:(Pc=0,Rc=jc=null,uu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Ic=null),Ae(n),t=t.stateNode,le&&"function"==typeof le.onCommitFiberRoot)try{le.onCommitFiberRoot(se,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=R.T,a=T.p,T.p=2,R.T=null;try{for(var o=e.onRecoverableError,i=0;i<r.length;i++){var s=r[i];o(s.value,{componentStack:s.stack})}}finally{R.T=t,T.p=a}}3&Tc&&du(),Eu(e),a=e.pendingLanes,4194090&n&&42&a?e===Lc?Dc++:(Dc=0,Lc=e):Dc=0,Au(0,!1)}}function uu(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Ma(t))}function du(e){return su(),lu(),cu(),pu()}function pu(){if(5!==Pc)return!1;var e=jc,t=Nc;Nc=0;var n=Ae(Tc),a=R.T,o=T.p;try{T.p=32>n?32:n,R.T=null,n=Oc,Oc=null;var i=jc,s=Tc;if(Pc=0,Rc=jc=null,Tc=0,6&ic)throw Error(r(331));var l=ic;if(ic|=4,tc(i.current),Wl(i,i.current,s,n),ic=l,Au(0,!1),le&&"function"==typeof le.onPostCommitFiberRoot)try{le.onPostCommitFiberRoot(se,i)}catch(e){}return!0}finally{T.p=o,R.T=a,uu(e,t)}}function fu(e,t,n){t=Ir(n,t),null!==(e=co(e,t=As(e.stateNode,t,2),2))&&(we(e,2),Eu(e))}function hu(e,t,n){if(3===e.tag)fu(e,e,n);else for(;null!==t;){if(3===t.tag){fu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ic||!Ic.has(r))){e=Ir(n,e),null!==(r=co(t,n=Is(2),2))&&(Ps(n,r,t,e),we(r,2),Eu(r));break}}t=t.return}}function gu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new oc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(hc=!0,a.add(n),e=mu.bind(null,e,t,n),t.then(e,e))}function mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(cc&n)===n&&(4===mc||3===mc&&(62914560&cc)===cc&&300>Y()-Cc?!(2&ic)&&Wc(e,0):bc|=n,kc===cc&&(kc=0)),Eu(e)}function yu(e,t){0===t&&(t=Se()),null!==(e=$r(e,t))&&(we(e,t),Eu(e))}function vu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),yu(e,n)}function bu(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==a&&a.delete(t),yu(e,n)}var Su=null,ku=null,wu=!1,_u=!1,xu=!1,Cu=0;function Eu(e){e!==ku&&null===e.next&&(null===ku?Su=ku=e:ku=ku.next=e),_u=!0,wu||(wu=!0,gd((function(){6&ic?Q(ee,Iu):Pu()})))}function Au(e,t){if(!xu&&_u){xu=!0;do{for(var n=!1,r=Su;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var o=0;else{var i=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-ue(42|e)+1)-1,o=201326741&(o&=a&~(i&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Tu(r,o))}else o=cc,!(3&(o=me(r,r===sc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ye(r,o)||(n=!0,Tu(r,o));r=r.next}}while(n);xu=!1}}function Iu(){Pu()}function Pu(){_u=wu=!1;var e,t=0;0!==Cu&&(((e=window.event)&&"popstate"===e.type?e!==dd&&(dd=e,!0):(dd=null,!1))&&(t=Cu),Cu=0);for(var n=Y(),r=null,a=Su;null!==a;){var o=a.next,i=ju(a,n);0===i?(a.next=null,null===r?Su=o:r.next=o,null===o&&(ku=r)):(r=a,(0!==t||3&i)&&(_u=!0)),a=o}Au(t,!1)}function ju(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var i=31-ue(o),s=1<<i,l=a[i];-1===l?s&n&&!(s&r)||(a[i]=ve(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=cc,n=me(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===uc||9===uc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&K(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||ye(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&K(r),Ae(n)){case 2:case 8:n=te;break;case 32:default:n=ne;break;case 268435456:n=ae}return r=Ru.bind(null,e),n=Q(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&K(r),e.callbackPriority=2,e.callbackNode=null,2}function Ru(e,t){if(0!==Pc&&5!==Pc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(du()&&e.callbackNode!==n)return null;var r=cc;return 0===(r=me(e,e===sc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Gc(e,r,t),ju(e,Y()),null!=e.callbackNode&&e.callbackNode===n?Ru.bind(null,e):null)}function Tu(e,t){if(du())return null;Gc(e,t,!0)}function Nu(){return 0===Cu&&(Cu=be()),Cu}function Ou(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Nt(""+e)}function $u(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Du=0;Du<Cr.length;Du++){var Lu=Cr[Du];Er(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}Er(yr,"onAnimationEnd"),Er(vr,"onAnimationIteration"),Er(br,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Sr,"onTransitionRun"),Er(kr,"onTransitionStart"),Er(wr,"onTransitionCancel"),Er(_r,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Fu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;o=s,a.currentTarget=c;try{o(a)}catch(e){ks(e)}a.currentTarget=null,o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;o=s,a.currentTarget=c;try{o(a)}catch(e){ks(e)}a.currentTarget=null,o=l}}}}function Gu(e,t){var n=t[ze];void 0===n&&(n=t[ze]=new Set);var r=e+"__bubble";n.has(r)||(Hu(t,e,2,!1),n.add(r))}function qu(e,t,n){var r=0;t&&(r|=4),Hu(n,e,r,t)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[Uu]){e[Uu]=!0,Je.forEach((function(t){"selectionchange"!==t&&(zu.has(t)||qu(t,!1,e),qu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Uu]||(t[Uu]=!0,qu("selectionchange",!1,t))}}function Hu(e,t,n,r){switch(fp(t)){case 2:var a=sp;break;case 8:a=lp;break;default:a=cp}n=a.bind(null,t,n,e),a=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vu(e,t,n,r,a){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var l=r.stateNode.containerInfo;if(l===a)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===a)return;s=s.return}for(;null!==l;){if(null===(s=He(l)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=i=s;continue e}l=l.parentNode}}r=r.return}Ft((function(){var r=i,a=$t(n),s=[];e:{var l=xr.get(e);if(void 0!==l){var c=rn,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=bn;break;case"focusin":u="focus",c=un;break;case"focusout":u="blur",c=un;break;case"beforeblur":case"afterblur":c=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kn;break;case yr:case vr:case br:c=dn;break;case _r:c=wn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=pn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Sn;break;case"toggle":case"beforetoggle":c=xn}var d=!!(4&t),p=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var h,g=r;null!==g;){var m=g;if(h=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===h||null===f||null!=(m=Gt(g,f))&&d.push(Wu(g,m,h)),p)break;g=g.return}0<d.length&&(l=new c(l,u,null,n,a),s.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Ot||!(u=n.relatedTarget||n.fromElement)||!He(u)&&!u[Me])&&(c||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?He(u):null)&&(p=o(u),d=u.tag,u!==p||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=ln,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=Sn,m="onPointerLeave",f="onPointerEnter",g="pointer"),p=null==c?l:We(c),h=null==u?l:We(u),(l=new d(m,g+"leave",c,n,a)).target=p,l.relatedTarget=h,m=null,He(a)===r&&((d=new d(f,g+"enter",u,n,a)).target=h,d.relatedTarget=p,m=d),p=m,c&&u)e:{for(f=u,g=0,h=d=c;h;h=Ku(h))g++;for(h=0,m=f;m;m=Ku(m))h++;for(;0<g-h;)d=Ku(d),g--;for(;0<h-g;)f=Ku(f),h--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Ku(d),f=Ku(f)}d=null}else d=null;null!==c&&Ju(s,l,c,d,!1),null!==u&&null!==p&&Ju(s,p,u,d,!0)}if("select"===(c=(l=r?We(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=qn;else if(Dn(l))if(Un)y=Yn;else{y=Jn;var v=Kn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&jt(r.elementType)&&(y=qn):y=Xn;switch(y&&(y=y(e,r))?Ln(s,y,n,a):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&wt(l,"number",l.value)),v=r?We(r):window,e){case"focusin":(Dn(v)||"true"===v.contentEditable)&&(sr=v,lr=r,cr=null);break;case"focusout":cr=lr=sr=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,dr(s,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":dr(s,n,a)}var b;if(En)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else On?Tn(e,n)&&(S="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(S="onCompositionStart");S&&(Pn&&"ko"!==n.locale&&(On||"onCompositionStart"!==S?"onCompositionEnd"===S&&On&&(b=Qt()):(Vt="value"in(Ht=a)?Ht.value:Ht.textContent,On=!0)),0<(v=Qu(r,S)).length&&(S=new fn(S,e,null,n,a),s.push({event:S,listeners:v}),(b||null!==(b=Nn(n)))&&(S.data=b))),(b=In?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Rn=!0,jn);case"textInput":return(e=t.data)===jn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!En&&Tn(e,t)?(e=Qt(),Wt=Vt=Ht=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(S=Qu(r,"onBeforeInput")).length&&(v=new fn("onBeforeInput","beforeinput",null,n,a),s.push({event:v,listeners:S}),v.data=b),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var o=Ou((a[De]||null).action),i=r.submitter;i&&null!==(t=(t=i[De]||null)?Ou(t.formAction):i.getAttribute("formAction"))&&(o=t,i=null);var s=new rn("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Cu){var e=i?$u(a,i):new FormData(a);$i(n,{pending:!0,data:e,method:a.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=i?$u(a,i):new FormData(a),$i(n,{pending:!0,data:e,method:a.method,action:o},o,e))},currentTarget:a}]})}}(s,e,r,n,a)}Fu(s,t)}))}function Wu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qu(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===o||(null!=(a=Gt(e,n))&&r.unshift(Wu(e,a,o)),null!=(a=Gt(e,t))&&r.push(Wu(e,a,o))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ju(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=Gt(n,o))&&i.unshift(Wu(n,c,l)):a||null!=(c=Gt(n,o))&&i.push(Wu(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Zu(e){return("string"==typeof e?e:""+e).replace(Xu,"\n").replace(Yu,"")}function ed(e,t){return t=Zu(t),Zu(e)===t}function td(){}function nd(e,t,n,a,o,i){switch(n){case"children":"string"==typeof a?"body"===t||"textarea"===t&&""===a||Et(e,a):("number"==typeof a||"bigint"==typeof a)&&"body"!==t&&Et(e,""+a);break;case"className":it(e,"class",a);break;case"tabIndex":it(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":it(e,n,a);break;case"style":Pt(e,a,i);break;case"data":if("object"!==t){it(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"==typeof a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Nt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"==typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&nd(e,t,"name",o.name,o,null),nd(e,t,"formEncType",o.formEncType,o,null),nd(e,t,"formMethod",o.formMethod,o,null),nd(e,t,"formTarget",o.formTarget,o,null)):(nd(e,t,"encType",o.encType,o,null),nd(e,t,"method",o.method,o,null),nd(e,t,"target",o.target,o,null))),null==a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Nt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=td);break;case"onScroll":null!=a&&Gu("scroll",e);break;case"onScrollEnd":null!=a&&Gu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"muted":e.muted=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"==typeof a||"boolean"==typeof a||"symbol"==typeof a){e.removeAttribute("xlink:href");break}n=Nt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"==typeof a||"symbol"==typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Gu("beforetoggle",e),Gu("toggle",e),ot(e,"popover",a);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ot(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ot(e,n=Rt.get(n)||n,a)}}function rd(e,t,n,a,o,i){switch(n){case"style":Pt(e,a,i);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof a?Et(e,a):("number"==typeof a||"bigint"==typeof a)&&Et(e,""+a);break;case"onScroll":null!=a&&Gu("scroll",e);break;case"onScrollEnd":null!=a&&Gu("scrollend",e);break;case"onClick":null!=a&&(e.onclick=td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(i=null!=(i=e[De]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!=typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):ot(e,n,a):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,o)))}}function ad(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gu("error",e),Gu("load",e);var a,o=!1,i=!1;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(null!=s)switch(a){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:nd(e,t,a,s,n,null)}}return i&&nd(e,t,"srcSet",n.srcSet,n,null),void(o&&nd(e,t,"src",n.src,n,null));case"input":Gu("invalid",e);var l=a=s=i=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:nd(e,t,o,d,n,null)}}return kt(e,a,l,c,u,s,i,!1),void gt(e);case"select":for(i in Gu("invalid",e),o=s=a=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":a=l;break;case"defaultValue":s=l;break;case"multiple":o=l;default:nd(e,t,i,l,n,null)}return t=a,n=s,e.multiple=!!o,void(null!=t?_t(e,!!o,t,!1):null!=n&&_t(e,!!o,n,!0));case"textarea":for(s in Gu("invalid",e),a=i=o=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":o=l;break;case"defaultValue":i=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:nd(e,t,s,l,n,null)}return Ct(e,o,i,a),void gt(e);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(o=n[c])&&("selected"===c?e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o:nd(e,t,c,o,n,null));return;case"dialog":Gu("beforetoggle",e),Gu("toggle",e),Gu("cancel",e),Gu("close",e);break;case"iframe":case"object":Gu("load",e);break;case"video":case"audio":for(o=0;o<Mu.length;o++)Gu(Mu[o],e);break;case"image":Gu("error",e),Gu("load",e);break;case"details":Gu("toggle",e);break;case"embed":case"source":case"link":Gu("error",e),Gu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:nd(e,t,u,o,n,null)}return;default:if(jt(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(o=n[d])&&rd(e,t,d,o,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(o=n[l])&&nd(e,t,l,o,n,null)}var od=null,id=null;function sd(e){return 9===e.nodeType?e:e.ownerDocument}function ld(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ud(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var dd=null,pd="function"==typeof setTimeout?setTimeout:void 0,fd="function"==typeof clearTimeout?clearTimeout:void 0,hd="function"==typeof Promise?Promise:void 0,gd="function"==typeof queueMicrotask?queueMicrotask:void 0!==hd?function(e){return hd.resolve(null).then(e).catch(md)}:pd;function md(e){setTimeout((function(){throw e}))}function yd(e){return"head"===e}function vd(e,t){var n=t,r=0,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&Cd(i.documentElement),2&n&&Cd(i.body),4&n)for(Cd(n=i.head),i=n.firstChild;i;){var s=i.nextSibling,l=i.nodeName;i[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=s}}if(0===a)return e.removeChild(o),void Rp(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Rp(t)}function bd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":bd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Sd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function kd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var wd=null;function _d(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=sd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Cd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Ed=new Map,Ad=new Set;function Id(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Pd=T.d;T.d={f:function(){var e=Pd.f(),t=Hc();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?Li(t):Pd.r(e)},D:function(e){Pd.D(e),Rd("dns-prefetch",e,null)},C:function(e,t){Pd.C(e,t),Rd("preconnect",e,t)},L:function(e,t,n){Pd.L(e,t,n);var r=jd;if(r&&e&&t){var a='link[rel="preload"][as="'+bt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+bt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+bt(n.imageSizes)+'"]')):a+='[href="'+bt(e)+'"]';var o=a;switch(t){case"style":o=Nd(e);break;case"script":o=Dd(e)}Ed.has(o)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ed.set(o,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Od(o))||"script"===t&&r.querySelector(Ld(o))||(ad(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Pd.m(e,t);var n=jd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+bt(r)+'"][href="'+bt(e)+'"]',o=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Dd(e)}if(!Ed.has(o)&&(e=c({rel:"modulepreload",href:e},t),Ed.set(o,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(o)))return}ad(r=n.createElement("link"),"link",e),Ke(r),n.head.appendChild(r)}}},X:function(e,t){Pd.X(e,t);var n=jd;if(n&&e){var r=Qe(n).hoistableScripts,a=Dd(e),o=r.get(a);o||((o=n.querySelector(Ld(a)))||(e=c({src:e,async:!0},t),(t=Ed.get(a))&&Gd(e,t),Ke(o=n.createElement("script")),ad(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}},S:function(e,t,n){Pd.S(e,t,n);var r=jd;if(r&&e){var a=Qe(r).hoistableStyles,o=Nd(e);t=t||"default";var i=a.get(o);if(!i){var s={loading:0,preload:null};if(i=r.querySelector(Od(o)))s.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ed.get(o))&&Fd(e,n);var l=i=r.createElement("link");Ke(l),ad(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){s.loading|=1})),l.addEventListener("error",(function(){s.loading|=2})),s.loading|=4,zd(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:s},a.set(o,i)}}},M:function(e,t){Pd.M(e,t);var n=jd;if(n&&e){var r=Qe(n).hoistableScripts,a=Dd(e),o=r.get(a);o||((o=n.querySelector(Ld(a)))||(e=c({src:e,async:!0,type:"module"},t),(t=Ed.get(a))&&Gd(e,t),Ke(o=n.createElement("script")),ad(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}}};var jd="undefined"==typeof document?null:document;function Rd(e,t,n){var r=jd;if(r&&"string"==typeof t&&t){var a=bt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Ad.has(a)||(Ad.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ad(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function Td(e,t,n,a){var o,i,s,l,c=(c=G.current)?Id(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Nd(n.href),(a=(n=Qe(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Nd(n.href);var u=Qe(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Od(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ed.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ed.set(e,n),u||(o=c,i=e,s=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=o.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),ad(i,"link",s),Ke(i),o.head.appendChild(i))))),t&&null===a)throw Error(r(528,""));return d}if(t&&null!==a)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Dd(n),(a=(n=Qe(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Nd(e){return'href="'+bt(e)+'"'}function Od(e){return'link[rel="stylesheet"]['+e+"]"}function $d(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Dd(e){return'[src="'+bt(e)+'"]'}function Ld(e){return"script[async]"+e}function Md(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+bt(n.href)+'"]');if(a)return t.instance=a,Ke(a),a;var o=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ke(a=(e.ownerDocument||e).createElement("style")),ad(a,"style",o),zd(a,n.precedence,e),t.instance=a;case"stylesheet":o=Nd(n.href);var i=e.querySelector(Od(o));if(i)return t.state.loading|=4,t.instance=i,Ke(i),i;a=$d(n),(o=Ed.get(o))&&Fd(a,o),Ke(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),ad(i,"link",a),t.state.loading|=4,zd(i,n.precedence,e),t.instance=i;case"script":return i=Dd(n.src),(o=e.querySelector(Ld(i)))?(t.instance=o,Ke(o),o):(a=n,(o=Ed.get(i))&&Gd(a=c({},n),o),Ke(o=(e=e.ownerDocument||e).createElement("script")),ad(o,"link",a),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,zd(a,n.precedence,e));return t.instance}function zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,o=a,i=0;i<r.length;i++){var s=r[i];if(s.dataset.precedence===t)o=s;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Gd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var qd=null;function Ud(e,t,n){if(null===qd){var r=new Map,a=qd=new Map;a.set(n,r)}else(r=(a=qd).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[Ue]||o[Te]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var i=o.getAttribute(t)||"";i=e+i;var s=r.get(i);s?s.push(o):r.set(i,[o])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Hd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Vd=null;function Wd(){}function Qd(){if(this.count--,0===this.count)if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Jd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(Xd,e),Kd=null,Qd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var r=n.get(null);else{n=new Map,Kd.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(o=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=Qd.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),o?o.parentNode.insertBefore(a,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:v,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function Zd(e,t,n,r,a,o,i,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function ep(e,t,n,r,a,o,i,s,l,c,u,d){return e=new Zd(e,t,n,i,s,l,c,d),t=1,!0===o&&(t|=24),o=Fr(3,null,null,t),e.current=o,o.stateNode=e,(t=La()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},io(o),e}function tp(e){return e?e=Mr:Mr}function np(e,t,n,r,a,o){a=tp(a),null===r.context?r.context=a:r.pendingContext=a,(r=lo(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=co(e,r,t))&&(Fc(n,0,t),uo(n,e,t))}function rp(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ap(e,t){rp(e,t),(e=e.alternate)&&rp(e,t)}function op(e){if(13===e.tag){var t=$r(e,67108864);null!==t&&Fc(t,0,67108864),ap(e,67108864)}}var ip=!0;function sp(e,t,n,r){var a=R.T;R.T=null;var o=T.p;try{T.p=2,cp(e,t,n,r)}finally{T.p=o,R.T=a}}function lp(e,t,n,r){var a=R.T;R.T=null;var o=T.p;try{T.p=8,cp(e,t,n,r)}finally{T.p=o,R.T=a}}function cp(e,t,n,r){if(ip){var a=up(r);if(null===a)Vu(e,t,r,dp,n),wp(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return gp=_p(gp,e,t,n,r,a),!0;case"dragenter":return mp=_p(mp,e,t,n,r,a),!0;case"mouseover":return yp=_p(yp,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return vp.set(o,_p(vp.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,bp.set(o,_p(bp.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(wp(e,r),4&t&&-1<kp.indexOf(e)){for(;null!==a;){var o=Ve(a);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var i=ge(o.pendingLanes);if(0!==i){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;i;){var l=1<<31-ue(i);s.entanglements[1]|=l,i&=~l}Eu(o),!(6&ic)&&(Ec=Y()+500,Au(0,!1))}}break;case 13:null!==(s=$r(o,2))&&Fc(s,0,2),Hc(),ap(o,2)}if(null===(o=up(r))&&Vu(e,t,r,dp,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Vu(e,t,r,null,n)}}function up(e){return pp(e=$t(e))}var dp=null;function pp(e){if(dp=null,null!==(e=He(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=i(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dp=e,null}function fp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case ee:return 2;case te:return 8;case ne:case re:return 32;case ae:return 268435456;default:return 32}default:return 32}}var hp=!1,gp=null,mp=null,yp=null,vp=new Map,bp=new Map,Sp=[],kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wp(e,t){switch(e){case"focusin":case"focusout":gp=null;break;case"dragenter":case"dragleave":mp=null;break;case"mouseover":case"mouseout":yp=null;break;case"pointerover":case"pointerout":vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bp.delete(t.pointerId)}}function _p(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&null!==(t=Ve(t))&&op(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function xp(e){var t=He(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=i(n)))return e.blockedOn=t,void function(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}(e.priority,(function(){if(13===n.tag){var e=Mc();e=Ee(e);var t=$r(n,e);null!==t&&Fc(t,0,e),ap(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Cp(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=up(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&op(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ot=r,n.target.dispatchEvent(r),Ot=null,t.shift()}return!0}function Ep(e,t,n){Cp(e)&&n.delete(t)}function Ap(){hp=!1,null!==gp&&Cp(gp)&&(gp=null),null!==mp&&Cp(mp)&&(mp=null),null!==yp&&Cp(yp)&&(yp=null),vp.forEach(Ep),bp.forEach(Ep)}function Ip(t,n){t.blockedOn===n&&(t.blockedOn=null,hp||(hp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ap)))}var Pp=null;function jp(t){Pp!==t&&(Pp=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,(function(){Pp===t&&(Pp=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],a=t[e+2];if("function"!=typeof r){if(null===pp(r||n))continue;break}var o=Ve(n);null!==o&&(t.splice(e,3),e-=3,$i(o,{pending:!0,data:a,method:n.method,action:r},r,a))}})))}function Rp(e){function t(t){return Ip(t,e)}null!==gp&&Ip(gp,e),null!==mp&&Ip(mp,e),null!==yp&&Ip(yp,e),vp.forEach(t),bp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&null===(n=Sp[0]).blockedOn;)xp(n),null===n.blockedOn&&Sp.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],o=n[r+1],i=a[De]||null;if("function"==typeof o)i||jp(n);else if(i){var s=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[De]||null)s=i.formAction;else if(null!==pp(a))continue}else s=i.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),jp(n)}}}function Tp(e){this._internalRoot=e}function Np(e){this._internalRoot=e}Np.prototype.render=Tp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));np(t.current,Mc(),e,t,null,null)},Np.prototype.unmount=Tp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;np(e.current,2,null,e,null,null),Hc(),t[Me]=null}},Np.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&0!==t&&t<Sp[n].priority;n++);Sp.splice(n,0,e),0===n&&xp(e)}};var Op=t.version;if("19.1.0"!==Op)throw Error(r(527,Op,"19.1.0"));T.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(null===i)break;var l=i.alternate;if(null===l){if(null!==(a=i.return)){n=a;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return s(i),e;if(l===a)return s(i),t;l=l.sibling}throw Error(r(188))}if(n.return!==a.return)n=i,a=l;else{for(var c=!1,u=i.child;u;){if(u===n){c=!0,n=i,a=l;break}if(u===a){c=!0,a=i,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,a=i;break}if(u===a){c=!0,a=l,n=i;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),null===(e=null!==e?l(e):null)?null:e.stateNode};var $p={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dp.isDisabled&&Dp.supportsFiber)try{se=Dp.inject($p),le=Dp}catch(e){}}return Ie.createRoot=function(e,t){if(!a(e))throw Error(r(299));var n=!1,o="",i=ws,s=_s,l=xs;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=ep(e,1,!1,null,0,n,o,i,s,l,0,null),e[Me]=t.current,Bu(e),new Tp(t)},Ie.hydrateRoot=function(e,t,n){if(!a(e))throw Error(r(299));var o=!1,i="",s=ws,l=_s,c=xs,u=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=ep(e,1,!0,t,0,o,i,s,l,c,0,u)).context=tp(null),n=t.current,(i=lo(o=Ee(o=Mc()))).callback=null,co(n,i,o),n=o,t.current.lanes=n,we(t,n),Eu(t),e[Me]=t.current,Bu(e),new Np(t)},Ie.version="19.1.0",Ie}();var Me,ze=be(Ae.exports),Fe={exports:{}},Ge={};Fe.exports=function(){if(Me)return Ge;Me=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==n.key&&(a=""+n.key),"key"in n)for(var o in r={},n)"key"!==o&&(r[o]=n[o]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:a,ref:void 0!==n?n:null,props:r}}return Ge.Fragment=t,Ge.jsx=n,Ge.jsxs=n,Ge}();var qe,Ue=Fe.exports,Be={exports:{}},He={};Be.exports=function(){if(qe)return He;qe=1;var e=Ce,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=e.useRef,a=e.useEffect,o=e.useMemo,i=e.useDebugValue;return He.useSyncExternalStoreWithSelector=function(e,s,l,c,u){var d=r(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=o((function(){function e(e){if(!a){if(a=!0,n=e,e=c(e),void 0!==u&&p.hasValue){var o=p.value;if(u(o,e))return r=o}return r=e}if(o=r,t(n,e))return o;var i=c(e);return void 0!==u&&u(o,i)?(n=e,o):(n=e,r=i)}var n,r,a=!1,o=void 0===l?null:l;return[function(){return e(s())},null===o?void 0:function(){return e(o())}]}),[s,l,c,u]);var f=n(e,d[0],d[1]);return a((function(){p.hasValue=!0,p.value=f}),[f]),i(f),f},He}();var Ve=Be.exports;function We(e){e()}var Qe={notify(){},get:()=>[]};function Ke(e,t){let n,r=Qe,a=0,o=!1;function i(){c.onStateChange&&c.onStateChange()}function s(){a++,n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){We((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=Qe)}const c={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return c}var Je=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Xe=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Ye=(()=>Je||Xe?Ce.useLayoutEffect:Ce.useEffect)();function Ze(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function et(e,t){if(Ze(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Ze(e[n[r]],t[n[r]]))return!1;return!0}var tt=Symbol.for("react-redux-context"),nt="undefined"!=typeof globalThis?globalThis:{};function rt(){if(!Ce.createContext)return{};const e=nt[tt]??=new Map;let t=e.get(Ce.createContext);return t||(t=Ce.createContext(null),e.set(Ce.createContext,t)),t}var at=rt();var ot=function(e){const{children:t,context:n,serverState:r,store:a}=e,o=Ce.useMemo((()=>{const e=Ke(a);return{store:a,subscription:e,getServerState:r?()=>r:void 0}}),[a,r]),i=Ce.useMemo((()=>a.getState()),[a]);Ye((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,i]);const s=n||at;return Ce.createElement(s.Provider,{value:o},t)};function it(e=at){return function(){return Ce.useContext(e)}}var st=it();function lt(e=at){const t=e===at?st:it(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var ct=lt();function ut(e=at){const t=e===at?ct:lt(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var dt=ut(),pt=(e,t)=>e===t;function ft(e=at){const t=e===at?st:it(e),n=(e,n={})=>{const{equalityFn:r=pt}="function"==typeof n?{equalityFn:n}:n,a=t(),{store:o,subscription:i,getServerState:s}=a;Ce.useRef(!0);const l=Ce.useCallback({[e.name]:t=>e(t)}[e.name],[e]),c=Ve.useSyncExternalStoreWithSelector(i.addNestedSub,o.getState,s||o.getState,l,r);return Ce.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var ht=ft(),gt=We;function mt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yt=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),vt=()=>Math.random().toString(36).substring(7).split("").join("."),bt={INIT:`@@redux/INIT${vt()}`,REPLACE:`@@redux/REPLACE${vt()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vt()}`};function St(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function kt(e,t,n){if("function"!=typeof e)throw new Error(mt(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(mt(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(mt(1));return n(kt)(e,t)}let r=e,a=t,o=new Map,i=o,s=0,l=!1;function c(){i===o&&(i=new Map,o.forEach(((e,t)=>{i.set(t,e)})))}function u(){if(l)throw new Error(mt(3));return a}function d(e){if("function"!=typeof e)throw new Error(mt(4));if(l)throw new Error(mt(5));let t=!0;c();const n=s++;return i.set(n,e),function(){if(t){if(l)throw new Error(mt(6));t=!1,c(),i.delete(n),o=null}}}function p(e){if(!St(e))throw new Error(mt(7));if(void 0===e.type)throw new Error(mt(8));if("string"!=typeof e.type)throw new Error(mt(17));if(l)throw new Error(mt(9));try{l=!0,a=r(a,e)}finally{l=!1}return(o=i).forEach((e=>{e()})),e}p({type:bt.INIT});return{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(mt(10));r=e,p({type:bt.REPLACE})},[yt]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(mt(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[yt](){return this}}}}}function wt(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:bt.INIT}))throw new Error(mt(12));if(void 0===n(void 0,{type:bt.PROBE_UNKNOWN_ACTION()}))throw new Error(mt(13))}))}(n)}catch(e){a=e}return function(e={},t){if(a)throw a;let o=!1;const i={};for(let a=0;a<r.length;a++){const s=r[a],l=n[s],c=e[s],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(mt(14));i[s]=u,o=o||u!==c}return o=o||r.length!==Object.keys(e).length,o?i:e}}function _t(e,t){return function(...n){return t(e.apply(this,n))}}function xt(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}function Ct(...e){return t=>(n,r)=>{const a=t(n,r);let o=()=>{throw new Error(mt(15))};const i={getState:a.getState,dispatch:(e,...t)=>o(e,...t)},s=e.map((e=>e(i)));return o=xt(...s)(a.dispatch),{...a,dispatch:o}}}function Et(e){return St(e)&&"type"in e&&"string"==typeof e.type}var At=Object.freeze({__proto__:null,__DO_NOT_USE__ActionTypes:bt,applyMiddleware:Ct,bindActionCreators:function(e,t){if("function"==typeof e)return _t(e,t);if("object"!=typeof e||null===e)throw new Error(mt(16));const n={};for(const r in e){const a=e[r];"function"==typeof a&&(n[r]=_t(a,t))}return n},combineReducers:wt,compose:xt,createStore:kt,isAction:Et,isPlainObject:St,legacy_createStore:function(e,t,n){return kt(e,t,n)}}),It=Symbol.for("immer-nothing"),Pt=Symbol.for("immer-draftable"),jt=Symbol.for("immer-state");function Rt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tt=Object.getPrototypeOf;function Nt(e){return!!e&&!!e[jt]}function Ot(e){return!!e&&(Dt(e)||Array.isArray(e)||!!e[Pt]||!!e.constructor?.[Pt]||Ut(e)||Bt(e))}var $t=Object.prototype.constructor.toString();function Dt(e){if(!e||"object"!=typeof e)return!1;const t=Tt(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===$t}function Lt(e){return Nt(e)||Rt(15),e[jt].base_}function Mt(e,t){0===zt(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function zt(e){const t=e[jt];return t?t.type_:Array.isArray(e)?1:Ut(e)?2:Bt(e)?3:0}function Ft(e,t){return 2===zt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Gt(e,t){return 2===zt(e)?e.get(t):e[t]}function qt(e,t,n){const r=zt(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Ut(e){return e instanceof Map}function Bt(e){return e instanceof Set}function Ht(e){return e.copy_||e.base_}function Vt(e,t){if(Ut(e))return new Map(e);if(Bt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Dt(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[jt];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Tt(e),t)}{const t=Tt(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function Wt(e,t=!1){return Kt(e)||Nt(e)||!Ot(e)||(zt(e)>1&&(e.set=e.add=e.clear=e.delete=Qt),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>Wt(t,!0)))),e}function Qt(){Rt(2)}function Kt(e){return Object.isFrozen(e)}var Jt,Xt={};function Yt(e){const t=Xt[e];return t||Rt(0),t}function Zt(){return Jt}function en(e,t){t&&(Yt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function tn(e){nn(e),e.drafts_.forEach(an),e.drafts_=null}function nn(e){e===Jt&&(Jt=e.parent_)}function rn(e){return Jt={drafts_:[],parent_:Jt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function an(e){const t=e[jt];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function on(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[jt].modified_&&(tn(t),Rt(4)),Ot(e)&&(e=sn(t,e),t.parent_||cn(t,e)),t.patches_&&Yt("Patches").generateReplacementPatches_(n[jt].base_,e,t.patches_,t.inversePatches_)):e=sn(t,n,[]),tn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==It?e:void 0}function sn(e,t,n){if(Kt(t))return t;const r=t[jt];if(!r)return Mt(t,((a,o)=>ln(e,r,t,a,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return cn(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,o=!1;3===r.type_&&(a=new Set(t),t.clear(),o=!0),Mt(a,((a,i)=>ln(e,r,t,a,i,n,o))),cn(e,t,!1),n&&e.patches_&&Yt("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ln(e,t,n,r,a,o,i){if(Nt(a)){const i=sn(e,a,o&&t&&3!==t.type_&&!Ft(t.assigned_,r)?o.concat(r):void 0);if(qt(n,r,i),!Nt(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(Ot(a)&&!Kt(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sn(e,a),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||cn(e,a)}}function cn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wt(t,n)}var un={get(e,t){if(t===jt)return e;const n=Ht(e);if(!Ft(n,t))return function(e,t,n){const r=fn(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Ot(r)?r:r===pn(e.base_,t)?(gn(e),e.copy_[t]=mn(r,e)):r},has:(e,t)=>t in Ht(e),ownKeys:e=>Reflect.ownKeys(Ht(e)),set(e,t,n){const r=fn(Ht(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=pn(Ht(e),t),a=r?.[jt];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||Ft(e.base_,t)))return!0;gn(e),hn(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==pn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,gn(e),hn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Ht(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Rt(11)},getPrototypeOf:e=>Tt(e.base_),setPrototypeOf(){Rt(12)}},dn={};function pn(e,t){const n=e[jt];return(n?Ht(n):e)[t]}function fn(e,t){if(!(t in e))return;let n=Tt(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Tt(n)}}function hn(e){e.modified_||(e.modified_=!0,e.parent_&&hn(e.parent_))}function gn(e){e.copy_||(e.copy_=Vt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Mt(un,((e,t)=>{dn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),dn.deleteProperty=function(e,t){return dn.set.call(this,e,t,void 0)},dn.set=function(e,t,n){return un.set.call(this,e[0],t,n,e[0])};function mn(e,t){const n=Ut(e)?Yt("MapSet").proxyMap_(e,t):Bt(e)?Yt("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Zt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=un;n&&(a=[r],o=dn);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return r.draft_=s,r.revoke_=i,s}(e,t);return(t?t.scope_:Zt()).drafts_.push(n),n}function yn(e){return Nt(e)||Rt(10),vn(e)}function vn(e){if(!Ot(e)||Kt(e))return e;const t=e[jt];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Vt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Vt(e,!0);return Mt(n,((e,t)=>{qt(n,e,vn(t))})),t&&(t.finalized_=!1),n}function bn(){const e="replace",t="add",n="remove";function r(e){if(!Ot(e))return e;if(Array.isArray(e))return e.map(r);if(Ut(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,r(t)])));if(Bt(e))return new Set(Array.from(e).map(r));const t=Object.create(Tt(e));for(const n in e)t[n]=r(e[n]);return Ft(e,Pt)&&(t[Pt]=e[Pt]),t}function a(e){return Nt(e)?r(e):e}var o,i;i={applyPatches_:function(a,o){return o.forEach((o=>{const{path:i,op:s}=o;let l=a;for(let e=0;e<i.length-1;e++){const t=zt(l);let n=i[e];"string"!=typeof n&&"number"!=typeof n&&(n=""+n),0!==t&&1!==t||"__proto__"!==n&&"constructor"!==n||Rt(19),"function"==typeof l&&"prototype"===n&&Rt(19),l=Gt(l,n),"object"!=typeof l&&Rt(18,i.join("/"))}const c=zt(l),u=r(o.value),d=i[i.length-1];switch(s){case e:switch(c){case 2:return l.set(d,u);case 3:Rt(16);default:return l[d]=u}case t:switch(c){case 1:return"-"===d?l.push(u):l.splice(d,0,u);case 2:return l.set(d,u);case 3:return l.add(u);default:return l[d]=u}case n:switch(c){case 1:return l.splice(d,1);case 2:return l.delete(d);case 3:return l.delete(o.value);default:return delete l[d]}default:Rt(17)}})),a},generatePatches_:function(r,o,i,s){switch(r.type_){case 0:case 2:return function(r,o,i,s){const{base_:l,copy_:c}=r;Mt(r.assigned_,((r,u)=>{const d=Gt(l,r),p=Gt(c,r),f=u?Ft(l,r)?e:t:n;if(d===p&&f===e)return;const h=o.concat(r);i.push(f===n?{op:f,path:h}:{op:f,path:h,value:p}),s.push(f===t?{op:n,path:h}:f===n?{op:t,path:h,value:a(d)}:{op:e,path:h,value:a(d)})}))}(r,o,i,s);case 1:return function(r,o,i,s){let{base_:l,assigned_:c}=r,u=r.copy_;u.length<l.length&&([l,u]=[u,l],[i,s]=[s,i]);for(let t=0;t<l.length;t++)if(c[t]&&u[t]!==l[t]){const n=o.concat([t]);i.push({op:e,path:n,value:a(u[t])}),s.push({op:e,path:n,value:a(l[t])})}for(let e=l.length;e<u.length;e++){const n=o.concat([e]);i.push({op:t,path:n,value:a(u[e])})}for(let e=u.length-1;l.length<=e;--e){const t=o.concat([e]);s.push({op:n,path:t})}}(r,o,i,s);case 3:return function(e,r,a,o){let{base_:i,copy_:s}=e,l=0;i.forEach((e=>{if(!s.has(e)){const i=r.concat([l]);a.push({op:n,path:i,value:e}),o.unshift({op:t,path:i,value:e})}l++})),l=0,s.forEach((e=>{if(!i.has(e)){const i=r.concat([l]);a.push({op:t,path:i,value:e}),o.unshift({op:n,path:i,value:e})}l++}))}(r,o,i,s)}},generateReplacementPatches_:function(t,n,r,a){r.push({op:e,path:[],value:n===It?void 0:n}),a.push({op:e,path:[],value:t})}},Xt[o="Patches"]||(Xt[o]=i)}var Sn=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...a){return r.produce(e,(e=>t.call(this,e,...a)))}}let r;if("function"!=typeof t&&Rt(6),void 0!==n&&"function"!=typeof n&&Rt(7),Ot(e)){const a=rn(this),o=mn(e,void 0);let i=!0;try{r=t(o),i=!1}finally{i?tn(a):nn(a)}return en(a,n),on(r,a)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===It&&(r=void 0),this.autoFreeze_&&Wt(r,!0),n){const t=[],a=[];Yt("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}Rt(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;const a=this.produce(e,t,((e,t)=>{n=e,r=t}));return[a,n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ot(e)||Rt(8),Nt(e)&&(e=yn(e));const t=rn(this),n=mn(e,void 0);return n[jt].isManual_=!0,nn(t),n}finishDraft(e,t){const n=e&&e[jt];n&&n.isManual_||Rt(9);const{scope_:r}=n;return en(r,t),on(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Yt("Patches").applyPatches_;return Nt(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},kn=Sn.produce,wn=Sn.produceWithPatches.bind(Sn);Sn.setAutoFreeze.bind(Sn),Sn.setUseStrictShallowCopy.bind(Sn);var _n=Sn.applyPatches.bind(Sn);Sn.createDraft.bind(Sn),Sn.finishDraft.bind(Sn);var xn=Symbol("NOT_FOUND");var Cn=e=>Array.isArray(e)?e:[e];function En(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var An=(e,t)=>e===t;function In(e,t){const n="object"==typeof t?t:{equalityCheck:t},{equalityCheck:r=An,maxSize:a=1,resultEqualityCheck:o}=n,i=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;const{length:r}=t;for(let a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}}(r);let s=0;const l=a<=1?function(e){let t;return{get:n=>t&&e(t.key,n)?t.value:xn,put(e,n){t={key:e,value:n}},getEntries:()=>t?[t]:[],clear(){t=void 0}}}(i):function(e,t){let n=[];function r(e){const r=n.findIndex((n=>t(e,n.key)));if(r>-1){const e=n[r];return r>0&&(n.splice(r,1),n.unshift(e)),e.value}return xn}return{get:r,put:function(t,a){r(t)===xn&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(a,i);function c(){let t=l.get(arguments);if(t===xn){if(t=e.apply(null,arguments),s++,o){const e=l.getEntries().find((e=>o(e.value,t)));e&&(t=e.value,0!==s&&s--)}l.put(arguments,t)}return t}return c.clearCache=()=>{l.clear(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}var Pn="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function jn(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,o=0;function i(){let t=n;const{length:i}=arguments;for(let e=0,n=i;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const s=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),o++,r){const e=a?.deref?.()??a;null!=e&&r(e,l)&&(l=e,0!==o&&o--);a="object"==typeof l&&null!==l||"function"==typeof l?new Pn(l):l}return s.s=1,s.v=l,l}return i.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>o,i.resetResultsCount=()=>{o=0},i}function Rn(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,a=0,o={},i=e.pop();"object"==typeof i&&(o=i,i=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(i,`createSelector expects an output function after the inputs, but received: [${typeof i}]`);const s={...n,...o},{memoize:l,memoizeOptions:c=[],argsMemoize:u=jn,argsMemoizeOptions:d=[],devModeChecks:p={}}=s,f=Cn(c),h=Cn(d),g=En(e),m=l((function(){return r++,i.apply(null,arguments)}),...f),y=u((function(){a++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(g,arguments);return t=m.apply(null,e),t}),...h);return Object.assign(y,{resultFunc:i,memoizedResultFunc:m,dependencies:g,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:u})};return Object.assign(r,{withTypes:()=>r}),r}var Tn=Rn(jn),Nn=Object.assign(((e,t=Tn)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>Nn});function On(e){return({dispatch:t,getState:n})=>r=>a=>"function"==typeof a?a(t,n,e):r(a)}var $n=On(),Dn=On,Ln="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?xt:xt.apply(null,arguments)};function Mn(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(ir(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>Et(t)&&t.type===e,n}var zn=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Fn(e){return Ot(e)?kn(e,(()=>{})):e}function Gn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var qn=e=>t=>{setTimeout(t,e)},Un=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new zn(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,o=!1,i=!1;const s=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:qn(10):"callback"===e.type?e.queueNotification:qn(e.timeout),c=()=>{i=!1,o&&(o=!1,s.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>a&&e()));return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{return a=!e?.meta?.RTK_autoBatch,o=!a,o&&(i||(i=!0,l(c))),r.dispatch(e)}finally{a=!0}}})})("object"==typeof n?n:void 0)),r};function Bn(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let o=new zn;return t&&(function(e){return"boolean"==typeof e}(t)?o.push($n):o.push(Dn(t.extraArgument))),o},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:o=!0,preloadedState:i,enhancers:s}=e||{};let l,c;if("function"==typeof n)l=n;else{if(!St(n))throw new Error(ir(1));l=wt(n)}c="function"==typeof r?r(t):t();let u=xt;a&&(u=Ln({trace:!1,..."object"==typeof a&&a}));const d=Ct(...c),p=Un(d);return kt(l,i,u(..."function"==typeof s?s(p):p()))}function Hn(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(ir(28));if(r in t)throw new Error(ir(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}function Vn(...e){return t=>e.some((e=>((e,t)=>(e=>e&&"function"==typeof e.match)(e)?e.match(t):e(t))(e,t)))}var Wn=["name","message","stack","code"],Qn=class{constructor(e,t){this.payload=e,this.meta=t}_type},Kn=class{constructor(e,t){this.payload=e,this.meta=t}_type},Jn=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Wn)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},Xn="External signal was aborted",Yn=(()=>{function e(e,t,n){const r=Mn(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),a=Mn(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=Mn(e+"/rejected",((e,t,r,a,o)=>({payload:a,error:(n&&n.serializeError||Jn)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e,{signal:i}={}){return(s,l,c)=>{const u=n?.idGenerator?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),d=new AbortController;let p,f;function h(e){f=e,d.abort()}i&&(i.aborted?h(Xn):i.addEventListener("abort",(()=>h(Xn)),{once:!0}));const g=async function(){let i;try{let o=n?.condition?.(e,{getState:l,extra:c});if(null!==(g=o)&&"object"==typeof g&&"function"==typeof g.then&&(o=await o),!1===o||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const m=new Promise(((e,t)=>{p=()=>{t({name:"AbortError",message:f||"Aborted"})},d.signal.addEventListener("abort",p)}));s(a(u,e,n?.getPendingMeta?.({requestId:u,arg:e},{getState:l,extra:c}))),i=await Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:l,extra:c,requestId:u,signal:d.signal,abort:h,rejectWithValue:(e,t)=>new Qn(e,t),fulfillWithValue:(e,t)=>new Kn(e,t)})).then((t=>{if(t instanceof Qn)throw t;return t instanceof Kn?r(t.payload,u,e,t.meta):r(t,u,e)}))])}catch(t){i=t instanceof Qn?o(null,u,e,t.payload,t.meta):o(t,u,e)}finally{p&&d.signal.removeEventListener("abort",p)}var g;return n&&!n.dispatchConditionRejection&&o.match(i)&&i.meta.condition||s(i),i}();return Object.assign(g,{abort:h,requestId:u,arg:e,unwrap:()=>g.then(Zn)})}}),{pending:a,rejected:o,fulfilled:r,settled:Vn(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Zn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var er=Symbol.for("rtk-slice-createasyncthunk");function tr(e,t){return`${e}/${t}`}function nr({creators:e}={}){const t=e?.asyncThunk?.[er];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(ir(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(ir(12));if(n in i.sliceCaseReducersByType)throw new Error(ir(13));return i.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(i.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],r]="function"==typeof e.extraReducers?Hn(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let n,[r,a,o]=Hn(t);if(function(e){return"function"==typeof e}(e))n=()=>Fn(e());else{const t=Fn(e);n=()=>t}function i(e=n(),t){let i=[r[t.type],...a.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===i.filter((e=>!!e)).length&&(i=[o]),i.reduce(((e,n)=>{if(n){if(Nt(e)){const r=n(e,t);return void 0===r?e:r}if(Ot(e))return kn(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return i.getInitialState=n,i}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=a[r],i={reducerName:r,type:tr(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},r,a){let o,i;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(ir(17));o=r.reducer,i=r.prepare}else o=r;a.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,i?Mn(e,i):Mn(e))}(i,o,s):function({type:e,reducerName:t},n,r,a){if(!a)throw new Error(ir(18));const{payloadCreator:o,fulfilled:i,pending:s,rejected:l,settled:c,options:u}=n,d=a(e,o,u);r.exposeAction(t,d),i&&r.addCase(d.fulfilled,i);s&&r.addCase(d.pending,s);l&&r.addCase(d.rejected,l);c&&r.addMatcher(d.settled,c);r.exposeCaseReducer(t,{fulfilled:i||or,pending:s||or,rejected:l||or,settled:c||or})}(i,o,s,t)}));const c=e=>e,u=new Map,d=new WeakMap;let p;function f(e,t){return p||(p=l()),p(e,t)}function h(){return p||(p=l()),p.getInitialState()}function g(t,n=!1){function r(e){let a=e[t];return void 0===a&&n&&(a=Gn(d,r,h)),a}function a(t=c){const r=Gn(u,n,(()=>new WeakMap));return Gn(r,t,(()=>{const r={};for(const[a,o]of Object.entries(e.selectors??{}))r[a]=rr(o,t,(()=>Gn(d,t,h)),n);return r}))}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const m={name:n,reducer:f,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:h,...g(r),injectInto(e,{reducerPath:t,...n}={}){const a=t??r;return e.inject({reducerPath:a,reducer:f},n),{...m,...g(a,!0)}}};return m}}function rr(e,t,n,r){function a(a,...o){let i=t(a);return void 0===i&&r&&(i=n()),e(i,...o)}return a.unwrapped=e,a}var ar=nr();function or(){}function ir(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const sr=e.getInstance(),lr={url:null,apiKey:null,initialized:!1,error:null,throttleDelayMs:200,cacheLifetimeMs:6e4,failedRequestRetryDelayMs:3e4},cr=ar({name:"api",initialState:lr,reducers:{setApiConfig(e,t){e.url=t.payload.url,e.apiKey=t.payload.apiKey,"number"==typeof t.payload.throttleDelayMs&&t.payload.throttleDelayMs>=0&&(e.throttleDelayMs=t.payload.throttleDelayMs),"number"==typeof t.payload.cacheLifetime&&t.payload.cacheLifetime>=0?e.cacheLifetimeMs=1e3*t.payload.cacheLifetime:void 0===t.payload.cacheLifetime||(e.cacheLifetimeMs=lr.cacheLifetimeMs,sr.warn("apiSlice","Invalid cacheLifetime provided, reset to default.")),"number"==typeof t.payload.failedRequestRetryDelaySeconds&&t.payload.failedRequestRetryDelaySeconds>=0?e.failedRequestRetryDelayMs=1e3*t.payload.failedRequestRetryDelaySeconds:void 0===t.payload.failedRequestRetryDelaySeconds||(e.failedRequestRetryDelayMs=lr.failedRequestRetryDelayMs,sr.warn("apiSlice","Invalid failedRequestRetryDelaySeconds provided, reset to default.")),e.error=null,sr.log("apiSlice","API config set.",{data:{url:e.url,throttle:e.throttleDelayMs,cacheLifetime:e.cacheLifetimeMs,failedRetryDelay:e.failedRequestRetryDelayMs}})},apiInitializationSuccess(e){e.url&&e.apiKey?(e.initialized=!0,e.error=null,sr.log("apiSlice","API marked as initialized successfully.")):(sr.warn("apiSlice","Tried to mark API as initialized, but URL or API Key is missing."),e.error="Initialization attempted without full config.")},apiInitializationError(e,t){e.initialized=!1,e.error=t.payload,sr.error("apiSlice",`API initialization failed: ${t.payload}`)},clearApiConfig(e){e.url=null,e.apiKey=null,e.initialized=!1,e.error=null,e.throttleDelayMs=lr.throttleDelayMs,e.cacheLifetimeMs=lr.cacheLifetimeMs,e.failedRequestRetryDelayMs=lr.failedRequestRetryDelayMs,sr.log("apiSlice","API config cleared.")}}}),{setApiConfig:ur,apiInitializationSuccess:dr,apiInitializationError:pr,clearApiConfig:fr}=cr.actions,hr=e=>e.api.initialized,gr=e=>({url:e.api.url,apiKey:e.api.apiKey,initialized:e.api.initialized,error:e.api.error,throttleDelayMs:e.api.throttleDelayMs,cacheLifetimeMs:e.api.cacheLifetimeMs,failedRequestRetryDelayMs:e.api.failedRequestRetryDelayMs});var mr=cr.reducer;const yr=ar({name:"components",initialState:{registeredComponents:{}},reducers:{registerComponent:(e,t)=>{const n=t.payload,r=Date.now();e.registeredComponents[n]={isActive:!0,registeredAt:r,lastActive:r}},disconnectComponent:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&(e.registeredComponents[n].isActive=!1)},reconnectComponent:(e,t)=>{const n=t.payload,r=Date.now();e.registeredComponents[n]?(e.registeredComponents[n].isActive=!0,e.registeredComponents[n].lastActive=r):e.registeredComponents[n]={isActive:!0,registeredAt:r,lastActive:r}},updateComponentActivity:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&(e.registeredComponents[n].lastActive=Date.now())},removeComponent:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&delete e.registeredComponents[n]}}});yr.actions;var vr=yr.reducer;const br=e.getInstance(),Sr=ar({name:"conditionalLogic",initialState:{definedLogicItems:[]},reducers:{setDefinedLogicItems(e,t){e.definedLogicItems=t.payload,br.log("conditionalLogicSlice",`Set ${e.definedLogicItems.length} defined logic items.`)},clearAllConditions(e){e.definedLogicItems=[],br.log("conditionalLogicSlice","Cleared all defined logic items.")}}}),{setDefinedLogicItems:kr,clearAllConditions:wr}=Sr.actions;var _r=Sr.reducer;e.getInstance();const xr=(e,t)=>{const n=Object.assign({},e);return Cr(e)&&Cr(t)&&Object.keys(t).forEach((r=>{Cr(t[r])?r in e?n[r]=xr(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n},Cr=e=>e&&"object"==typeof e&&!Array.isArray(e),Er=ar({name:"config",initialState:Object.assign(Object.assign({},me),{type:me.type||"custom:inventree-card",name:me.name||"InvenTree Card",view_type:me.view_type||"detail",data_sources:me.data_sources||{inventree_hass_sensors:[],ha_entities:[],inventree_pks:[],inventree_parameters:[],inventreeParametersToFetch:[]},layout_options:me.layout_options||{columns:3,grid_spacing:8,item_height:170},display:me.display||{show_header:!0,show_image:!0,show_name:!0,show_stock:!0,show_buttons:!0,show_parameters:!0},direct_api:me.direct_api||{enabled:!1,url:"",api_key:""},parameters:me.parameters||{enabled:!0,show_section:!0},conditional_logic:me.conditional_logic||{definedLogics:[]},style:me.style||{background:"var(--ha-card-background, var(--card-background-color, white))"},interactions:me.interactions||{buttons:[]},performance:me.performance||{rendering:{},api:{},websocket:{},parameters:{}},debug:me.debug||!1,debug_verbose:me.debug_verbose||!1,show_debug:me.show_debug||!1,_configLastUpdated:void 0}),reducers:{setConfigAction(e,t){const n=t.payload,r=xr(yn(e),n);Object.assign(e,r),e._configLastUpdated=Date.now()}}}),{setConfigAction:Ar}=Er.actions;var Ir=Er.reducer;const Pr=ar({name:"counter",initialState:{value:0},reducers:{increment:e=>{e.value+=1},decrement:e=>{e.value-=1},incrementByAmount:(e,t)=>{e.value+=t.payload}}});Pr.actions;var jr=Pr.reducer;const Rr=e.getInstance(),Tr=ar({name:"genericHaStates",initialState:{entities:{}},reducers:{setEntityState(e,t){const n=t.payload;n&&n.entity_id?(e.entities[n.entity_id]=n,Rr.log("genericHaStateSlice",`Set state for entity: ${n.entity_id}`,{data:n,level:"debug"})):Rr.warn("genericHaStateSlice","setEntityState called with invalid payload",{data:t.payload})},setEntityStatesBatch(e,t){const n=t.payload;if(n&&Array.isArray(n)){let t=0;n.forEach((n=>{n&&n.entity_id&&(e.entities[n.entity_id]=n,t++)})),Rr.log("genericHaStateSlice",`Set batch of ${t} entity states.`,{level:"debug"})}else Rr.warn("genericHaStateSlice","setEntityStatesBatch called with invalid payload",{data:t.payload})},removeEntityState(e,t){const n=t.payload;n&&e.entities[n]&&(delete e.entities[n],Rr.log("genericHaStateSlice",`Removed state for entity: ${n}`,{level:"debug"}))},clearAllGenericHaStates(e){e.entities={},Rr.log("genericHaStateSlice","Cleared all generic HA entity states.")}}}),{setEntityState:Nr,setEntityStatesBatch:Or,removeEntityState:$r,clearAllGenericHaStates:Dr}=Tr.actions;var Lr=Tr.reducer;const Mr=ar({name:"metrics",initialState:{usage:{redux:{},legacy:{}},events:[],performance:{timerOperations:{redux:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0},legacy:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0}},renderTiming:{lastRender:0,history:[],maxHistory:20}}},reducers:{trackUsage:(e,t)=>{const{system:n,operation:r}=t.payload;e.usage[n][r]||(e.usage[n][r]=0),e.usage[n][r]++},trackEvent:(e,t)=>{e.events.push(Object.assign(Object.assign({},t.payload),{timestamp:Date.now()})),e.events.length>100&&(e.events=e.events.slice(-100))},trackTimerOperation:(e,t)=>{const{system:n,operation:r}=t.payload;e.performance.timerOperations[n][r]++},trackRenderTiming:(e,t)=>{e.performance.renderTiming.lastRender=Date.now(),e.performance.renderTiming.history.push({component:t.payload.component,duration:t.payload.duration,timestamp:Date.now()}),e.performance.renderTiming.history.length>e.performance.renderTiming.maxHistory&&(e.performance.renderTiming.history=e.performance.renderTiming.history.slice(-e.performance.renderTiming.maxHistory))},clearMetrics:e=>{e.usage={redux:{},legacy:{}},e.events=[],e.performance.timerOperations={redux:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0},legacy:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0}}}}});Mr.actions;var zr=Mr.reducer;const Fr=e.getInstance(),Gr=ar({name:"parameters",initialState:{actions:{},parameterValues:{},parameterLoadingStatus:{},parameterError:{},config:null,strictWebSocketMode:!1,recentlyChanged:[],cache:{conditionResults:{},lastCleared:Date.now()},parametersByPartId:{}},reducers:{setActions(e,t){const{entityId:n,actions:r}=t.payload;e.actions[n]=r},setConfig(e,t){e.config=t.payload},setStrictWebSocketMode(e,t){e.strictWebSocketMode=t.payload},clearConditionCache(e){e.cache.conditionResults={},e.cache.lastCleared=Date.now(),Fr.log("parametersSlice","Condition cache cleared.",{level:"debug"})},clearCache(e){e.cache.conditionResults={},e.cache.lastCleared=Date.now(),e.parameterValues={},e.parameterLoadingStatus={},e.parameterError={},e.recentlyChanged=[],Fr.info("parametersSlice","Full parameter cache cleared (values, status, errors, conditions, recent).")},checkCondition(e,t){},updateValue(e,t){const{partId:n,paramName:r,value:a,source:o}=t.payload;e.parameterValues[n]||(e.parameterValues[n]={},Fr.log("parametersSlice",`Created parameter entry for part ${n} during updateValue.`,{level:"debug"})),e.parameterValues[n][r]?e.parameterValues[n][r].data=a:(e.parameterValues[n][r]={pk:0,part:n,template:0,template_detail:{pk:0,name:r,units:"",description:"",checkbox:!1,choices:"",selectionlist:null},data:a,data_numeric:null},Fr.log("parametersSlice",`Created parameter entry for ${r} on part ${n} during updateValue.`,{level:"debug"})),"succeeded"!==e.parameterLoadingStatus[n]&&(e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null);const i=`${n}:${r}`;e.recentlyChanged.includes(i)||(e.recentlyChanged.push(i),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100))),Fr.log("parametersSlice",`Updated value for ${i} to '${a}' (Source: ${o||"Unknown"}). Status set to succeeded.`,{level:"debug"})},webSocketUpdateReceived(e,t){var n,r,a,o;const{partId:i,parameterName:s,value:l,source:c}=t.payload;Fr.log("parametersSlice","[Reducer START] webSocketUpdateReceived",{level:"info",partId:i,parameterName:s,receivedValue:l,valueType:typeof l,source:c}),e.parameterValues[i]||(e.parameterValues[i]={},Fr.log("parametersSlice",`Created parameter structure for part ${i} during WebSocket update.`,{level:"debug"}));const u=null===(r=null===(n=e.parameterValues[i])||void 0===n?void 0:n[s])||void 0===r?void 0:r.data;Fr.log("parametersSlice",`Value before update for ${i}:${s}: ${u}`,{level:"debug"}),e.parameterValues[i][s]?(e.parameterValues[i][s].data=String(l),Fr.log("parametersSlice",`Updated existing parameter ${s} for part ${i} via WebSocket. New data: ${String(l)}`,{level:"debug"})):(e.parameterValues[i][s]={pk:0,part:i,template:0,template_detail:{pk:0,name:s,units:"",description:"",checkbox:"boolean"==typeof l,choices:"",selectionlist:null},data:String(l),data_numeric:"number"==typeof l?l:null},Fr.log("parametersSlice",`Created new parameter entry for ${s} on part ${i} via WebSocket. New data: ${String(l)}`,{level:"debug"}));const d=null===(o=null===(a=e.parameterValues[i])||void 0===a?void 0:a[s])||void 0===o?void 0:o.data;Fr.log("parametersSlice",`Value AFTER update for ${i}:${s}: ${d}`,{level:"debug"}),e.parameterLoadingStatus[i]="succeeded",e.parameterError[i]=null;const p=`${i}:${s}`;e.recentlyChanged.includes(p)||(e.recentlyChanged.push(p),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100))),Fr.log("parametersSlice",`[Reducer END] Value for ${p} processed via WebSocket. Status set to succeeded. Final data in store: ${d}`,{level:"info"})},markChanged(e,t){const{parameterId:n}=t.payload;e.recentlyChanged.includes(n)||(e.recentlyChanged.push(n),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100)))},addParametersForPart(e,t){const{partId:n,parameters:r}=t.payload;e.parametersByPartId[n]||(e.parametersByPartId[n]=[]),e.parametersByPartId[n]=[...e.parametersByPartId[n],...r]},updateParameterForPart(e,t){const{partId:n,parameterName:r,value:a}=t.payload,o=e.parametersByPartId[n];if(o){const e=o.findIndex((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===r}));-1!==e?(o[e]=Object.assign(Object.assign({},o[e]),{data:a}),Fr.log("ParameterSlice",`Updated parameter '${r}' for part ${n} to value: ${a}`,{level:"debug"})):Fr.warn("ParameterSlice",`Parameter '${r}' not found for part ${n} during update.`)}else Fr.warn("ParameterSlice",`Part ${n} not found in parametersByPartId during update.`)}}}),{setActions:qr,setConfig:Ur,setStrictWebSocketMode:Br,clearConditionCache:Hr,clearCache:Vr,checkCondition:Wr,updateValue:Qr,webSocketUpdateReceived:Kr,markChanged:Jr,addParametersForPart:Xr,updateParameterForPart:Yr}=Gr.actions;var Zr,ea,ta=Gr.reducer;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(Zr||(Zr={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(ea||(ea={}));var na=function(e,t,n,r){r=r||{},n=null==n?{}:n;var a=new Event(t,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});return a.detail=n,e.dispatchEvent(a),a},ra=function(e){na(window,"haptic",e)};class aa{constructor(e){this.hass=e,console.debug("üåà WLED Service: Initialized")}async toggleLED(e){try{if(!e)throw ra("failure"),new Error("No entity_id provided");const t=this.hass.states[e];if(!t)throw ra("failure"),new Error(`Entity ${e} not found`);await this.hass.callService("light","on"===t.state?"turn_off":"turn_on",{entity_id:e}),ra("success")}catch(e){throw ra("failure"),console.error("Failed to toggle LED:",e),e}}async locatePart(e,t){var n,r,a;try{if(console.debug("üåà WLED: Starting locate part process",{part:e,config:t}),!t.entity_id)throw ra("failure"),new Error("No entity_id configured for WLED");const o=null===(r=null===(n=e.parameters)||void 0===n?void 0:n.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t.parameter_name})))||void 0===r?void 0:r.data;if(!o)throw new Error(`No ${t.parameter_name} parameter found for part`);const i=parseInt(o);console.debug("üåà WLED: Using LED position:",i);const s=this.hass.states[t.entity_id];if(!s)throw new Error(`Entity ${t.entity_id} not found`);const l=(null===(a=t.ip_address)||void 0===a?void 0:a.replace("http://",""))||"192.168.0.61";console.debug("üåà WLED IP:",l);const c="on"===s.state;await this.hass.callService("rest_command","wled_segment",{url:`http://${l}/json/state`,payload:JSON.stringify(c?{on:!1}:{on:!0,bri:t.intensity||128,seg:[{id:0,start:i-1,stop:i,col:[[255,0,0],[0,0,0],[0,0,0]],fx:0}]})}),ra("success")}catch(e){throw ra("failure"),console.error("Failed to locate part with WLED:",e),e}}}function oa(e,t){return function(){return e.apply(t,arguments)}}const{toString:ia}=Object.prototype,{getPrototypeOf:sa}=Object,{iterator:la,toStringTag:ca}=Symbol,ua=(e=>t=>{const n=ia.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),da=e=>(e=e.toLowerCase(),t=>ua(t)===e),pa=e=>t=>typeof t===e,{isArray:fa}=Array,ha=pa("undefined");const ga=da("ArrayBuffer");const ma=pa("string"),ya=pa("function"),va=pa("number"),ba=e=>null!==e&&"object"==typeof e,Sa=e=>{if("object"!==ua(e))return!1;const t=sa(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||ca in e||la in e)},ka=da("Date"),wa=da("File"),_a=da("Blob"),xa=da("FileList"),Ca=da("URLSearchParams"),[Ea,Aa,Ia,Pa]=["ReadableStream","Request","Response","Headers"].map(da);function ja(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,a;if("object"!=typeof e&&(e=[e]),fa(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let i;for(r=0;r<o;r++)i=a[r],t.call(null,e[i],i,e)}}function Ra(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const Ta="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Na=e=>!ha(e)&&e!==Ta;const Oa=($a="undefined"!=typeof Uint8Array&&sa(Uint8Array),e=>$a&&e instanceof $a);var $a;const Da=da("HTMLFormElement"),La=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ma=da("RegExp"),za=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ja(n,((n,a)=>{let o;!1!==(o=t(n,a,e))&&(r[a]=o||n)})),Object.defineProperties(e,r)};const Fa=da("AsyncFunction"),Ga=(qa="function"==typeof setImmediate,Ua=ya(Ta.postMessage),qa?setImmediate:Ua?(Ba=`axios@${Math.random()}`,Ha=[],Ta.addEventListener("message",(({source:e,data:t})=>{e===Ta&&t===Ba&&Ha.length&&Ha.shift()()}),!1),e=>{Ha.push(e),Ta.postMessage(Ba,"*")}):e=>setTimeout(e));var qa,Ua,Ba,Ha;const Va="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Ta):"undefined"!=typeof process&&process.nextTick||Ga;var Wa={isArray:fa,isArrayBuffer:ga,isBuffer:function(e){return null!==e&&!ha(e)&&null!==e.constructor&&!ha(e.constructor)&&ya(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ya(e.append)&&("formdata"===(t=ua(e))||"object"===t&&ya(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ga(e.buffer),t},isString:ma,isNumber:va,isBoolean:e=>!0===e||!1===e,isObject:ba,isPlainObject:Sa,isReadableStream:Ea,isRequest:Aa,isResponse:Ia,isHeaders:Pa,isUndefined:ha,isDate:ka,isFile:wa,isBlob:_a,isRegExp:Ma,isFunction:ya,isStream:e=>ba(e)&&ya(e.pipe),isURLSearchParams:Ca,isTypedArray:Oa,isFileList:xa,forEach:ja,merge:function e(){const{caseless:t}=Na(this)&&this||{},n={},r=(r,a)=>{const o=t&&Ra(n,a)||a;Sa(n[o])&&Sa(r)?n[o]=e(n[o],r):Sa(r)?n[o]=e({},r):fa(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ja(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(ja(t,((t,r)=>{n&&ya(t)?e[r]=oa(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,o,i;const s={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],r&&!r(i,e,t)||s[i]||(t[i]=e[i],s[i]=!0);e=!1!==n&&sa(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ua,kindOfTest:da,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(fa(e))return e;let t=e.length;if(!va(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[la]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Da,hasOwnProperty:La,hasOwnProp:La,reduceDescriptors:za,freezeMethods:e=>{za(e,((t,n)=>{if(ya(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ya(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return fa(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Ra,global:Ta,isContextDefined:Na,isSpecCompliantForm:function(e){return!!(e&&ya(e.append)&&"FormData"===e[ca]&&e[la])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ba(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const a=fa(e)?[]:{};return ja(e,((e,t)=>{const o=n(e,r+1);!ha(o)&&(a[t]=o)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:Fa,isThenable:e=>e&&(ba(e)||ya(e))&&ya(e.then)&&ya(e.catch),setImmediate:Ga,asap:Va,isIterable:e=>null!=e&&ya(e[la])};function Qa(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Wa.inherits(Qa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wa.toJSONObject(this.config),code:this.code,status:this.status}}});const Ka=Qa.prototype,Ja={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ja[e]={value:e}})),Object.defineProperties(Qa,Ja),Object.defineProperty(Ka,"isAxiosError",{value:!0}),Qa.from=(e,t,n,r,a,o)=>{const i=Object.create(Ka);return Wa.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Qa.call(i,e.message,t,n,r,a),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};function Xa(e){return Wa.isPlainObject(e)||Wa.isArray(e)}function Ya(e){return Wa.endsWith(e,"[]")?e.slice(0,-2):e}function Za(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ya(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const eo=Wa.toFlatObject(Wa,{},null,(function(e){return/^is[A-Z]/.test(e)}));function to(e,t,n){if(!Wa.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Wa.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Wa.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,o=n.dots,i=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Wa.isSpecCompliantForm(t);if(!Wa.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Wa.isDate(e))return e.toISOString();if(!s&&Wa.isBlob(e))throw new Qa("Blob is not supported. Use a Buffer instead.");return Wa.isArrayBuffer(e)||Wa.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let s=e;if(e&&!a&&"object"==typeof e)if(Wa.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Wa.isArray(e)&&function(e){return Wa.isArray(e)&&!e.some(Xa)}(e)||(Wa.isFileList(e)||Wa.endsWith(n,"[]"))&&(s=Wa.toArray(e)))return n=Ya(n),s.forEach((function(e,r){!Wa.isUndefined(e)&&null!==e&&t.append(!0===i?Za([n],r,o):null===i?n:n+"[]",l(e))})),!1;return!!Xa(e)||(t.append(Za(a,n,o),l(e)),!1)}const u=[],d=Object.assign(eo,{defaultVisitor:c,convertValue:l,isVisitable:Xa});if(!Wa.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Wa.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Wa.forEach(n,(function(n,o){!0===(!(Wa.isUndefined(n)||null===n)&&a.call(t,n,Wa.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t}function no(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ro(e,t){this._pairs=[],e&&to(e,this,t)}const ao=ro.prototype;function oo(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function io(e,t,n){if(!t)return e;const r=n&&n.encode||oo;Wa.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(o=a?a(t,n):Wa.isURLSearchParams(t)?t.toString():new ro(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}ao.append=function(e,t){this._pairs.push([e,t])},ao.toString=function(e){const t=e?function(t){return e.call(this,t,no)}:no;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var so=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Wa.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},lo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},co={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ro,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const uo="undefined"!=typeof window&&"undefined"!=typeof document,po="object"==typeof navigator&&navigator||void 0,fo=uo&&(!po||["ReactNative","NativeScript","NS"].indexOf(po.product)<0),ho="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,go=uo&&window.location.href||"http://localhost";var mo={...Object.freeze({__proto__:null,hasBrowserEnv:uo,hasStandardBrowserEnv:fo,hasStandardBrowserWebWorkerEnv:ho,navigator:po,origin:go}),...co};function yo(e){function t(e,n,r,a){let o=e[a++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),s=a>=e.length;if(o=!o&&Wa.isArray(r)?r.length:o,s)return Wa.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!i;r[o]&&Wa.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],a)&&Wa.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}(r[o])),!i}if(Wa.isFormData(e)&&Wa.isFunction(e.entries)){const n={};return Wa.forEachEntry(e,((e,r)=>{t(function(e){return Wa.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const vo={transitional:lo,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=Wa.isObject(e);a&&Wa.isHTMLForm(e)&&(e=new FormData(e));if(Wa.isFormData(e))return r?JSON.stringify(yo(e)):e;if(Wa.isArrayBuffer(e)||Wa.isBuffer(e)||Wa.isStream(e)||Wa.isFile(e)||Wa.isBlob(e)||Wa.isReadableStream(e))return e;if(Wa.isArrayBufferView(e))return e.buffer;if(Wa.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return to(e,new mo.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return mo.isNode&&Wa.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Wa.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return to(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(Wa.isString(e))try{return(t||JSON.parse)(e),Wa.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||vo.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Wa.isResponse(e)||Wa.isReadableStream(e))return e;if(e&&Wa.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Qa.from(e,Qa.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mo.classes.FormData,Blob:mo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wa.forEach(["delete","get","head","post","put","patch"],(e=>{vo.headers[e]={}}));var bo=vo;const So=Wa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ko=Symbol("internals");function wo(e){return e&&String(e).trim().toLowerCase()}function _o(e){return!1===e||null==e?e:Wa.isArray(e)?e.map(_o):String(e)}function xo(e,t,n,r,a){return Wa.isFunction(r)?r.call(this,t,n):(a&&(t=n),Wa.isString(t)?Wa.isString(r)?-1!==t.indexOf(r):Wa.isRegExp(r)?r.test(t):void 0:void 0)}let Co=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=wo(t);if(!a)throw new Error("header name must be a non-empty string");const o=Wa.findKey(r,a);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=_o(e))}const o=(e,t)=>Wa.forEach(e,((e,n)=>a(e,n,t)));if(Wa.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Wa.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&So[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Wa.isObject(e)&&Wa.isIterable(e)){let n,r,a={};for(const t of e){if(!Wa.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?Wa.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=wo(e)){const n=Wa.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Wa.isFunction(t))return t.call(this,e,n);if(Wa.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wo(e)){const n=Wa.findKey(this,e);return!(!n||void 0===this[n]||t&&!xo(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=wo(e)){const a=Wa.findKey(n,e);!a||t&&!xo(0,n[a],a,t)||(delete n[a],r=!0)}}return Wa.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!xo(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return Wa.forEach(this,((r,a)=>{const o=Wa.findKey(n,a);if(o)return t[o]=_o(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();i!==a&&delete t[a],t[i]=_o(r),n[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Wa.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Wa.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ko]=this[ko]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=wo(e);t[r]||(!function(e,t){const n=Wa.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return Wa.isArray(e)?e.forEach(r):r(e),this}};Co.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Wa.reduceDescriptors(Co.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Wa.freezeMethods(Co);var Eo=Co;function Ao(e,t){const n=this||bo,r=t||n,a=Eo.from(r.headers);let o=r.data;return Wa.forEach(e,(function(e){o=e.call(n,o,a.normalize(),t?t.status:void 0)})),a.normalize(),o}function Io(e){return!(!e||!e.__CANCEL__)}function Po(e,t,n){Qa.call(this,null==e?"canceled":e,Qa.ERR_CANCELED,t,n),this.name="CanceledError"}function jo(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Qa("Request failed with status code "+n.status,[Qa.ERR_BAD_REQUEST,Qa.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Wa.inherits(Po,Qa,{__CANCEL__:!0});const Ro=(e,t,n=3)=>{let r=0;const a=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,o=0,i=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[i];a||(a=l),n[o]=s,r[o]=l;let u=i,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),l-a<t)return;const p=c&&l-c;return p?Math.round(1e3*d/p):void 0}}(50,250);return function(e,t){let n,r,a=0,o=1e3/t;const i=(t,o=Date.now())=>{a=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-a;s>=o?i(e,t):(n=e,r||(r=setTimeout((()=>{r=null,i(n)}),o-s)))},()=>n&&i(n)]}((n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,s=o-r,l=a(s);r=o;e({loaded:o,total:i,progress:i?o/i:void 0,bytes:s,rate:l||void 0,estimated:l&&i&&o<=i?(i-o)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},To=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},No=e=>(...t)=>Wa.asap((()=>e(...t)));var Oo=mo.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,mo.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(mo.origin),mo.navigator&&/(msie|trident)/i.test(mo.navigator.userAgent)):()=>!0,$o=mo.hasStandardBrowserEnv?{write(e,t,n,r,a,o){const i=[e+"="+encodeURIComponent(t)];Wa.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Wa.isString(r)&&i.push("path="+r),Wa.isString(a)&&i.push("domain="+a),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Do(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Lo=e=>e instanceof Eo?{...e}:e;function Mo(e,t){t=t||{};const n={};function r(e,t,n,r){return Wa.isPlainObject(e)&&Wa.isPlainObject(t)?Wa.merge.call({caseless:r},e,t):Wa.isPlainObject(t)?Wa.merge({},t):Wa.isArray(t)?t.slice():t}function a(e,t,n,a){return Wa.isUndefined(t)?Wa.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function o(e,t){if(!Wa.isUndefined(t))return r(void 0,t)}function i(e,t){return Wa.isUndefined(t)?Wa.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,a,o){return o in t?r(n,a):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(e,t,n)=>a(Lo(e),Lo(t),0,!0)};return Wa.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||a,i=o(e[r],t[r],r);Wa.isUndefined(i)&&o!==s||(n[r]=i)})),n}var zo=e=>{const t=Mo({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:i,headers:s,auth:l}=t;if(t.headers=s=Eo.from(s),t.url=io(Do(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Wa.isFormData(r))if(mo.hasStandardBrowserEnv||mo.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(mo.hasStandardBrowserEnv&&(a&&Wa.isFunction(a)&&(a=a(t)),a||!1!==a&&Oo(t.url))){const e=o&&i&&$o.read(i);e&&s.set(o,e)}return t};var Fo="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=zo(e);let a=r.data;const o=Eo.from(r.headers).normalize();let i,s,l,c,u,{responseType:d,onUploadProgress:p,onDownloadProgress:f}=r;function h(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let g=new XMLHttpRequest;function m(){if(!g)return;const r=Eo.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());jo((function(e){t(e),h()}),(function(e){n(e),h()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new Qa("Request aborted",Qa.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new Qa("Network Error",Qa.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||lo;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Qa(t,a.clarifyTimeoutError?Qa.ETIMEDOUT:Qa.ECONNABORTED,e,g)),g=null},void 0===a&&o.setContentType(null),"setRequestHeader"in g&&Wa.forEach(o.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),Wa.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),d&&"json"!==d&&(g.responseType=r.responseType),f&&([l,u]=Ro(f,!0),g.addEventListener("progress",l)),p&&g.upload&&([s,c]=Ro(p),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{g&&(n(!t||t.type?new Po(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===mo.protocols.indexOf(y)?n(new Qa("Unsupported protocol "+y+":",Qa.ERR_BAD_REQUEST,e)):g.send(a||null)}))};var Go=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Qa?t:new Po(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,a(new Qa(`timeout ${t} of ms exceeded`,Qa.ETIMEDOUT))}),t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:s}=r;return s.unsubscribe=()=>Wa.asap(i),s}};const qo=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},Uo=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Bo=(e,t,n,r)=>{const a=async function*(e,t){for await(const n of Uo(e))yield*qo(n,t)}(e,t);let o,i=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=i+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},Ho="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Vo=Ho&&"function"==typeof ReadableStream,Wo=Ho&&("function"==typeof TextEncoder?(Qo=new TextEncoder,e=>Qo.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Qo;const Ko=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Jo=Vo&&Ko((()=>{let e=!1;const t=new Request(mo.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Xo=Vo&&Ko((()=>Wa.isReadableStream(new Response("").body))),Yo={stream:Xo&&(e=>e.body)};var Zo;Ho&&(Zo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Yo[e]&&(Yo[e]=Wa.isFunction(Zo[e])?t=>t[e]():(t,n)=>{throw new Qa(`Response type '${e}' is not supported`,Qa.ERR_NOT_SUPPORT,n)})})));const ei=async(e,t)=>{const n=Wa.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Wa.isBlob(e))return e.size;if(Wa.isSpecCompliantForm(e)){const t=new Request(mo.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Wa.isArrayBufferView(e)||Wa.isArrayBuffer(e)?e.byteLength:(Wa.isURLSearchParams(e)&&(e+=""),Wa.isString(e)?(await Wo(e)).byteLength:void 0)})(t):n};const ti={http:null,xhr:Fo,fetch:Ho&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:o,timeout:i,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:p}=zo(e);c=c?(c+"").toLowerCase():"text";let f,h=Go([a,o&&o.toAbortSignal()],i);const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let m;try{if(l&&Jo&&"get"!==n&&"head"!==n&&0!==(m=await ei(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Wa.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=To(m,Ro(No(l)));r=Bo(n.body,65536,e,t)}}Wa.isString(d)||(d=d?"include":"omit");const a="credentials"in Request.prototype;f=new Request(t,{...p,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:a?d:void 0});let o=await fetch(f);const i=Xo&&("stream"===c||"response"===c);if(Xo&&(s||i&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=Wa.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&To(t,Ro(No(s),!0))||[];o=new Response(Bo(o.body,65536,n,(()=>{r&&r(),g&&g()})),e)}c=c||"text";let y=await Yo[Wa.findKey(Yo,c)||"text"](o,e);return!i&&g&&g(),await new Promise(((t,n)=>{jo(t,n,{data:y,headers:Eo.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:f})}))}catch(t){if(g&&g(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new Qa("Network Error",Qa.ERR_NETWORK,e,f),{cause:t.cause||t});throw Qa.from(t,t&&t.code,e,f)}})};Wa.forEach(ti,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const ni=e=>`- ${e}`,ri=e=>Wa.isFunction(e)||null===e||!1===e;var ai=e=>{e=Wa.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!ri(n)&&(r=ti[(t=String(n)).toLowerCase()],void 0===r))throw new Qa(`Unknown adapter '${t}'`);if(r)break;a[t||"#"+o]=r}if(!r){const e=Object.entries(a).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Qa("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(ni).join("\n"):" "+ni(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function oi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Po(null,e)}function ii(e){oi(e),e.headers=Eo.from(e.headers),e.data=Ao.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ai(e.adapter||bo.adapter)(e).then((function(t){return oi(e),t.data=Ao.call(e,e.transformResponse,t),t.headers=Eo.from(t.headers),t}),(function(t){return Io(t)||(oi(e),t&&t.response&&(t.response.data=Ao.call(e,e.transformResponse,t.response),t.response.headers=Eo.from(t.response.headers))),Promise.reject(t)}))}const si="1.9.0",li={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{li[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ci={};li.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,o)=>{if(!1===e)throw new Qa(r(a," has been removed"+(t?" in "+t:"")),Qa.ERR_DEPRECATED);return t&&!ci[a]&&(ci[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,o)}},li.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};var ui={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Qa("options must be an object",Qa.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],i=t[o];if(i){const t=e[o],n=void 0===t||i(t,o,e);if(!0!==n)throw new Qa("option "+o+" must be "+n,Qa.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Qa("Unknown option "+o,Qa.ERR_BAD_OPTION)}},validators:li};const di=ui.validators;let pi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new so,response:new so}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Mo(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&ui.assertOptions(n,{silentJSONParsing:di.transitional(di.boolean),forcedJSONParsing:di.transitional(di.boolean),clarifyTimeoutError:di.transitional(di.boolean)},!1),null!=r&&(Wa.isFunction(r)?t.paramsSerializer={serialize:r}:ui.assertOptions(r,{encode:di.function,serialize:di.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ui.assertOptions(t,{baseUrl:di.spelling("baseURL"),withXsrfToken:di.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&Wa.merge(a.common,a[t.method]);a&&Wa.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=Eo.concat(o,a);const i=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[ii.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let p=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{c=ii.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return io(Do((e=Mo(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Wa.forEach(["delete","get","head","options"],(function(e){pi.prototype[e]=function(t,n){return this.request(Mo(n||{},{method:e,url:t,data:(n||{}).data}))}})),Wa.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(Mo(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}pi.prototype[e]=t(),pi.prototype[e+"Form"]=t(!0)}));var fi=pi;var hi=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new Po(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const n=new e((function(e){t=e}));return{token:n,cancel:t}}};const gi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gi).forEach((([e,t])=>{gi[t]=e}));var mi=gi;const yi=function e(t){const n=new fi(t),r=oa(fi.prototype.request,n);return Wa.extend(r,fi.prototype,n,{allOwnKeys:!0}),Wa.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Mo(t,n))},r}(bo);yi.Axios=fi,yi.CanceledError=Po,yi.CancelToken=hi,yi.isCancel=Io,yi.VERSION=si,yi.toFormData=to,yi.AxiosError=Qa,yi.Cancel=yi.CanceledError,yi.all=function(e){return Promise.all(e)},yi.spread=function(e){return function(t){return e.apply(null,t)}},yi.isAxiosError=function(e){return Wa.isObject(e)&&!0===e.isAxiosError},yi.mergeConfig=Mo,yi.AxiosHeaders=Eo,yi.formToJSON=e=>yo(Wa.isHTMLForm(e)?new FormData(e):e),yi.getAdapter=ai,yi.HttpStatusCode=mi,yi.default=yi;var vi=yi;const{Axios:bi,AxiosError:Si,CanceledError:ki,isCancel:wi,CancelToken:_i,VERSION:xi,all:Ci,Cancel:Ei,isAxiosError:Ai,spread:Ii,toFormData:Pi,AxiosHeaders:ji,HttpStatusCode:Ri,formToJSON:Ti,getAdapter:Ni,mergeConfig:Oi}=vi,$i=e.getInstance();const Di=new class{constructor(){this.lastApiCallTimestamp=0,this.lastApiFailureTimestamp=0,$i.log("InventreeApiService","Initializing with Axios."),this.axiosInstance=vi.create(),this.axiosInstance.interceptors.request.use((e=>{var t,n,r;const a=Qd.getState(),o=gr(a).apiKey;return e.headers=e.headers||new ji,o&&e.headers.set("Authorization",`Token ${o}`),"post"!==(null===(t=e.method)||void 0===t?void 0:t.toLowerCase())&&"patch"!==(null===(n=e.method)||void 0===n?void 0:n.toLowerCase())&&"put"!==(null===(r=e.method)||void 0===r?void 0:r.toLowerCase())||e.headers.set("Content-Type","application/json"),e}),(e=>Promise.reject(e))),this.axiosInstance.interceptors.response.use((e=>(this.lastApiFailureTimestamp=0,e)),(e=>(this.lastApiFailureTimestamp=Date.now(),Promise.reject(e))))}async request(e,t={}){const n=Qd.getState(),r=gr(n),a=r.url,o=r.throttleDelayMs,i=r.failedRequestRetryDelayMs;if(!a){const e="API base URL is not configured in Redux store (apiSlice).";throw $i.error("InventreeApiService",e),this.lastApiFailureTimestamp=Date.now(),new Error(e)}const s=`${a.endsWith("/")?a.slice(0,-1):a}/${e.startsWith("/")?e.substring(1):e}`;if(this.lastApiFailureTimestamp>0){const e=Date.now()-this.lastApiFailureTimestamp;if(e<i){const t=i-e;$i.warn("InventreeApiService",`Recent API Failure: Delaying next request by ${t}ms.`),await new Promise((e=>setTimeout(e,t)))}}if(o>0){const e=Date.now()-this.lastApiCallTimestamp;if(e<o){const t=o-e;$i.log("InventreeApiService",`General Throttling: Delaying by ${t}ms.`,{level:"debug"}),await new Promise((e=>setTimeout(e,t))),this.lastApiCallTimestamp=Date.now()}else this.lastApiCallTimestamp=Date.now()}else this.lastApiCallTimestamp=Date.now();try{const e=Object.assign({url:s,method:t.method||"GET",data:t.data,params:t.params,headers:t.headers,timeout:15e3},t);let n;try{n=await this.axiosInstance.request(e)}catch(e){throw e}return 204===n.status?null:n.data}catch(e){throw $i.error("InventreeApiService",`Axios request to ${s} failed in main try-catch.`,{data:e}),e}}async getPart(e){$i.log("InventreeApiService",`Fetching part ${e}...`);try{return await this.request(`part/${e}/`)}catch(t){return $i.error("InventreeApiService",`Failed to get part ${e}:`,{data:t}),null}}async getParts(e={}){$i.log("InventreeApiService","Fetching parts with params:",{data:e});try{return await this.request("part/",{params:e})}catch(t){return $i.error("InventreeApiService","Failed to get parts:",{data:{params:e,error:t}}),[]}}async adjustStock(e,t,n,r){var a;$i.log("InventreeApiService",`Adjusting stock for part ${e} by ${t}. Location: ${n}, Notes: "${r}"`);try{if(0===t)$i.log("InventreeApiService",`Relative amount is 0 for part ${e}, no stock change needed.`);else if(t>0){const a=await this.addStockItem(e,t,n,r);if(!a)throw new Error("Failed to add stock item during positive adjustment.");$i.log("InventreeApiService",`Added stock item PK: ${a.pk} for part ${e}.`)}else{const o=Math.abs(t);$i.log("InventreeApiService",`Attempting to remove ${o} for part ${e}.`),await this.consolidateStockForPart(e,n,r||"Consolidating before stock removal");const i=await this.getStockItemsForPart(e,n),s=null!==(a=null==i?void 0:i.reduce(((e,t)=>e+parseFloat(t.quantity||"0")),0))&&void 0!==a?a:0;if(!i||0===i.length||s<o)$i.warn("InventreeApiService",`Cannot remove ${o} for part ${e}: Insufficient stock (${s}) available after consolidation attempt.`);else{const t=i[0];if(!t)throw $i.error("InventreeApiService",`Logic error: Stock exists (${s}) but no stock item found after consolidation for part ${e}.`),new Error("Stock item not found after consolidation despite available quantity.");$i.log("InventreeApiService",`Removing ${o} from stock item PK ${t.pk} for part ${e}.`);await this.removeStockItems([{pk:t.pk,quantity:o}],r||"Stock removal")||$i.error("InventreeApiService",`Stock removal API call failed for part ${e}, item ${t.pk}.`)}}$i.log("InventreeApiService",`Fetching final part details for ${e} after stock adjustment.`);const o=await this.getPart(e);return o?($i.log("InventreeApiService",`Stock adjustment process complete for part ${e}. Final stock: ${o.in_stock}.`),{pk:e,newTotalStock:o.in_stock}):($i.error("InventreeApiService",`Failed to fetch updated part details for part ${e} after stock adjustment.`),null)}catch(t){$i.error("InventreeApiService",`Failed to adjust stock for part ${e}:`,{data:t});try{const t=await this.getPart(e);if(t)return $i.warn("InventreeApiService",`Returning last known stock (${t.in_stock}) for part ${e} after adjustment error.`),{pk:e,newTotalStock:t.in_stock}}catch(t){$i.error("InventreeApiService",`Failed to fetch final part details for ${e} even after catching primary error:`,{data:t})}return null}}async getPartParameters(e){$i.log("InventreeApiService",`Fetching parameters for part ${e}...`);try{return await this.request("part/parameter/",{params:{part:e}})}catch(t){return $i.error("InventreeApiService",`Failed to get parameters for part ${e}:`,{data:t}),null}}async updatePartParameter(e,t){$i.log("InventreeApiService",`Updating parameter ${e} to value: "${t}"...`);try{return await this.request(`part/parameter/${e}/`,{method:"PATCH",data:{data:t}})}catch(t){return $i.error("InventreeApiService",`Failed to update parameter ${e}:`,{data:t}),null}}async getStockItemsForPart(e,t){$i.log("InventreeApiService",`Fetching stock items for part ${e}${t?` at location ${t}`:""}...`);try{const n={part:String(e)};return void 0!==t&&(n.location=String(t)),await this.request("stock/",{params:n})}catch(t){return $i.error("InventreeApiService",`Failed to get stock items for part ${e}:`,{data:t}),null}}async addStockItem(e,t,n,r){$i.log("InventreeApiService",`Adding stock for part ${e}: quantity ${t}, location ${n}, notes: "${r}"`);try{const a={part:e,quantity:String(t),status:10};return void 0!==n&&(a.location=n),r&&(a.notes=r),await this.request("stock/",{method:"POST",data:a})}catch(t){return $i.error("InventreeApiService",`Failed to add stock for part ${e}:`,{data:t}),null}}async removeStockItems(e,t){if($i.log("InventreeApiService",`Removing stock for items: ${e.map((e=>`PK: ${e.pk}, Qty: ${e.quantity}`)).join("; ")}. Notes: "${t}"`),0===e.length)return $i.warn("InventreeApiService","removeStockItems called with empty stockItems array."),{success:!0,message:"No items to remove."};try{const n={items:e.map((e=>({pk:e.pk,quantity:String(e.quantity)})))};return t&&(n.notes=t),await this.request("stock/remove/",{method:"POST",data:n})}catch(t){return $i.error("InventreeApiService","Failed to remove stock items:",{data:{stockItems:e,error:t}}),null}}async deleteStockItem(e){$i.log("InventreeApiService",`Deleting stock item PK ${e}...`);try{return void await this.request(`stock/${e}/`,{method:"DELETE"})}catch(t){return $i.error("InventreeApiService",`Failed to delete stock item ${e}:`,{data:t}),null}}async consolidateStockForPart(e,t,n){var r;$i.log("InventreeApiService",`Consolidating stock for part ${e}${void 0!==t?` to location ${t}`:""}...`);try{const a=await this.getStockItemsForPart(e);if(!a)return $i.error("InventreeApiService",`Failed to fetch existing stock items for part ${e} during consolidation.`),null;if(0===a.length)return $i.log("InventreeApiService",`No stock items found for part ${e} to consolidate.`),null;let o=0;a.forEach((e=>{const t=parseFloat(e.quantity);isNaN(t)?$i.warn("InventreeApiService",`Invalid quantity found for stock item ${e.pk}: ${e.quantity}. Skipping in total calculation.`):o+=t}));const i=n||`Consolidated from ${a.length} item(s).`,s=a.map((e=>e.pk));let l=t;void 0===l&&(l=null===(r=a[0])||void 0===r?void 0:r.location);const c=null===l?void 0:l;if(void 0===c&&o>0){const t=a.find((e=>null!==e.location&&void 0!==e.location));if(!t||null===t.location||void 0===t.location)return $i.error("InventreeApiService",`Cannot determine location for consolidated stock for part ${e}. Provide targetLocationId or ensure at least one existing item has a location.`),null;$i.warn("InventreeApiService",`No targetLocationId provided and first item had no location. Using location ${t.location} from item ${t.pk}.`),l=t.location}let u=null;if(o>0){if(u=await this.addStockItem(e,o,c,i),!u)return $i.error("InventreeApiService",`Failed to create new consolidated stock item for part ${e}. Aborting consolidation.`),null;$i.log("InventreeApiService",`Created new consolidated stock item PK: ${u.pk}`);const t=s.indexOf(u.pk);t>-1&&s.splice(t,1)}else $i.log("InventreeApiService",`Total quantity is 0 for part ${e}. Proceeding to delete old items.`);$i.log("InventreeApiService",`Deleting ${s.length} old stock items for part ${e}: [${s.join(", ")}]`);let d=0;for(const e of s){null===await this.deleteStockItem(e)&&($i.warn("InventreeApiService",`Failed to delete old stock item ${e} during consolidation.`),d++)}return d>0&&$i.warn("InventreeApiService",`Consolidation completed for part ${e}, but ${d} old stock items failed to delete.`),$i.log("InventreeApiService",`Successfully consolidated stock for part ${e}. Returning ${u?`new item PK ${u.pk}`:"null (zero stock)"}.`),u}catch(t){return $i.error("InventreeApiService",`Failed to consolidate stock for part ${e}:`,{data:t}),null}}},Li=e.getInstance(),Mi=Yn("parts/fetchPartDetails",(async(e,{rejectWithValue:t,getState:n})=>{Li.info("partsSlice",`Fetching details for part ${e}...`);try{const{api:r}=n();if(!r.url||!r.apiKey)return Li.warn("partsSlice","Direct API URL or API Key not configured. Cannot fetch part details."),t("Direct API not configured.");const a=await Di.getPart(e);return a?(Li.log("partsSlice",`Successfully fetched part details for ${e}`,a),a):(Li.warn("partsSlice",`No data returned for part ${e} from API.`),t(`Part ${e} not found or API error.`))}catch(n){return Li.error("partsSlice",`Error fetching part details for ${e}:`,n),t(n.message||`Failed to fetch part ${e}`)}})),zi=Yn("parts/locatePartById",(async({partId:e,hass:t},{getState:n,dispatch:r,rejectWithValue:a})=>{var o,i,s;const l=n(),c=l.parts.partsById[e],u=null===(i=null===(o=l.config.resolvedConfig)||void 0===o?void 0:o.services)||void 0===i?void 0:i.wled;if(!c)return Li.warn("partsSlice",`Part with ID ${e} not found for location.`),a(`Part with ID ${e} not found.`);if(!(u&&u.enabled&&u.entity_id&&u.parameter_name))return Li.warn("partsSlice",`WLED service not configured or enabled for part ${e}.`),a("WLED service not configured or enabled.");const d=new aa(t),p=null===(s=c.parameters)||void 0===s?void 0:s.find((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===u.parameter_name}));if(!p||!p.data)return Li.warn("partsSlice",`Location parameter '${u.parameter_name}' not found or empty for part ${e}.`),a(`Location parameter not found for part ${e}.`);try{await d.locatePart(c,u),Li.log("partsSlice",`Successfully triggered WLED location for part ${e} at segment ${p.data}.`),setTimeout((()=>{r(Gi.actions.setLocatingPartId(null))}),5e3)}catch(t){return Li.error("partsSlice",`Error locating part ${e} via WLED:`,t),a(t.message||`Failed to locate part ${e}.`)}})),Fi=Yn("parts/adjustPartStock",(async({partId:e,amount:t,locationId:n,notes:r},{rejectWithValue:a})=>{Li.info("partsSlice",`Adjusting stock for part ${e} by ${t}. Location: ${n}, Notes: "${r}"`);try{const o=await Di.adjustStock(e,t,n,r);if(!o||"number"!=typeof o.newTotalStock){Li.error("partsSlice",`Stock adjustment for part ${e} failed or did not return expected result format.`,o);return a(`Stock adjustment failed: ${o?"API response missing newTotalStock":"API call failed"}.`)}return Li.log("partsSlice",`Stock for part ${e} adjusted successfully via API. New total stock: ${o.newTotalStock}.`),{partId:o.pk,newTotalStock:o.newTotalStock}}catch(t){return Li.error("partsSlice",`Error calling inventreeApiService.adjustStock for part ${e}:`,t),a(t.message||`Failed to adjust stock for part ${e}.`)}})),Gi=ar({name:"parts",initialState:{partsById:{},partsByEntity:{},loading:!1,error:null,locatingPartId:null,adjustingStockPartId:null,adjustmentError:null},reducers:{setParts(e,t){console.log("[partsSlice] setParts PAYLOAD:",JSON.stringify(t.payload,null,2));const{entityId:n,parts:r}=t.payload,a=[];r.forEach((t=>{e.partsById[t.pk]=Object.assign(Object.assign({},e.partsById[t.pk]),t),a.push(t.pk)})),e.partsByEntity[n]=a,Li.log("partsSlice",`Set ${r.length} parts for entity '${n}'. Part IDs: [${a.join(", ")}]`,{level:"debug"})},addParts(e,t){t.payload.forEach((t=>{var n;t.pk?(e.partsById[t.pk]=Object.assign(Object.assign(Object.assign({},e.partsById[t.pk]),t),{source:(null===(n=e.partsById[t.pk])||void 0===n?void 0:n.source)||"api:direct_pk"}),Li.log("partsSlice",`Added/Updated part ${t.pk} from direct PK fetch.`,{level:"debug"})):Li.warn("partsSlice","Attempted to add a part without a PK.",{partData:t})}))},updatePart(e,t){const n=t.payload;e.partsById[n.pk]?(e.partsById[n.pk]=Object.assign(Object.assign({},e.partsById[n.pk]),n),Li.log("partsSlice",`Updated part ${n.pk} in partsById.`,{level:"debug"})):(e.partsById[n.pk]=n,Li.log("partsSlice",`Added new part ${n.pk} to partsById.`,{level:"debug"}))},updatePartStock(e,t){const{partId:n,newStock:r}=t.payload,a=e.partsById[n];a?(a.in_stock=r,Li.log("partsSlice",`Updated stock for part ${n} to ${r} in partsById.`,{level:"debug"})):Li.warn("partsSlice",`Attempted to update stock for non-existent partId: ${n}`)},clearParts(e,t){const n=t.payload;Li.log("partsSlice",`Clearing parts mapping for entity '${n}'.`,{level:"debug"}),delete e.partsByEntity[n]},registerEntity(e,t){const n=t.payload;n in e.partsByEntity||(e.partsByEntity[n]=[],Li.log("partsSlice",`Registered entity '${n}' in partsByEntity.`,{level:"debug"}))},partStockUpdateFromWebSocket(e,t){const n=t.payload,{partId:r,quantity:a}=n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["partId","quantity"]),i=e.partsById[r];i?(Li.log("partsSlice",`Processing WebSocket stock update for part ${r}. Current stock: ${i.in_stock}, New quantity from WS: ${a}`),void 0!==a&&(i.in_stock=parseFloat(a)),Li.log("partsSlice",`Part ${r} stock updated to ${i.in_stock} via WebSocket.`,{level:"debug",otherStockData:o})):Li.warn("partsSlice",`Received WebSocket stock update for unknown part ${r}. Triggering fetch.`)},setLocatingPartId(e,t){e.locatingPartId=t.payload}},extraReducers:e=>{e.addCase(zi.pending,((e,t)=>{e.locatingPartId=t.meta.arg.partId})).addCase(zi.rejected,((e,t)=>{e.locatingPartId===t.meta.arg.partId&&(e.locatingPartId=null)})).addCase(zi.fulfilled,((e,t)=>{})).addCase(Fi.pending,((e,t)=>{var n;const{partId:r,amount:a}=t.meta.arg;e.adjustingStockPartId=r,e.adjustmentError=null;const o=e.partsById[r];if(o){const e=o.in_stock;o.in_stock=(null!==(n=o.in_stock)&&void 0!==n?n:0)+a,Li.log("partsSlice",`Optimistically updated stock for part ${r} from ${e} to ${o.in_stock}`,{level:"debug"})}else Li.warn("partsSlice",`Cannot optimistically update stock for partId ${r}: Part not found.`)})).addCase(Fi.fulfilled,((e,t)=>{const{partId:n,newTotalStock:r}=t.payload,a=e.partsById[n];a&&(a.in_stock=r),e.adjustingStockPartId===n&&(e.adjustingStockPartId=null),e.adjustmentError=null})).addCase(Fi.rejected,((e,t)=>{var n;const r=t.meta.arg.partId,a=t.meta.arg;e.adjustmentError=t.payload||t.error.message||"Failed to adjust stock",Li.error("partsSlice",`Stock adjustment failed for part ${r}: ${e.adjustmentError}`);const o=e.partsById[r];o&&"number"==typeof a.amount&&(o.in_stock=(null!==(n=o.in_stock)&&void 0!==n?n:0)-a.amount,Li.warn("partsSlice",`Reverted optimistic stock update for part ${r}. New reverted stock: ${o.in_stock}`)),e.adjustingStockPartId===r&&(e.adjustingStockPartId=null)})).addCase(Mi.pending,((e,t)=>{const n=t.meta.arg;Li.info("partsSlice",`Fetching details for part ${n} (pending)...`),e.loading=!0})).addCase(Mi.fulfilled,((e,t)=>{const n=t.payload;Li.info("partsSlice",`Successfully fetched details for part ${n.pk}. Updating state.`),e.partsById[n.pk]=Object.assign(Object.assign({},e.partsById[n.pk]),n),e.loading=!1})).addCase(Mi.rejected,((e,t)=>{const n=t.meta.arg;Li.error("partsSlice",`Failed to fetch details for part ${n}: ${t.payload||t.error.message}`),e.loading=!1,e.error=t.payload||t.error.message||`Failed to fetch details for part ${n}`}))}}),{setParts:qi,addParts:Ui,updatePart:Bi,updatePartStock:Hi,clearParts:Vi,registerEntity:Wi,partStockUpdateFromWebSocket:Qi,setLocatingPartId:Ki}=Gi.actions;var Ji=Gi.reducer;const Xi=e=>e.parts.partsByEntity,Yi=e=>e.parts.partsById;Tn([Yi],(e=>Object.keys(e).map(Number)));const Zi=Tn([Yi],(e=>Object.values(e))),es=Tn([Xi,Yi,(e,t)=>t],((e,t,n)=>{const r=new Set;n.forEach((t=>{const n=e[t];n&&n.forEach((e=>r.add(e)))}));const a=[];return r.forEach((e=>{const n=t[e];n&&a.push(n)})),a}));Tn([Yi,Xi,(e,t)=>t],((e,t,n)=>{var r;return(null!==(r=t[n])&&void 0!==r?r:[]).map((t=>e[t])).filter((e=>!!e))})),Tn([e=>e.parts.partsById,(e,t)=>t],((e,t)=>null!=t?e[t]:void 0));const ts=e=>e.parts.locatingPartId;Tn([Zi],(e=>e)),Tn([e=>e.parts.partsById,e=>e.parts.partsByEntity,(e,t)=>t],((e,t,n)=>{if(!n)return[];const r=t[n];return r?r.map((t=>e[t])).filter((e=>void 0!==e)):[]})),Tn([e=>e.parts.partsById,e=>e.parts.partsByEntity,(e,t,n=[])=>({primaryEntityId:t,additionalEntityIds:n})],((e,t,{primaryEntityId:n,additionalEntityIds:r})=>{const a=new Set;if(n){const e=t[n];e&&e.forEach((e=>a.add(e)))}return r.forEach((e=>{const n=t[e];n&&n.forEach((e=>a.add(e)))})),Array.from(a).map((t=>e[t])).filter((e=>void 0!==e))}));const ns=Tn([Yi,(e,t)=>t],((e,t)=>t&&0!==t.length?t.map((t=>e[t])).filter((e=>void 0!==e)):[])),rs=ar({name:"ui",initialState:{activeView:"detail",selectedPartId:null,debug:{showDebugPanel:!1,activeTab:"data"},loading:!1},reducers:{setActiveView(e,t){e.activeView=t.payload},setSelectedPart(e,t){e.selectedPartId=t.payload},toggleDebugPanel(e){e.debug.showDebugPanel=!e.debug.showDebugPanel},setDebugTab(e,t){e.debug.activeTab=t.payload},setLoading(e,t){e.loading=t.payload}}});rs.actions;var as=rs.reducer;const os=e.getInstance(),is=ar({name:"visualEffects",initialState:{effectsByCardInstance:{}},reducers:{setVisualEffect(e,t){const{cardInstanceId:n,partId:r,effect:a}=t.payload;e.effectsByCardInstance[n]||(e.effectsByCardInstance[n]={}),e.effectsByCardInstance[n][r]=Object.assign(Object.assign({},e.effectsByCardInstance[n][r]||{}),a)},setVisualEffectsBatchForCard(e,t){const{cardInstanceId:n,effects:r}=t.payload;e.effectsByCardInstance[n]=r},clearVisualEffectForPart(e,t){const{cardInstanceId:n,partId:r}=t.payload;e.effectsByCardInstance[n]&&delete e.effectsByCardInstance[n][r]},clearAllVisualEffectsForCard(e,t){const{cardInstanceId:n}=t.payload;delete e.effectsByCardInstance[n],os.log("visualEffectsSlice",`Cleared all visual effects for card ${n}.`,{level:"debug"})},clearEffectsForAllCardInstances(e){e.effectsByCardInstance={},os.log("visualEffectsSlice","Cleared all visual effects for ALL card instances.",{level:"debug"})},setConditionalPartEffect(e,t){const{cardInstanceId:n,partId:r,effect:a}=t.payload;e.effectsByCardInstance[n]||(e.effectsByCardInstance[n]={}),e.effectsByCardInstance[n][r]=Object.assign(Object.assign({},e.effectsByCardInstance[n][r]||{}),a)},setConditionalPartEffectsBatch(e,t){const{cardInstanceId:n,effectsMap:r}=t.payload;e.effectsByCardInstance[n]||(e.effectsByCardInstance[n]={});for(const t in r){const a=parseInt(t,10);isNaN(a)||(e.effectsByCardInstance[n][a]=Object.assign(Object.assign({},e.effectsByCardInstance[n][a]),r[a]))}},clearConditionalPartEffectsForPart(e,t){const{cardInstanceId:n,partId:r}=t.payload;e.effectsByCardInstance[n]&&e.effectsByCardInstance[n][r]&&(e.effectsByCardInstance[n][r]={})},clearAllConditionalPartEffects(e){e.effectsByCardInstance={}},clearConditionalPartEffectsForCard(e,t){const{cardInstanceId:n}=t.payload;e.effectsByCardInstance[n]&&(Object.keys(e.effectsByCardInstance[n]).forEach((t=>{e.effectsByCardInstance[n][parseInt(t,10)]={}})),os.log("visualEffectsSlice",`Cleared all conditional part effects for cardInstanceId: ${n}`))}}}),{setVisualEffect:ss,setVisualEffectsBatchForCard:ls,clearVisualEffectForPart:cs,clearAllVisualEffectsForCard:us,clearEffectsForAllCardInstances:ds,setConditionalPartEffect:ps,setConditionalPartEffectsBatch:fs,clearConditionalPartEffectsForPart:hs,clearAllConditionalPartEffects:gs,clearConditionalPartEffectsForCard:ms}=is.actions,ys=(e,t,n)=>{var r;return null===(r=e.visualEffects.effectsByCardInstance[t])||void 0===r?void 0:r[n]};var vs=is.reducer;const bs=e.getInstance(),Ss={status:"idle",lastMessage:null,lastError:null,messageCount:0},ks=ar({name:"websocket",initialState:Ss,reducers:{setWebSocketStatus:(e,t)=>{bs.log("WebSocketSlice",`Status changing from ${e.status} to ${t.payload}`),e.status=t.payload,"error"===t.payload?e.lastError="An error occurred":e.lastError=null},webSocketMessageReceived:(e,t)=>{e.lastMessage=t.payload,e.messageCount+=1,bs.log("WebSocketSlice",`Message received (Count: ${e.messageCount})`,t.payload)},resetWebSocketState:e=>{bs.log("WebSocketSlice","Resetting WebSocket state"),Object.assign(e,Ss)}}}),{setWebSocketStatus:ws,webSocketMessageReceived:_s,resetWebSocketState:xs}=ks.actions;var Cs=ks.reducer,Es=class extends Error{issues;constructor(e){super(e[0].message),this.name="SchemaError",this.issues=e}},As=Object.defineProperty,Is=Object.getOwnPropertyDescriptor,Ps=Object.getOwnPropertyNames,js=Object.prototype.hasOwnProperty,Rs=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of Ps(t))js.call(e,a)||a===n||As(e,a,{get:()=>t[a],enumerable:!(r=Is(t,a))||r.enumerable});return e};function Ts(e){return{status:e,isUninitialized:"uninitialized"===e,isLoading:"pending"===e,isSuccess:"fulfilled"===e,isError:"rejected"===e}}function Ns(e){return e.replace(e[0],e[0].toUpperCase())}var Os,$s,Ds={};((e,t)=>{for(var n in t)As(e,n,{get:t[n],enumerable:!0})})(Ds,{ReducerType:()=>jl,SHOULD_AUTOBATCH:()=>nl,TaskAbortError:()=>Zl,Tuple:()=>Vs,addListener:()=>bc,asyncThunkCreator:()=>Pl,autoBatchEnhancer:()=>ol,buildCreateSlice:()=>Tl,clearAllListeners:()=>Sc,combineSlices:()=>Nc,configureStore:()=>sl,createAction:()=>Gs,createActionCreatorInvariantMiddleware:()=>Hs,createAsyncThunk:()=>El,createDraftSafeSelector:()=>Ms,createDraftSafeSelectorCreator:()=>Ls,createDynamicMiddleware:()=>Cc,createEntityAdapter:()=>Hl,createImmutableStateInvariantMiddleware:()=>Js,createListenerMiddleware:()=>_c,createNextState:()=>kn,createReducer:()=>cl,createSelector:()=>Tn,createSelectorCreator:()=>Rn,createSerializableStateInvariantMiddleware:()=>el,createSlice:()=>Ol,current:()=>yn,findNonSerializableValue:()=>Ys,formatProdErrorMessage:()=>Oc,freeze:()=>Wt,isActionCreator:()=>qs,isAllOf:()=>pl,isAnyOf:()=>dl,isAsyncThunkAction:()=>bl,isDraft:()=>Nt,isFluxStandardAction:()=>Us,isFulfilled:()=>vl,isImmutableDefault:()=>Ks,isPending:()=>gl,isPlain:()=>Xs,isRejected:()=>ml,isRejectedWithValue:()=>yl,lruMemoize:()=>In,miniSerializeError:()=>xl,nanoid:()=>Sl,original:()=>Lt,prepareAutoBatched:()=>rl,removeListener:()=>kc,unwrapResult:()=>Al,weakMapMemoize:()=>jn}),Rs(Ds,Os=At,"default"),$s&&Rs($s,Os,"default");var Ls=(...e)=>{const t=Rn(...e),n=Object.assign(((...e)=>{const n=t(...e),r=(e,...t)=>n(Nt(e)?yn(e):e,...t);return Object.assign(r,n),r}),{withTypes:()=>n});return n},Ms=Ls(jn),zs="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?xt:xt.apply(null,arguments)},Fs=e=>e&&"function"==typeof e.match;function Gs(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(Oc(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>Et(t)&&t.type===e,n}function qs(e){return"function"==typeof e&&"type"in e&&Fs(e)}function Us(e){return Et(e)&&Object.keys(e).every(Bs)}function Bs(e){return["type","payload","error","meta"].indexOf(e)>-1}function Hs(e={}){return()=>e=>t=>e(t)}var Vs=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Ws(e){return Ot(e)?kn(e,(()=>{})):e}function Qs(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Ks(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function Js(e={}){return()=>e=>t=>e(t)}function Xs(e){const t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||St(e)}function Ys(e,t="",n=Xs,r,a=[],o){let i;if(!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(o?.has(e))return!1;const s=null!=r?r(e):Object.entries(e),l=a.length>0;for(const[e,c]of s){const s=t?t+"."+e:e;if(l){if(a.some((e=>e instanceof RegExp?e.test(s):s===e)))continue}if(!n(c))return{keyPath:s,value:c};if("object"==typeof c&&(i=Ys(c,s,n,r,a,o),i))return i}return o&&Zs(e)&&o.add(e),!1}function Zs(e){if(!Object.isFrozen(e))return!1;for(const t of Object.values(e))if("object"==typeof t&&null!==t&&!Zs(t))return!1;return!0}function el(e={}){return()=>e=>t=>e(t)}var tl=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let o=new Vs;return t&&(!function(e){return"boolean"==typeof e}(t)?o.push(Dn(t.extraArgument)):o.push($n)),o},nl="RTK_autoBatch",rl=()=>e=>({payload:e,meta:{[nl]:!0}}),al=e=>t=>{setTimeout(t,e)},ol=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,o=!1,i=!1;const s=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:al(10):"callback"===e.type?e.queueNotification:al(e.timeout),c=()=>{i=!1,o&&(o=!1,s.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>a&&e()));return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{return a=!e?.meta?.[nl],o=!a,o&&(i||(i=!0,l(c))),r.dispatch(e)}finally{a=!0}}})},il=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new Vs(e);return n&&r.push(ol("object"==typeof n?n:void 0)),r};function sl(e){const t=tl(),{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:o=!0,preloadedState:i,enhancers:s}=e||{};let l,c;if("function"==typeof n)l=n;else{if(!St(n))throw new Error(Oc(1));l=wt(n)}c="function"==typeof r?r(t):t();let u=xt;a&&(u=zs({trace:!1,..."object"==typeof a&&a}));const d=Ct(...c),p=il(d);return kt(l,i,u(..."function"==typeof s?s(p):p()))}function ll(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(Oc(28));if(r in t)throw new Error(Oc(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}function cl(e,t){let n,[r,a,o]=ll(t);if(function(e){return"function"==typeof e}(e))n=()=>Ws(e());else{const t=Ws(e);n=()=>t}function i(e=n(),t){let i=[r[t.type],...a.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===i.filter((e=>!!e)).length&&(i=[o]),i.reduce(((e,n)=>{if(n){if(Nt(e)){const r=n(e,t);return void 0===r?e:r}if(Ot(e))return kn(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return i.getInitialState=n,i}var ul=(e,t)=>Fs(e)?e.match(t):e(t);function dl(...e){return t=>e.some((e=>ul(e,t)))}function pl(...e){return t=>e.every((e=>ul(e,t)))}function fl(e,t){if(!e||!e.meta)return!1;const n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function hl(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function gl(...e){return 0===e.length?e=>fl(e,["pending"]):hl(e)?dl(...e.map((e=>e.pending))):gl()(e[0])}function ml(...e){return 0===e.length?e=>fl(e,["rejected"]):hl(e)?dl(...e.map((e=>e.rejected))):ml()(e[0])}function yl(...e){const t=e=>e&&e.meta&&e.meta.rejectedWithValue;return 0===e.length||hl(e)?pl(ml(...e),t):yl()(e[0])}function vl(...e){return 0===e.length?e=>fl(e,["fulfilled"]):hl(e)?dl(...e.map((e=>e.fulfilled))):vl()(e[0])}function bl(...e){return 0===e.length?e=>fl(e,["pending","fulfilled","rejected"]):hl(e)?dl(...e.flatMap((e=>[e.pending,e.rejected,e.fulfilled]))):bl()(e[0])}var Sl=(e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},kl=["name","message","stack","code"],wl=class{constructor(e,t){this.payload=e,this.meta=t}_type},_l=class{constructor(e,t){this.payload=e,this.meta=t}_type},xl=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of kl)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},Cl="External signal was aborted",El=(()=>{function e(e,t,n){const r=Gs(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),a=Gs(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=Gs(e+"/rejected",((e,t,r,a,o)=>({payload:a,error:(n&&n.serializeError||xl)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e,{signal:i}={}){return(s,l,c)=>{const u=n?.idGenerator?n.idGenerator(e):Sl(),d=new AbortController;let p,f;function h(e){f=e,d.abort()}i&&(i.aborted?h(Cl):i.addEventListener("abort",(()=>h(Cl)),{once:!0}));const g=async function(){let i;try{let o=n?.condition?.(e,{getState:l,extra:c});if(null!==(g=o)&&"object"==typeof g&&"function"==typeof g.then&&(o=await o),!1===o||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const m=new Promise(((e,t)=>{p=()=>{t({name:"AbortError",message:f||"Aborted"})},d.signal.addEventListener("abort",p)}));s(a(u,e,n?.getPendingMeta?.({requestId:u,arg:e},{getState:l,extra:c}))),i=await Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:l,extra:c,requestId:u,signal:d.signal,abort:h,rejectWithValue:(e,t)=>new wl(e,t),fulfillWithValue:(e,t)=>new _l(e,t)})).then((t=>{if(t instanceof wl)throw t;return t instanceof _l?r(t.payload,u,e,t.meta):r(t,u,e)}))])}catch(t){i=t instanceof wl?o(null,u,e,t.payload,t.meta):o(t,u,e)}finally{p&&d.signal.removeEventListener("abort",p)}var g;return n&&!n.dispatchConditionRejection&&o.match(i)&&i.meta.condition||s(i),i}();return Object.assign(g,{abort:h,requestId:u,arg:e,unwrap:()=>g.then(Al)})}}),{pending:a,rejected:o,fulfilled:r,settled:dl(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Al(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Il=Symbol.for("rtk-slice-createasyncthunk"),Pl={[Il]:El},jl=(e=>(e.reducer="reducer",e.reducerWithPrepare="reducerWithPrepare",e.asyncThunk="asyncThunk",e))(jl||{});function Rl(e,t){return`${e}/${t}`}function Tl({creators:e}={}){const t=e?.asyncThunk?.[Il];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(Oc(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(Oc(12));if(n in i.sliceCaseReducersByType)throw new Error(Oc(13));return i.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(i.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],r]="function"==typeof e.extraReducers?ll(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return cl(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=a[r],i={reducerName:r,type:Rl(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},r,a){let o,i;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(Oc(17));o=r.reducer,i=r.prepare}else o=r;a.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,i?Gs(e,i):Gs(e))}(i,o,s):function({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Oc(18));const{payloadCreator:o,fulfilled:i,pending:s,rejected:l,settled:c,options:u}=n,d=a(e,o,u);r.exposeAction(t,d),i&&r.addCase(d.fulfilled,i);s&&r.addCase(d.pending,s);l&&r.addCase(d.rejected,l);c&&r.addMatcher(d.settled,c);r.exposeCaseReducer(t,{fulfilled:i||$l,pending:s||$l,rejected:l||$l,settled:c||$l})}(i,o,s,t)}));const c=e=>e,u=new Map,d=new WeakMap;let p;function f(e,t){return p||(p=l()),p(e,t)}function h(){return p||(p=l()),p.getInitialState()}function g(t,n=!1){function r(e){let a=e[t];return void 0===a&&n&&(a=Qs(d,r,h)),a}function a(t=c){const r=Qs(u,n,(()=>new WeakMap));return Qs(r,t,(()=>{const r={};for(const[a,o]of Object.entries(e.selectors??{}))r[a]=Nl(o,t,(()=>Qs(d,t,h)),n);return r}))}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const m={name:n,reducer:f,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:h,...g(r),injectInto(e,{reducerPath:t,...n}={}){const a=t??r;return e.inject({reducerPath:a,reducer:f},n),{...m,...g(a,!0)}}};return m}}function Nl(e,t,n,r){function a(a,...o){let i=t(a);return void 0===i&&r&&(i=n()),e(i,...o)}return a.unwrapped=e,a}var Ol=Tl();function $l(){}var Dl=Nt;function Ll(e){const t=Ml(((t,n)=>e(n)));return function(e){return t(e,void 0)}}function Ml(e){return function(t,n){const r=t=>{Us(n)?e(n.payload,t):e(n,t)};return Dl(t)?(r(t),t):kn(t,r)}}function zl(e,t){return t(e)}function Fl(e){return Array.isArray(e)||(e=Object.values(e)),e}function Gl(e){return Nt(e)?yn(e):e}function ql(e,t,n){e=Fl(e);const r=Gl(n.ids),a=new Set(r),o=[],i=new Set([]),s=[];for(const n of e){const e=zl(n,t);a.has(e)||i.has(e)?s.push({id:e,changes:n}):(i.add(e),o.push(n))}return[o,s,r]}function Ul(e){function t(t,n){const r=zl(t,e);r in n.entities||(n.ids.push(r),n.entities[r]=t)}function n(e,n){e=Fl(e);for(const r of e)t(r,n)}function r(t,n){const r=zl(t,e);r in n.entities||n.ids.push(r),n.entities[r]=t}function a(e,t){let n=!1;e.forEach((e=>{e in t.entities&&(delete t.entities[e],n=!0)})),n&&(t.ids=t.ids.filter((e=>e in t.entities)))}function o(t,n){const r={},a={};t.forEach((e=>{e.id in n.entities&&(a[e.id]={id:e.id,changes:{...a[e.id]?.changes,...e.changes}})}));if((t=Object.values(a)).length>0){const a=t.filter((t=>function(t,n,r){const a=r.entities[n.id];if(void 0===a)return!1;const o=Object.assign({},a,n.changes),i=zl(o,e),s=i!==n.id;return s&&(t[n.id]=i,delete r.entities[n.id]),r.entities[i]=o,s}(r,t,n))).length>0;a&&(n.ids=Object.values(n.entities).map((t=>zl(t,e))))}}function i(t,r){const[a,i]=ql(t,e,r);n(a,r),o(i,r)}return{removeAll:Ll((function(e){Object.assign(e,{ids:[],entities:{}})})),addOne:Ml(t),addMany:Ml(n),setOne:Ml(r),setMany:Ml((function(e,t){e=Fl(e);for(const n of e)r(n,t)})),setAll:Ml((function(e,t){e=Fl(e),t.ids=[],t.entities={},n(e,t)})),updateOne:Ml((function(e,t){return o([e],t)})),updateMany:Ml(o),upsertOne:Ml((function(e,t){return i([e],t)})),upsertMany:Ml(i),removeOne:Ml((function(e,t){return a([e],t)})),removeMany:Ml(a)}}function Bl(e,t,n){const r=function(e,t,n){let r=0,a=e.length;for(;r<a;){let o=r+a>>>1;n(t,e[o])>=0?r=o+1:a=o}return r}(e,t,n);return e.splice(r,0,t),e}function Hl(e={}){const{selectId:t,sortComparer:n}={sortComparer:!1,selectId:e=>e.id,...e},r=n?function(e,t){const{removeOne:n,removeMany:r,removeAll:a}=Ul(e);function o(t,n,r){t=Fl(t);const a=new Set(r??Gl(n.ids)),o=t.filter((t=>!a.has(zl(t,e))));0!==o.length&&c(n,o)}function i(t,n){if(0!==(t=Fl(t)).length){for(const r of t)delete n.entities[e(r)];c(n,t)}}function s(t,n){let r=!1,a=!1;for(let o of t){const t=n.entities[o.id];if(!t)continue;r=!0,Object.assign(t,o.changes);const i=e(t);if(o.id!==i){a=!0,delete n.entities[o.id];const e=n.ids.indexOf(o.id);n.ids[e]=i,n.entities[i]=t}}r&&c(n,[],r,a)}function l(t,n){const[r,a,i]=ql(t,e,n);r.length&&o(r,n,i),a.length&&s(a,n)}const c=(n,r,a,o)=>{const i=Gl(n.entities),s=Gl(n.ids),l=n.entities;let c=s;o&&(c=new Set(s));let u=[];for(const e of c){const t=i[e];t&&u.push(t)}const d=0===u.length;for(const n of r)l[e(n)]=n,d||Bl(u,n,t);d?u=r.slice().sort(t):a&&u.sort(t);const p=u.map(e);(function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})(s,p)||(n.ids=p)};return{removeOne:n,removeMany:r,removeAll:a,addOne:Ml((function(e,t){return o([e],t)})),updateOne:Ml((function(e,t){return s([e],t)})),upsertOne:Ml((function(e,t){return l([e],t)})),setOne:Ml((function(e,t){return i([e],t)})),setMany:Ml(i),setAll:Ml((function(e,t){e=Fl(e),t.entities={},t.ids=[],o(e,t,[])})),addMany:Ml(o),updateMany:Ml(s),upsertMany:Ml(l)}}(t,n):Ul(t),a=function(e){return{getInitialState:function(t={},n){const r=Object.assign({ids:[],entities:{}},t);return n?e.setAll(r,n):r}}}(r),o={getSelectors:function(e,t={}){const{createSelector:n=Ms}=t,r=e=>e.ids,a=e=>e.entities,o=n(r,a,((e,t)=>e.map((e=>t[e])))),i=(e,t)=>t,s=(e,t)=>e[t],l=n(r,(e=>e.length));if(!e)return{selectIds:r,selectEntities:a,selectAll:o,selectTotal:l,selectById:n(a,i,s)};const c=n(e,a);return{selectIds:n(e,r),selectEntities:c,selectAll:n(e,o),selectTotal:n(e,l),selectById:n(c,i,s)}}};return{selectId:t,sortComparer:n,...a,...o,...r}}var Vl="listener",Wl="completed",Ql="cancelled",Kl=`task-${Ql}`,Jl=`task-${Wl}`,Xl=`${Vl}-${Ql}`,Yl=`${Vl}-${Wl}`,Zl=class{constructor(e){this.code=e,this.message=`task ${Ql} (reason: ${e})`}name="TaskAbortError";message},ec=(e,t)=>{if("function"!=typeof e)throw new TypeError(Oc(32))},tc=()=>{},nc=(e,t=tc)=>(e.catch(t),e),rc=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ac=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},oc=e=>{if(e.aborted){const{reason:t}=e;throw new Zl(t)}};function ic(e,t){let n=tc;return new Promise(((r,a)=>{const o=()=>a(new Zl(e.reason));e.aborted?o():(n=rc(e,o),t.finally((()=>n())).then(r,a))})).finally((()=>{n=tc}))}var sc=e=>t=>nc(ic(e,t).then((t=>(oc(e),t)))),lc=e=>{const t=sc(e);return e=>t(new Promise((t=>setTimeout(t,e))))},{assign:cc}=Object,uc={},dc="listenerMiddleware",pc=(e,t)=>(n,r)=>{ec(n);const a=new AbortController;var o;o=a,rc(e,(()=>ac(o,e.reason)));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(e){return{status:e instanceof Zl?"cancelled":"rejected",error:e}}finally{t?.()}})((async()=>{oc(e),oc(a.signal);const t=await n({pause:sc(a.signal),delay:lc(a.signal),signal:a.signal});return oc(a.signal),t}),(()=>ac(a,Jl)));return r?.autoJoin&&t.push(i.catch(tc)),{result:sc(e)(i),cancel(){ac(a,Kl)}}},fc=(e,t)=>(n,r)=>nc((async(n,r)=>{oc(t);let a=()=>{};const o=[new Promise(((t,r)=>{let o=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});a=()=>{o(),r()}}))];null!=r&&o.push(new Promise((e=>setTimeout(e,r,null))));try{const e=await ic(t,Promise.race(o));return oc(t),e}finally{a()}})(n,r)),hc=e=>{let{type:t,actionCreator:n,matcher:r,predicate:a,effect:o}=e;if(t)a=Gs(t).match;else if(n)t=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(Oc(21));return ec(o),{predicate:a,type:t,effect:o}},gc=cc((e=>{const{type:t,predicate:n,effect:r}=hc(e);return{id:Sl(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Oc(22))}}}),{withTypes:()=>gc}),mc=(e,t)=>{const{type:n,effect:r,predicate:a}=hc(t);return Array.from(e.values()).find((e=>("string"==typeof n?e.type===n:e.predicate===a)&&e.effect===r))},yc=e=>{e.pending.forEach((e=>{ac(e,Xl)}))},vc=(e,t,n)=>{try{e(t,n)}catch(e){setTimeout((()=>{throw e}),0)}},bc=cc(Gs(`${dc}/add`),{withTypes:()=>bc}),Sc=Gs(`${dc}/removeAll`),kc=cc(Gs(`${dc}/remove`),{withTypes:()=>kc}),wc=(...e)=>{console.error(`${dc}/error`,...e)},_c=(e={})=>{const t=new Map,{extra:n,onError:r=wc}=e;ec(r);const a=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),t?.cancelActive&&yc(e)}))(mc(t,e)??gc(e));cc(a,{withTypes:()=>a});const o=e=>{const n=mc(t,e);return n&&(n.unsubscribe(),e.cancelActive&&yc(n)),!!n};cc(o,{withTypes:()=>o});const i=async(e,o,i,s)=>{const l=new AbortController,c=fc(a,l.signal),u=[];try{e.pending.add(l),await Promise.resolve(e.effect(o,cc({},i,{getOriginalState:s,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:lc(l.signal),pause:sc(l.signal),extra:n,signal:l.signal,fork:pc(l.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach(((e,t,n)=>{e!==l&&(ac(e,Xl),n.delete(e))}))},cancel:()=>{ac(l,Xl),e.pending.delete(l)},throwIfCancelled:()=>{oc(l.signal)}})))}catch(e){e instanceof Zl||vc(r,e,{raisedBy:"effect"})}finally{await Promise.all(u),ac(l,Yl),e.pending.delete(l)}},s=(e=>()=>{e.forEach(yc),e.clear()})(t);return{middleware:e=>n=>l=>{if(!Et(l))return n(l);if(bc.match(l))return a(l.payload);if(Sc.match(l))return void s();if(kc.match(l))return o(l.payload);let c=e.getState();const u=()=>{if(c===uc)throw new Error(Oc(23));return c};let d;try{if(d=n(l),t.size>0){const n=e.getState(),a=Array.from(t.values());for(const t of a){let a=!1;try{a=t.predicate(l,n,c)}catch(e){a=!1,vc(r,e,{raisedBy:"predicate"})}a&&i(t,l,e,u)}}}finally{c=uc}return d},startListening:a,stopListening:o,clearListeners:s}},xc=e=>({middleware:e,applied:new Map}),Cc=()=>{const e=Sl(),t=new Map,n=Object.assign(Gs("dynamicMiddleware/add",((...t)=>({payload:t,meta:{instanceId:e}}))),{withTypes:()=>n}),r=Object.assign((function(...e){e.forEach((e=>{Qs(t,e,xc)}))}),{withTypes:()=>r}),a=pl(n,(e=>t=>t?.meta?.instanceId===e)(e));return{middleware:e=>n=>o=>a(o)?(r(...o.payload),e.dispatch):(e=>xt(...Array.from(t.values()).map((t=>Qs(t.applied,e,t.middleware)))))(e)(n)(o),addMiddleware:r,withMiddleware:n,instanceId:e}},Ec=e=>e.flatMap((e=>{return"reducerPath"in(t=e)&&"string"==typeof t.reducerPath?[[e.reducerPath,e.reducer]]:Object.entries(e);var t})),Ac=Symbol.for("rtk-state-proxy-original"),Ic=new WeakMap,Pc=(e,t,n)=>Qs(Ic,e,(()=>new Proxy(e,{get:(e,r,a)=>{if(r===Ac)return e;const o=Reflect.get(e,r,a);if(void 0===o){const e=n[r];if(void 0!==e)return e;const a=t[r];if(a){const e=a(void 0,{type:Sl()});if(void 0===e)throw new Error(Oc(24));return n[r]=e,e}}return o}}))),jc=e=>{if(!(t=e)||!t[Ac])throw new Error(Oc(25));var t;return e[Ac]},Rc={},Tc=(e=Rc)=>e;function Nc(...e){const t=Object.fromEntries(Ec(e)),n=()=>Object.keys(t).length?wt(t):Tc;let r=n();function a(e,t){return r(e,t)}a.withLazyLoadedSlices=()=>a;const o={},i=Object.assign((function(e,n){return function(r,...a){return e(Pc(n?n(r,...a):r,t,o),...a)}}),{original:jc});return Object.assign(a,{inject:(e,i={})=>{const{reducerPath:s,reducer:l}=e,c=t[s];return!i.overrideExisting&&c&&c!==l||(i.overrideExisting&&c!==l&&delete o[s],t[s]=l,r=n()),a},selector:i})}function Oc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $c=Ds.isPlainObject;function Dc(e,t){if(e===t||!($c(e)&&$c(t)||Array.isArray(e)&&Array.isArray(t)))return t;const n=Object.keys(t),r=Object.keys(e);let a=n.length===r.length;const o=Array.isArray(t)?[]:{};for(const r of n)o[r]=Dc(e[r],t[r]),a&&(a=e[r]===o[r]);return a?e:o}function Lc(e){let t=0;for(const n in e)t++;return t}var Mc=e=>[].concat(...e);function zc(e){return null!=e}var Fc=class{constructor(e,t=void 0){this.value=e,this.meta=t}},Gc=Gs("__rtkq/focused"),qc=Gs("__rtkq/unfocused"),Uc=Gs("__rtkq/online"),Bc=Gs("__rtkq/offline");function Hc(e){return"query"===e.type}function Vc(e){return"mutation"===e.type}function Wc(e){return"infinitequery"===e.type}function Qc(e){return Hc(e)||Wc(e)}function Kc(e,t,n,r,a,o){return function(e){return"function"==typeof e}(e)?e(t,n,r,a).filter(zc).map(Jc).map(o):Array.isArray(e)?e.map(Jc).map(o):[]}function Jc(e){return"string"==typeof e?{type:e}:e}var Xc=Symbol("forceQueryFn"),Yc=e=>"function"==typeof e[Xc];var Zc=class extends Es{constructor(e,t,n,r){super(e),this.value=t,this.schemaName=n,this._bqMeta=r}};async function eu(e,t,n,r){const a=await e["~standard"].validate(t);if(a.issues)throw new Zc(a.issues,t,n,r);return a.value}function tu(e){return e}var nu=(e={})=>({...e,[nl]:!0});function ru(e,{pages:t,pageParams:n},r){const a=t.length-1;return e.getNextPageParam(t[a],t,n[a],n,r)}function au(e,{pages:t,pageParams:n},r){return e.getPreviousPageParam?.(t[0],t,n[0],n,r)}function ou(e,t,n,r){return Kc(n[e.meta.arg.endpointName][t],vl(e)?e.payload:void 0,yl(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,r)}function iu(e,t,n){const r=e[t];r&&n(r)}function su(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function lu(e,t,n){const r=e[su(t)];r&&n(r)}var cu={};function uu({reducerPath:e,queryThunk:t,mutationThunk:n,serializeQueryArgs:r,context:{endpointDefinitions:a,apiUid:o,extractRehydrationInfo:i,hasRehydrationInfo:s},assertTagType:l,config:c}){const u=Gs(`${e}/resetApiState`);function d(e,t,n,r){e[t.queryCacheKey]??={status:"uninitialized",endpointName:t.endpointName},iu(e,t.queryCacheKey,(e=>{e.status="pending",e.requestId=n&&e.requestId?e.requestId:r.requestId,void 0!==t.originalArgs&&(e.originalArgs=t.originalArgs),e.startedTimeStamp=r.startedTimeStamp;Wc(a[r.arg.endpointName])&&"direction"in t&&(e.direction=t.direction)}))}function p(e,t,n,r){iu(e,t.arg.queryCacheKey,(e=>{if(e.requestId!==t.requestId&&!r)return;const{merge:o}=a[t.arg.endpointName];if(e.status="fulfilled",o)if(void 0!==e.data){const{fulfilledTimeStamp:r,arg:a,baseQueryMeta:i,requestId:s}=t;let l=kn(e.data,(e=>o(e,n,{arg:a.originalArgs,baseQueryMeta:i,fulfilledTimeStamp:r,requestId:s})));e.data=l}else e.data=n;else e.data=a[t.arg.endpointName].structuralSharing??1?Dc(Nt(e.data)?Lt(e.data):e.data,n):n;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp}))}const f=Ol({name:`${e}/queries`,initialState:cu,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:rl()},cacheEntriesUpserted:{reducer(e,t){for(const n of t.payload){const{queryDescription:r,value:a}=n;d(e,r,!0,{arg:r,requestId:t.meta.requestId,startedTimeStamp:t.meta.timestamp}),p(e,{arg:r,requestId:t.meta.requestId,fulfilledTimeStamp:t.meta.timestamp,baseQueryMeta:{}},a,!0)}},prepare:e=>({payload:e.map((e=>{const{endpointName:t,arg:n,value:o}=e,i=a[t];return{queryDescription:{type:"query",endpointName:t,originalArgs:e.arg,queryCacheKey:r({queryArgs:n,endpointDefinition:i,endpointName:t})},value:o}})),meta:{[nl]:!0,requestId:Sl(),timestamp:Date.now()}})},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:n}}){iu(e,t,(e=>{e.data=_n(e.data,n.concat())}))},prepare:rl()}},extraReducers(e){e.addCase(t.pending,((e,{meta:t,meta:{arg:n}})=>{d(e,n,Yc(n),t)})).addCase(t.fulfilled,((e,{meta:t,payload:n})=>{p(e,t,n,Yc(t.arg))})).addCase(t.rejected,((e,{meta:{condition:t,arg:n,requestId:r},error:a,payload:o})=>{iu(e,n.queryCacheKey,(e=>{if(t);else{if(e.requestId!==r)return;e.status="rejected",e.error=o??a}}))})).addMatcher(s,((e,t)=>{const{queries:n}=i(t);for(const[t,r]of Object.entries(n))"fulfilled"!==r?.status&&"rejected"!==r?.status||(e[t]=r)}))}}),h=Ol({name:`${e}/mutations`,initialState:cu,reducers:{removeMutationResult:{reducer(e,{payload:t}){const n=su(t);n in e&&delete e[n]},prepare:rl()}},extraReducers(e){e.addCase(n.pending,((e,{meta:t,meta:{requestId:n,arg:r,startedTimeStamp:a}})=>{r.track&&(e[su(t)]={requestId:n,status:"pending",endpointName:r.endpointName,startedTimeStamp:a})})).addCase(n.fulfilled,((e,{payload:t,meta:n})=>{n.arg.track&&lu(e,n,(e=>{e.requestId===n.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=n.fulfilledTimeStamp)}))})).addCase(n.rejected,((e,{payload:t,error:n,meta:r})=>{r.arg.track&&lu(e,r,(e=>{e.requestId===r.requestId&&(e.status="rejected",e.error=t??n)}))})).addMatcher(s,((e,t)=>{const{mutations:n}=i(t);for(const[t,r]of Object.entries(n))"fulfilled"!==r?.status&&"rejected"!==r?.status||t===r?.requestId||(e[t]=r)}))}}),g=Ol({name:`${e}/invalidation`,initialState:{tags:{},keys:{}},reducers:{updateProvidedBy:{reducer(e,t){for(const{queryCacheKey:n,providedTags:r}of t.payload){m(e,n);for(const{type:t,id:a}of r){const r=(e.tags[t]??={})[a||"__internal_without_id"]??=[];r.includes(n)||r.push(n)}e.keys[n]=r}},prepare:rl()}},extraReducers(e){e.addCase(f.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{m(e,t)})).addMatcher(s,((e,t)=>{const{provided:n}=i(t);for(const[t,r]of Object.entries(n))for(const[n,a]of Object.entries(r)){const r=(e.tags[t]??={})[n||"__internal_without_id"]??=[];for(const e of a){r.includes(e)||r.push(e)}}})).addMatcher(dl(vl(t),yl(t)),((e,t)=>{y(e,[t])})).addMatcher(f.actions.cacheEntriesUpserted.match,((e,t)=>{y(e,t.payload.map((({queryDescription:e,value:t})=>({type:"UNKNOWN",payload:t,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:e}}))))}))}});function m(e,t){const n=e.keys[t]??[];for(const r of n){const n=r.type,a=r.id??"__internal_without_id",o=e.tags[n]?.[a];o&&(e.tags[n][a]=o.filter((e=>e!==t)))}delete e.keys[t]}function y(e,t){const n=t.map((e=>{const t=ou(e,"providesTags",a,l),{queryCacheKey:n}=e.meta.arg;return{queryCacheKey:n,providedTags:t}}));g.caseReducers.updateProvidedBy(e,g.actions.updateProvidedBy(n))}const v=Ol({name:`${e}/subscriptions`,initialState:cu,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),b=Ol({name:`${e}/internalSubscriptions`,initialState:cu,reducers:{subscriptionsUpdated:{reducer:(e,t)=>_n(e,t.payload),prepare:rl()}}}),S=Ol({name:`${e}/config`,initialState:{online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine,focused:"undefined"==typeof document||"hidden"!==document.visibilityState,middlewareRegistered:!1,...c},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered="conflict"!==e.middlewareRegistered&&o===t||"conflict"}},extraReducers:e=>{e.addCase(Uc,(e=>{e.online=!0})).addCase(Bc,(e=>{e.online=!1})).addCase(Gc,(e=>{e.focused=!0})).addCase(qc,(e=>{e.focused=!1})).addMatcher(s,(e=>({...e})))}}),k=(0,Ds.combineReducers)({queries:f.reducer,mutations:h.reducer,provided:g.reducer,subscriptions:b.reducer,config:S.reducer});return{reducer:(e,t)=>k(u.match(t)?void 0:e,t),actions:{...S.actions,...f.actions,...v.actions,...b.actions,...h.actions,...g.actions,resetApiState:u}}}var du=Symbol.for("RTKQ/skipToken"),pu={status:"uninitialized"},fu=kn(pu,(()=>{})),hu=kn(pu,(()=>{}));var gu=WeakMap?new WeakMap:void 0,mu=({endpointName:e,queryArgs:t})=>{let n="";const r=gu?.get(t);if("string"==typeof r)n=r;else{const e=JSON.stringify(t,((e,t)=>(t="bigint"==typeof t?{$bigint:t.toString()}:t,t=(0,Ds.isPlainObject)(t)?Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}):t)));(0,Ds.isPlainObject)(t)&&gu?.set(t,e),n=e}return`${e}(${n})`};function yu(...e){return function(t){const n=jn((e=>t.extractRehydrationInfo?.(e,{reducerPath:t.reducerPath??"api"}))),r={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:n,serializeQueryArgs(e){let n=mu;if("serializeQueryArgs"in e.endpointDefinition){const t=e.endpointDefinition.serializeQueryArgs;n=e=>{const n=t(e);return"string"==typeof n?n:mu({...e,queryArgs:n})}}else t.serializeQueryArgs&&(n=t.serializeQueryArgs);return n(e)},tagTypes:[...t.tagTypes||[]]},a={endpointDefinitions:{},batch(e){e()},apiUid:Sl(),extractRehydrationInfo:n,hasRehydrationInfo:jn((e=>null!=n(e)))},o={injectEndpoints:function(e){const t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"}),infiniteQuery:e=>({...e,type:"infinitequery"})});for(const[n,r]of Object.entries(t))if(!0!==e.overrideExisting&&n in a.endpointDefinitions){if("throw"===e.overrideExisting)throw new Error(Oc(39))}else{0,a.endpointDefinitions[n]=r;for(const e of i)e.injectEndpoint(n,r)}return o},enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(const t of e)r.tagTypes.includes(t)||r.tagTypes.push(t);if(t)for(const[e,n]of Object.entries(t))"function"==typeof n?n(a.endpointDefinitions[e]):Object.assign(a.endpointDefinitions[e]||{},n);return o}},i=e.map((e=>e.init(o,r,a)));return o.injectEndpoints({endpoints:t.endpoints})}}function vu(e,...t){return Object.assign(e,...t)}var bu=({api:e,queryThunk:t,internalState:n})=>{const r=`${e.reducerPath}/subscriptions`;let a=null,o=null;const{updateSubscriptionOptions:i,unsubscribeQueryResult:s}=e.internalActions,l=()=>n.currentSubscriptions,c={getSubscriptions:l,getSubscriptionCount:e=>Lc(l()[e]??{}),isRequestSubscribed:(e,t)=>{const n=l();return!!n?.[e]?.[t]}};return(l,u)=>{if(a||(a=JSON.parse(JSON.stringify(n.currentSubscriptions))),e.util.resetApiState.match(l))return a=n.currentSubscriptions={},o=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(l))return[!1,c];const d=((n,r)=>{if(i.match(r)){const{queryCacheKey:e,requestId:t,options:a}=r.payload;return n?.[e]?.[t]&&(n[e][t]=a),!0}if(s.match(r)){const{queryCacheKey:e,requestId:t}=r.payload;return n[e]&&delete n[e][t],!0}if(e.internalActions.removeQueryResult.match(r))return delete n[r.payload.queryCacheKey],!0;if(t.pending.match(r)){const{meta:{arg:e,requestId:t}}=r,a=n[e.queryCacheKey]??={};return a[`${t}_running`]={},e.subscribe&&(a[t]=e.subscriptionOptions??a[t]??{}),!0}let a=!1;if(t.fulfilled.match(r)||t.rejected.match(r)){const e=n[r.meta.arg.queryCacheKey]||{},t=`${r.meta.requestId}_running`;a||=!!e[t],delete e[t]}if(t.rejected.match(r)){const{meta:{condition:e,arg:t,requestId:o}}=r;if(e&&t.subscribe){const e=n[t.queryCacheKey]??={};e[o]=t.subscriptionOptions??e[o]??{},a=!0}}return a})(n.currentSubscriptions,l);let p=!0;if(d){o||(o=setTimeout((()=>{const t=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,r]=wn(a,(()=>t));u.next(e.internalActions.subscriptionsUpdated(r)),a=t,o=null}),500));const i="string"==typeof l.type&&!!l.type.startsWith(r),s=t.rejected.match(l)&&l.meta.condition&&!!l.meta.arg.subscribe;p=!i&&!s}return[p,!1]}};var Su=({reducerPath:e,api:t,queryThunk:n,context:r,internalState:a,selectors:{selectQueryEntry:o,selectConfig:i}})=>{const{removeQueryResult:s,unsubscribeQueryResult:l,cacheEntriesUpserted:c}=t.internalActions,u=dl(l.match,n.fulfilled,n.rejected,c.match);function d(e){const t=a.currentSubscriptions[e];return!!t&&!function(e){for(const t in e)return!1;return!0}(t)}const p={};function f(e,t,n){const r=t.getState();for(const a of e){const e=o(r,a);h(a,e?.endpointName,t,n)}}function h(e,t,n,a){const o=r.endpointDefinitions[t],i=o?.keepUnusedDataFor??a.keepUnusedDataFor;if(i===1/0)return;const l=Math.max(0,Math.min(i,2147482.647));if(!d(e)){const t=p[e];t&&clearTimeout(t),p[e]=setTimeout((()=>{d(e)||n.dispatch(s({queryCacheKey:e})),delete p[e]}),1e3*l)}}return(e,n,a)=>{const o=n.getState(),s=i(o);if(u(e)){let t;if(c.match(e))t=e.payload.map((e=>e.queryDescription.queryCacheKey));else{const{queryCacheKey:n}=l.match(e)?e.payload:e.meta.arg;t=[n]}f(t,n,s)}if(t.util.resetApiState.match(e))for(const[e,t]of Object.entries(p))t&&clearTimeout(t),delete p[e];if(r.hasRehydrationInfo(e)){const{queries:t}=r.extractRehydrationInfo(e);f(Object.keys(t),n,s)}}},ku=new Error("Promise never resolved before cacheEntryRemoved."),wu=({api:e,reducerPath:t,context:n,queryThunk:r,mutationThunk:a,internalState:o,selectors:{selectQueryEntry:i,selectApiState:s}})=>{const l=bl(r),c=bl(a),u=vl(r,a),d={};function p(e,t,n){const r=d[e];r?.valueResolved&&(r.valueResolved({data:t,meta:n}),delete r.valueResolved)}function f(e){const t=d[e];t&&(delete d[e],t.cacheEntryRemoved())}function h(t,r,a,o,i){const s=n.endpointDefinitions[t],l=s?.onCacheEntryAdded;if(!l)return;const c={},u=new Promise((e=>{c.cacheEntryRemoved=e})),p=Promise.race([new Promise((e=>{c.valueResolved=e})),u.then((()=>{throw ku}))]);p.catch((()=>{})),d[a]=c;const f=e.endpoints[t].select(Qc(s)?r:a),h=o.dispatch(((e,t,n)=>n)),g={...o,getCacheEntry:()=>f(o.getState()),requestId:i,extra:h,updateCachedData:Qc(s)?n=>o.dispatch(e.util.updateQueryData(t,r,n)):void 0,cacheDataLoaded:p,cacheEntryRemoved:u},m=l(r,g);Promise.resolve(m).catch((e=>{if(e!==ku)throw e}))}return(n,o,s)=>{const g=function(t){if(l(t))return t.meta.arg.queryCacheKey;if(c(t))return t.meta.arg.fixedCacheKey??t.meta.requestId;return e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?su(t.payload):""}(n);function m(e,t,n,r){const a=i(s,t),l=i(o.getState(),t);!a&&l&&h(e,r,t,o,n)}if(r.pending.match(n))m(n.meta.arg.endpointName,g,n.meta.requestId,n.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(n))for(const{queryDescription:e,value:t}of n.payload){const{endpointName:r,originalArgs:a,queryCacheKey:o}=e;m(r,o,n.meta.requestId,a),p(o,t,{})}else if(a.pending.match(n)){o.getState()[t].mutations[g]&&h(n.meta.arg.endpointName,n.meta.arg.originalArgs,g,o,n.meta.requestId)}else if(u(n))p(g,n.payload,n.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(n)||e.internalActions.removeMutationResult.match(n))f(g);else if(e.util.resetApiState.match(n))for(const e of Object.keys(d))f(e)}},_u=({api:e,context:{apiUid:t},reducerPath:n})=>(n,r)=>{e.util.resetApiState.match(n)&&r.dispatch(e.internalActions.middlewareRegistered(t))},xu=({reducerPath:e,context:t,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:a,api:o,assertTagType:i,refetchQuery:s,internalState:l})=>{const{removeQueryResult:c}=o.internalActions,u=dl(vl(r),yl(r)),d=dl(vl(r,a),ml(r,a));let p=[];function f(n,r){const a=r.getState(),i=a[e];if(p.push(...n),"delayed"===i.config.invalidationBehavior&&function(e){const{queries:t,mutations:n}=e;for(const e of[t,n])for(const t in e)if("pending"===e[t]?.status)return!0;return!1}(i))return;const u=p;if(p=[],0===u.length)return;const d=o.util.selectInvalidatedBy(a,u);t.batch((()=>{const e=Array.from(d.values());for(const{queryCacheKey:t}of e){const e=i.queries[t],n=l.currentSubscriptions[t]??{};e&&(0===Lc(n)?r.dispatch(c({queryCacheKey:t})):"uninitialized"!==e.status&&r.dispatch(s(e)))}}))}return(e,t)=>{u(e)?f(ou(e,"invalidatesTags",n,i),t):d(e)?f([],t):o.util.invalidateTags.match(e)&&f(Kc(e.payload,void 0,void 0,void 0,void 0,i),t)}},Cu=({reducerPath:e,queryThunk:t,api:n,refetchQuery:r,internalState:a})=>{const o={};function i({queryCacheKey:t},n){const s=n.getState()[e],l=s.queries[t],u=a.currentSubscriptions[t];if(!l||"uninitialized"===l.status)return;const{lowestPollingInterval:d,skipPollingIfUnfocused:p}=c(u);if(!Number.isFinite(d))return;const f=o[t];f?.timeout&&(clearTimeout(f.timeout),f.timeout=void 0);const h=Date.now()+d;o[t]={nextPollTimestamp:h,pollingInterval:d,timeout:setTimeout((()=>{!s.config.focused&&p||n.dispatch(r(l)),i({queryCacheKey:t},n)}),d)}}function s({queryCacheKey:t},n){const r=n.getState()[e].queries[t],s=a.currentSubscriptions[t];if(!r||"uninitialized"===r.status)return;const{lowestPollingInterval:u}=c(s);if(!Number.isFinite(u))return void l(t);const d=o[t],p=Date.now()+u;(!d||p<d.nextPollTimestamp)&&i({queryCacheKey:t},n)}function l(e){const t=o[e];t?.timeout&&clearTimeout(t.timeout),delete o[e]}function c(e={}){let t=!1,n=Number.POSITIVE_INFINITY;for(let r in e)e[r].pollingInterval&&(n=Math.min(e[r].pollingInterval,n),t=e[r].skipPollingIfUnfocused||t);return{lowestPollingInterval:n,skipPollingIfUnfocused:t}}return(e,r)=>{(n.internalActions.updateSubscriptionOptions.match(e)||n.internalActions.unsubscribeQueryResult.match(e))&&s(e.payload,r),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&s(e.meta.arg,r),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&i(e.meta.arg,r),n.util.resetApiState.match(e)&&function(){for(const e of Object.keys(o))l(e)}()}},Eu=({api:e,context:t,queryThunk:n,mutationThunk:r})=>{const a=gl(n,r),o=ml(n,r),i=vl(n,r),s={};return(n,r)=>{if(a(n)){const{requestId:a,arg:{endpointName:o,originalArgs:i}}=n.meta,l=t.endpointDefinitions[o],c=l?.onQueryStarted;if(c){const t={},n=new Promise(((e,n)=>{t.resolve=e,t.reject=n}));n.catch((()=>{})),s[a]=t;const u=e.endpoints[o].select(Qc(l)?i:a),d=r.dispatch(((e,t,n)=>n)),p={...r,getCacheEntry:()=>u(r.getState()),requestId:a,extra:d,updateCachedData:Qc(l)?t=>r.dispatch(e.util.updateQueryData(o,i,t)):void 0,queryFulfilled:n};c(i,p)}}else if(i(n)){const{requestId:e,baseQueryMeta:t}=n.meta;s[e]?.resolve({data:n.payload,meta:t}),delete s[e]}else if(o(n)){const{requestId:e,rejectedWithValue:t,baseQueryMeta:r}=n.meta;s[e]?.reject({error:n.payload??n.error,isUnhandledError:!t,meta:r}),delete s[e]}}};function Au(e){const{reducerPath:t,queryThunk:n,api:r,context:a}=e,{apiUid:o}=a,i={invalidateTags:Gs(`${t}/invalidateTags`)},s=e=>e.type.startsWith(`${t}/`),l=[_u,Su,xu,Cu,wu,Eu];return{middleware:n=>{let i=!1;const u={...e,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:s},d=l.map((e=>e(u))),p=bu(u),f=(({reducerPath:e,context:t,api:n,refetchQuery:r,internalState:a})=>{const{removeQueryResult:o}=n.internalActions;function i(n,i){const s=n.getState()[e],l=s.queries,c=a.currentSubscriptions;t.batch((()=>{for(const e of Object.keys(c)){const t=l[e],a=c[e];a&&t&&((Object.values(a).some((e=>!0===e[i]))||Object.values(a).every((e=>void 0===e[i]))&&s.config[i])&&(0===Lc(a)?n.dispatch(o({queryCacheKey:e})):"uninitialized"!==t.status&&n.dispatch(r(t))))}}))}return(e,t)=>{Gc.match(e)&&i(t,"refetchOnFocus"),Uc.match(e)&&i(t,"refetchOnReconnect")}})(u);return e=>l=>{if(!(0,Ds.isAction)(l))return e(l);i||(i=!0,n.dispatch(r.internalActions.middlewareRegistered(o)));const c={...n,next:e},u=n.getState(),[h,g]=p(l,c,u);let m;if(m=h?e(l):g,n.getState()[t]&&(f(l,c,u),s(l)||a.hasRehydrationInfo(l)))for(const e of d)e(l,c,u);return m}},actions:i};function c(t){return e.api.endpoints[t.endpointName].initiate(t.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Iu=Symbol(),Pu=Symbol();function ju(e,t,n,r){const a=Ce.useMemo((()=>({queryArgs:e,serialized:"object"==typeof e?t({queryArgs:e,endpointDefinition:n,endpointName:r}):e})),[e,t,n,r]),o=Ce.useRef(a);return Ce.useEffect((()=>{o.current.serialized!==a.serialized&&(o.current=a)}),[a]),o.current.serialized===a.serialized?o.current.queryArgs:e}function Ru(e){const t=Ce.useRef(e);return Ce.useEffect((()=>{et(t.current,e)||(t.current=e)}),[e]),et(t.current,e)?t.current:e}var Tu=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Nu=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Ou=(()=>Tu||Nu?Ce.useLayoutEffect:Ce.useEffect)(),$u=e=>e.isUninitialized?{...e,isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:"pending"}:e;function Du(e,...t){const n={};return t.forEach((t=>{n[t]=e[t]})),n}var Lu=["data","status","isLoading","isSuccess","isError","error"];var Mu=Symbol(),zu=yu((({createSelector:e=Tn}={})=>({name:Iu,init(t,{baseQuery:n,tagTypes:r,reducerPath:a,serializeQueryArgs:o,keepUnusedDataFor:i,refetchOnMountOrArgChange:s,refetchOnFocus:l,refetchOnReconnect:c,invalidationBehavior:u,onSchemaFailure:d,catchSchemaFailure:p,skipSchemaValidation:f},h){bn();const g=e=>e;Object.assign(t,{reducerPath:a,endpoints:{},internalActions:{onOnline:Uc,onOffline:Bc,onFocus:Gc,onFocusLost:qc},util:{}});const m=function({serializeQueryArgs:e,reducerPath:t,createSelector:n}){const r=e=>fu,a=e=>hu;return{buildQuerySelector:function(e,t){return c(e,t,o)},buildInfiniteQuerySelector:function(e,t){const{infiniteQueryOptions:n}=t;return c(e,t,(function(e){const t={...e,...Ts(e.status)},{isLoading:r,isError:a,direction:o}=t,i="forward"===o,s="backward"===o;return{...t,hasNextPage:u(n,t.data,t.originalArgs),hasPreviousPage:d(n,t.data,t.originalArgs),isFetchingNextPage:r&&i,isFetchingPreviousPage:r&&s,isFetchNextPageError:a&&i,isFetchPreviousPageError:a&&s}}))},buildMutationSelector:function(){return e=>{let t;return t="object"==typeof e?su(e)??du:e,n(t===du?a:e=>i(e)?.mutations?.[t]??hu,o)}},selectInvalidatedBy:function(e,n){const r=e[t],a=new Set;for(const e of n.filter(zc).map(Jc)){const t=r.provided.tags[e.type];if(!t)continue;let n=(void 0!==e.id?t[e.id]:Mc(Object.values(t)))??[];for(const e of n)a.add(e)}return Mc(Array.from(a.values()).map((e=>{const t=r.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))},selectCachedArgsForQuery:function(e,t){return Object.values(s(e)).filter((e=>e?.endpointName===t&&"uninitialized"!==e.status)).map((e=>e.originalArgs))},selectApiState:i,selectQueries:s,selectMutations:function(e){return i(e)?.mutations},selectQueryEntry:l,selectConfig:function(e){return i(e)?.config}};function o(e){return{...e,...Ts(e.status)}}function i(e){return e[t]}function s(e){return i(e)?.queries}function l(e,t){return s(e)?.[t]}function c(t,a,o){return i=>{if(i===du)return n(r,o);const s=e({queryArgs:i,endpointDefinition:a,endpointName:t});return n((e=>l(e,s)??fu),o)}}function u(e,t,n){return!!t&&null!=ru(e,t,n)}function d(e,t,n){return!(!t||!e.getPreviousPageParam)&&null!=au(e,t,n)}}({serializeQueryArgs:o,reducerPath:a,createSelector:e}),{selectInvalidatedBy:y,selectCachedArgsForQuery:v,buildQuerySelector:b,buildInfiniteQuerySelector:S,buildMutationSelector:k}=m;vu(t.util,{selectInvalidatedBy:y,selectCachedArgsForQuery:v});const{queryThunk:w,infiniteQueryThunk:_,mutationThunk:x,patchQueryData:C,updateQueryData:E,upsertQueryData:A,prefetch:I,buildMatchThunkActions:P}=function({reducerPath:e,baseQuery:t,context:{endpointDefinitions:n},serializeQueryArgs:r,api:a,assertTagType:o,selectors:i,onSchemaFailure:s,catchSchemaFailure:l,skipSchemaValidation:c}){function u(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}function d(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}const p=(e,t)=>e.query&&e[t]?e[t]:tu,f=async(e,{signal:r,abort:a,rejectWithValue:o,fulfillWithValue:f,dispatch:g,getState:m,extra:y})=>{const v=n[e.endpointName],{metaSchema:b,skipSchemaValidation:S=c}=v;try{let k=p(v,"transformResponse");const w={signal:r,abort:a,dispatch:g,getState:m,extra:y,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?h(e,m()):void 0,queryCacheKey:"query"===e.type?e.queryCacheKey:void 0},_="query"===e.type?e[Xc]:void 0;let x;const C=async(t,n,r,a)=>{if(null==n&&t.pages.length)return Promise.resolve({data:t});const o={queryArg:e.originalArgs,pageParam:n},i=await E(o),s=a?u:d;return{data:{pages:s(t.pages,i.data,r),pageParams:s(t.pageParams,n,r)},meta:i.meta}};async function E(e){let n;const{extraOptions:r,argSchema:a,rawResponseSchema:o,responseSchema:i}=v;if(a&&!S&&(e=await eu(a,e,"argSchema",{})),n=_?_():v.query?await t(v.query(e),w,r):await v.queryFn(e,w,r,(e=>t(e,w,r))),n.error)throw new Fc(n.error,n.meta);let{data:s}=n;o&&!S&&(s=await eu(o,n.data,"rawResponseSchema",n.meta));let l=await k(s,n.meta,e);return i&&!S&&(l=await eu(i,l,"responseSchema",n.meta)),{...n,data:l}}if("query"===e.type&&"infiniteQueryOptions"in v){const{infiniteQueryOptions:A}=v,{maxPages:I=1/0}=A;let P;const j={pages:[],pageParams:[]},R=i.selectQueryEntry(m(),e.queryCacheKey)?.data,T=h(e,m())&&!e.direction||!R?j:R;if("direction"in e&&e.direction&&T.pages.length){const N="backward"===e.direction,O=(N?au:ru)(A,T,e.originalArgs);P=await C(T,O,I,N)}else{const{initialPageParam:$=A.initialPageParam}=e,D=R?.pageParams??[],L=D[0]??$,M=D.length;P=await C(T,L,I),_&&(P={data:P.data.pages[0]});for(let z=1;z<M;z++){const F=ru(A,P.data,e.originalArgs);P=await C(P.data,F,I)}}x=P}else x=await E(e.originalArgs);return b&&!S&&x.meta&&(x.meta=await eu(b,x.meta,"metaSchema",x.meta)),f(x.data,nu({fulfilledTimeStamp:Date.now(),baseQueryMeta:x.meta}))}catch(G){let q=G;if(q instanceof Fc){let U=p(v,"transformErrorResponse");const{rawErrorResponseSchema:B,errorResponseSchema:H}=v;let{value:V,meta:W}=q;try{B&&!S&&(V=await eu(B,V,"rawErrorResponseSchema",W)),b&&!S&&(W=await eu(b,W,"metaSchema",W));let Q=await U(V,W,e.originalArgs);return H&&!S&&(Q=await eu(H,Q,"errorResponseSchema",W)),o(Q,nu({baseQueryMeta:W}))}catch(K){q=K}}try{if(q instanceof Zc){const J={endpoint:e.endpointName,arg:e.originalArgs,type:e.type,queryCacheKey:"query"===e.type?e.queryCacheKey:void 0};v.onSchemaFailure?.(q,J),s?.(q,J);const{catchSchemaFailure:X=l}=v;if(X)return o(X(q,J),nu({baseQueryMeta:q._bqMeta}))}}catch(Y){q=Y}throw console.error(q),q}};function h(e,t){const n=i.selectQueryEntry(t,e.queryCacheKey),r=i.selectConfig(t).refetchOnMountOrArgChange,a=n?.fulfilledTimeStamp,o=e.forceRefetch??(e.subscribe&&r);return!!o&&(!0===o||(Number(new Date)-Number(a))/1e3>=o)}const g=()=>El(`${e}/executeQuery`,f,{getPendingMeta({arg:e}){const t=n[e.endpointName];return nu({startedTimeStamp:Date.now(),...Wc(t)?{direction:e.direction}:{}})},condition(e,{getState:t}){const r=t(),a=i.selectQueryEntry(r,e.queryCacheKey),o=a?.fulfilledTimeStamp,s=e.originalArgs,l=a?.originalArgs,c=n[e.endpointName],u=e.direction;return!(!Yc(e)&&("pending"===a?.status||!h(e,r)&&(!Hc(c)||!c?.forceRefetch?.({currentArg:s,previousArg:l,endpointState:a,state:r}))&&o&&!u))},dispatchConditionRejection:!0}),m=g(),y=g(),v=El(`${e}/executeMutation`,f,{getPendingMeta:()=>nu({startedTimeStamp:Date.now()})});function b(e){return t=>t?.meta?.arg?.endpointName===e}return{queryThunk:m,mutationThunk:v,infiniteQueryThunk:y,prefetch:(e,t,n)=>(r,o)=>{const i=(e=>"force"in e)(n)&&n.force,s=(e=>"ifOlderThan"in e)(n)&&n.ifOlderThan,l=(n=!0)=>{const r={forceRefetch:n,isPrefetch:!0};return a.endpoints[e].initiate(t,r)},c=a.endpoints[e].select(t)(o());if(i)r(l());else if(s){const e=c?.fulfilledTimeStamp;if(!e)return void r(l());(Number(new Date)-Number(new Date(e)))/1e3>=s&&r(l())}else r(l(!1))},updateQueryData:(e,t,n,r=!0)=>(o,i)=>{const s=a.endpoints[e].select(t)(i()),l={patches:[],inversePatches:[],undo:()=>o(a.util.patchQueryData(e,t,l.inversePatches,r))};if("uninitialized"===s.status)return l;let c;if("data"in s)if(Ot(s.data)){const[e,t,r]=wn(s.data,n);l.patches.push(...t),l.inversePatches.push(...r),c=e}else c=n(s.data),l.patches.push({op:"replace",path:[],value:c}),l.inversePatches.push({op:"replace",path:[],value:s.data});return 0===l.patches.length||o(a.util.patchQueryData(e,t,l.patches,r)),l},upsertQueryData:(e,t,n)=>r=>r(a.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[Xc]:()=>({data:n})})),patchQueryData:(e,t,i,s)=>(l,c)=>{const u=n[e],d=r({queryArgs:t,endpointDefinition:u,endpointName:e});if(l(a.internalActions.queryResultPatched({queryCacheKey:d,patches:i})),!s)return;const p=a.endpoints[e].select(t)(c()),f=Kc(u.providesTags,p.data,void 0,t,{},o);l(a.internalActions.updateProvidedBy([{queryCacheKey:d,providedTags:f}]))},buildMatchThunkActions:function(e,t){return{matchPending:pl(gl(e),b(t)),matchFulfilled:pl(vl(e),b(t)),matchRejected:pl(ml(e),b(t))}}}}({baseQuery:n,reducerPath:a,context:h,api:t,serializeQueryArgs:o,assertTagType:g,selectors:m,onSchemaFailure:d,catchSchemaFailure:p,skipSchemaValidation:f}),{reducer:j,actions:R}=uu({context:h,queryThunk:w,infiniteQueryThunk:_,mutationThunk:x,serializeQueryArgs:o,reducerPath:a,assertTagType:g,config:{refetchOnFocus:l,refetchOnReconnect:c,refetchOnMountOrArgChange:s,keepUnusedDataFor:i,reducerPath:a,invalidationBehavior:u}});vu(t.util,{patchQueryData:C,updateQueryData:E,upsertQueryData:A,prefetch:I,resetApiState:R.resetApiState,upsertQueryEntries:R.cacheEntriesUpserted}),vu(t.internalActions,R);const{middleware:T,actions:N}=Au({reducerPath:a,context:h,queryThunk:w,mutationThunk:x,infiniteQueryThunk:_,api:t,assertTagType:g,selectors:m});vu(t.util,N),vu(t,{reducer:j,middleware:T});const{buildInitiateQuery:O,buildInitiateInfiniteQuery:$,buildInitiateMutation:D,getRunningMutationThunk:L,getRunningMutationsThunk:M,getRunningQueriesThunk:z,getRunningQueryThunk:F}=function({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:n,mutationThunk:r,api:a,context:o}){const i=new Map,s=new Map,{unsubscribeQueryResult:l,removeMutationResult:c,updateSubscriptionOptions:u}=a.internalActions;return{buildInitiateQuery:function(e,t){return d(e,t)},buildInitiateInfiniteQuery:function(e,t){return d(e,t)},buildInitiateMutation:function(e){return(t,{track:n=!0,fixedCacheKey:a}={})=>(o,i)=>{const l=r({type:"mutation",endpointName:e,originalArgs:t,track:n,fixedCacheKey:a}),u=o(l),{requestId:d,abort:p,unwrap:f}=u,h=(g=e=>({error:e}),u.unwrap().then((e=>({data:e}))).catch(g));var g;const m=Object.assign(h,{arg:u.arg,requestId:d,abort:p,unwrap:f,reset:()=>{o(c({requestId:d,fixedCacheKey:a}))}}),y=s.get(o)||{};return s.set(o,y),y[d]=m,m.then((()=>{delete y[d],Lc(y)||s.delete(o)})),a&&(y[a]=m,m.then((()=>{y[a]===m&&(delete y[a],Lc(y)||s.delete(o))}))),m}},getRunningQueryThunk:function(t,n){return r=>{const a=o.endpointDefinitions[t],s=e({queryArgs:n,endpointDefinition:a,endpointName:t});return i.get(r)?.[s]}},getRunningMutationThunk:function(e,t){return e=>s.get(e)?.[t]},getRunningQueriesThunk:function(){return e=>Object.values(i.get(e)||{}).filter(zc)},getRunningMutationsThunk:function(){return e=>Object.values(s.get(e)||{}).filter(zc)}};function d(r,o){const s=(c,{subscribe:d=!0,forceRefetch:p,subscriptionOptions:f,[Xc]:h,...g}={})=>(m,y)=>{const v=e({queryArgs:c,endpointDefinition:o,endpointName:r});let b;const S={...g,type:"query",subscribe:d,forceRefetch:p,subscriptionOptions:f,endpointName:r,originalArgs:c,queryCacheKey:v,[Xc]:h};if(Hc(o))b=t(S);else{const{direction:e,initialPageParam:t}=g;b=n({...S,direction:e,initialPageParam:t})}const k=a.endpoints[r].select(c),w=m(b),_=k(y()),{requestId:x,abort:C}=w,E=_.requestId!==x,A=i.get(m)?.[v],I=()=>k(y()),P=Object.assign(h?w.then(I):E&&!A?Promise.resolve(_):Promise.all([A,w]).then(I),{arg:c,requestId:x,subscriptionOptions:f,queryCacheKey:v,abort:C,async unwrap(){const e=await P;if(e.isError)throw e.error;return e.data},refetch:()=>m(s(c,{subscribe:!1,forceRefetch:!0})),unsubscribe(){d&&m(l({queryCacheKey:v,requestId:x}))},updateSubscriptionOptions(e){P.subscriptionOptions=e,m(u({endpointName:r,requestId:x,queryCacheKey:v,options:e}))}});if(!A&&!E&&!h){const e=(R=m,T={},(j=i).has(R)?j.get(R):j.set(R,T).get(R));e[v]=P,P.then((()=>{delete e[v],Lc(e)||i.delete(m)}))}var j,R,T;return P};return s}}({queryThunk:w,mutationThunk:x,infiniteQueryThunk:_,api:t,serializeQueryArgs:o,context:h});return vu(t.util,{getRunningMutationThunk:L,getRunningMutationsThunk:M,getRunningQueryThunk:F,getRunningQueriesThunk:z}),{name:Iu,injectEndpoint(e,n){const r=t,a=r.endpoints[e]??={};Hc(n)&&vu(a,{name:e,select:b(e,n),initiate:O(e,n)},P(w,e)),Vc(n)&&vu(a,{name:e,select:k(),initiate:D(e)},P(x,e)),Wc(n)&&vu(a,{name:e,select:S(e,n),initiate:$(e,n)},P(w,e))}}}}))(),(({batch:e=gt,hooks:t={useDispatch:dt,useSelector:ht,useStore:ct},createSelector:n=Tn,unstable__sideEffectsInRender:r=!1,...a}={})=>({name:Mu,init(a,{serializeQueryArgs:o},i){const s=a,{buildQueryHooks:l,buildInfiniteQueryHooks:c,buildMutationHook:u,usePrefetch:d}=function({api:e,moduleOptions:{batch:t,hooks:{useDispatch:n,useSelector:r,useStore:a},unstable__sideEffectsInRender:o,createSelector:i},serializeQueryArgs:s,context:l}){const c=o?e=>e():Ce.useEffect;return{buildQueryHooks:function(r){const a=(e,t={})=>{const[n]=p(r,e,t);return h(n),Ce.useMemo((()=>({refetch:()=>g(n)})),[n])},o=({refetchOnReconnect:a,refetchOnFocus:o,pollingInterval:i=0,skipPollingIfUnfocused:s=!1}={})=>{const{initiate:l}=e.endpoints[r],u=n(),[d,p]=Ce.useState(Pu),f=Ce.useRef(void 0),h=Ru({refetchOnReconnect:a,refetchOnFocus:o,pollingInterval:i,skipPollingIfUnfocused:s});c((()=>{const e=f.current?.subscriptionOptions;h!==e&&f.current?.updateSubscriptionOptions(h)}),[h]);const g=Ce.useRef(h);c((()=>{g.current=h}),[h]);const m=Ce.useCallback((function(e,n=!1){let r;return t((()=>{f.current?.unsubscribe(),f.current=r=u(l(e,{subscriptionOptions:g.current,forceRefetch:!n})),p(e)})),r}),[u,l]),y=Ce.useCallback((()=>{f.current?.queryCacheKey&&u(e.internalActions.removeQueryResult({queryCacheKey:f.current?.queryCacheKey}))}),[u]);return Ce.useEffect((()=>()=>{f?.current?.unsubscribe()}),[]),Ce.useEffect((()=>{d===Pu||f.current||m(d,!0)}),[d,m]),Ce.useMemo((()=>[m,d,{reset:y}]),[m,d,y])},i=f(r,u);return{useQueryState:i,useQuerySubscription:a,useLazyQuerySubscription:o,useLazyQuery(e){const[t,n,{reset:r}]=o(e),a=i(n,{...e,skip:n===Pu}),s=Ce.useMemo((()=>({lastArg:n})),[n]);return Ce.useMemo((()=>[t,{...a,reset:r},s]),[t,a,r,s])},useQuery(e,t){const n=a(e,t),r=i(e,{selectFromResult:e===du||t?.skip?void 0:$u,...t}),o=Du(r,...Lu);return Ce.useDebugValue(o),Ce.useMemo((()=>({...r,...n})),[r,n])}}},buildInfiniteQueryHooks:function(e){const n=(n,r={})=>{const[a,o,i,s]=p(e,n,r),u=Ce.useRef(s);c((()=>{u.current=s}),[s]);const d=Ce.useCallback((function(e,n){let r;return t((()=>{a.current?.unsubscribe(),a.current=r=o(i(e,{subscriptionOptions:u.current,direction:n}))})),r}),[a,o,i]);h(a);const f=ju(r.skip?du:n,mu,l.endpointDefinitions[e],e),m=Ce.useCallback((()=>g(a)),[a]);return Ce.useMemo((()=>({trigger:d,refetch:m,fetchNextPage:()=>d(f,"forward"),fetchPreviousPage:()=>d(f,"backward")})),[m,d,f])},r=f(e,d);return{useInfiniteQueryState:r,useInfiniteQuerySubscription:n,useInfiniteQuery(e,t){const{refetch:a,fetchNextPage:o,fetchPreviousPage:i}=n(e,t),s=r(e,{selectFromResult:e===du||t?.skip?void 0:$u,...t}),l=Du(s,...Lu,"hasNextPage","hasPreviousPage");return Ce.useDebugValue(l),Ce.useMemo((()=>({...s,fetchNextPage:o,fetchPreviousPage:i,refetch:a})),[s,o,i,a])}}},buildMutationHook:function(a){return({selectFromResult:o,fixedCacheKey:s}={})=>{const{select:l,initiate:c}=e.endpoints[a],u=n(),[d,p]=Ce.useState();Ce.useEffect((()=>()=>{d?.arg.fixedCacheKey||d?.reset()}),[d]);const f=Ce.useCallback((function(e){const t=u(c(e,{fixedCacheKey:s}));return p(t),t}),[u,c,s]),{requestId:h}=d||{},g=Ce.useMemo((()=>l({fixedCacheKey:s,requestId:d?.requestId})),[s,d,l]),m=Ce.useMemo((()=>o?i([g],o):g),[o,g]),y=r(m,et),v=null==s?d?.arg.originalArgs:void 0,b=Ce.useCallback((()=>{t((()=>{d&&p(void 0),s&&u(e.internalActions.removeMutationResult({requestId:h,fixedCacheKey:s}))}))}),[u,s,d,h]),S=Du(y,...Lu,"endpointName");Ce.useDebugValue(S);const k=Ce.useMemo((()=>({...y,originalArgs:v,reset:b})),[y,v,b]);return Ce.useMemo((()=>[f,k]),[f,k])}},usePrefetch:function(t,r){const a=n(),o=Ru(r);return Ce.useCallback(((n,r)=>a(e.util.prefetch(t,n,{...o,...r}))),[t,a,o])}};function u(e,t,n){if(t?.endpointName&&e.isUninitialized){const{endpointName:e}=t,r=l.endpointDefinitions[e];n!==du&&s({queryArgs:t.originalArgs,endpointDefinition:r,endpointName:e})===s({queryArgs:n,endpointDefinition:r,endpointName:e})&&(t=void 0)}let r=e.isSuccess?e.data:t?.data;void 0===r&&(r=e.data);const a=void 0!==r,o=e.isLoading,i=(!t||t.isLoading||t.isUninitialized)&&!a&&o,c=e.isSuccess||a&&(o&&!t?.isError||e.isUninitialized);return{...e,data:r,currentData:e.data,isFetching:o,isLoading:i,isSuccess:c}}function d(e,t,n){if(t?.endpointName&&e.isUninitialized){const{endpointName:e}=t,r=l.endpointDefinitions[e];n!==du&&s({queryArgs:t.originalArgs,endpointDefinition:r,endpointName:e})===s({queryArgs:n,endpointDefinition:r,endpointName:e})&&(t=void 0)}let r=e.isSuccess?e.data:t?.data;void 0===r&&(r=e.data);const a=void 0!==r,o=e.isLoading,i=(!t||t.isLoading||t.isUninitialized)&&!a&&o,c=e.isSuccess||o&&a;return{...e,data:r,currentData:e.data,isFetching:o,isLoading:i,isSuccess:c}}function p(t,r,{refetchOnReconnect:a,refetchOnFocus:o,refetchOnMountOrArgChange:i,skip:s=!1,pollingInterval:u=0,skipPollingIfUnfocused:d=!1,...p}={}){const{initiate:f}=e.endpoints[t],h=n(),g=Ce.useRef(void 0);if(!g.current){const t=h(e.internalActions.internal_getRTKQSubscriptions());g.current=t}const m=ju(s?du:r,mu,l.endpointDefinitions[t],t),y=Ru({refetchOnReconnect:a,refetchOnFocus:o,pollingInterval:u,skipPollingIfUnfocused:d}),v=Ru(p.initialPageParam),b=Ce.useRef(void 0);let{queryCacheKey:S,requestId:k}=b.current||{},w=!1;S&&k&&(w=g.current.isRequestSubscribed(S,k));const _=!w&&void 0!==b.current;return c((()=>{_&&(b.current=void 0)}),[_]),c((()=>{const e=b.current;if(m===du)return e?.unsubscribe(),void(b.current=void 0);const n=b.current?.subscriptionOptions;if(e&&e.arg===m)y!==n&&e.updateSubscriptionOptions(y);else{e?.unsubscribe();const n=h(f(m,{subscriptionOptions:y,forceRefetch:i,...Wc(l.endpointDefinitions[t])?{initialPageParam:v}:{}}));b.current=n}}),[h,f,i,m,y,_,v,t]),[b,h,f,y]}function f(t,n){return(o,{skip:c=!1,selectFromResult:u}={})=>{const{select:d}=e.endpoints[t],p=ju(c?du:o,s,l.endpointDefinitions[t],t),f=Ce.useRef(void 0),h=Ce.useMemo((()=>i([d(p),(e,t)=>t,e=>p],n,{memoizeOptions:{resultEqualityCheck:et}})),[d,p]),g=Ce.useMemo((()=>u?i([h],u,{devModeChecks:{identityFunctionCheck:"never"}}):h),[h,u]),m=r((e=>g(e,f.current)),et),y=a(),v=h(y.getState(),f.current);return Ou((()=>{f.current=v}),[v]),m}}function h(e){Ce.useEffect((()=>()=>{e.current?.unsubscribe?.(),e.current=void 0}),[e])}function g(e){if(!e.current)throw new Error(Oc(38));return e.current.refetch()}}({api:a,moduleOptions:{batch:e,hooks:t,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:o,context:i});return vu(s,{usePrefetch:d}),vu(i,{batch:e}),{injectEndpoint(e,t){if(Hc(t)){const{useQuery:t,useLazyQuery:n,useLazyQuerySubscription:r,useQueryState:o,useQuerySubscription:i}=l(e);vu(s.endpoints[e],{useQuery:t,useLazyQuery:n,useLazyQuerySubscription:r,useQueryState:o,useQuerySubscription:i}),a[`use${Ns(e)}Query`]=t,a[`useLazy${Ns(e)}Query`]=n}if(Vc(t)){const t=u(e);vu(s.endpoints[e],{useMutation:t}),a[`use${Ns(e)}Mutation`]=t}else if(Wc(t)){const{useInfiniteQuery:t,useInfiniteQuerySubscription:n,useInfiniteQueryState:r}=c(e);vu(s.endpoints[e],{useInfiniteQuery:t,useInfiniteQuerySubscription:n,useInfiniteQueryState:r}),a[`use${Ns(e)}InfiniteQuery`]=t}}}}}))());const Fu=e.getInstance(),Gu=zu({reducerPath:"inventreeApi",baseQuery:async({serviceMethod:e,methodArgs:t})=>{var n,r,a;try{const n=Di[e];if("function"!=typeof n)return Fu.error("axiosBaseQuery",`Service method '${String(e)}' does not exist on inventreeApiService`),{error:{status:"CUSTOM_ERROR",data:`Service method '${String(e)}' does not exist on inventreeApiService`}};const r=await n.apply(Di,t);return null!==r||"getPartParameters"!==e&&"getPart"!==e&&"getStockItemsForPart"!==e?{data:r}:(Fu.warn("axiosBaseQuery",`Service method '${String(e)}' returned null, treating as error. Args:`,{data:t}),{error:{status:"CUSTOM_ERROR",data:`Service method '${String(e)}' failed or returned no data.`,message:`Service method '${String(e)}' indicated an error by returning null.`}})}catch(t){const o=t;return Fu.error("axiosBaseQuery",`Error executing service method '${e}': ${o.message}`,{data:null===(n=o.response)||void 0===n?void 0:n.data}),{error:{status:null===(r=o.response)||void 0===r?void 0:r.status,data:(null===(a=o.response)||void 0===a?void 0:a.data)||o.message,message:o.message}}}},tagTypes:["Part","PartParameter","StockItem","SearchResult","Category","Location"],endpoints:e=>({getPart:e.query({query:e=>({serviceMethod:"getPart",methodArgs:[e]}),providesTags:(e,t,n)=>[{type:"Part",id:n}]}),getPartParameters:e.query({query:e=>({serviceMethod:"getPartParameters",methodArgs:[e]}),providesTags:(e,t,n)=>[{type:"PartParameter",id:`LIST-${n}`}]}),updatePartParameter:e.mutation({query:({parameterPk:e,value:t})=>({serviceMethod:"updatePartParameter",methodArgs:[e,t]}),invalidatesTags:(e,t,{partId:n,parameterPk:r})=>[{type:"PartParameter",id:`LIST-${n}`},{type:"PartParameter",id:r},{type:"Part",id:n}]}),getStockItems:e.query({query:({partId:e})=>({serviceMethod:"getStockItemsForPart",methodArgs:[e]}),providesTags:(e,t,{partId:n})=>[{type:"StockItem",id:`LIST-${n}`},...(null==e?void 0:e.map((e=>({type:"StockItem",id:e.pk}))))||[]]}),addStockItem:e.mutation({query:({partId:e,quantity:t,locationId:n,notes:r})=>({serviceMethod:"addStockItem",methodArgs:[e,t,n,r]}),invalidatesTags:(e,t,{partId:n})=>[{type:"StockItem",id:`LIST-${n}`},{type:"Part",id:n}]}),searchParts:e.query({query:e=>({serviceMethod:"getParts",methodArgs:[{search:e}]}),transformResponse:e=>e.map((e=>({pk:e.pk,name:e.name,thumbnail:e.thumbnail||void 0}))),providesTags:(e,t,n)=>e?[...e.map((({pk:e})=>({type:"SearchResult",id:e}))),{type:"SearchResult",id:"LIST"}]:[{type:"SearchResult",id:"LIST"}]})})}),{useGetPartQuery:qu,useGetPartParametersQuery:Uu,useUpdatePartParameterMutation:Bu,useGetStockItemsQuery:Hu,useAddStockItemMutation:Vu,useSearchPartsQuery:Wu,useLazySearchPartsQuery:Qu}=Gu,Ku=e.getInstance(),Ju=ar({name:"actions",initialState:{actionDefinitions:{},actionRuntimeStates:{}},reducers:{setActionDefinitions(e,t){const n={};for(const e of t.payload)n[e.id]=e;e.actionDefinitions=n,Ku.log("actionsSlice",`Set ${t.payload.length} action definitions.`),t.payload.forEach((t=>{e.actionRuntimeStates[t.id]||(e.actionRuntimeStates[t.id]={status:"idle"})}))},updateActionRuntimeState(e,t){const{actionId:n,runtimeState:r}=t.payload;e.actionRuntimeStates[n]?e.actionRuntimeStates[n]=Object.assign(Object.assign({},e.actionRuntimeStates[n]),r):e.actionRuntimeStates[n]=Object.assign({status:"idle"},r),Ku.log("actionsSlice",`Updated runtime state for action ${n}:`,{data:r})},clearActionRuntimeState(e,t){const{actionId:n}=t.payload;e.actionRuntimeStates[n]&&(e.actionRuntimeStates[n]={status:"idle"},Ku.log("actionsSlice",`Cleared runtime state for action ${n}.`))},clearAllActionRuntimeStates(e){Object.keys(e.actionRuntimeStates).forEach((t=>{e.actionRuntimeStates[t]={status:"idle"}})),Ku.log("actionsSlice","Cleared all action runtime states.")}}}),{setActionDefinitions:Xu,updateActionRuntimeState:Yu,clearActionRuntimeState:Zu,clearAllActionRuntimeStates:ed}=Ju.actions;var td=Ju.reducer;const nd=e.getInstance(),rd=e=>t=>n=>{const r=n,a=performance.now();nd.log("Redux Middleware",`üöÄ Action Dispatched: ${r.type}`,{category:"redux",subsystem:"action",data:r.payload});const o=t(n),i=performance.now()-a;if(nd.log("Redux Middleware",`‚è±Ô∏è Action Completed: ${r.type} (${i.toFixed(2)}ms)`,{category:"redux",subsystem:"performance"}),nd.isEnabled("redux","state")){const t=e.getState();nd.log("Redux Middleware",`üîÑ State After Action: ${r.type}`,{category:"redux",subsystem:"state",data:t})}return o},ad=e.getInstance(),od=Yn("parameters/fetchForReferencedParts",(async(e,{getState:t,rejectWithValue:n,dispatch:r})=>{const a=t(),o=hr(a);if(ad.log("fetchParametersForReferencedParts Thunk",`Thunk started. Original partIds received: ${e.join(", ")}`,{level:"debug"}),!o){const e="API not initialized. Cannot fetch referenced parameters.";return ad.error("fetchParametersForReferencedParts Thunk",e),n(e)}if(!e||0===e.length)return void ad.log("fetchParametersForReferencedParts Thunk","No part IDs provided, skipping fetch.");const i=e.filter((e=>!0));if(0===i.length)return void ad.log("fetchParametersForReferencedParts Thunk","No valid part IDs to fetch after filtering. Skipping API calls.");ad.log("fetchParametersForReferencedParts Thunk",`Attempting to initiate parameter fetches for part IDs: ${i.join(", ")}`);let s=0,l=0;try{for(let e=0;e<i.length;e+=5){const t=i.slice(e,e+5);ad.log("fetchParametersForReferencedParts Thunk",`Processing batch: [${t.join(", ")}]`,{level:"debug"});for(const e of t)try{ad.log("fetchParametersForReferencedParts Thunk",`Initiating getPartParameters query for partId: ${e}`,{level:"silly"});r(Gu.endpoints.getPartParameters.initiate(e)).then((()=>{s++})).catch((e=>{l++})),t.indexOf(e)<t.length-1&&await new Promise((e=>setTimeout(e,50)))}catch(t){l++,ad.error("fetchParametersForReferencedParts Thunk",`Error initiating getPartParameters for part ${e}: ${(null==t?void 0:t.message)||String(t)}`,{partIdForContext:e,errorDetail:t})}}return void ad.log("fetchParametersForReferencedParts Thunk",`Finished initiating parameter fetches for ${i.length} parts. Successes: ${s}, Failures (to initiate): ${l}`)}catch(e){const t=`Critical error during batch processing in fetchParametersForReferencedParts: ${e.message||e}`;return ad.error("fetchParametersForReferencedParts Thunk",t,{batchIds:i}),n(t)}})),id=Yn("parameters/updateValue",(async({partId:e,paramName:t,value:n},{getState:r,rejectWithValue:a,dispatch:o})=>{var i,s;const l=r();if(!hr(l)){const e="API not initialized. Cannot update parameter.";return ad.error("updateParameterValue Thunk",e),a(e)}try{const r=`getPartParameters(${e})`,s=null===(i=l.inventreeApi.queries[r])||void 0===i?void 0:i.data;if(!s){const n=`Parameters for part ${e} not found in RTK Query cache. Cannot determine parameter PK for '${t}'.`;return ad.warn("updateParameterValue Thunk",n),a(n)}const c=s.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t}));if(!c){const n=`Parameter '${t}' not found for part ${e} in cached data. Cannot get PK for update.`;return ad.error("updateParameterValue Thunk",n),a(n)}const u=c.pk;ad.log("updateParameterValue Thunk",`Attempting to update param PK ${u} ('${t}') for part ${e} to '${n}' via RTK Query mutation.`);const d=await o(Gu.endpoints.updatePartParameter.initiate({partId:e,parameterPk:u,value:n})).unwrap();return ad.log("updateParameterValue Thunk",`Successfully updated param PK ${u} ('${t}') for part ${e} to '${n}'. Result:`,{data:d}),d}catch(n){const r=`Failed to update parameter ${t} for part ${e}: ${(null===(s=n.data)||void 0===s?void 0:s.message)||n.message||String(n)}`;return ad.error("updateParameterValue Thunk",r,{errorData:n}),a(r)}})),sd=Yn("parameters/fetchConfigured",(async(e,{dispatch:t,getState:n,rejectWithValue:r})=>{ad.log("ParameterThunk","Fetching parameters based on config.dataSources.inventreeParametersToFetch...");const a=n();if(!hr(a))return void ad.warn("ParameterThunk","API not initialized. Cannot fetch configured parameters.");const o=a.parts.partsById,i=Object.keys(o).map((e=>parseInt(e,10)));if(!e||0===e.length)return void ad.log("ParameterThunk","No inventreeParametersToFetch configured. Skipping proactive parameter fetch.");const s=new Set;e.forEach((e=>{"all_loaded"===e.targetPartIds?i.forEach((e=>s.add(e))):Array.isArray(e.targetPartIds)&&e.targetPartIds.forEach((e=>{"number"!=typeof e||isNaN(e)||s.add(e)}))}));const l=Array.from(s);if(l.length>0){ad.log("ParameterThunk",`Dispatching fetchParametersForReferencedParts for configured part IDs: ${l.join(", ")}`);try{await t(od(l)).unwrap(),ad.log("ParameterThunk",`Successfully initiated fetch for configured parameters. Parts: ${l.join(", ")}`)}catch(e){ad.error("ParameterThunk",`Failed to fetch some configured parameters. Parts: ${l.join(", ")}`,{error:e})}}else ad.log("ParameterThunk","No specific part IDs derived from inventreeParametersToFetch configuration.")})),ld=e.getInstance(),cd=e=>e=>t=>{const n=t;if(ld.log("Redux",`Action dispatched: ${n.type}`,{category:"redux",subsystem:"middleware"}),"parts/fetchParts/fulfilled"===n.type){const{entityId:e,data:t}=n.payload;ld.log("Redux",`Updated service data for entity ${e} (cache.set removed)`,{category:"redux",subsystem:"sync"})}if("parameters/updateValue"===n.type){const{partId:e,paramName:t,value:r}=n.payload;Qd.dispatch(id({partId:e,paramName:t,value:r})),ld.log("Redux",`Dispatched updateParameterValue thunk for ${t}`,{})}if("parameters/checkCondition"===n.type){const{part:e,condition:t}=n.payload;ld.log("Redux",`Checking condition for part ${null==e?void 0:e.pk}`,{category:"redux",subsystem:"parameters",condition:t})}return"parameters/clearConditionCache"!==n.type&&"parameters/clearCache"!==n.type||ld.log("Redux","Clearing parameter cache",{category:"redux",subsystem:"parameters"}),e(n)};class ud{constructor(){this.logLevel="log",this.enabled=!0}static getInstance(){return ud.instance||(ud.instance=new ud),ud.instance}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}setEnabled(e){this.enabled=e}getIsEnabled(){return this.enabled}setDebugConfig(e){if(e&&"boolean"==typeof e.debug){this.setEnabled(e.debug);const t=e.debug_verbose?"debug":e.debug?"log":"warn";this.setLogLevel(t)}}debug(e,t,n){!this.enabled||this.getLevelValue(this.logLevel)>this.getLevelValue("debug")||console.debug(`[${e}] ${t}`,void 0!==(null==n?void 0:n.data)?n.data:"")}info(e,t,n){!this.enabled||this.getLevelValue(this.logLevel)>this.getLevelValue("info")||console.info(`[${e}] ${t}`,void 0!==(null==n?void 0:n.data)?n.data:"")}log(e,t,n){!this.enabled||this.getLevelValue(this.logLevel)>this.getLevelValue("log")||console.log(`[${e}] ${t}`,void 0!==(null==n?void 0:n.data)?n.data:"")}warn(e,t,n){!this.enabled||this.getLevelValue(this.logLevel)>this.getLevelValue("warn")||console.warn(`[${e}] ${t}`,void 0!==(null==n?void 0:n.data)?n.data:"")}error(e,t,n){!this.enabled||this.getLevelValue(this.logLevel)>this.getLevelValue("error")||console.error(`[${e}] ${t}`,void 0!==(null==n?void 0:n.data)?n.data:"")}getLevelValue(e){return{debug:0,info:1,log:2,warn:3,error:4}[e]}}const dd=(e,t,n,r)=>{if(!e||!e.rules||0===e.rules.length)return r.warn("evaluateExpression","Empty or invalid rule group provided. ID: "+((null==e?void 0:e.id)||"undefined")),!1;const a=[];for(const o of e.rules)if("combinator"in o){const e=dd(o,t,n,r);a.push(e)}else{const e=pd(o,t,n,r);a.push(e)}let o;return o="and"===e.combinator?a.every((e=>!0===e)):a.some((e=>!0===e)),e.not&&(o=!o),o},pd=(e,t,n,r)=>{const a=((e,t,n,r)=>{var a;let o;if(e.startsWith("ha_entity_state_")){const t=((e,t)=>{var n;return null===(n=e.genericHaStates.entities[t])||void 0===n?void 0:n.state})(n,e.substring(16));o=t}else if(e.startsWith("ha_entity_attr_")){const t=e.substring(15),a=t.split(":::");2===a.length?o=((e,t,n)=>{var r,a;return null===(a=null===(r=e.genericHaStates.entities[t])||void 0===r?void 0:r.attributes)||void 0===a?void 0:a[n]})(n,a[0],a[1]):r.warn("getActualValue","Could not parse HA attribute field (expected 2 parts after splitting by :::): "+e,{data:{field:e,content:t,partsCount:a.length}})}else if(e.startsWith("part_")&&t){const n=e.substring(5);n in t?o=t[n]:r.warn("getActualValue","Part attribute "+n+" not found in partContext for PK "+((null==t?void 0:t.pk)||"undefined"))}else if(e.startsWith("param_")&&t){const r=e.substring(6),i=n.parameters.parameterValues[t.pk];o=null===(a=null==i?void 0:i[r])||void 0===a?void 0:a.data}else r.warn("getActualValue","Unknown field format or context missing for field: "+e);return o})(e.field,t,n,r),o=e.value;if(void 0===a)return"exists"!==e.operator&&("does_not_exist"===e.operator||("is_empty"===e.operator||("is_not_empty"===e.operator||r.warn("evaluateRule","Actual value for field "+e.field+" is undefined. Rule ID: "+e.id+", Operator: "+e.operator+". Evaluating as false for most ops."),!1)));let i,s=null,l=null;switch(("number"==typeof a||"string"==typeof a&&!isNaN(parseFloat(a)))&&(s=parseFloat(String(a))),("number"==typeof o||"string"==typeof o&&!isNaN(parseFloat(String(o))))&&(l=parseFloat(String(o))),e.operator){case"=":case"equals":i=String(a).toLowerCase()===String(o).toLowerCase();break;case"!=":case"not_equals":i=String(a).toLowerCase()!==String(o).toLowerCase();break;case"<":case"less_than":i=null!==s&&null!==l&&s<l;break;case">":case"greater_than":i=null!==s&&null!==l&&s>l;break;case"<=":case"less_than_or_equals":i=null!==s&&null!==l&&s<=l;break;case">=":case"greater_than_or_equals":i=null!==s&&null!==l&&s>=l;break;case"contains":i=String(a).toLowerCase().includes(String(o).toLowerCase());break;case"does_not_contain":i=!String(a).toLowerCase().includes(String(o).toLowerCase());break;case"begins_with":case"startsWith":i=String(a).toLowerCase().startsWith(String(o).toLowerCase());break;case"ends_with":case"endsWith":i=String(a).toLowerCase().endsWith(String(o).toLowerCase());break;case"is_empty":case"does_not_exist":i=null===a||""===String(a).trim();break;case"is_not_empty":case"exists":i=null!==a&&""!==String(a).trim();break;default:r.warn("evaluateRule","Rule ID: "+e.id+" - Unknown operator: "+e.operator),i=!1}return i};ud.getInstance();const fd=e=>{switch(e){case"backgroundColor":case"highlight":return"highlight";case"color":case"textColor":return"textColor";case"border":return"border";case"opacity":return"opacity";case"icon":return"icon";case"badge":return"badge";default:return null}};class hd{constructor(e,t){this.dispatch=e,this.getState=t,this.logger=ud.getInstance(),this.logger.log("ConditionalEffectsEngine","CONSTRUCTOR CALLED. Instance created.")}async evaluateAndApplyEffects(e,t=!1,n){this.logger.log("ConditionalEffectsEngine",`evaluateAndApplyEffects CALLED. cardInstanceId: ${e}, LogicItems provided: ${!!n}, Count: ${null==n?void 0:n.length}`);const r=this.getState();if(!n||0===n.length)return this.logger.log("ConditionalEffectsEngine",`No logic items provided for card ${e}. Clearing its visual effects.`),void this.dispatch(ms({cardInstanceId:e}));const a={},o=r.parts.partsById;for(const t of n){this.logger.debug("ConditionalEffectsEngine",`[CEE ${e}] Processing logic item: ${t.id} (${t.name||"Unnamed"})`,{data:t});for(const n of t.logicPairs){this.logger.debug("ConditionalEffectsEngine",`[CEE ${e}]   Processing pair: ${n.id} (${n.name||"Unnamed"}) within logic item ${t.id}`,{data:n});let i=!1;try{i=dd(n.conditionRules,null,r,this.logger),this.logger.debug("ConditionalEffectsEngine",`[CEE ${e}]     Pair ${n.id} condition result: ${i}`)}catch(t){this.logger.error("ConditionalEffectsEngine",`[CEE ${e}]     ERROR evaluating condition for pair ${n.id}: ${t.message}`,{data:{stack:t.stack,ruleGroup:n.conditionRules}}),i=!1}if(i){this.logger.debug("ConditionalEffectsEngine",`[CEE ${e}]     Condition MET for pair: ${n.id}. Applying ${n.effects.length} effects.`);for(const r of n.effects){const i=new Set;if("all_loaded"===r.targetPartPks)Object.keys(o).forEach((e=>i.add(Number(e))));else if(Array.isArray(r.targetPartPks))r.targetPartPks.forEach((e=>i.add(Number(e))));else if("string"==typeof r.targetPartPks&&r.targetPartPks.length>0)r.targetPartPks.split(",").forEach((e=>{const t=Number(e.trim());isNaN(t)||i.add(t)}));else if(this.logger.warn("ConditionalEffectsEngine",`[CEE ${e}] Effect in pair ${n.id} (logic item ${t.id}) has no targetPartPks. Visual effects will not be applied to specific parts unless target is defined.`,{data:r}),("set_style"===r.type||"set_visibility"===r.type)&&!r.targetPartPks)continue;0!==i.size||"set_style"!==r.type&&"set_visibility"!==r.type?i.forEach((t=>{a[t]||(a[t]={});const o=a[t];switch(r.type){case"set_visibility":o.isVisible=r.isVisible;break;case"set_style":if(r.styleProperty&&void 0!==r.styleValue){const t=fd(r.styleProperty);t?o[t]=r.styleValue:this.logger.warn("ConditionalEffectsEngine",`[CEE ${e}] Unhandled styleProperty: ${r.styleProperty} in pair ${n.id}`)}break;default:this.logger.warn("ConditionalEffectsEngine",`[CEE ${e}] Unhandled effect type for visual application: ${r.type} in pair ${n.id}`)}this.logger.debug("ConditionalEffectsEngine",`[CEE ${e}] Visual effect applied for part ${t} from pair ${n.id}.`,{data:{effect:r,currentPartEffects:JSON.parse(JSON.stringify(o))}})})):this.logger.debug("ConditionalEffectsEngine",`[CEE ${e}] No specific target PKs resolved for visual effect in pair ${n.id}. Skipping.`,{data:r})}}}}this.logger.debug("ConditionalEffectsEngine",`[DEBUG] effectsToApply before dispatch for card ${e}:`,{data:JSON.parse(JSON.stringify(a))});const i=Object.keys(a).length>0;this.logger.debug("ConditionalEffectsEngine",`[DEBUG] hasEffectsToApply for card ${e}: ${i}`),this.logger.log("ConditionalEffectsEngine",`Dispatching setConditionalPartEffectsBatch for card ${e}`,{data:{effectsCount:Object.keys(a).length}}),this.dispatch(fs({cardInstanceId:e,effectsMap:a})),this.logger.log("ConditionalEffectsEngine",`evaluateAndApplyEffects END for cardInstanceId: ${e}`)}}const gd=ud.getInstance(),md=Yn("conditionalLogic/evaluateAndApplyEffects",(async({cardInstanceId:e,forceReevaluation:t=!1},{dispatch:n,getState:r})=>{const a=e||"undefined_card",o=(e=>e.conditionalLogic.definedLogicItems)(r());gd.debug("evaluateAndApplyEffectsThunk",`START for cardInstanceId: ${a}`,{data:{logicItems:o}});const i=new hd(n,r);await i.evaluateAndApplyEffects(a,t,o),gd.debug("evaluateAndApplyEffectsThunk",`END for cardInstanceId: ${a}`)})),yd=Yn("conditionalLogic/initializeRuleDefinitions",(async(e,{dispatch:t})=>{gd.debug("initializeRuleDefinitionsThunk","Initializing rule definitions (now ConditionalLogicItems with logicPairs)...",{data:e}),t(kr(e||[])),gd.debug("initializeRuleDefinitionsThunk",`Stored ${(null==e?void 0:e.length)||0} defined logic items.`),t(md({cardInstanceId:"undefined_card",forceReevaluation:!0}))}));function vd(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var bd="object"==typeof global&&global&&global.Object===Object&&global,Sd="object"==typeof self&&self&&self.Object===Object&&self,kd=bd||Sd||Function("return this")(),wd=function(){return kd.Date.now()},_d=/\s/;var xd=/^\s+/;function Cd(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&_d.test(e.charAt(t)););return t}(e)+1).replace(xd,""):e}var Ed=kd.Symbol,Ad=Object.prototype,Id=Ad.hasOwnProperty,Pd=Ad.toString,jd=Ed?Ed.toStringTag:void 0;var Rd=Object.prototype.toString;var Td=Ed?Ed.toStringTag:void 0;function Nd(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Td&&Td in Object(e)?function(e){var t=Id.call(e,jd),n=e[jd];try{e[jd]=void 0;var r=!0}catch(e){}var a=Pd.call(e);return r&&(t?e[jd]=n:delete e[jd]),a}(e):function(e){return Rd.call(e)}(e)}var Od=/^[-+]0x[0-9a-f]+$/i,$d=/^0b[01]+$/i,Dd=/^0o[0-7]+$/i,Ld=parseInt;function Md(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==Nd(e)}(e))return NaN;if(vd(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=vd(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cd(e);var n=$d.test(e);return n||Dd.test(e)?Ld(e.slice(2),n?2:8):Od.test(e)?NaN:+e}var zd=Math.max,Fd=Math.min;function Gd(e,t,n){var r,a,o,i,s,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=a;return r=a=void 0,c=t,i=e.apply(o,n)}function h(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function g(){var e=wd();if(h(e))return m(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?Fd(n,o-(e-c)):n}(e))}function m(e){return s=void 0,p&&r?f(e):(r=a=void 0,i)}function y(){var e=wd(),n=h(e);if(r=arguments,a=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(g,t),u?f(e):i}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),i}return t=Md(t)||0,vd(n)&&(u=!!n.leading,o=(d="maxWait"in n)?zd(Md(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=a=s=void 0},y.flush=function(){return void 0===s?i:m(wd())},y}const qd=e.getInstance();let Ud=null;const Bd=e=>{var t,n,r,a;const o=null!==(a=null===(r=null===(n=null===(t=e.getState().config.values)||void 0===t?void 0:t.performance)||void 0===n?void 0:n.parameters)||void 0===r?void 0:r.conditionEvalFrequency)&&void 0!==a?a:1e3;qd.log("WebSocketMiddleware",`Initializing/Re-initializing throttledEvaluateEffects with frequency: ${o}ms`),Ud=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return vd(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Gd(e,t,{leading:r,maxWait:t,trailing:a})}((()=>{qd.log("WebSocketMiddleware","Dispatching evaluateAndApplyEffectsThunk (throttled)."),e.dispatch(md({}))}),o,{leading:!1,trailing:!0})},Hd=e=>(Bd(e),t=>n=>{const r=t(n),a=n;if("config/setConfigAction"===a.type&&(qd.log("WebSocketMiddleware","Config changed, re-initializing throttled evaluator."),Bd(e)),(Nr.match(a)||Or.match(a))&&(qd.log("WebSocketMiddleware",`HA entity state updated (action: ${a.type}), triggering (throttled) effects re-evaluation.`),Ud&&Ud()),_s.match(a)){const t=a.payload;if("object"==typeof t&&null!==t&&"event"===t.type&&"string"==typeof t.event&&"object"==typeof t.data&&null!==t.data){const n=t.event,r=t.data;if(qd.log("WebSocketMiddleware",`Processing event: ${n}`,{eventData:r,level:"info"}),n.includes("part_partparameter.saved")||n.includes("part_partparameter.created")){const t=r,n=t.part_pk,a=t.id,o=t.parameter_value;void 0!==n&&void 0!==a&&void 0!==o&&(e.dispatch(Gu.util.updateQueryData("getPartParameters",Number(n),(e=>{const t=e.findIndex((e=>e.pk===a));-1!==t&&(e[t].data=o)}))),Ud&&Ud())}else if(n.includes("stock_stockitem.saved")||n.includes("stock_stockitem.created")){const t=r,n=t.part_id;void 0!==n&&(e.dispatch(Gu.util.updateQueryData("getPart",Number(n),(e=>{if("number"==typeof e.in_stock||void 0===e.in_stock){const n=parseFloat(t.quantity);isNaN(n)||(e.in_stock=n)}}))),Ud&&Ud())}else qd.log("WebSocketMiddleware",`Received unhandled event type: ${n}`,{eventData:r})}else qd.warn("WebSocketMiddleware","Received webSocketMessageReceived action, but payload was not a valid WebSocketEventMessage structure",{payload:t})}else"websocket/connect"===a.type?qd.log("WebSocket Middleware","Explicit connect action received (currently informational)"):"websocket/disconnect"===a.type&&qd.log("WebSocket Middleware","Explicit disconnect action received (currently informational)");return r}),Vd=e.getInstance(),Wd=e=>e=>t=>{const n=t,r=e(t);if("metrics/trackEvent"===n.type){const{category:e,action:t,label:r,value:a}=n.payload;try{ve(e,t,{label:r,value:a,source:"redux"}),Vd.log("MetricsMiddleware",`Tracked event: ${e}/${t}`,{category:"metrics",data:n.payload})}catch(e){Vd.error("MetricsMiddleware",`Error tracking usage: ${e}`,{category:"metrics",error:e})}}return r},Qd=Bn({reducer:wt({api:mr,components:vr,conditionalLogic:_r,config:Ir,counter:jr,genericHaStates:Lr,metrics:zr,parameters:ta,parts:Ji,ui:as,visualEffects:vs,websocket:Cs,actions:td,[Gu.reducerPath]:Gu.reducer}),middleware:e=>e({serializableCheck:!1}).concat([rd,cd,Hd,Wd,Gu.middleware])});var Kd;!function(e){e.DISCONNECTED="disconnected",e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.FAILED="failed",e.CLOSING="closing"}(Kd||(Kd={}));class Jd{static getInstance(){return Jd.instance||(Jd.instance=new Jd),Jd.instance}constructor(){this._config=null,this._connection=null,this._connectionId=null,this._isConnected=!1,this._messageCallbacks=[],this._errorCount=0,this._url="",this._debug=!1,this._disconnecting=!1,this._autoReconnect=!0,this._reconnectInterval=5e3,this._timersInitialized=!1,this._connectionState=Kd.DISCONNECTED,this._lastConnectionAttempt=0,this._connectionAttempts=0,this._maxReconnectDelay=3e5,this._minReconnectDelay=1e3,this._cooldownPeriod=2e3,this._lastStateChangeTime=0,this._lastSuccessfulConnection=0,this._lastServerMessageTime=0,this._serverInactivityTimeoutDuration=9e4,this._serverInactivityTimerId=null,this._messageCount=0,this._lastMessageTime=0,this._processingMessages=new Set,this._messageDebounceTime=50,this._dispatch=null,this._debouncedProcessors=new Map,this._logger=e.getInstance(),this._lastServerMessageTime=0,this._timersInitialized||(this._timersInitialized=!0),this._logger.log("WebSocketPlugin","Instance created.",{category:"websocket",subsystem:"plugin"})}configure(e){var t,n,r,a,o,i,s,l;if(this._config=e,e.websocket_url&&""!==e.websocket_url.trim())this._url=e.websocket_url.trim(),this._logger.log("WebSocket",`Using explicit WebSocket URL: ${this._url}`,{category:"websocket",subsystem:"plugin"});else if(e.url&&""!==e.url.trim()){const t=e.url.trim().replace(/\/+$/,"");t.startsWith("http")?this._url=t.replace(/^http/,"ws")+"/ws/":this._url=`ws://${t}/ws/`,this._logger.log("WebSocket",`Derived WebSocket URL from API URL: ${this._url} (Base: ${e.url})`,{category:"websocket",subsystem:"plugin"})}else this._url="",this._logger.warn("WebSocket","Could not determine WebSocket URL from configuration.",{category:"websocket",subsystem:"plugin"});this._autoReconnect=void 0!==(null===(n=null===(t=e.performance)||void 0===t?void 0:t.websocket)||void 0===n?void 0:n.reconnectInterval),void 0!==(null===(a=null===(r=e.performance)||void 0===r?void 0:r.websocket)||void 0===a?void 0:a.reconnectInterval)&&e.performance.websocket.reconnectInterval<=0&&(this._autoReconnect=!1),(null===(i=null===(o=e.performance)||void 0===o?void 0:o.websocket)||void 0===i?void 0:i.reconnectInterval)&&e.performance.websocket.reconnectInterval>0?this._reconnectInterval=e.performance.websocket.reconnectInterval:this._reconnectInterval=5e3,(null===(l=null===(s=e.performance)||void 0===s?void 0:s.websocket)||void 0===l?void 0:l.messageDebounce)&&e.performance.websocket.messageDebounce>=0?this._messageDebounceTime=e.performance.websocket.messageDebounce:this._messageDebounceTime=50,this._logger.log("WebSocket",`Configured WebSocket plugin. Target URL: ${this._url}, Auto-Reconnect: ${this._autoReconnect}, Reconnect Interval: ${this._reconnectInterval}ms, Debounce: ${this._messageDebounceTime}ms, Server Inactivity Timeout: ${this._serverInactivityTimeoutDuration}ms`,{category:"websocket",subsystem:"plugin"})}_setConnectionState(e){const t=this._connectionState;if(t===e)return;if({[Kd.DISCONNECTED]:[Kd.CONNECTING],[Kd.CONNECTING]:[Kd.CONNECTED,Kd.FAILED,Kd.DISCONNECTED],[Kd.CONNECTED]:[Kd.DISCONNECTED,Kd.CLOSING],[Kd.RECONNECTING]:[Kd.CONNECTING,Kd.DISCONNECTED,Kd.FAILED],[Kd.FAILED]:[Kd.RECONNECTING,Kd.DISCONNECTED],[Kd.CLOSING]:[Kd.DISCONNECTED]}[t].includes(e))switch(this._connectionState=e,this._lastStateChangeTime=Date.now(),this._logger.log("WebSocket",`Connection state changed: ${t} -> ${e}`,{category:"websocket",subsystem:"state"}),e){case Kd.CONNECTED:this._lastSuccessfulConnection=Date.now(),this._errorCount=0,this._connectionAttempts=0,this._startServerInactivityTimer(),window.dispatchEvent(new CustomEvent("inventree-websocket-connected"));break;case Kd.DISCONNECTED:this._clearAllTimers(),this._clearServerInactivityTimer();break;case Kd.FAILED:this._errorCount++,this._autoReconnect&&this._errorCount<20&&(this._setConnectionState(Kd.RECONNECTING),this._scheduleReconnect())}else this._logger.warn("WebSocket",`Invalid state transition from ${t} to ${e}`,{category:"websocket",subsystem:"state"})}_clearAllTimers(){this._clearServerInactivityTimer(),this._logger.log("WebSocket","Cleared specific timers in WebSocketPlugin.",{category:"websocket",subsystem:"timers"})}connect(){if(!this._timersInitialized||!this._url)return void this._logger.warn("WebSocket","Cannot connect - plugin not initialized or URL not provided",{category:"websocket",subsystem:"plugin"});if(this._connectionState===Kd.CONNECTING||this._connectionState===Kd.CONNECTED)return void this._logger.log("WebSocket",`Already ${this._connectionState}, not initiating new connection`,{category:"websocket",subsystem:"plugin"});const e=Date.now()-this._lastConnectionAttempt;if(e<this._cooldownPeriod)return this._logger.log("WebSocket",`Connection attempt too soon (${e}ms since last attempt), enforcing cooldown`,{category:"websocket",subsystem:"plugin"}),void window.setTimeout((()=>{this.connect()}),this._cooldownPeriod-e);this._lastConnectionAttempt=Date.now(),this._connectionAttempts++;try{this._setConnectionState(Kd.CONNECTING),this._logger.log("WebSocket",`Connecting to InvenTree WebSocket at ${this._url} (attempt #${this._connectionAttempts+1})`,{category:"websocket",subsystem:"plugin"}),this._connection=new WebSocket(this._url),window.setTimeout((()=>{this._connectionState===Kd.CONNECTING&&(this._logger.warn("WebSocket","Connection attempt timed out after 10 seconds",{category:"websocket",subsystem:"plugin"}),this._closeConnection(),this._setConnectionState(Kd.FAILED))}),1e4),this._connection.onopen=this._onConnectionOpen.bind(this),this._connection.onmessage=this._onConnectionMessage.bind(this),this._connection.onerror=this._onConnectionError.bind(this),this._connection.onclose=this._onConnectionClose.bind(this)}catch(e){this._logger.error("WebSocket",`Error creating WebSocket: ${e}`,{category:"websocket",subsystem:"plugin"}),this._setConnectionState(Kd.FAILED)}}_onConnectionOpen(e){this._setConnectionState(Kd.CONNECTED),this._isConnected=!0,this._connectionAttempts=0,this._lastSuccessfulConnection=Date.now(),this._errorCount=0,this._dispatch&&this._dispatch(ws("connected")),this._logger.log("WebSocketPlugin","WebSocket connection established successfully.",{category:"websocket",subsystem:"connection",connectionId:this._connectionId}),this._lastServerMessageTime=Date.now(),this._startServerInactivityTimer()}_onConnectionMessage(e){let t;this._lastMessageTime=Date.now(),this._messageCount++,this._lastServerMessageTime=Date.now(),this._resetServerInactivityTimer();try{t=JSON.parse(e.data)}catch(t){return void this._logger.error("WebSocket",`Failed to parse message: ${t}`,{category:"websocket",subsystem:"messages",data:e.data})}this._logger.log("WebSocket","Raw message received:",{category:"websocket",subsystem:"messages",data:t});const n=t.id||t.event;let r;r=n?String(n):`msg:${JSON.stringify(t.data||t).substring(0,50)}-${Date.now()%1e4}`;let a=this._debouncedProcessors.get(r);a||(a=Gd((e=>{this._handleDebouncedMessageProcessing(e,r)}),this._messageDebounceTime,{leading:!0,trailing:!1}),this._debouncedProcessors.set(r,a)),a(t)}_handleDebouncedMessageProcessing(e,t){if(this._processingMessages.has(t))this._logger.log("WebSocket",`Still processing message ${t}, skipping duplicate call.`,{category:"websocket",subsystem:"dedupe"});else{this._processingMessages.add(t),this._logger.log("WebSocket",`Processing message (debounced): ${t}`,{category:"websocket",subsystem:"messages",data:e});try{this._processMessage(e)}catch(n){this._logger.error("WebSocket",`Error processing message ${t}: ${n}`,{category:"websocket",subsystem:"errors",data:e})}finally{this._processingMessages.delete(t)}}}_notifyMessageCallbacks(e){for(const t of this._messageCallbacks)try{t(e)}catch(e){this._logger.error("WebSocket",`Error in message callback: ${e}`,{category:"websocket",subsystem:"callback"})}}_onConnectionError(e){this._errorCount++,this._logger.error("WebSocketPlugin",`WebSocket error event triggered - error count: ${this._errorCount}`,{category:"websocket",subsystem:"error",eventData:e}),this._connectionState!==Kd.CONNECTING&&this._connectionState!==Kd.RECONNECTING&&(this._setConnectionState(Kd.FAILED),this._autoReconnect&&this._scheduleReconnect())}_onConnectionClose(e){const t=this._connectionState;this._setConnectionState(Kd.DISCONNECTED),this._isConnected=!1,this._clearServerInactivityTimer(),this._logger.log("WebSocketPlugin",`WebSocket connection closed. Code: ${e.code}, Reason: "${e.reason||"Unknown reason"}", Was Clean: ${e.wasClean}`,{category:"websocket",subsystem:"connection",connectionId:this._connectionId,previousState:t}),this._dispatch&&this._dispatch(ws("disconnected")),!this._disconnecting&&this._autoReconnect?(this._logger.log("WebSocketPlugin","Auto-reconnect is enabled, scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),this._scheduleReconnect()):(this._logger.log("WebSocketPlugin","Auto-reconnect disabled or intentionally disconnecting, not scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),t===Kd.CLOSING&&this._setConnectionState(Kd.DISCONNECTED)),this._connection=null}_closeConnection(){this._logger.log("WebSocketPlugin","Attempting to close WebSocket connection.",{category:"websocket",subsystem:"connection",currentState:this._connectionState}),this._connection?this._connection.readyState===WebSocket.OPEN||this._connection.readyState===WebSocket.CONNECTING?(this._setConnectionState(Kd.CLOSING),this._connection.close(1e3,"Client initiated disconnect")):(this._logger.log("WebSocketPlugin","Connection already closed or closing.",{readyState:this._connection.readyState}),this._clearAllTimers(),this._setConnectionState(Kd.DISCONNECTED)):(this._logger.log("WebSocketPlugin","No active connection to close."),this._setConnectionState(Kd.DISCONNECTED))}_startServerInactivityTimer(){this._clearServerInactivityTimer(),this._connectionState===Kd.CONNECTED&&(this._logger.log("WebSocketPlugin",`Starting server inactivity timer for ${this._serverInactivityTimeoutDuration}ms.`,{category:"websocket",subsystem:"heartbeat"}),this._serverInactivityTimerId=window.setTimeout((()=>{this._handleServerInactivity()}),this._serverInactivityTimeoutDuration))}_clearServerInactivityTimer(){this._serverInactivityTimerId&&(window.clearTimeout(this._serverInactivityTimerId),this._serverInactivityTimerId=null)}_resetServerInactivityTimer(){this._startServerInactivityTimer()}_handleServerInactivity(){this._logger.warn("WebSocketPlugin","Server inactivity detected. Last message received more than timeout period ago.",{category:"websocket",subsystem:"heartbeat",lastMessageTime:new Date(this._lastServerMessageTime).toISOString(),timeoutDuration:this._serverInactivityTimeoutDuration}),this._errorCount++,this._logger.error("WebSocketPlugin","Max server inactivity reached, closing connection as potentially stale.",{category:"websocket",subsystem:"heartbeat"}),this._disconnecting=!1,this.disconnect()}onMessage(e){return this._messageCallbacks.push(e),()=>{const t=this._messageCallbacks.indexOf(e);-1!==t&&this._messageCallbacks.splice(t,1)}}_processMessage(e){e.data&&"PartParameter"===e.data.model&&this._handleParameterUpdate(e.data)}_handleParameterUpdate(e){var t;this._logger.log("WebSocket","Processing parameter update",{category:"websocket",subsystem:"parameters",data:e});const n=null!==(t=e.part_pk)&&void 0!==t?t:e.parent_id,r=e.parameter_name,a=e.parameter_value;void 0!==n&&void 0!==r&&void 0!==a?(this._logger.log("WebSocket",`Dispatching parameters/webSocketUpdateReceived for Part ${n}, Param ${r} to value ${a}`,{category:"websocket",subsystem:"parameters",level:"info"}),this._dispatch?this._dispatch(Kr({partId:Number(n),parameterName:String(r),value:String(a),source:"websocket"})):this._logger.warn("WebSocket","Dispatch function not available in _handleParameterUpdate.",{category:"websocket",subsystem:"errors"})):this._logger.warn("WebSocket","Parameter update received, but missing part_pk/parent_id, parameter_name, or parameter_value.",{category:"websocket",subsystem:"parameters",data:e})}isConnected(){return this._connectionState===Kd.CONNECTED}getStats(){return{connectionState:this._connectionState,isConnected:this._isConnected,messageCount:this._messageCount,errorCount:this._errorCount,lastMessageTime:this._lastMessageTime,connectionAttempts:this._connectionAttempts,lastConnectionAttempt:this._lastConnectionAttempt,lastSuccessfulConnection:this._lastSuccessfulConnection,lastServerMessageTime:this._lastServerMessageTime}}reset(){this._logger.log("WebSocket","Resetting WebSocket connection",{category:"websocket",subsystem:"control"}),this.disconnect(),this._errorCount=0,this._connectionAttempts=0,window.setTimeout((()=>{var e;(null===(e=this._config)||void 0===e?void 0:e.enabled)&&this.connect()}),1e3)}getTimerStats(){return{isInitialized:this._timersInitialized,activeDebouncers:this._debouncedProcessors.size}}sendMessage(e){if(!this._connection||this._connection.readyState!==WebSocket.OPEN)return this._logger.warn("WebSocket","Cannot send message - WebSocket not connected",{category:"websocket",subsystem:"message"}),!1;try{return this._connection.send(JSON.stringify(e)),!0}catch(e){return this._logger.error("WebSocket",`Error sending message: ${e}`,{category:"websocket",subsystem:"message"}),!1}}registerMessageCallback(e){this._messageCallbacks.includes(e)||this._messageCallbacks.push(e)}unregisterMessageCallback(e){const t=this._messageCallbacks.indexOf(e);-1!==t&&this._messageCallbacks.splice(t,1)}getDiagnostics(){const e=Date.now();return{config:this._config?(e=>{try{return JSON.stringify(e)}catch(e){return`Error stringifying object: ${e instanceof Error?e.message:String(e)}`}})(this._config):"Not configured",url:this._url,connectionState:this._connectionState,isConnected:this._isConnected,isConfigured:this._timersInitialized,lastConnectionAttempt:this._lastConnectionAttempt?new Date(this._lastConnectionAttempt).toISOString():"N/A",connectionAttempts:this._connectionAttempts,lastSuccessfulConnection:this._lastSuccessfulConnection?new Date(this._lastSuccessfulConnection).toISOString():"N/A",lastStateChangeTime:this._lastStateChangeTime?new Date(this._lastStateChangeTime).toISOString():"N/A",timeSinceLastStateChangeMs:this._lastStateChangeTime?e-this._lastStateChangeTime:"N/A",disconnectingIntentional:this._disconnecting,autoReconnectEnabled:this._autoReconnect,reconnectIntervalMs:this._reconnectInterval,timersInitialized:this._timersInitialized,messageStats:{count:this._messageCount,lastReceivedTime:this._lastMessageTime?new Date(this._lastMessageTime).toISOString():"N/A",timeSinceLastMessageMs:this._lastMessageTime?e-this._lastMessageTime:"N/A",activeDebouncerCount:this._debouncedProcessors.size,processingMessagesCount:this._processingMessages.size},serverInactivity:{lastServerMessageTime:this._lastServerMessageTime?new Date(this._lastServerMessageTime).toISOString():"N/A",timeSinceLastServerMessageMs:this._lastServerMessageTime?e-this._lastServerMessageTime:"N/A",inactivityTimeoutMs:this._serverInactivityTimeoutDuration,inactivityTimerRunning:!!this._serverInactivityTimerId},timerManagerStats:this.getTimerStats()}}forceReconnect(){this._logger.log("WebSocket","Forcing reconnection...",{category:"websocket",subsystem:"plugin"}),this._closeConnection(),this._errorCount=0,this._setConnectionState(Kd.RECONNECTING),setTimeout((()=>{this.connect()}),100)}disconnect(){this._disconnecting=!0,this._clearAllTimers(),this._closeConnection(),setTimeout((()=>{this._disconnecting=!1,this._setConnectionState(Kd.DISCONNECTED)}),100)}_scheduleReconnect(e=!1){if(!this._autoReconnect||this._disconnecting)return this._logger.log("WebSocket","Auto-reconnect disabled or intentionally disconnecting, not scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),void(this._connectionState===Kd.RECONNECTING&&this._setConnectionState(Kd.DISCONNECTED));if(this._connectionState===Kd.CONNECTING||this._connectionState===Kd.CONNECTED)return void this._logger.log("WebSocketPlugin","Already connecting or connected, skipping scheduled reconnect.",{category:"websocket",subsystem:"reconnect"});this._setConnectionState(Kd.RECONNECTING);const t=e?0:this._reconnectInterval;setTimeout((()=>{this._connectionState!==Kd.RECONNECTING||this._disconnecting?this._logger.log("WebSocket","Skipping scheduled reconnect due to state change or intentional disconnect.",{category:"websocket",subsystem:"reconnect",currentState:this._connectionState,isDisconnecting:this._disconnecting}):(this._logger.log("WebSocket","Attempting scheduled reconnect...",{category:"websocket",subsystem:"reconnect"}),this.connect())}),t)}}const Xd=e.getInstance(),Yd=Yn("genericHaStates/fetchStates",(async({hass:e,entityIds:t},{rejectWithValue:n,dispatch:r})=>{if(Xd.log("fetchHaEntityStatesThunk",`Fetching states for entities: ${t.join(", ")}`,{level:"debug"}),!e||!e.states){const e="HASS object or hass.states is not available.";return Xd.error("fetchHaEntityStatesThunk",e),n(e)}if(!t||0===t.length)return Xd.log("fetchHaEntityStatesThunk","No entity IDs provided. Returning empty array.",{level:"debug"}),[];const a=[];for(const n of t){const t=e.states[n];if(t){const e={entity_id:n,state:t.state,attributes:t.attributes,last_changed:t.last_changed,last_updated:t.last_updated};a.push(e)}else Xd.warn("fetchHaEntityStatesThunk",`State for entity ${n} not found in HASS object.`)}return a.length>0?(Xd.log("fetchHaEntityStatesThunk",`Dispatching setEntityStatesBatch with ${a.length} states.`,{level:"debug"}),r(Or(a))):Xd.log("fetchHaEntityStatesThunk","No states were successfully fetched or processed.",{level:"debug"}),a})),Zd=Yn("system/initializeDirectApi",(async(e,{dispatch:t,getState:n})=>{var r,a,o,i,s,l;const{directApiConfig:c,logger:u}=e;try{u.log("SystemThunks","Initializing Direct API...",c);const e=null===(a=null===(r=c.performance)||void 0===r?void 0:r.api)||void 0===a?void 0:a.throttle;let n=200;"number"==typeof e&&e>=0?n=1e3*e:void 0!==e&&u.warn("SystemThunks",`Invalid API throttle value: ${e}, using default ${n}ms`);const d=null===(i=null===(o=c.performance)||void 0===o?void 0:o.api)||void 0===i?void 0:i.cacheLifetime,p=null===(l=null===(s=c.performance)||void 0===s?void 0:s.api)||void 0===l?void 0:l.failedRequestRetryDelaySeconds;return c.url&&c.api_key?(t(ur({url:c.url,apiKey:c.api_key,throttleDelayMs:n,cacheLifetime:d,failedRequestRetryDelaySeconds:p})),t(dr()),u.log("SystemThunks","Direct API Initialized"),ve("api","initialize",{success:!0,method:"direct"}),!0):(u.error("SystemThunks","Direct API Initialization Failed: Missing URL or API key"),t(pr("Missing URL or API key")),!1)}catch(e){return u.error("SystemThunks","Direct API Initialization Failed:",e.message),t(pr(e.message||"Unknown API initialization error")),!1}})),ep=Yn("system/initializeWebSocketPlugin",(async(e,{dispatch:t,getState:n})=>{const{directApiConfig:r,cardDebugWebSocket:a,logger:o}=e;if(!r)return void o.warn("Thunk:initializeWebSocketPlugin","Direct API config not provided, skipping WebSocket plugin initialization.");const i=Jd.getInstance();if(o.log("Thunk:initializeWebSocketPlugin","Configuring WebSocket Plugin with settings",{data:r}),i.configure(r),o.log("Thunk:initializeWebSocketPlugin","WebSocket Plugin configured."),r.enabled&&(r.url||r.websocket_url)){o.log("Thunk:initializeWebSocketPlugin","Attempting to connect WebSocket plugin...");try{await i.connect(),o.log("Thunk:initializeWebSocketPlugin","WebSocket plugin connected successfully.")}catch(e){o.error("Thunk:initializeWebSocketPlugin","WebSocket plugin connection failed:",{error:e}),t(ws("disconnected"))}}else o.warn("Thunk:initializeWebSocketPlugin","WebSocket plugin not connected: Direct API not enabled or URL/WebSocket URL is missing in config."),t(ws("disconnected"))})),tp=Yn("system/processHassEntities",(async(e,{dispatch:t})=>{var n;const{hass:r,entityIds:a,logger:o}=e;let i=0;if(!a||0===a.length)return o.warn("Thunk:processHassEntities","No entities configured for HASS processing."),ve("redux","thunk:processHassEntities:noentities"),{processedCount:0,errors:0};o.log("Thunk:processHassEntities",`Processing HASS state for entities: ${a.join(", ")}`),ve("redux","thunk:processHassEntities:attempt",{count:a.length});let s=0;for(const e of a){const a=r.states[e];if(!a){o.warn("Thunk:processHassEntities",`Entity ${e} not found in HASS states.`),s++;continue}const l=null===(n=a.attributes)||void 0===n?void 0:n.items;if(l&&Array.isArray(l)){const n=l.map((t=>Object.assign(Object.assign({},t),{source:`hass:${e}`})));n.map((e=>e.pk)),n.length>0?(o.log("Thunk:processHassEntities",`Dispatching setParts for ${e} with ${n.length} items.`),t(qi({entityId:e,parts:n})),t(Wi(e)),i++):(o.log("Thunk:processHassEntities",`No items found for entity ${e} after processing.`),t(qi({entityId:e,parts:[]})),t(Wi(e)))}else o.warn("Thunk:processHassEntities",`No 'items' attribute or not an array for entity ${e}.`,{attributes:a.attributes}),t(qi({entityId:e,parts:[]})),t(Wi(e)),s++}return ve("redux","thunk:processHassEntities:"+(s>0?"partial_success":"success"),{processed:i,errors:s}),{processedCount:i,errors:s}})),np=Yn("system/initializeGenericHaStatesFromConfig",(async({hass:e,logger:t},{dispatch:n,getState:r,rejectWithValue:a})=>{var o;t.log("SystemThunks","Initializing generic HA states from config...");const i=(e=>e.config)(r());if(!i){const e="Card configuration not found in state.";return t.error("SystemThunks",e),a(e)}const s=null===(o=i.data_sources)||void 0===o?void 0:o.ha_entities;if(s&&Array.isArray(s)&&s.length>0){t.log("SystemThunks",`Found ${s.length} generic HA entity IDs in config. Dispatching fetchHaEntityStatesThunk.`);try{await n(Yd({hass:e,entityIds:s})).unwrap(),t.log("SystemThunks","Successfully dispatched and processed fetchHaEntityStatesThunk for generic HA entities.")}catch(e){const n=`Error fetching generic HA entity states: ${e.message||e}`;t.error("SystemThunks",n,{errorData:e})}}else t.log("SystemThunks","No generic HA entity IDs found in config.data_sources.ha_entities.")})),rp=e.getInstance(),ap=Yn("parts/fetchByPks",(async(e,{getState:t,dispatch:n,rejectWithValue:r})=>{const a=t();if(!hr(a)){const e="API not initialized. Cannot fetch parts by PKs.";return rp.error("fetchPartsByPks Thunk",e),r(e)}if(!e||0===e.length)return rp.log("fetchPartsByPks Thunk","No part PKs provided, skipping fetch."),[];rp.log("fetchPartsByPks Thunk",`Fetching ${e.length} parts by PKs via RTK Query: ${e.join(", ")}`);try{const t=await Promise.allSettled(e.map((e=>n(Gu.endpoints.getPart.initiate(e)).unwrap()))),r=[];return t.forEach(((t,n)=>{const a=e[n];"fulfilled"===t.status&&t.value?r.push(Object.assign(Object.assign({},t.value),{source:"api:direct_pk_rtk"})):"rejected"===t.status&&rp.error("fetchPartsByPks Thunk",`Failed to fetch part PK ${a} via RTK Query:`,{reason:t.reason})})),r.length>0?rp.log("fetchPartsByPks Thunk",`Successfully fetched ${r.length}/${e.length} parts via RTK Query.`):e.length>0&&rp.warn("fetchPartsByPks Thunk","No parts were successfully fetched via RTK Query."),r}catch(e){const t=`Generic error in fetchPartsByPks (RTK Query): ${e.message||e}`;return rp.error("fetchPartsByPks Thunk",t,{errorData:e}),r(t)}})),op=e.getInstance(),ip="[TEMPLATE_VALUE_NOT_FOUND]";function sp(e,t){if(null==e)return;const n=t.split(".");let r=e;for(const e of n){if(null==r)return;const t=e.match(/^(\w+):(.+)$/);if(t){const e=t[1],n=t[2];if("object"!=typeof r||!(e in r)||!Array.isArray(r[e]))return;r=r[e].find((e=>e.template_detail&&e.template_detail.name===n||e.name===n));continue}const n=e.match(/^(\w+)\[(\d+)\]$/);if(n){const e=n[1],t=parseInt(n[2],10);if("object"!=typeof r||!(e in r)||!Array.isArray(r[e]))return;r=r[e][t]}else{if("object"!=typeof r||!(e in r))return;r=r[e]}}return r}function lp(e,t){if("string"==typeof e){let n=e;const r=/%%context\.([^%]+)%%/g,a=Array.from(e.matchAll(r));for(const e of a){const r=e[1];try{const a=sp(t,r);null!=a?n=n.split(e[0]).join(String(a)):(n=n.split(e[0]).join(ip),op.warn("ActionEngine",`Template path '%%context.${r}%%' resolved to undefined or null.`))}catch(t){op.error("ActionEngine",`Template processing error for path '%%context.${r}%%'`,{errorMessage:t.message,errorStack:t.stack}),n=n.split(e[0]).join(ip)}}return n}if("object"==typeof e&&null!==e){if(Array.isArray(e))return e.map((e=>lp(e,t)));{const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=lp(e[r],t));return n}}return e}class cp{constructor(){this.dispatch=Qd.dispatch,op.log("ActionEngine","ActionEngine initialized")}static getInstance(){return cp.instance||(cp.instance=new cp),cp.instance}async executeAction(e,t){const n=((e,t)=>e.actions.actionDefinitions[t])(Qd.getState(),e);if(!n)return op.error("ActionEngine",`ActionDefinition not found for ID: ${e}`),void this.dispatch(Yu({actionId:e,runtimeState:{status:"error",error:"Definition not found"}}));const r=Object.assign(Object.assign({},t),{hassStates:t.hassStates||(t.hass?t.hass.states:{})});op.log("ActionEngine",`Executing action: ${n.name} (ID: ${e})`,{context:r}),this.dispatch(Yu({actionId:e,runtimeState:{status:"pending",lastRun:Date.now(),actionName:n.name}}));try{if(n.isEnabledExpressionId){const t=!1;if(op.warn("ActionEngine",`isEnabledExpressionId '${n.isEnabledExpressionId}' found for action '${n.name}'. Actual evaluation pending ExpressionEngine integration.`),!t)return op.log("ActionEngine",`Action '${n.name}' is disabled by expression '${n.isEnabledExpressionId}'. Skipping execution.`),void this.dispatch(Yu({actionId:e,runtimeState:{status:"idle",error:"Action disabled by conditional expression"}}))}if(n.confirmation&&n.confirmation.textTemplate){const t=lp(n.confirmation.textTemplate,r);if(!window.confirm(t))return op.log("ActionEngine",`Action ${n.name} cancelled by user.`),void this.dispatch(Yu({actionId:e,runtimeState:{status:"idle",error:"User cancelled"}}))}switch(n.operation.type){case"call_ha_service":await this.handleCallHAService(n,r);break;case"update_inventree_parameter":await this.handleUpdateInvenTreeParameter(n,r);break;case"dispatch_redux_action":await this.handleDispatchReduxAction(n,r);break;case"trigger_conditional_logic":await this.handleTriggerConditionalLogic(n,r);break;case"set_card_state":await this.handleSetCardState(n,r);break;default:throw new Error(`Unsupported action operation type: ${n.operation.type}`)}if(this.dispatch(Yu({actionId:e,runtimeState:{status:"success",lastRun:Date.now(),error:void 0,actionName:n.name}})),op.log("ActionEngine",`Action ${e} executed successfully.`),n.postEvaluationLogicIds&&n.postEvaluationLogicIds.length>0){op.log("ActionEngine",`Action ${e} has postEvaluationLogicIds. Dispatching evaluateAndApplyEffectsThunk.`,{ids:n.postEvaluationLogicIds});try{await this.dispatch(md({})),op.log("ActionEngine",`Finished dispatching evaluateAndApplyEffectsThunk for action ${e}.`)}catch(t){op.error("ActionEngine",`Error dispatching or executing evaluateAndApplyEffectsThunk after action ${e}:`,{error:t})}}}catch(t){op.error("ActionEngine",`Error executing action ${n.name}:`,{errorMessage:t.message,errorStack:t.stack}),this.dispatch(Yu({actionId:e,runtimeState:{status:"error",error:t.message||"Unknown execution error",lastRun:Date.now(),actionName:n.name}}))}}async handleCallHAService(e,t){const n=e.operation.callHAService;if(!n)throw new Error("call_ha_service operation configuration is missing.");if(!t.hass)throw new Error("HomeAssistant object (hass) not found in execution context.");const r=n.service.split(".");if(2!==r.length)throw new Error(`Invalid service name: ${n.service}`);const[a,o]=r,i=n.dataTemplate?lp(n.dataTemplate,t):{};let s;if(n.target){const e=lp(n.target,t);e&&("direct_entity"===e.type&&e.entity_id?s={entity_id:e.entity_id}:"standard_object_target"===e.type&&e.target_details?(s=e.target_details,s&&0===Object.keys(s).length&&(s=void 0)):e.entity_id?(s={entity_id:e.entity_id},op.warn("ActionEngine","Processed target had entity_id at top level without a type. Using it directly. Consider updating action config.",{processedTarget:e})):op.warn("ActionEngine","Processed target did not match expected structure or was empty. No target will be sent.",{processedTarget:e}))}let l=Object.assign({},i);s&&(l=1===Object.keys(s).length&&s.entity_id?Object.assign(Object.assign({},l),{entity_id:s.entity_id}):Object.assign(Object.assign({},l),{target:s})),op.log("ActionEngine",`Calling HA service ${a}.${o} with data:`,{data:l}),await t.hass.callService(a,o,l)}async handleUpdateInvenTreeParameter(e,t){var n,r;const a=e.operation.updateInvenTreeParameter;if(!a)throw new Error("update_inventree_parameter operation configuration is missing.");let o;if("number"==typeof a.partIdContext)o=a.partIdContext;else if("current"===a.partIdContext)o=null===(n=t.part)||void 0===n?void 0:n.pk;else if("string"==typeof a.partIdContext){const e=lp(a.partIdContext,t);e&&!isNaN(Number(e))?o=Number(e):op.error("ActionEngine:handleUpdateInvenTreeParameter",`Templated partIdContext resolved to invalid number: ${e}`)}if(void 0===o)throw new Error("Could not resolve partId for update_inventree_parameter operation.");const i=lp(a.valueTemplate,t);if(i===ip)throw new Error(`Value template resolved to not found for parameter ${a.parameterName} on part ${o}.`);const s=Qd.getState(),l=Gu.endpoints.getPartParameters.select(o)(s);if(!l||"fulfilled"!==l.status||!l.data)throw op.error("ActionEngine:handleUpdateInvenTreeParameter",`Parameters for part ${o} not found in RTK Query cache or not yet fetched. Cannot determine parameter PK for '${a.parameterName}'.`),new Error(`Parameters for part ${o} not available in cache. Cannot update ${a.parameterName}.`);const c=l.data.find((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===a.parameterName}));if(!c)throw op.error("ActionEngine:handleUpdateInvenTreeParameter",`Parameter '${a.parameterName}' not found for part ${o} in cached data. Cannot get PK for update.`),new Error(`Parameter '${a.parameterName}' not found for part ${o}.`);const u=c.pk;op.log("ActionEngine:handleUpdateInvenTreeParameter",`Attempting to update param PK ${u} ('${a.parameterName}') for part ${o} to '${i}'.`);try{await this.dispatch(Gu.endpoints.updatePartParameter.initiate({partId:o,parameterPk:u,value:String(i)})).unwrap(),op.log("ActionEngine:handleUpdateInvenTreeParameter",`Successfully updated parameter ${a.parameterName} for part ${o}.`)}catch(e){throw op.error("ActionEngine:handleUpdateInvenTreeParameter",`Failed to update parameter ${a.parameterName} for part ${o}:`,{error:e}),new Error(`Failed to update InvenTree parameter: ${e.message||(null===(r=e.data)||void 0===r?void 0:r.detail)||"Unknown API error"}`)}}async handleDispatchReduxAction(e,t){const n=e.operation.dispatchReduxAction;if(!n)throw new Error("dispatch_redux_action operation configuration is missing.");const r=n.actionType;if(!r||"string"!=typeof r||""===r.trim())throw new Error("Invalid or missing actionType for dispatch_redux_action operation.");let a={};n.payloadTemplate&&(a=lp(n.payloadTemplate,t),a===ip&&Object.keys(n.payloadTemplate).length>0&&op.warn("ActionEngine:handleDispatchReduxAction",`Payload template for actionType ${r} resolved to UNDEFINED_TEMPLATE_MARKER. This might indicate missing context variables.`)),op.log("ActionEngine:handleDispatchReduxAction","Dispatching Redux action:",{actionType:r,payload:a});try{this.dispatch({type:r,payload:a}),op.log("ActionEngine:handleDispatchReduxAction",`Successfully dispatched Redux action ${r}.`)}catch(e){throw op.error("ActionEngine:handleDispatchReduxAction",`Error dispatching Redux action ${r}:`,{error:e}),new Error(`Failed to dispatch Redux action: ${e.message||"Unknown error"}`)}}async handleTriggerConditionalLogic(e,t){const n=e.operation.triggerConditionalLogic;if(!n)throw new Error("trigger_conditional_logic operation configuration is missing.");const r=n.logicIdToTrigger;op.log("ActionEngine:handleTriggerConditionalLogic",`Operation requests triggering of conditional logic ID: ${r}. Currently, this will re-evaluate all conditional logic.`,{context:t});try{await this.dispatch(md({})),op.log("ActionEngine",`Finished triggering conditional logic evaluation for action: ${e.name}.`)}catch(t){throw op.error("ActionEngine:handleTriggerConditionalLogic",`Error dispatching evaluateAndApplyEffectsThunk (triggered by action ${e.id}):`,{error:t}),new Error(`Failed to trigger conditional logic re-evaluation: ${t.message||"Unknown error"}`)}}async handleSetCardState(e,t){const n=e.operation.setCardState;if(!n)throw new Error("set_card_state operation configuration is missing.");const r=n.statePath,a=lp(n.valueTemplate,t);op.warn("ActionEngine:handleSetCardState",`Operation type 'set_card_state' is not fully implemented in ActionEngine due to architectural constraints. Attempted to set state for path '${r}' with value:`,{resolvedValue:a,context:t}),op.warn("ActionEngine:handleSetCardState","Consider using Redux (via 'dispatch_redux_action') or local component state for managing UI states."),await Promise.resolve()}}const up=cp.getInstance(),dp="/local/inventree_thumbs/",pp=["png","jpg","jpeg","gif","webp"],fp=Ee.memo((({partData:t,config:n,layout:r,icon:a,badge:o,onClick:i,style:s,className:l})=>{var c;e.getInstance();const[u,d]=Ce.useState(null),[p,f]=Ce.useState(null),[h,g]=Ce.useState(0),[m,y]=Ce.useState(!1),[v,b]=Ce.useState(!1),[S,k]=Ce.useState(!1);if(Ce.useEffect((()=>{var e;if(g(0),y(!1),b(!1),k(!1),f(null),!t||!t.pk)return void d(null);const r=null===(e=null==n?void 0:n.data_sources)||void 0===e?void 0:e.inventree_pk_thumbnail_overrides,a=null==r?void 0:r.find((e=>e.pk===t.pk));let o=null;if(a&&a.path){let e=a.path;e.startsWith("/")||(e=`/${e}`),e.startsWith("/local/")||(e=`/local${e}`),o=e,b(!0)}else pp.length>0?o=`${dp}part_${t.pk}.${pp[0]}`:(o=t.thumbnail||null,y(!0));f(o)}),[t,n]),Ce.useEffect((()=>{if(!p)return;const e=new window.Image;return e.onload=()=>{d(p)},e.onerror=()=>{let e=null;if(v&&!S)k(!0),e=(null==t?void 0:t.thumbnail)||null;else if(m||S)d(null);else{const n=h+1;n<pp.length?(g(n),e=`${dp}part_${t.pk}.${pp[n]}`):(y(!0),e=(null==t?void 0:t.thumbnail)||null)}p!==e?f(e):null===e&&null!==u&&d(null)},e.src=p,()=>{e.onload=null,e.onerror=null}}),[p,t,v,S,h,m,u]),!t)return null;const w=r||(null==n?void 0:n.view_type)||"default",_=a,x=o,C=null===(c=null==n?void 0:n.style)||void 0===c?void 0:c.image_size,E="number"==typeof C&&C>0?C:80,A={position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",borderRadius:"4px",backgroundColor:"#f0f0f0",cursor:i?"pointer":"default"};let I;switch(w){case"detail":I={width:"100%",height:"auto",aspectRatio:"1 / 1"};break;case"list":I={width:"40px",height:"40px"};break;default:I={width:`${E}px`,height:`${E}px`,aspectRatio:"1 / 1"}}const P=Object.assign(Object.assign(Object.assign({},A),I),s),j={width:"100%",height:"100%",objectFit:"contain",display:u?"block":"none",opacity:u?1:0,transition:"opacity 0.3s ease-in-out"},R={display:u?"none":"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"#e0e0e0",color:"#757575",fontSize:"list"===w?"1em":"grid"===w||"default"===w?"1.5em":"2em",fontWeight:"bold"},T={position:"absolute",zIndex:1},N=Object.assign(Object.assign({},T),{top:"4px",left:"4px",fontSize:"list"===w?"16px":"24px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",padding:"2px"}),O=Object.assign(Object.assign({},T),{bottom:"4px",right:"4px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"2px 5px",borderRadius:"3px",fontSize:"list"===w?"0.6em":"0.7em"});return u||_||x||"button"===w?Ue.jsxs("div",{style:P,onClick:i,className:`part-thumbnail-container layout-${w} ${l||""}`.trim(),children:[u&&Ue.jsx("img",{src:u,alt:(null==t?void 0:t.name)||"Part Image",style:j}),!u&&(_||x)&&Ue.jsx("div",{style:R,children:((null==t?void 0:t.name)||"Part").substring(0,1)}),!u&&!_&&!x&&Ue.jsx("div",{style:R,children:((null==t?void 0:t.name)||"Part").substring(0,1)}),_&&Ue.jsx("span",{style:N,children:"string"==typeof _&&_.startsWith("mdi:")?Ue.jsx("ha-icon",{icon:_}):Ue.jsx("span",{dangerouslySetInnerHTML:{__html:_||""}})}),x&&Ue.jsx("span",{style:O,children:x})]}):null})),hp=({config:e,visualEffect:t,name:n,description:r,inStock:a,units:o,minimumStock:i,parametersData:s,isLoadingParameters:l,isParametersError:c,parametersError:u})=>{const d=(e=>{var t;return{partDetails:{flex:1,display:"flex",flexDirection:"column",gap:"4px",overflow:"hidden",color:null==e?void 0:e.textColor},partName:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},partDescription:{fontSize:"0.9em",opacity:null!==(t=null==e?void 0:e.opacity)&&void 0!==t?t:.8,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},partStock:{fontSize:"0.9em",fontWeight:"500"},partParameters:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"4px",fontSize:"0.8em"},partParameter:{display:"flex",justifyContent:"space-between"},paramName:{fontWeight:"500",marginRight:"4px"},paramValue:{}}})(t);if(void 0===n&&!l)return null;const p=(null==e?void 0:e.display)||{};return Ue.jsxs("div",{style:d.partDetails,children:[!1!==p.show_name&&void 0!==n&&Ue.jsx("div",{style:d.partName,children:n}),p.show_description&&r&&Ue.jsx("div",{style:d.partDescription,children:r}),!1!==p.show_stock&&void 0!==a&&Ue.jsxs("div",{style:d.partStock,children:["Stock: ",a,i&&i>0?` / Min: ${i}`:"",o?` ${o}`:""]}),!1!==p.show_parameters&&Ue.jsxs(Ue.Fragment,{children:[l&&Ue.jsx("p",{children:"Loading parameters..."}),c&&Ue.jsxs("p",{style:{color:"red"},children:["Error loading parameters: ",(()=>{var e;if(u){if("status"in u){const t=u;return"string"==typeof t.data?t.data:"object"==typeof t.data&&t.data&&"message"in t.data?t.data.message:(null===(e=t.status)||void 0===e?void 0:e.toString())||"API error"}return u.message||"Unknown client error"}return"Unknown error"})()]}),s&&s.length>0&&Ue.jsx("div",{style:d.partParameters,children:s.map((e=>{var t,n,r;return Ue.jsxs("div",{style:d.partParameter,children:[Ue.jsxs("span",{style:d.paramName,children:[(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Param",":"]}),Ue.jsxs("span",{style:d.paramValue,children:[e.data,(null===(n=e.template_detail)||void 0===n?void 0:n.units)?` ${e.template_detail.units}`:""]})]},e.pk||(null===(r=e.template_detail)||void 0===r?void 0:r.name)||Math.random())}))}),s&&0===s.length&&!l&&!c&&Ue.jsx("p",{style:{fontSize:"0.8em",opacity:.7},children:"No parameters for this part."})]})]})},gp=({partItem:t,config:n,hass:r})=>{var a;const o=Ce.useMemo((()=>e.getInstance()),[]),i=Ce.useCallback(((e,t)=>t?e.replace(/%%part\.pk%%/g,String(t.pk)).replace(/%%part\.name%%/g,t.name||""):e),[]),s=Ce.useCallback((()=>{if(!n||!n.actions||!Array.isArray(n.actions))return o.log("PartButtons React","No actions defined in config."),[];const e=n.actions.filter((e=>{var n,r;if("ui_button"!==e.trigger.type)return!1;if((null===(n=e.trigger.ui)||void 0===n?void 0:n.placement)&&"part_footer"!==e.trigger.ui.placement)return!1;if(t&&(null===(r=e.trigger.ui)||void 0===r?void 0:r.targetPartPks))if(Array.isArray(e.trigger.ui.targetPartPks)){if(e.trigger.ui.targetPartPks.length>0&&!e.trigger.ui.targetPartPks.includes(t.pk))return!1}else e.trigger.ui.targetPartPks;return!0}));return o.log("PartButtons React",`Found ${e.length} UI Action Buttons for part_footer (part PK: ${null==t?void 0:t.pk})`,{data:e}),e}),[n,o,t]),l=Ce.useCallback((async e=>{if(!t)return void o.warn("PartButtons React","Button clicked, but no partItem is selected.");if(!r)return void o.warn("PartButtons React","Button clicked, but HASS object is not available.");o.log("PartButtons React",`Executing Action ID: ${e.id} (Name: ${e.name}) for part ${t.pk}`);const n={part:t,hass:r};try{await up.executeAction(e.id,n),o.log("PartButtons React",`Action ${e.name} dispatched to ActionEngine.`)}catch(t){o.error("PartButtons React",`Error dispatching action ${e.name} to ActionEngine: ${(null==t?void 0:t.message)||String(t)}`,{error:t})}}),[t,r,o]),c=Ce.useMemo((()=>s()),[s]);if(!t||0===c.length||!(null===(a=null==n?void 0:n.display)||void 0===a?void 0:a.show_buttons))return null;const u={padding:"6px 10px",margin:"2px",border:"1px solid var(--divider-color, #ccc)",borderRadius:"var(--ha-card-border-radius, 4px)",cursor:"pointer",minWidth:"30px",textAlign:"center",fontSize:"0.9em",backgroundColor:"var(--primary-background-color)",color:"var(--primary-text-color)"};return Ue.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",padding:"4px 0",flexWrap:"wrap"},children:c.map(((e,n)=>{var r,a;let o="";(null===(r=e.trigger.ui)||void 0===r?void 0:r.labelTemplate)&&""!==e.trigger.ui.labelTemplate.trim()&&(o=i(e.trigger.ui.labelTemplate,t));const s=null===(a=e.trigger.ui)||void 0===a?void 0:a.icon,c=!(!e.isEnabledExpressionId||""===e.isEnabledExpressionId.trim()),d=Object.assign(Object.assign({},u),{cursor:c?"not-allowed":"pointer",opacity:c?.5:1});return Ue.jsxs("button",{onClick:t=>{t.stopPropagation(),c||l(e)},style:d,title:c?`${e.name} (Condition not met)`:e.name,disabled:c,children:[s&&Ue.jsx("ha-icon",{icon:s,style:{marginRight:o?"4px":"0"}}),o]},e.id||`action-${n}`)}))})},mp=({partId:t,config:n,hass:r,cardInstanceId:a})=>{var o,i;const s=Ce.useMemo((()=>e.getInstance()),[]),{data:l,isLoading:c,isError:u,error:d,isFetching:p}=qu(t,{skip:!t}),{data:f,isLoading:h,isError:g,error:m,isFetching:y}=Uu(t,{skip:!t||!l}),v=ht((e=>t?ys(e,a||"unknown_card",t):void 0));Ce.useEffect((()=>{l&&s.log("PartView React","Part data from RTK Query:",{partId:null==l?void 0:l.pk,partName:null==l?void 0:l.name,hasPartData:!!l,isLoading:c,isFetching:p,isError:u,visualEffect:v}),f&&s.log("PartView React","Parameters data from RTK Query:",{partId:t,parametersCount:null==f?void 0:f.length,isLoading:h,isFetching:y,isError:g})}),[l,f,c,p,u,h,y,g,v,s,t]);const b=Ce.useCallback((()=>l&&"number"==typeof l.in_stock?l.in_stock<=0?"none":l.minimum_stock&&l.in_stock<=l.minimum_stock?"low":"good":"none"),[l]),S=Ce.useCallback((e=>{switch(e){case"none":return"#f44336";case"low":return"#ff9800";case"good":return"#4caf50";default:return"transparent"}}),[]);if(!n)return Ue.jsx("div",{children:"Configuration is missing."});if(c||p&&!l)return Ue.jsx("div",{children:"Loading part details..."});if(u){let e="Unknown error";if(d)if("status"in d){const t=d;e="string"==typeof t.data?t.data:t.data&&"object"==typeof t.data&&t.data.message?t.data.message:t.error?t.error:`API error status: ${t.status}`}else e=d.message||"Client error";return Ue.jsxs("div",{children:["Error loading part: ",e]})}if(!l)return Ue.jsx("div",{children:"Part data not available."});if(!1===(null==v?void 0:v.isVisible))return s.log("PartView React",`Part ${t} is not visible due to conditional effect.`,{partId:t,visualEffect:v}),null;const k=n.display||{},w=S(b()),_={position:"relative",display:"flex",flexDirection:"column",gap:"0.5rem",padding:"1rem",borderRadius:"4px",background:(null==v?void 0:v.highlight)||"white",border:null==v?void 0:v.border,opacity:"number"==typeof(null==v?void 0:v.opacity)?v.opacity:1,borderTop:k.show_stock_status_border&&!(null==v?void 0:v.border)?`3px solid ${w}`:(null==v?void 0:v.border)||void 0},x={fontWeight:"bold",fontSize:"1.1em",color:null==v?void 0:v.textColor},C={display:"inline-block",padding:"2px 8px",borderRadius:"12px",fontSize:"0.9em",backgroundColor:(null===(o=n.display)||void 0===o?void 0:o.show_stock_status_colors)?w:"transparent",color:(null===(i=n.display)||void 0===i?void 0:i.show_stock_status_colors)?"white":(null==v?void 0:v.textColor)||"inherit"},E={flexGrow:1,color:null==v?void 0:v.textColor},A=["part-view-container",(null==v?void 0:v.priority)?`priority-${v.priority}`:"",...(null==v?void 0:v.customClasses)||[]].filter(Boolean).join(" "),I=Ce.useMemo((()=>{if(!(null==n?void 0:n.actions)||!l)return;const e=n.actions.find((e=>"ui_thumbnail_click"===e.trigger.type));return e?t=>{t.stopPropagation(),s.log("PartView",`Thumbnail clicked for part ${l.pk}, executing action: ${e.name}`);const n={part:l,hassStates:null==r?void 0:r.states};up.executeAction(e.id,Object.assign(Object.assign({},n),{hass:r}))}:void 0}),[null==n?void 0:n.actions,l,r,s]);return Ue.jsxs("div",{style:_,className:A,children:[!1!==k.show_header&&Ue.jsxs("div",{className:"part-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[!1!==k.show_name&&Ue.jsx("div",{style:x,children:l.name}),!1!==k.show_stock&&Ue.jsxs("span",{style:C,children:[l.in_stock," ",l.units||""]})]}),Ue.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[!1!==k.show_image&&l.thumbnail&&Ue.jsx("div",{className:"part-thumbnail-wrapper",style:{width:"100px",height:"100px"},children:Ue.jsx(fp,{partData:l,config:n,layout:"detail",icon:null==v?void 0:v.icon,badge:null==v?void 0:v.badge,onClick:I})}),Ue.jsx("div",{style:E,children:Ue.jsx(hp,{config:n,visualEffect:v,name:l.name,description:l.description,inStock:l.in_stock,units:l.units,minimumStock:l.minimum_stock,parametersData:f,isLoadingParameters:h||y&&!f,isParametersError:g,parametersError:m})})]}),!1!==k.show_buttons&&Ue.jsx("div",{className:"part-buttons-wrapper",style:{marginTop:"0.5rem"},children:Ue.jsx(gp,{partItem:l,config:n,hass:r})})]})},yp=({hass:t,config:n,selectedPartId:r,cardInstanceId:a})=>{const o=Ce.useMemo((()=>e.getInstance()),[]);if(Ce.useEffect((()=>{o.log("DetailLayout","Props update",{hasHass:!!t,hasConfig:!!n,selectedPartId:r})}),[t,n,r,o]),!n)return o.log("DetailLayout","Warn - No config provided",{config:n}),Ue.jsx("div",{children:"Error: Configuration is missing."});return Ue.jsx("div",{style:{padding:"1rem",background:"var(--ha-card-background, var(--card-background-color, white))",borderRadius:"var(--ha-card-border-radius, 4px)"},children:r?Ue.jsx(mp,{partId:r,config:n,hass:t,cardInstanceId:a}):Ue.jsxs("div",{children:[Ue.jsx("div",{children:"No part selected or available for the configured entities."}),Ue.jsx("div",{children:"Please check your card configuration and ensure entities have associated parts."})]})})},vp=({part:t,config:n,hass:r,cardInstanceId:a,isCurrentlyLocating:o,parameterActions:i,parametersDisplayEnabled:s,handleLocateGridItem:l,handleParameterActionClick:c})=>{const u=e.getInstance(),d=t.pk,p=ht((e=>ys(e,a||"unknown_card",d))),f=n.display||{},{data:h,isLoading:g,isError:m,error:y}=Uu(d,{skip:!s}),v=p||{},b=((e,t)=>{const n={border:"1px solid #eee",padding:"8px",textAlign:"center",cursor:"pointer",height:(null==t?void 0:t.item_height)?`${t.item_height}px`:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between"};return(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=e.border),"number"==typeof(null==e?void 0:e.opacity)&&(n.opacity=e.opacity),n})(v,n),S=(e=>{const t={};return(null==e?void 0:e.textColor)&&(t.color=e.textColor),t})(v),k=["part-container",o?"locating":"",(null==v?void 0:v.priority)?`priority-${v.priority}`:"",...(null==v?void 0:v.customClasses)||[]].filter(Boolean).join(" ");if(!1===v.isVisible)return null;const w=Ce.useMemo((()=>{if(!n.actions||!t)return;const e=n.actions.find((e=>"ui_thumbnail_click"===e.trigger.type));return e?n=>{n.stopPropagation(),u.log("GridItem",`Thumbnail clicked for part ${t.pk}, executing action: ${e.name}`);const a={part:t,hassStates:null==r?void 0:r.states};up.executeAction(e.id,Object.assign(Object.assign({},a),{hass:r}))}:void 0}),[n.actions,t,r,u]);return Ue.jsxs("div",{className:k,style:b,onClick:()=>l(d),children:[f.show_image&&Ue.jsx("div",{className:"part-thumbnail",style:{marginBottom:"8px"},children:Ue.jsx(fp,{partData:t,config:n,layout:"grid",icon:null==v?void 0:v.icon,badge:null==v?void 0:v.badge,onClick:w})}),Ue.jsxs("div",{className:"part-info",style:Object.assign(Object.assign({},S),{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}),children:[f.show_name&&Ue.jsx("div",{className:"part-name",style:{fontWeight:"bold"},children:t.name}),f.show_stock&&Ue.jsxs("div",{className:"part-stock",children:["Stock: ",t.in_stock," ",t.units||""]}),f.show_description&&t.description&&Ue.jsx("p",{className:"part-description",style:{fontSize:"0.8em",margin:"4px 0"},children:t.description})]}),Ue.jsxs("div",{className:"part-actions-footer",style:{marginTop:"auto"},children:[f.show_buttons&&r&&n&&Ue.jsx("div",{style:{fontSize:"small",color:"gray",padding:"4px 0"},children:Ue.jsx(gp,{partItem:t,config:n,hass:r})}),i.length>0&&Ue.jsx("div",{className:"action-buttons",style:{display:"flex",justifyContent:"center",gap:"4px",marginTop:"4px"},children:i.map((e=>Ue.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),c(d,e)},title:e.label,style:{fontSize:"0.75em",padding:"2px 5px"},children:e.icon?Ue.jsxs("span",{children:["(",e.icon,")"]}):e.label},`${d}-${e.label}`)))})]}),o&&Ue.jsx("div",{className:"locating-indicator",children:"Locating..."}),s&&Ue.jsxs("div",{className:"part-parameters",style:{fontSize:"0.75em",textAlign:"left",marginTop:"8px"},children:[g&&Ue.jsx("p",{children:"Loading parameters..."}),m&&Ue.jsxs("p",{style:{color:"red"},children:["Error loading parameters: ",(()=>{var e;if(y){if("status"in y){const t=y;return t.data&&"object"==typeof t.data&&t.data.message?t.data.message:"string"==typeof t.data?t.data:t.message||(null===(e=t.status)||void 0===e?void 0:e.toString())||"API error"}return y.message||"Unknown client error"}return"Unknown error"})()]}),h&&h.length>0&&Ue.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:h.map((e=>{var t;return Ue.jsxs("li",{children:[null===(t=e.template_detail)||void 0===t?void 0:t.name,": ",e.data]},e.pk)}))})]})]},d)},bp=({hass:t,config:n,parts:r,cardInstanceId:a,item:o})=>{var i,s;const l=e.getInstance(),c=dt(),[u,{isLoading:d,error:p}]=Bu(),f=Ce.useMemo((()=>{var e,t,r,a;const o=null!==(e=null==n?void 0:n.display)&&void 0!==e?e:{},i=null!==(t=null==n?void 0:n.parameters)&&void 0!==t?t:{};return void 0===o.show_parameters?null!==(r=i.show_section)&&void 0!==r&&r:null!==(a=o.show_parameters)&&void 0!==a&&a}),[null==n?void 0:n.display,null==n?void 0:n.parameters]),h=ht((e=>ts(e))),g=ht((e=>e.parameters.parameterLoadingStatus||{})),m=Ce.useMemo((()=>{var e;const t=[];return(null===(e=null==n?void 0:n.interactions)||void 0===e?void 0:e.buttons)&&Array.isArray(n.interactions.buttons)&&n.interactions.buttons.forEach((e=>{var n,r;"internal-function"===e.type&&"update_parameter"===e.function_name&&t.push({id:e.id||e.label,label:e.label,icon:e.icon,parameter:(null===(n=e.function_args)||void 0===n?void 0:n.parameterName)||"unknown_param",value:(null===(r=e.function_args)||void 0===r?void 0:r.value)||""})})),t}),[null===(i=null==n?void 0:n.interactions)||void 0===i?void 0:i.buttons]),[y,v]=Ce.useState(new Set),[b,S]=Ce.useState(!1);Ce.useEffect((()=>{if(f&&r&&r.length>0){const e=new Set(r.map((e=>e.pk)).filter((e=>"number"==typeof e&&!isNaN(e))));v(e)}else f||v(new Set)}),[r,f]),Ce.useEffect((()=>{var e;if(!f||0===y.size)return void(b&&S(!1));let t=!1;for(const n of y){if("loading"===(null!==(e=g[n])&&void 0!==e?e:"idle")){t=!0;break}}b!==t&&S(t)}),[y,g,f,b]);const k=Ce.useCallback((()=>{var e;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===y.size)return[];const t=[];return y.forEach((e=>{const n=g[e]||"idle";"idle"!==n&&"failed"!==n||t.push(e)})),t.sort(((e,t)=>e-t)),t}),[null===(s=null==n?void 0:n.direct_api)||void 0===s?void 0:s.enabled,y,g]),w=Ce.useMemo(k,[k]),[_,x]=Ce.useState("");Ce.useEffect((()=>{const e=w.sort(((e,t)=>e-t)).join(",");w.length>0&&e!==_?(c(od(w)),x(e)):w.length}),[w,c,_]);const C=Ce.useMemo((()=>{if(!r)return[];let e=[...r];return e.sort(((e,t)=>e.pk-t.pk)),e}),[r]),E=Ce.useCallback((e=>{t&&c(zi({partId:e,hass:t}))}),[c,t]),A=Ce.useCallback((async(e,t,n)=>{if(l.log("GridLayout","handleParameterActionClick (RTK)",{partId:e,action:t,parameterPk:n,level:"debug"}),void 0!==n)try{await u({partId:e,parameterPk:n,value:t.value}).unwrap(),l.log("GridLayout",`Successfully updated parameter ${t.parameter} (PK: ${n}) for part ${e} via RTK Mutation.`)}catch(r){l.error("GridLayout",`Failed to update parameter ${t.parameter} (PK: ${n}) for part ${e} via RTK Mutation:`,{error:r})}else l.error("GridLayout",`Parameter PK not provided for action '${t.parameter}' on part ${e}. Cannot update.`)}),[c,l,u]);if(!n)return Ue.jsx("div",{className:"grid-layout loading",children:Ue.jsx("p",{children:"Loading config..."})});if(!r||0===r.length)return Ue.jsx("div",{className:"grid-layout no-parts",children:Ue.jsx("p",{children:"No parts to display."})});if(0===C.length&&r.length>0)return l.log("GridLayout","All parts were filtered out by conditional logic or other filters.",{originalCount:r.length,level:"debug"}),Ue.jsx("div",{className:"grid-layout no-parts",children:Ue.jsx("p",{children:"All parts filtered out."})});if(0===C.length)return l.log("GridLayout","No parts to display (filtered or initial empty). ",{level:"debug"}),Ue.jsx("div",{className:"grid-layout no-parts",children:Ue.jsx("p",{children:"No parts to display."})});n.display;const I=n.layout_options||{},P={display:"grid",gridTemplateColumns:`repeat(${I.columns||3}, 1fr)`,gap:`${I.grid_spacing||8}px`,padding:"8px"};return Ue.jsx("div",{className:"grid-layout",style:P,children:C.map((e=>{if(!e||void 0===e.pk)return l.warn("GridLayout","Skipping render for invalid part object:",{partData:e,level:"debug"}),null;const r=e.pk,o=h===r;return Ue.jsx(vp,{part:e,config:n,hass:t,cardInstanceId:a,isCurrentlyLocating:o,parameterActions:m,parametersDisplayEnabled:f,handleLocateGridItem:E,handleParameterActionClick:A},r)}))})},Sp=e.getInstance(),kp=Ce.memo((({part:e,config:t,hass:n,parametersDisplayEnabled:r,onLocate:a,parameterActions:o=[],cardInstanceId:i})=>{var s;const l=e.pk,c=ht((e=>ys(e,i||"unknown_card",l))),u=ht((e=>e.parts.locatingPartId)),d=t.display||{},p=u===l,f=c||{},{data:h,isLoading:g,isError:m,error:y}=Uu(l,{skip:!r}),[v,{isLoading:b,error:S}]=Bu();if(!1===f.isVisible)return Sp.log("ListItem",`Part ${l} is not visible due to conditional effect.`,{level:"debug",partId:l,conditionalEffect:c}),null;const k=((e,t)=>{const n={display:"flex",alignItems:"center",padding:"8px",border:"1px solid var(--divider-color, #e0e0e0)",borderRadius:"4px",marginBottom:"8px",cursor:"pointer",backgroundColor:"var(--card-background-color, white)",transition:"background-color 0.3s ease"};return t&&(n.boxShadow="0 0 10px var(--primary-color)",n.borderColor="var(--primary-color)"),(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=e.border),"number"==typeof(null==e?void 0:e.opacity)&&(n.opacity=e.opacity),n})(f,p),w=(e=>{const t={color:"var(--primary-text-color, black)"};return(null==e?void 0:e.textColor)&&(t.color=e.textColor),t})(f),_=["list-item",p?"locating":"",(null==f?void 0:f.priority)?`priority-${f.priority}`:"",...(null==f?void 0:f.customClasses)||[]].filter(Boolean).join(" "),x=Ce.useMemo((()=>{if(!t.actions||!e)return;const r=t.actions.find((e=>"ui_thumbnail_click"===e.trigger.type));return r?t=>{t.stopPropagation(),Sp.log("ListItem",`Thumbnail clicked for part ${e.pk}, executing action: ${r.name}`);const a={part:e,hassStates:null==n?void 0:n.states};up.executeAction(r.id,Object.assign(Object.assign({},a),{hass:n}))}:void 0}),[t.actions,e,n,Sp]);return Ue.jsxs("div",{className:_,style:k,onClick:()=>{a&&a(l)},title:`Click to locate Part ID: ${l}`,children:[d.show_image&&Ue.jsx("div",{className:"list-item-thumbnail",style:{marginRight:"12px",flexShrink:0},children:Ue.jsx(fp,{partData:e,config:t,layout:"list",icon:null==f?void 0:f.icon,badge:null==f?void 0:f.badge,onClick:x})}),Ue.jsxs("div",{className:"list-item-info",style:Object.assign(Object.assign({},w),{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}),children:[d.show_name&&Ue.jsx("div",{className:"part-name",style:{fontWeight:"bold",fontSize:"1.1em"},children:e.name}),d.show_stock&&Ue.jsxs("div",{className:"part-stock",style:{fontSize:"0.9em",opacity:.8},children:["Stock: ",null!==(s=e.in_stock)&&void 0!==s?s:"N/A"," ",e.units||""]}),d.show_ipn&&e.IPN&&Ue.jsxs("div",{className:"part-ipn",style:{fontSize:"0.8em",opacity:.7},children:["IPN: ",e.IPN]}),d.show_description&&e.description&&Ue.jsx("p",{className:"part-description",style:{fontSize:"0.85em",margin:"4px 0 0 0",opacity:.9,fontStyle:"italic"},children:e.description}),r&&Ue.jsxs("div",{className:"list-item-parameters",style:{fontSize:"0.8em",marginTop:"6px"},children:[g&&Ue.jsx("p",{children:Ue.jsx("i",{children:"Loading parameters..."})}),m&&Ue.jsx("p",{style:{color:"red"},children:Ue.jsxs("i",{children:["Error parameters: ",(()=>{var e;if(y){if("status"in y){const t=y;return"string"==typeof t.data?t.data:"object"==typeof t.data&&t.data&&"message"in t.data?t.data.message:(null===(e=t.status)||void 0===e?void 0:e.toString())||"API error"}return y.message||"Unknown client error"}return"Unknown error"})()]})}),h&&h.length>0&&Ue.jsx("ul",{style:{listStyle:"none",paddingLeft:"10px",margin:"2px 0"},children:h.map((e=>{var t,n;return Ue.jsxs("li",{children:[Ue.jsxs("strong",{children:[null===(t=e.template_detail)||void 0===t?void 0:t.name,":"]})," ",e.data," ",(null===(n=e.template_detail)||void 0===n?void 0:n.units)||""]},e.pk)}))}),h&&0===h.length&&!g&&!m&&Ue.jsx("p",{style:{fontSize:"0.8em",opacity:.7},children:Ue.jsx("i",{children:"No parameters for this part."})})]})]}),(d.show_buttons||o.length>0)&&n&&Ue.jsxs("div",{className:"list-item-actions-footer",style:{marginLeft:"auto",flexShrink:0,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:[d.show_buttons&&t&&Ue.jsx("div",{style:{marginBottom:o.length>0?"4px":"0"},children:Ue.jsx(gp,{partItem:e,config:t,hass:n})}),o.length>0&&Ue.jsx("div",{className:"parameter-action-buttons",style:{display:"flex",gap:"4px",marginTop:"4px"},children:o.map((e=>Ue.jsx("button",{className:"param-action-button",onClick:t=>(async(e,t)=>{let n;if(e.stopPropagation(),Sp.log("ListItem",`Parameter action "${t.label}" for part ${l}`,{action:t}),h){const e=h.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t.parameter}));e&&(n=e.pk)}if(void 0!==n)try{await v({partId:l,parameterPk:n,value:t.value}).unwrap(),Sp.log("ListItem",`Successfully updated parameter ${t.parameter} (PK: ${n}) for part ${l}.`)}catch(e){Sp.error("ListItem",`Failed to update parameter ${t.parameter} for part ${l}:`,{error:e})}else Sp.error("ListItem",`Could not find parameter PK for ${t.parameter} on part ${l}. Cannot update.`)})(t,e),title:e.label,style:{fontSize:"0.75em",padding:"3px 6px",cursor:"pointer"},disabled:b,children:e.icon?Ue.jsx("ha-icon",{icon:e.icon}):e.label},`${l}-${e.id||e.label}`)))})]})]},l)})),wp=({hass:t,config:n,parts:r,cardInstanceId:a})=>{var o;const i=Ce.useMemo((()=>e.getInstance()),[]),s=dt();ht((e=>ts(e))),ht((e=>e.parameters.parameterLoadingStatus||{}));const l=Ce.useMemo((()=>{var e;return(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.actions)||[]}),[null===(o=null==n?void 0:n.parameters)||void 0===o?void 0:o.actions]),c=Ce.useMemo((()=>{var e,t,r,a;const o=null!==(e=null==n?void 0:n.display)&&void 0!==e?e:{},i=null!==(t=null==n?void 0:n.parameters)&&void 0!==t?t:{};return void 0===o.show_parameters?null!==(r=i.show_section)&&void 0!==r&&r:null!==(a=o.show_parameters)&&void 0!==a&&a}),[null==n?void 0:n.display,null==n?void 0:n.parameters]),u=Ce.useMemo((()=>{if(i.log("ListLayout React","useMemo[filteredAndSortedParts] - Recalculating.",{numParts:null==r?void 0:r.length}),!r)return[];let e=[...r];return e.sort(((e,t)=>e.pk-t.pk)),i.log("ListLayout React",`Parts after basic sorting: ${e.length}`),e}),[r,i]),d=Ce.useCallback((e=>{i.log("ListLayout React",`Locating part: ${e}`),t&&s(zi({partId:e,hass:t}))}),[s,i,t]);if(!n)return Ue.jsx("div",{className:"list-container loading-container",children:Ue.jsx("div",{className:"loading",children:"Loading config..."})});if(!r||0===r.length)return Ue.jsx("div",{className:"list-container no-parts",children:Ue.jsx("p",{children:"No parts to display."})});if(0===u.length&&r.length>0)i.log("ListLayout React Render","Initial parts provided, but filteredAndSortedParts is empty (this should not happen if only sorting).");else if(0===u.length)return i.log("ListLayout React Render","No parts to display after sorting (or initial empty). "),Ue.jsx("div",{className:"list-container no-parts",children:Ue.jsx("p",{children:"No parts to display."})});return i.log("ListLayout React Render",`Rendering with ${u.length} parts.`),Ue.jsx("div",{className:"list-container",style:{padding:"8px"},children:u.map((e=>e&&"number"==typeof e.pk?Ue.jsx(kp,{part:e,config:n,hass:t,parametersDisplayEnabled:c,onLocate:d,parameterActions:l,cardInstanceId:a},e.pk):null))})},_p=({partId:t,config:n,parametersDisplayEnabled:r})=>{const a=e.getInstance(),{data:o,isLoading:i,isError:s,error:l,isFetching:c}=Uu(t,{skip:!r});if(!r)return null;if(i||c)return Ue.jsx("p",{style:{fontSize:"0.8em",fontStyle:"italic"},children:"Loading parameters..."});if(s){let e="Error loading parameters.";if(l)if("status"in l){const t=l;t.data&&"object"==typeof t.data&&t.data.message?e=t.data.message:"string"==typeof t.data&&""!==t.data.trim()?e=t.data:t.status&&(e=`Error ${t.status}`)}else e=l.message||e;return a.warn("PartParametersView",`Error fetching parameters for part ${t}: ${e}`,{errorData:l}),Ue.jsx("p",{style:{fontSize:"0.8em",color:"red"},children:e})}return o&&0!==o.length?Ue.jsx("div",{className:"part-parameters-view",style:{fontSize:"0.8em",textAlign:"left",marginTop:"8px"},children:Ue.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:o.map((e=>{var t;return Ue.jsxs("li",{children:[Ue.jsxs("strong",{children:[(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Unnamed Parameter",":"]})," ",e.data]},e.pk)}))})}):Ue.jsx("p",{style:{fontSize:"0.8em",fontStyle:"italic"},children:"No parameters defined for this part."})};const xp={searchContainer:{display:"flex",alignItems:"center",border:"1px solid #ccc",borderRadius:"4px",padding:"4px 8px",backgroundColor:"#f9f9f9",position:"relative",marginBottom:"1rem"},input:{flexGrow:1,border:"none",background:"none",outline:"none",padding:"8px",fontSize:"1rem"},iconButton:{border:"none",background:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#555"},clearButton:{color:"#333"}},Cp=({initialQuery:t,onSearchChange:n})=>{const r=Ce.useMemo((()=>e.getInstance()),[]),[a,o]=Ce.useState(t);Ce.useEffect((()=>{t!==a&&o(t)}),[t,a]);const i=Ce.useCallback(function(e,t){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>e(...r)),t)}}((e=>{r.log("SearchBar React",`Triggering search for: "${e}" via onSearchChange prop`),n(e.trim())}),300),[n,r]);return Ue.jsx("form",{onSubmit:e=>{null==e||e.preventDefault(),r.log("SearchBar React",`Submitting search for: "${a}" via onSearchChange prop`),n(a.trim())},style:{width:"100%"},children:Ue.jsxs("div",{style:xp.searchContainer,children:[Ue.jsx("span",{style:{paddingRight:"8px",color:"#555"},children:"üîç"}),Ue.jsx("input",{type:"text",placeholder:"Search Parts...",value:a,onChange:e=>{const t=e.target.value;o(t),i(t)},style:xp.input}),a?Ue.jsx("button",{type:"button",onClick:()=>{r.log("SearchBar React","Clearing search via onSearchChange prop"),o(""),n("")},style:Object.assign(Object.assign({},xp.iconButton),xp.clearButton),title:"Clear Search",children:"‚úï"}):Ue.jsx("button",{type:"submit",style:xp.iconButton,title:"Search",children:"üîç"})]})})},Ep=({hass:t,config:n,parts:r,cardInstanceId:a})=>{var o,i;const s=Ce.useMemo((()=>e.getInstance()),[]),l=dt(),c=ht((e=>e)),[u,{isLoading:d,error:p}]=Bu(),f=ht((e=>ts(e))),h=Ce.useMemo((()=>null==n?void 0:n.parameters),[n]),[g,{data:m,isLoading:y,isFetching:v,error:b,originalArgs:S}]=Qu(),[k,w]=Ce.useState("");Ce.useEffect((()=>{k.trim().length>0&&g(k.trim())}),[k,g]);const _=Ce.useMemo((()=>{let e=[...r];const t=S||k;if(t&&t.trim().length>0)if(m&&m.length>0){const t=new Set(m.map((e=>e.pk)));e=e.filter((e=>t.has(e.pk)))}else y||v||(e=[]);return e=e.filter((e=>{if(!e)return!1;const t=ys(c,a||"unknown_card",e.pk);return!1!==(null==t?void 0:t.isVisible)})),e.sort(((e,t)=>{const n=ys(c,a||"unknown_card",e.pk)||{},r=ys(c,a||"unknown_card",t.pk)||{};if("top"===n.sort&&"top"!==r.sort)return-1;if("top"!==n.sort&&"top"===r.sort)return 1;if("bottom"===n.sort&&"bottom"!==r.sort)return 1;if("bottom"!==n.sort&&"bottom"===r.sort)return-1;const o="high"===n.priority?3:"medium"===n.priority?2:1,i="high"===r.priority?3:"medium"===r.priority?2:1;return o!==i?i-o:e.name.localeCompare(t.name)})),e}),[r,S,k,m,y,v,c,a]),x=Ce.useCallback((e=>{t&&l(zi({partId:e,hass:t}))}),[l,t]),C=Ce.useCallback((async(e,t)=>{s.log("PartsLayout",`handleParameterAction for part ${e}, action: ${t.label} (param: ${t.parameter}, value: ${t.value})`);const n=r.find((t=>t.pk===e));n?s.warn("PartsLayout","`handleParameterAction` might need redesign for RTK Query parameter updates if called directly from layout."):s.error("PartsLayout",`Cannot update parameter: Part ${e} not found.`)}),[l,s,r,u]),E=Ce.useCallback((e=>{w(e)}),[]);if(!n)return Ue.jsx("div",{className:"parts-layout loading",children:Ue.jsx("p",{children:"Loading config..."})});if(0===r.length&&(y||v))return Ue.jsx("div",{className:"parts-layout no-parts",children:Ue.jsx("p",{children:"Searching..."})});if(0===r.length&&b)return Ue.jsx("div",{className:"parts-layout no-parts",children:Ue.jsxs("p",{children:["Error searching: ",JSON.stringify(b)]})});const A=n.display||{},I=n.parts_layout_mode||"grid",P={display:"grid",gridTemplateColumns:`repeat(${(null===(o=n.layout_options)||void 0===o?void 0:o.columns)||3}, 1fr)`,gap:`${(null===(i=n.layout_options)||void 0===i?void 0:i.grid_spacing)||8}px`,padding:"8px"};let j="No parts match the current filters or search.";k.trim().length>0&&0===_.length&&(y||v)&&(j=`No parts found matching "${k}".`);return Ue.jsxs("div",{className:"parts-layout",style:{padding:"8px"},children:[Ue.jsx(Cp,{onSearchChange:E,initialQuery:k}),(y||v)&&Ue.jsx("p",{children:"Searching..."}),b&&Ue.jsxs("p",{style:{color:"red"},children:["Error searching: ",JSON.stringify(b)]}),_.length>0?Ue.jsx("div",{style:"grid"===I?P:{padding:"8px"},children:_.map((e=>(e=>{if(!e)return null;const r=e.pk,o=ys(c,a||"unknown_card",r)||{},i=(null==h?void 0:h.actions)||[],s=f===r,l=((e,t,n)=>{const r={border:"1px solid #ddd",padding:"8px",cursor:"pointer",marginBottom:"list"===t?"4px":"0",display:"flex",flexDirection:"list"===t?"row":"column",alignItems:"list"===t?"center":"stretch",textAlign:"grid"===t?"center":"left"};return"grid"===t&&(r.height=(null==n?void 0:n.item_height)?`${n.item_height}px`:"auto",r.justifyContent="space-between"),(null==e?void 0:e.highlight)&&(r.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(r.border=`2px solid ${e.border}`),r})(o,I,n),u=(d=o)&&d.textColor?{color:d.textColor}:{};var d;const p=["grid"===I?"part-container":"list-item",s?"locating":"",(null==o?void 0:o.priority)?`priority-${o.priority}`:""].filter(Boolean).join(" ");return Ue.jsxs("div",{className:p,style:l,onClick:()=>x(r),children:[Ue.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",flexDirection:"grid"===I?"column":"row"},children:[A.show_image&&Ue.jsxs("div",{className:"grid"===I?"part-thumbnail":"list-item-image",style:{marginBottom:"grid"===I?"8px":"0",marginRight:"list"===I?"8px":"0",display:"flex",justifyContent:"center",alignItems:"center"},children:[Ue.jsx(fp,{partData:e,config:n,layout:I}),(null==o?void 0:o.icon)&&Ue.jsxs("span",{style:{fontSize:"0.7em"},children:[" (Icon: ",o.icon,")"]})]}),Ue.jsxs("div",{className:"grid"===I?"part-info":"list-item-info",style:Object.assign(Object.assign({},u),{flexGrow:1,textAlign:"grid"===I?"center":"left"}),children:[A.show_name&&Ue.jsx("div",{className:"part-name",style:{fontWeight:"bold"},children:e.name}),A.show_stock&&Ue.jsxs("div",{className:"part-stock",children:["Stock: ",e.in_stock," ",e.units||""]}),A.show_parameters&&Ue.jsx(_p,{partId:e.pk,config:n,parametersDisplayEnabled:A.show_parameters})]}),Ue.jsxs("div",{className:"item-actions-footer",style:{marginTop:"grid"===I?"auto":"0",marginLeft:"list"===I?"auto":"0",paddingTop:"4px"},children:[i.length>0&&Ue.jsx("div",{className:"parameter-action-buttons",style:{display:"flex",justifyContent:"grid"===I?"center":"flex-start",gap:"4px",marginBottom:"4px"},children:i.map((e=>Ue.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),C(r,e)},title:e.label,style:{fontSize:"0.7em",padding:"2px 4px"},children:e.icon?Ue.jsx("span",{children:e.icon}):e.label},`${r}-${e.label}`)))}),A.show_buttons&&t&&n&&Ue.jsx(gp,{partItem:e,config:n,hass:t})]})]}),s&&Ue.jsx("div",{className:"locating-indicator",children:"Locating..."})]},r)})(e)))}):Ue.jsx("p",{children:j})]})};e.getInstance();class Ap{constructor(t){this.logger=e.getInstance(),this.hass=t}static getTemplateKey(e){const t=e.parameters||[];if(t.length>0){const n=t.find((e=>{var t,n,r;return"Food_State"===(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Color"===(null===(n=e.template_detail)||void 0===n?void 0:n.name)||"Size"===(null===(r=e.template_detail)||void 0===r?void 0:r.name)}));if(n)return e.name.split(" ")[0]}return e.name}static getVariants(e){const t={};return e.forEach((e=>{const n=this.getTemplateKey(e);t[n]||(t[n]=[]),t[n].push(e)})),t}static groupVariants(e,t){var n,r;const a={};if(!(null===(n=t.variants)||void 0===n?void 0:n.show_variants))return a;return((null===(r=t.variants)||void 0===r?void 0:r.variant_groups)||[]).forEach((t=>{const n=e.find((e=>e.pk===t.main_pk));n&&(a[n.pk]=[n,...e.filter((e=>(t.variantPks||[]).includes(e.pk)))])})),a}static processVariants(t,n){var r;if(!(null===(r=n.variants)||void 0===r?void 0:r.show_variants))return t;try{this.groupVariants(t,n);return t}catch(n){return e.getInstance().error("VariantService","Failed to process variants:",n),t}}static getTotalStock(e,t){return(e.in_stock||0)+t.reduce(((e,t)=>e+(t.in_stock||0)),0)}static isVariant(e){return!!e.variant_of}static isTemplate(e){return!!e.is_template&&!e.variant_of}async getVariants(e){var t;if(!(null===(t=e.variants)||void 0===t?void 0:t.show_variants))return[];try{return e.variants.variant_groups||[]}catch(e){return this.logger.error("VariantService","Failed to get variants:",e),[]}}detectVariantGroups(e){this.logger.log("VariantService",`Detecting variant groups from ${e.length} parts`,{subsystem:"detectVariantGroupsFn"}),e.filter((e=>e.is_template));const t=e.filter((e=>null!==e.variant_of)),n={};t.forEach((e=>{e.variant_of&&(n[e.variant_of]||(n[e.variant_of]=[]),n[e.variant_of].push(e))}));const r=Object.keys(n).map((t=>{const r=Number(t),a=n[r],o=e.find((e=>e.pk===r));return{main_pk:r,templatePk:r,variantPks:a.map((e=>e.pk)),template_id:r,name:(null==o?void 0:o.name)||`Group ${r}`,parts:a.map((e=>e.pk))}}));return this.logger.log("VariantService",`Detected ${r.length} variant groups`,{subsystem:"detectVariantGroupsFn"}),r}processVariantGroups(e,t){const n={};e.forEach((e=>{n[e.pk]=e}));const r=t.map((e=>{const t=n[e.template_id];if(!t)return this.logger.warn("VariantService",`Template part not found for group ${e.template_id}`),null;const r=(e.parts||[]).map((e=>n[e])).filter((e=>void 0!==e)),a=this.getTotalStock(t,r);return Object.assign(Object.assign({},t),{variants:r,is_variant_group:!0,totalStock:a})})).filter((e=>null!==e)),a=new Set;r.forEach((e=>{a.add(e.pk),e.variants&&e.variants.forEach((e=>{a.add(e.pk)}))}));const o=e.filter((e=>!a.has(e.pk)));return[...r,...o]}getTotalStock(e,t){let n=e.in_stock||0;return t.forEach((e=>{n+=e.in_stock||0})),n}async getVariantData(e){try{if(!this.hass||!e)return[];const t=this.hass.states[e];return t&&t.attributes&&t.attributes.items?t.attributes.items:[]}catch(e){return this.logger.error("VariantService","Failed to get variant data:",e),[]}}}const Ip=e.getInstance();class Pp{constructor(t){this.hass=t,this.variantService=new Ap(t),this.logger=e.getInstance()}static processItems(t,n){var r,a;if(Ip.log("VariantHandler","Processing items with config:",{data:{auto_detect:n.auto_detect_variants,variant_view_type:n.variant_view_type,variants_config:n.variants},subsystem:"processItems"}),!t||0===t.length)return[];if(!(null===(r=n.variants)||void 0===r?void 0:r.show_variants))return t;try{const e=[...t],r=[],o=new Set;if(n.variants.auto_detect){Ip.log("VariantHandler",`Auto-detecting variants from ${t.length} items`,{subsystem:"processItems"});const n=e.filter((e=>null!==e.variant_of));Ip.log("VariantHandler",`Found ${n.length} parts with variant_of set`,{subsystem:"processItems"});const a={};n.forEach((e=>{e.variant_of&&(a[e.variant_of]||(a[e.variant_of]=[]),a[e.variant_of].push(e))})),Object.keys(a).forEach((t=>{const n=Number(t),i=a[n],s=e.find((e=>e.pk===n));s&&(r.push({pk:s.pk,name:s.name,template:s,variants:i,totalStock:Pp.calculateTotalStock(s,i)}),o.add(s.pk),i.forEach((e=>o.add(e.pk))))})),Ip.log("VariantHandler",`Created ${r.length} variant groups`,{subsystem:"processItems"})}else(null===(a=n.variants.variant_groups)||void 0===a?void 0:a.length)&&(Ip.log("VariantHandler",`Processing ${n.variants.variant_groups.length} configured variant groups`,{subsystem:"processItems"}),n.variants.variant_groups.forEach((t=>{const n=t.templatePk,a=t.variantPks||[];if(n&&a.length){const i=e.find((e=>e.pk===n));if(i){const n=e.filter((e=>a.includes(e.pk)));n.length>0&&(r.push({pk:i.pk,name:t.name||i.name,template:i,variants:n,totalStock:Pp.calculateTotalStock(i,n)}),o.add(i.pk),n.forEach((e=>o.add(e.pk))))}}})));const i=e.filter((e=>!o.has(e.pk))),s=[...r,...i];return Ip.log("VariantHandler",`Processed ${r.length} variant groups and ${i.length} regular items`,{subsystem:"processItems"}),s}catch(n){return e.getInstance().error("VariantHandler","Error processing variants:",{data:n,subsystem:"processItems"}),t}}static isVariant(e){return void 0!==e.template&&void 0!==e.variants&&Array.isArray(e.variants)}static calculateTotalStock(e,t){let n=e.in_stock||0;return t.forEach((e=>{n+=e.in_stock||0})),n}processVariants(e,t){var n;if(!(null===(n=null==t?void 0:t.variants)||void 0===n?void 0:n.show_variants))return e;let r=[];return t.variants.auto_detect?r=this.variantService.detectVariantGroups(e):t.variants.variant_groups&&t.variants.variant_groups.length>0&&(r=t.variants.variant_groups),this.variantService.processVariantGroups(e,r)}getTotalStock(e,t){return Pp.calculateTotalStock(e,t)}}const jp=({hass:t,config:n,parts:r,cardInstanceId:a})=>{const o=Ce.useMemo((()=>e.getInstance()),[]),i=dt(),s=ht((e=>e)),l=ht((e=>ts(e)));Ce.useMemo((()=>null==n?void 0:n.parameters),[n]),ht((e=>e.parameters.parameterLoadingStatus||{}));const[c,u]=Ce.useState([]);Ce.useState(null);const[d,p]=Ce.useState(new Set);Ce.useEffect((()=>{if(n&&r){o.log("VariantLayout React","useEffect[parts, config] - Processing variants",{numParts:r.length});const e=Pp.processItems(r,n);u(e)}else u([])}),[r,n,o]),Ce.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);r&&r[1]&&t.add(parseInt(r[1],10))}})),Array.from(t)}),[]);const f=Ce.useMemo((()=>{var e;return(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||(null==n?void 0:n.conditional_logic)?c.filter((e=>{const t=Pp.isVariant(e)?e.template.pk:e.pk,n=ys(s,a||"unknown_card",t);return!1!==(null==n?void 0:n.isVisible)})):c}),[c,null==n?void 0:n.parameters,null==n?void 0:n.conditional_logic,s,a]);Ce.useCallback((e=>{e.currentTarget.style.display="none"}),[]);const h=Ce.useCallback((e=>{t&&i(zi({partId:e,hass:t}))}),[i,t]);Ce.useCallback(((e,t)=>{o.warn("VariantLayout Action","handleParameterAction called (needs review for RTK Query integration)",{data:{partId:e,action:t}})}),[i,o]);const g=Ce.useCallback((e=>{p((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),m=Ce.useCallback(((e,r=!1,o=!1)=>{const i=e.pk,c=ys(s,a||"unknown_card",i)||{},u=l===i,d=(null==n?void 0:n.display)||{},p=Object.assign({},d);o?(p.show_buttons=!1,p.show_part_details_component=!1,p.show_stock_status_border=!1!==d.show_stock_status_border_for_templates):r&&(p.show_buttons=void 0!==d.show_buttons_for_variants&&d.show_buttons_for_variants,p.show_part_details_component=void 0!==d.show_part_details_component_for_variants&&d.show_part_details_component_for_variants,p.show_image=void 0===d.show_image_for_variants||d.show_image_for_variants,p.show_stock=void 0===d.show_stock_for_variants||d.show_stock_for_variants,p.show_name=void 0===d.show_name_for_variants||d.show_name_for_variants);const f=Object.assign(Object.assign({},n),{display:p}),g=((e,t)=>{const n={border:"1px solid #e0e0e0",padding:"8px",marginBottom:"8px",cursor:"pointer"};return t&&(n.backgroundColor="#f5f5f5"),(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=`2px solid ${e.border}`),n})(c,o);return Ue.jsxs("div",{className:`variant-part-item ${r?"variant-member":""} ${o?"group-header":""}`,style:g,onClick:()=>!o&&h(i),children:[Ue.jsx(mp,{partId:i,config:f,hass:t,cardInstanceId:a}),u&&Ue.jsx("div",{className:"locating-indicator",style:{marginTop:"5px",textAlign:"center",color:"blue"},children:"Locating..."})]},i)}),[n,t,s,l,h,a]);if(!n)return Ue.jsx("div",{className:"variant-layout loading",children:Ue.jsx("p",{children:"Loading config..."})});if(!c||0===c.length)return Ue.jsx("div",{className:"variant-layout no-variants",children:Ue.jsx("p",{children:"No parts or variants to display."})});if(0===f.length&&c.length>0)return Ue.jsx("div",{className:"variant-layout no-variants",children:Ue.jsx("p",{children:"All items filtered out."})});const y=n.variant_view_type||"grid";o.log("VariantLayout React Render",`Rendering in ${y} mode with ${f.length} visible items.`);switch(y){case"list":return Ue.jsx("div",{style:{padding:"10px"},children:f.map((e=>Pp.isVariant(e)?Ue.jsxs("div",{className:"variant-group-list",style:{marginBottom:"15px"},children:[m(e.template,!1,!0),Ue.jsx("div",{style:{marginLeft:"30px",paddingTop:"5px"},children:e.variants.map((e=>m(e,!0)))})]},e.template.pk):m(e)))});case"tree":return Ue.jsx("div",{style:{padding:"10px"},children:f.map((e=>{if(Pp.isVariant(e)){const t=d.has(e.template.pk);return Ue.jsxs("div",{className:"variant-group-tree",style:{marginBottom:"5px"},children:[Ue.jsxs("div",{onClick:()=>g(e.template.pk),style:{display:"flex",alignItems:"center"},children:[Ue.jsx("span",{style:{marginRight:"5px"},children:t?"‚ñº":"‚ñ∫"}),m(e.template,!1,!0)]}),t&&Ue.jsx("div",{style:{marginLeft:"30px",paddingTop:"5px",borderLeft:"1px dashed #ccc"},children:e.variants.map((e=>m(e,!0)))})]},e.template.pk)}return m(e)}))});default:return Ue.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${(null==n?void 0:n.item_width)||150}px, 1fr))`,gap:"10px",padding:"10px"},children:f.map((e=>Pp.isVariant(e)?Ue.jsxs("div",{className:"variant-group-grid",children:[m(e.template,!1,!0)," ",Ue.jsx("div",{style:{marginLeft:"20px",borderLeft:"2px solid #f0f0f0",paddingLeft:"10px"},children:e.variants.map((e=>m(e,!0)))})]},e.template.pk):m(e)))})}},Rp=({config:t,hass:n,cardInstanceId:r})=>{var a;const o=Ce.useMemo((()=>e.getInstance()),[]),i=ht((e=>e.genericHaStates)),s=Ce.useCallback((e=>e),[]),l=Ce.useCallback((()=>{if(!t||!t.actions||!Array.isArray(t.actions))return o.log("GlobalActionButtons","No actions defined in config."),[];const e=t.actions.filter((e=>{var t,n;if("ui_button"!==e.trigger.type)return!1;if("global_header"!==(null===(t=e.trigger.ui)||void 0===t?void 0:t.placement))return!1;if(null===(n=e.trigger.ui)||void 0===n?void 0:n.targetPartPks){if(Array.isArray(e.trigger.ui.targetPartPks)&&e.trigger.ui.targetPartPks.length>0)return o.log("GlobalActionButtons",`Filtering out global button '${e.name}' because targetPartPks is specified.`,{actionId:e.id}),!1;if("string"==typeof e.trigger.ui.targetPartPks&&""!==e.trigger.ui.targetPartPks.trim())return o.log("GlobalActionButtons",`Filtering out global button '${e.name}' because string targetPartPks '${e.trigger.ui.targetPartPks}' is specified.`,{actionId:e.id}),!1}return!0}));return o.log("GlobalActionButtons",`Found ${e.length} UI Action Buttons for global_header`,{data:e}),e}),[t,o]),c=Ce.useCallback((async e=>{if(!n)return void o.warn("GlobalActionButtons","Button clicked, but HASS object is not available.");o.log("GlobalActionButtons",`Executing Global Action ID: ${e.id} (Name: ${e.name})`);const t={hass:n,hassStates:i};try{await up.executeAction(e.id,t),o.log("GlobalActionButtons",`Global action ${e.name} dispatched to ActionEngine.`)}catch(t){o.error("GlobalActionButtons",`Error dispatching global action ${e.name}: ${(null==t?void 0:t.message)||String(t)}`,{error:t})}}),[n,o,i]),u=Ce.useMemo((()=>l()),[l]);if(0===u.length||!(null===(a=null==t?void 0:t.display)||void 0===a?void 0:a.show_buttons))return null;const d={padding:"6px 10px",margin:"2px",border:"1px solid var(--divider-color, #ccc)",borderRadius:"var(--ha-card-border-radius, 4px)",cursor:"pointer",minWidth:"30px",textAlign:"center",fontSize:"0.9em",backgroundColor:"var(--primary-background-color)",color:"var(--primary-text-color)"};return Ue.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"flex-start",padding:"8px 0",flexWrap:"wrap",marginBottom:"16px"},className:"global-action-buttons-container",children:u.map(((e,t)=>{var n,r;let a="";(null===(n=e.trigger.ui)||void 0===n?void 0:n.labelTemplate)&&""!==e.trigger.ui.labelTemplate.trim()&&(a=s(e.trigger.ui.labelTemplate));const i=null===(r=e.trigger.ui)||void 0===r?void 0:r.icon;if(!i&&!a)return o.log("GlobalActionButtons",`Skipping rendering button for action '${e.name}' as it has no icon and no label.`,{actionId:e.id}),null;const l=!(!e.isEnabledExpressionId||""===e.isEnabledExpressionId.trim()),u=Object.assign(Object.assign({},d),{cursor:l?"not-allowed":"pointer",opacity:l?.5:1});return Ue.jsxs("button",{onClick:t=>{t.stopPropagation(),l||c(e)},style:u,title:l?`${e.name} (Condition not met)`:e.name,disabled:l,children:[i&&Ue.jsx("ha-icon",{icon:i,style:{marginRight:a?"4px":"0"}}),a]},e.id||`global-action-${t}`)}))})},Tp=e.getInstance(),Np=({hass:e,config:t})=>{var n,r,a,o,i;const s=dt(),l=Ce.useMemo((()=>Math.random().toString(36).substring(2,15)),[]),c=null===(n=null==t?void 0:t.performance)||void 0===n?void 0:n.rendering,u=null!==(r=null==c?void 0:c.debounceTime)&&void 0!==r?r:50,d=null!==(a=null==c?void 0:c.idleRenderInterval)&&void 0!==a?a:5e3,p=Ce.useMemo((()=>{var e;if(!t)return[];const n=t.entity?[t.entity]:[];return Array.isArray(t.selected_entities)&&n.push(...t.selected_entities),(null===(e=t.data_sources)||void 0===e?void 0:e.inventree_hass_sensors)&&n.push(...t.data_sources.inventree_hass_sensors),[...new Set(n.filter((e=>"string"==typeof e&&""!==e)))]}),[null==t?void 0:t.entity,null==t?void 0:t.selected_entities,null===(o=null==t?void 0:t.data_sources)||void 0===o?void 0:o.inventree_hass_sensors]),f=ht((e=>es(e,p))),h=Ce.useMemo((()=>{var e;return(null===(e=null==t?void 0:t.data_sources)||void 0===e?void 0:e.inventree_pks)?t.data_sources.inventree_pks.filter((e=>"number"==typeof e&&!isNaN(e))):[]}),[null===(i=null==t?void 0:t.data_sources)||void 0===i?void 0:i.inventree_pks]),g=ht((e=>ns(e,h))),m=Ce.useMemo((()=>{const e=[...f,...g],t=new Map;return e.forEach((e=>{e&&"number"==typeof e.pk&&(t.has(e.pk)||t.set(e.pk,e))})),Array.from(t.values())}),[f,g]),y=ht((e=>{if(t&&m&&0!==m.length)return"detail"===t.view_type||"variants"===t.view_type?t.part_id&&m.find((e=>e.pk===t.part_id))||m[0]:void 0}));Ce.useEffect((()=>{t&&(Tp.log("InventreeCard.tsx","Config updated or available.",{config:t}),Tp.setDebugConfig(t))}),[t]);const v=Ce.useCallback(Gd((async(e,t,n,r)=>{var a,o,i,s,l,c,u,d,p,f,h;if(e&&t){Tp.log("InventreeCard.tsx","Debounced Effect: HASS and Config are available. Initializing.",{hass:!!e,config:!!t}),n(Vr()),n(Ar(t)),t.actions&&Array.isArray(t.actions)?(Tp.log("InventreeCard.tsx","Debounced Effect: Dispatching setActionDefinitions.",{count:t.actions.length}),n(Xu(t.actions))):(Tp.log("InventreeCard.tsx","Debounced Effect: No actions in config, dispatching empty setActionDefinitions to clear."),n(Xu([]))),(null===(a=t.direct_api)||void 0===a?void 0:a.enabled)?(t.direct_api.url&&t.direct_api.api_key?(Tp.log("InventreeCard.tsx","üöÄ Debounced Effect: Dispatching initializeDirectApi thunk"),n(Zd({directApiConfig:t.direct_api,logger:Tp}))):Tp.warn("InventreeCard.tsx","‚ö†Ô∏è Debounced Effect: Direct API URL or API Key missing, skipping initialization."),"hass"!==t.direct_api.method&&(t.direct_api.url||t.direct_api.websocket_url?(Tp.log("InventreeCard.tsx","üîå Debounced Effect: Dispatching initializeWebSocketPlugin thunk"),n(ep({directApiConfig:t.direct_api,cardDebugWebSocket:t.debug_websocket,logger:Tp}))):Tp.warn("InventreeCard.tsx","‚ö†Ô∏è Debounced Effect: Cannot initialize WebSocket, base URL for WS derivation is missing when method is not HASS."))):Tp.log("InventreeCard.tsx","Debounced Effect: Direct API not enabled, skipping API/WebSocket initialization.");const g=[];t.entity&&g.push(t.entity),Array.isArray(t.selected_entities)&&g.push(...t.selected_entities),Array.isArray(null===(o=t.data_sources)||void 0===o?void 0:o.inventree_hass_sensors)&&g.push(...t.data_sources.inventree_hass_sensors);const m=[...new Set(g.filter((e=>"string"==typeof e&&""!==e)))];m.length>0?(Tp.log("InventreeCard.tsx",`Dispatching processHassEntities for sensors: ${m.join(", ")}`),n(tp({hass:e,entityIds:m,logger:Tp}))):Tp.log("InventreeCard.tsx","No InvenTree HASS sensor entities to process."),(null===(i=t.data_sources)||void 0===i?void 0:i.ha_entities)&&t.data_sources.ha_entities.length>0?(Tp.log("InventreeCard.tsx",`Dispatching initializeGenericHaStatesFromConfig for entities: ${t.data_sources.ha_entities.join(", ")}`),n(np({hass:e,logger:Tp}))):Tp.log("InventreeCard.tsx","No generic HA entities configured in data_sources.ha_entities to process.");const y=null===(s=t.data_sources)||void 0===s?void 0:s.inventree_pks;if(Array.isArray(y)&&y.length>0){const e=y.filter((e=>"number"==typeof e&&!isNaN(e)));e.length>0?(Tp.log("InventreeCard.tsx",`Dispatching fetchPartsByPks for PKs: ${e.join(", ")}`),n(ap(e)).then((e=>{if(ap.fulfilled.match(e)){const t=e.payload;t.length>0?(Tp.log("InventreeCard.tsx",`fetchPartsByPks fulfilled. Dispatching addParts for ${t.length} items.`),n(Ui(t))):Tp.log("InventreeCard.tsx","fetchPartsByPks fulfilled, but no items were returned/fetched.")}else ap.rejected.match(e)&&Tp.error("InventreeCard.tsx","fetchPartsByPks was rejected:",e.payload||e.error.message)})).catch((e=>{Tp.error("InventreeCard.tsx","Error dispatching/handling fetchPartsByPks:",e)}))):y.length>0&&Tp.warn("InventreeCard.tsx","Direct Part PKs configured, but none were valid numbers.",{configuredPks:y})}else Tp.log("InventreeCard.tsx","No direct Part PKs to process.");let v=[];if(t.conditional_logic&&t.conditional_logic.definedLogics&&t.conditional_logic.definedLogics.length>0?(Tp.log("InventreeCard.tsx","Debounced Effect: Using conditional_logic.definedLogics (ConditionalLogicItem[])."),v=t.conditional_logic.definedLogics):t.conditional_logic&&t.conditional_logic.rules&&t.conditional_logic.rules.length>0?(Tp.warn("InventreeCard.tsx","Debounced Effect: Found legacy conditional_logic.rules. These should be migrated to definedLogics (ConditionalLogicItem[])."),v=t.conditional_logic.rules.map(((e,t)=>({id:`legacy-item-${t}`,name:e.name||`Legacy Item ${t}`,logicPairs:[{id:`legacy-pair-${t}`,name:"Default Pair",conditionRules:{id:`legacy-group-${t}`,combinator:"and",rules:[{id:`legacy-rule-${t}`,field:e.parameter,operator:e.operator,value:e.value}]},effects:[{id:`legacy-effect-${t}`,type:"set_style",styleProperty:e.action,styleValue:e.action_value,targetPartPks:e.targetPartIds}]}]}))),v.length>0&&Tp.log("InventreeCard.tsx",`Transformed ${t.conditional_logic.rules.length} legacy rules into ${v.length} ConditionalLogicItems for initialization.`)):(null===(l=t.parameters)||void 0===l?void 0:l.conditions)&&t.parameters.conditions.length>0?(Tp.warn("InventreeCard.tsx","Debounced Effect: Falling back to very legacy parameters.conditions. These should be migrated."),v=t.parameters.conditions.map(((e,t)=>({id:`legacy-param-item-${t}`,name:e.name||`Legacy Param Item ${t}`,logicPairs:[{id:`legacy-param-pair-${t}`,name:"Default Pair",conditionRules:{id:`legacy-param-group-${t}`,combinator:"and",rules:[{id:`legacy-param-rule-${t}`,field:e.parameter,operator:e.operator,value:e.value}]},effects:[{id:`legacy-param-effect-${t}`,type:"set_style",styleProperty:e.action,styleValue:e.action_value,targetPartPks:e.targetPartIds}]}]}))),v.length>0&&Tp.log("InventreeCard.tsx",`Transformed ${t.parameters.conditions.length} very legacy parameter conditions into ${v.length} ConditionalLogicItems.`)):Tp.log("InventreeCard.tsx","Debounced Effect: No conditions/logic items found in new or legacy config for initialization."),(null===(c=t.direct_api)||void 0===c?void 0:c.enabled)&&((null===(u=t.parameters)||void 0===u?void 0:u.enabled)||t.conditional_logic)?(Tp.log("InventreeCard.tsx","Debounced Effect: Dispatching initializeRuleDefinitionsThunk...",{numLogicItems:v.length}),n(yd(v))):(Tp.log("InventreeCard.tsx","Debounced Effect: Skipping rule definitions initialization (Direct API or Parameters/ConditionalLogic disabled)."),n(yd([]))),null===(d=t.direct_api)||void 0===d?void 0:d.enabled){const e=(null===(p=t.data_sources)||void 0===p?void 0:p.inventreeParametersToFetch)||[];Tp.log("InventreeCard.tsx","Debounced Effect: Dispatching fetchConfiguredParameters...",{level:"info",inventreeParametersToFetch:e}),n(sd(e))}else Tp.log("InventreeCard.tsx","Debounced Effect: Skipping fetchConfiguredParameters (Direct API disabled).");(null===(f=t.direct_api)||void 0===f?void 0:f.enabled)&&((null===(h=t.parameters)||void 0===h?void 0:h.enabled)||t.conditional_logic),n(md({cardInstanceId:r}))}}),u),[u,Tp]);if(Ce.useEffect((()=>{v(e,t,s,l)}),[e,t,s,v,l]),Ce.useEffect((()=>{if(d<=0)return;Tp.log("InventreeCard.tsx",`Setting up idle render interval: ${d}ms`);const e=setInterval((()=>{Tp.log("InventreeCard.tsx","Idle render interval fired.",{interval:d})}),d);return()=>{Tp.log("InventreeCard.tsx","Clearing idle render interval."),clearInterval(e)}}),[d,Tp]),!t)return Ee.createElement("div",null,"Loading configuration...");return Ue.jsxs("div",{style:{padding:"16px"},children:[Ue.jsx(Rp,{config:t,hass:e,cardInstanceId:l}),(()=>{const n={hass:e,config:t,cardInstanceId:l};switch(t.view_type){case"detail":return Ee.createElement(yp,Object.assign(Object.assign({},n),{selectedPartId:null==y?void 0:y.pk}));case"grid":return Ee.createElement(bp,Object.assign(Object.assign({},n),{parts:m,item:y}));case"list":return Ee.createElement(wp,Object.assign(Object.assign({},n),{parts:m,item:y}));case"parts":return Ee.createElement(Ep,Object.assign(Object.assign({},n),{parts:m}));case"variants":return Ee.createElement(jp,Object.assign(Object.assign({},n),{item:y,parts:m}));default:return Tp.warn("InventreeCard.tsx",`Unknown view_type: ${t.view_type}. Defaulting to Detail view or placeholder.`),Ee.createElement("div",null,`Unknown view_type: ${t.view_type}. Please configure a valid view.`)}})()]})},Op=e.getInstance(),$p=({hass:e,config:t})=>(Ee.useEffect((()=>{Op.log("ReactApp","ReactApp component mounted or props updated.",{hasHass:!!e,hasConfig:!!t,viewType:null==t?void 0:t.view_type})}),[e,t]),e&&t?Ue.jsx(ot,{store:Qd,children:Ue.jsx(Np,{hass:e,config:t})}):(Op.warn("ReactApp","ReactApp rendered without HASS or config. Displaying loading/error."),Ue.jsxs("div",{style:{padding:"16px",border:"1px dashed red"},children:[!e&&Ue.jsx("p",{children:"Waiting for Home Assistant connection..."}),!t&&Ue.jsx("p",{children:"Waiting for card configuration..."})]}))),Dp=({hass:e,value:t,label:n,includeDomains:r,disabled:a,onValueChanged:o,placeholder:i})=>{const[s,l]=Ce.useState([]);Ce.useEffect((()=>{if(!e||!e.states)return void l([]);let t=Object.values(e.states);r&&r.length>0&&(t=t.filter((e=>r.some((t=>e.entity_id.startsWith(`${t}.`))))));const n=t.map((e=>({value:e.entity_id,label:e.attributes.friendly_name||e.entity_id}))).sort(((e,t)=>e.label.localeCompare(t.label)));l(n)}),[e,r]);const c=Ce.useMemo((()=>`custom-entity-picker-${(null==n?void 0:n.replace(/\s+/g,"-"))||Math.random().toString(36).substring(7)}`),[n]);return e?Ue.jsxs("div",{style:{marginBottom:"16px"},children:[n&&Ue.jsx("label",{htmlFor:c,style:{display:"block",marginBottom:"4px"},children:n}),Ue.jsxs("select",{id:c,value:t||"",onChange:e=>{o(e.target.value)},disabled:a||0===s.length,style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[i&&!t&&Ue.jsx("option",{value:"",disabled:!0,children:i}),0===s.length&&!i&&Ue.jsxs("option",{value:"",disabled:!0,children:["No entities found",r?` for domains: ${r.join(", ")}`:""]}),s.map((e=>Ue.jsx("option",{value:e.value,children:e.label},e.value)))]})]}):Ue.jsx("div",{children:"Loading Home Assistant data..."})},Lp=e.getInstance(),Mp=["sensor"],zp=({hass:e,selectedSensors:t,onSensorsChanged:n})=>{const r=Ce.useCallback((e=>{if(e&&!t.includes(e)){const r=[...t,e];n(r),Lp.log("Editor:HassSensors",`Added InvenTree HASS sensor: ${e}`,{newSensors:r})}}),[t,n]),a=Ce.useCallback((e=>{const r=t.filter((t=>t!==e));n(r),Lp.log("Editor:HassSensors",`Removed InvenTree HASS sensor: ${e}`,{newSensors:r})}),[t,n]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"InvenTree HASS Sensors"}),Ue.jsx("div",{className:"helper-text",children:"Select Home Assistant sensor entities that represent InvenTree parts or provide InvenTree-related data."}),Ue.jsx(Dp,{hass:e,label:"Add InvenTree Sensor Entity",onValueChanged:r,includeDomains:Mp,value:"",placeholder:"Select an InvenTree sensor..."}),t.length>0&&Ue.jsxs("div",{className:"selected-entities-list",style:{marginTop:"16px"},children:[Ue.jsx("h5",{children:"Selected Sensors:"}),t.map((t=>{var n;return Ue.jsxs("div",{className:"selected-entity-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Ue.jsx("span",{children:(null===(n=e.states[t])||void 0===n?void 0:n.attributes.friendly_name)||t}),Ue.jsx("button",{onClick:()=>a(t),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},t)}))]})]})},Fp=e.getInstance(),Gp=({hass:e,selectedEntities:t,onEntitiesChanged:n})=>{const r=Ce.useCallback((e=>{if(e&&!t.includes(e)){const r=[...t,e];n(r),Fp.log("Editor:HaEntities",`Added HA entity: ${e}`,{newEntities:r})}}),[t,n]),a=Ce.useCallback((e=>{const r=t.filter((t=>t!==e));n(r),Fp.log("Editor:HaEntities",`Removed HA entity: ${e}`,{newEntities:r})}),[t,n]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"Home Assistant Entities (Other)"}),Ue.jsx("div",{className:"helper-text",children:"Select any Home Assistant entities whose states or attributes you want to use in conditional logic."}),Ue.jsx(Dp,{hass:e,label:"Add Home Assistant Entity",onValueChanged:r,value:"",placeholder:"Select an HA entity..."}),t.length>0&&Ue.jsxs("div",{className:"selected-entities-list",style:{marginTop:"16px"},children:[Ue.jsx("h5",{children:"Selected Entities:"}),t.map((t=>{var n;return Ue.jsxs("div",{className:"selected-entity-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Ue.jsx("span",{children:(null===(n=e.states[t])||void 0===n?void 0:n.attributes.friendly_name)||t}),Ue.jsx("button",{onClick:()=>a(t),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},t)}))]})]})},qp=e.getInstance(),Up=({hass:e,selectedPks:t,onPksChanged:n,thumbnailOverrides:r,onThumbnailOverridesChanged:a})=>{const[o,i]=Ce.useState(""),[s,l]=Ce.useState(null),c=Ce.useCallback((()=>{if(!o.trim())return;const e=o.split(",").map((e=>e.trim())).filter((e=>""!==e)),r=[];let a=!1;for(const n of e){const e=parseInt(n,10);if(isNaN(e)){a=!0;break}t.includes(e)||r.includes(e)||r.push(e)}if(a)l("Invalid input: Please enter comma-separated numbers (e.g., 101, 102).");else{if(r.length>0){const e=[...t,...r].sort(((e,t)=>e-t));n(e),qp.log("Editor:InventreePk",`Added InvenTree PKs: ${r.join(", ")}`,{newPks:e})}i(""),l(null)}}),[o,t,n]),u=Ce.useCallback((e=>{const o=t.filter((t=>t!==e));n(o),qp.log("Editor:InventreePk",`Removed InvenTree PK: ${e}`,{newPks:o});const i=r.filter((t=>t.pk!==e));i.length!==r.length&&a(i)}),[t,n,r,a]),d=Ce.useCallback(((e,t)=>{const n=[...r],o=n.findIndex((t=>t.pk===e)),i=t.trim();""===i?-1!==o&&n.splice(o,1):-1!==o?n[o]=Object.assign(Object.assign({},n[o]),{path:i}):n.push({pk:e,path:i}),a(n)}),[r,a]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"By InvenTree Part PK"}),Ue.jsx("div",{className:"helper-text",children:"Enter comma-separated InvenTree Part Primary Keys (PKs) to fetch their data directly via API. For each added PK, you can optionally specify a custom local thumbnail path."}),Ue.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[Ue.jsx("input",{type:"text",value:o,onChange:e=>{i(e.target.value),s&&l(null)},placeholder:"e.g., 101, 102, 145",style:{flexGrow:1,padding:"8px",border:s?"1px solid red":"1px solid var(--divider-color)"}}),Ue.jsx("button",{onClick:c,style:{padding:"8px 12px"},children:"Add PKs"})]}),s&&Ue.jsx("div",{style:{color:"red",fontSize:"0.9em",marginBottom:"8px"},children:s}),t.length>0&&Ue.jsxs("div",{className:"selected-pks-list",style:{marginTop:"16px"},children:[Ue.jsx("h5",{children:"Selected Part PKs:"}),t.map((e=>{const t=r.find((t=>t.pk===e)),n=t?t.path:"";return Ue.jsxs("div",{className:"selected-pk-item",style:{padding:"8px 0",borderBottom:"1px solid var(--divider-color)"},children:[Ue.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[Ue.jsxs("span",{children:["Part PK: ",e]}),Ue.jsx("button",{onClick:()=>u(e),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:"Remove"})]}),Ue.jsx("input",{type:"text",value:n,onChange:t=>d(e,t.target.value),placeholder:"Optional: /local/thumbs/part_X.png",title:"Custom local thumbnail path (e.g., inventree_thumbs/my_image.png or /local/inventree_thumbs/my_image.png)",style:{width:"calc(100% - 12px)",padding:"6px",fontSize:"0.9em",border:"1px solid var(--input-border-color, var(--divider-color))"}})]},e)}))]})]})},Bp=e.getInstance(),Hp=({hass:e,parameterFetchConfigs:t,onFetchConfigsChanged:n})=>{const[r,a]=Ce.useState(""),[o,i]=Ce.useState(null),s=e=>{const t=e.split(":");return 3===t.length&&("part"===t[0].toLowerCase()&&(!isNaN(parseInt(t[1],10))&&!(!t[2]||""===t[2].trim())))},l=Ce.useCallback((()=>{if(!r.trim())return;const e=r.split(",").map((e=>e.trim())).filter((e=>""!==e)),o=[];let l=!1;for(const n of e){if(!s(n)){l=!0;break}const e=n.split(":"),r={targetPartIds:[parseInt(e[1],10)],parameterNames:[e[2]],fetchOnlyIfUsed:!1},a=t.some((e=>{const t=Array.isArray(e.targetPartIds)&&Array.isArray(r.targetPartIds)?JSON.stringify(e.targetPartIds.slice().sort())===JSON.stringify(r.targetPartIds.slice().sort()):e.targetPartIds===r.targetPartIds,n=Array.isArray(e.parameterNames)&&Array.isArray(r.parameterNames)?JSON.stringify(e.parameterNames.slice().sort())===JSON.stringify(r.parameterNames.slice().sort()):e.parameterNames===r.parameterNames;return t&&n&&e.fetchOnlyIfUsed===r.fetchOnlyIfUsed})),i=o.some((e=>{const t=Array.isArray(e.targetPartIds)&&Array.isArray(r.targetPartIds)?JSON.stringify(e.targetPartIds.slice().sort())===JSON.stringify(r.targetPartIds.slice().sort()):e.targetPartIds===r.targetPartIds,n=Array.isArray(e.parameterNames)&&Array.isArray(r.parameterNames)?JSON.stringify(e.parameterNames.slice().sort())===JSON.stringify(r.parameterNames.slice().sort()):e.parameterNames===r.parameterNames;return t&&n&&e.fetchOnlyIfUsed===r.fetchOnlyIfUsed}));a||i||o.push(r)}if(l)i("Invalid format: Use comma-separated strings like 'part:ID:PARAM_NAME' (e.g., part:123:color, part:456:size).");else{if(o.length>0){const e=[...t,...o];e.sort(((e,t)=>{let n,r,a,o;if(n=Array.isArray(e.targetPartIds)?e.targetPartIds[0]||0:e.targetPartIds,r=Array.isArray(t.targetPartIds)?t.targetPartIds[0]||0:t.targetPartIds,"string"==typeof n&&"string"!=typeof r)return-1;if("string"!=typeof n&&"string"==typeof r)return 1;if("string"==typeof n&&"string"==typeof r){if(n!==r)return n.localeCompare(r)}else if("number"==typeof n&&"number"==typeof r&&n!==r)return n-r;return a=Array.isArray(e.parameterNames)?e.parameterNames[0]||"":e.parameterNames,o=Array.isArray(t.parameterNames)?t.parameterNames[0]||"":t.parameterNames,"*"===a&&"*"!==o?-1:"*"!==a&&"*"===o?1:a.localeCompare(o)})),n(e),Bp.log("Editor:InventreeParamsFetch",`Added InvenTree Parameter Fetch Configs: ${o.map((e=>`Part ${Array.isArray(e.targetPartIds)?e.targetPartIds.join("/"):e.targetPartIds} - ${Array.isArray(e.parameterNames)?e.parameterNames.join("/"):e.parameterNames}`)).join(", ")}`,{newConfigs:e})}a(""),i(null)}}),[r,t,n]),c=Ce.useCallback((e=>{const r=t.filter((t=>{const n=Array.isArray(t.targetPartIds)&&Array.isArray(e.targetPartIds)?JSON.stringify(t.targetPartIds.slice().sort())===JSON.stringify(e.targetPartIds.slice().sort()):t.targetPartIds===e.targetPartIds,r=Array.isArray(t.parameterNames)&&Array.isArray(e.parameterNames)?JSON.stringify(t.parameterNames.slice().sort())===JSON.stringify(e.parameterNames.slice().sort()):t.parameterNames===e.parameterNames;return!(n&&r&&t.fetchOnlyIfUsed===e.fetchOnlyIfUsed)}));n(r),Bp.log("Editor:InventreeParamsFetch",`Removed InvenTree Parameter Fetch Config: Part ${Array.isArray(e.targetPartIds)?e.targetPartIds.join("/"):e.targetPartIds} - ${Array.isArray(e.parameterNames)?e.parameterNames.join("/"):e.parameterNames}`,{newConfigs:r})}),[t,n]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"InvenTree Parameters to Fetch (Direct API)"}),Ue.jsxs("div",{className:"helper-text",children:["Enter comma-separated parameter strings in the format ",Ue.jsx("code",{children:"part:ID:PARAMETER_NAME"}),". These define specific parameters to be fetched via the InvenTree API."]}),Ue.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[Ue.jsx("input",{type:"text",value:r,onChange:e=>{a(e.target.value),o&&i(null)},placeholder:"e.g., part:145:microwavables, part:101:length_cm",style:{flexGrow:1,padding:"8px",border:o?"1px solid red":"1px solid var(--divider-color)"}}),Ue.jsx("button",{onClick:l,style:{padding:"8px 12px"},children:"Add Configurations"})]}),o&&Ue.jsx("div",{style:{color:"red",fontSize:"0.9em",marginBottom:"8px"},children:o}),t.length>0&&Ue.jsxs("div",{className:"selected-configs-list",style:{marginTop:"16px"},children:[Ue.jsx("h5",{children:"Current Fetch Configurations:"}),t.map(((e,t)=>Ue.jsxs("div",{className:"selected-config-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Ue.jsxs("span",{children:["Part(s): ",(Array.isArray(e.targetPartIds)?e.targetPartIds.join(", "):e.targetPartIds)||"N/A"," ",Ue.jsx("br",{}),"Parameter(s): ",(Array.isArray(e.parameterNames)?e.parameterNames.join(", "):e.parameterNames)||"N/A"," ",Ue.jsx("br",{})]}),Ue.jsx("button",{onClick:()=>c(e),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},`${Array.isArray(e.targetPartIds)?e.targetPartIds.join("-"):e.targetPartIds}-${Array.isArray(e.parameterNames)?e.parameterNames.join("-"):e.parameterNames}-${t}`)))]})]})},Vp=e.getInstance(),Wp=({hass:e,directApiConfig:t={enabled:!1,url:"",api_key:""},onDirectApiConfigChanged:n})=>{const r=Ce.useCallback((e=>{const{name:r,value:a,type:o}=e.target;let i=a;"checkbox"===o?i=e.target.checked:"number"===o&&(i=parseFloat(a));const s=Object.assign(Object.assign({},t),{[r]:i});n(s),Vp.log("Editor:ApiConfig",`API Config changed: ${r} = ${i}`,{newConfig:s})}),[t,n]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"InvenTree API Configuration"}),Ue.jsx("div",{className:"config-item",style:{marginBottom:"16px"},children:Ue.jsxs("label",{htmlFor:"direct_api_enabled",style:{display:"flex",alignItems:"center"},children:[Ue.jsx("input",{type:"checkbox",id:"direct_api_enabled",name:"enabled",checked:t.enabled,onChange:r,style:{marginRight:"8px"}}),"Enable Direct API Communication"]})}),t.enabled&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Ue.jsx("label",{htmlFor:"direct_api_url",children:"InvenTree API URL:"}),Ue.jsx("input",{type:"text",id:"direct_api_url",name:"url",value:t.url||"",onChange:r,placeholder:"e.g., http://inventree.local:8000",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Ue.jsx("label",{htmlFor:"direct_api_key",children:"API Key:"}),Ue.jsx("input",{type:"password",id:"direct_api_key",name:"api_key",value:t.api_key||"",onChange:r,placeholder:"Enter your InvenTree API Key",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Ue.jsx("label",{htmlFor:"direct_api_websocket_url",children:"WebSocket URL (Optional):"}),Ue.jsx("input",{type:"text",id:"direct_api_websocket_url",name:"websocket_url",value:t.websocket_url||"",onChange:r,placeholder:"e.g., ws://inventree.local:8000/ws/api",style:{width:"100%",padding:"8px",boxSizing:"border-box"}}),Ue.jsx("div",{className:"helper-text",style:{fontSize:"0.9em",color:"var(--secondary-text-color)"},children:"Leave blank to auto-derive from API URL. Needed for reverse proxies or custom setups."})]}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Ue.jsx("label",{htmlFor:"direct_api_idle_render_time",children:"Idle Render Time (seconds):"}),Ue.jsx("input",{type:"number",id:"direct_api_idle_render_time",name:"idle_render_time",value:void 0===t.idle_render_time?60:t.idle_render_time,onChange:r,min:"10",max:"600",style:{width:"100px",padding:"8px"}}),Ue.jsx("div",{className:"helper-text",style:{fontSize:"0.9em",color:"var(--secondary-text-color)"},children:"How often to refresh when no changes are detected (10-600s). Set in API performance settings if not here."})]})]})]})},Qp=e.getInstance(),Kp=["detail","grid","list","parts","variants","base","debug","custom"],Jp=({viewType:e="detail",layoutOptions:t={},onLayoutConfigChanged:n})=>{const r=Ce.useCallback((e=>{const t=e.target.value;n(t,{}),Qp.log("Editor:LayoutSection",`View type changed to: ${t}`)}),[n]),a=Ce.useCallback((r=>{const{name:a,value:o}=r.target;let i;if(""===o)i=void 0;else{const e=parseFloat(o);isNaN(e)||(i=e)}const s=Object.assign(Object.assign({},t),{[a]:i}),l=Object.entries(s).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=n),e)),{});n(e,l),Qp.log("Editor:LayoutSection",`Layout option changed: ${a} = ${i}`,{newLayoutOptions:l})}),[e,t,n]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"Layout Configuration"}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Ue.jsx("label",{htmlFor:"view_type_select",children:"View Type:"}),Ue.jsx("select",{id:"view_type_select",name:"view_type",value:e,onChange:r,style:{marginLeft:"8px",padding:"8px",minWidth:"150px"},children:Kp.map((e=>Ue.jsxs("option",{value:e,children:[e.charAt(0).toUpperCase()+e.slice(1)," "]},e)))})]}),"grid"===e?Ue.jsxs("div",{className:"grid-options",style:{marginTop:"10px",paddingLeft:"20px",borderLeft:"2px solid #eee"},children:[Ue.jsx("h5",{style:{marginBottom:"8px"},children:"Grid Layout Options:"}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"8px"},children:[Ue.jsx("label",{htmlFor:"layout_columns",children:"Columns:"}),Ue.jsx("input",{type:"number",id:"layout_columns",name:"columns",value:void 0===t.columns?"":t.columns,onChange:a,min:"1",max:"6",style:{width:"60px",marginLeft:"8px",padding:"6px"}})]}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"8px"},children:[Ue.jsx("label",{htmlFor:"layout_grid_spacing",children:"Grid Spacing (px):"}),Ue.jsx("input",{type:"number",id:"layout_grid_spacing",name:"grid_spacing",value:void 0===t.grid_spacing?"":t.grid_spacing,onChange:a,min:"0",max:"32",style:{width:"60px",marginLeft:"8px",padding:"6px"}})]}),Ue.jsxs("div",{className:"config-item",style:{marginBottom:"8px"},children:[Ue.jsx("label",{htmlFor:"layout_item_height",children:"Item Height (px):"}),Ue.jsx("input",{type:"number",id:"layout_item_height",name:"item_height",value:void 0===t.item_height?"":t.item_height,onChange:a,min:"50",max:"500",style:{width:"70px",marginLeft:"8px",padding:"6px"}})]})]}):null]})},Xp=e.getInstance(),Yp=e=>{const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},Zp=({displayConfig:e={},onDisplayConfigChanged:t})=>{const n=Ce.useCallback((n=>{const{name:r,checked:a}=n.target,o=Object.assign(Object.assign({},e),{[r]:a});t(o),Xp.log("Editor:VisibilitySection",`Display option changed: ${r} = ${a}`,{newDisplayConfig:o})}),[e,t]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"Element Visibility"}),Ue.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:["show_header","show_image","show_name","show_stock","show_description","show_category","show_ipn","show_location","show_supplier","show_manufacturer","show_notes","show_buttons","show_parameters","show_stock_status_border","show_stock_status_colors","show_related_parts","show_part_details_component","show_stock_status_border_for_templates","show_buttons_for_variants","show_part_details_component_for_variants","show_image_for_variants","show_stock_for_variants","show_name_for_variants"].map((t=>Ue.jsx("div",{className:"config-item",children:Ue.jsxs("label",{htmlFor:`display_${t}`,style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[Ue.jsx("input",{type:"checkbox",id:`display_${t}`,name:t,checked:!!e[t],onChange:n,style:{marginRight:"8px"}}),Yp(t).replace(/^Show /,"")," "]})},t)))})]})},ef=e.getInstance(),tf=({styleConfig:e={},onStyleConfigChanged:t})=>{const n=Ce.useCallback((n=>{const{name:r,value:a,type:o}=n.target;let i=a;if("number"===o)if(""===a)i=void 0;else{const e=parseFloat(a);i=isNaN(e)?void 0:e}const s=Object.assign(Object.assign({},e),{[r]:i});t(s),ef.log("Editor:StylingSection",`Style option changed: ${r} = ${i}`,{newStyleConfig:s})}),[e,t]);return Ue.jsxs("div",{className:"sub-section-container",children:[Ue.jsx("h4",{className:"sub-section-title",children:"Overall Card Styling"}),Ue.jsxs("div",{className:"config-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[Ue.jsxs("div",{className:"config-item",children:[Ue.jsx("label",{htmlFor:"style_background",children:"Background CSS:"}),Ue.jsx("input",{type:"text",id:"style_background",name:"background",value:(null==e?void 0:e.background)||"",onChange:n,placeholder:"e.g., #f0f0f0, var(--ha-card-background)",style:{width:"100%",padding:"8px",boxSizing:"border-box"}}),Ue.jsx("small",{children:"CSS value for card background (color, image, etc.)"})]}),Ue.jsxs("div",{className:"config-item",children:[Ue.jsx("label",{htmlFor:"style_spacing",children:"Overall Spacing (px):"}),Ue.jsx("input",{type:"number",id:"style_spacing",name:"spacing",value:void 0===(null==e?void 0:e.spacing)?"":e.spacing,onChange:n,placeholder:"e.g., 16",min:"0",style:{width:"100px",padding:"8px"}}),Ue.jsx("small",{children:"Default spacing/padding unit."})]}),Ue.jsxs("div",{className:"config-item",children:[Ue.jsx("label",{htmlFor:"style_image_size",children:"Default Image Size (px):"}),Ue.jsx("input",{type:"number",id:"style_image_size",name:"image_size",value:void 0===(null==e?void 0:e.image_size)?"":e.image_size,onChange:n,placeholder:"e.g., 50",min:"10",max:"300",style:{width:"100px",padding:"8px"}}),Ue.jsx("small",{children:"Default size for thumbnails/images."})]})]})]})},nf=e.getInstance(),rf=({hass:e,initialAction:t,onSave:n,onCancel:r})=>{var a,o,i,s,l,c,u,d,p,f,h,g,m,y,v,b,S,k,w,_,x,C,E,A,I;const[P,j]=Ce.useState({name:"",trigger:{type:"ui_button",ui:{labelTemplate:"",icon:void 0,placement:"part_footer"}},operation:{type:"call_ha_service",callHAService:{service:"",target:void 0,dataTemplate:{}}},isEnabledExpressionId:"",postEvaluationLogicIds:[]}),[R,T]=Ce.useState("call_ha_service"),[N,O]=Ce.useState("ui_button"),[$,D]=Ce.useState("{}"),[L,M]=Ce.useState("{}"),[z,F]=Ce.useState(""),[G,q]=Ce.useState(!1),[U,B]=Ce.useState(!1),[H,V]=Ce.useState("");Ee.useEffect((()=>{var e,n,r,a,o;const i={name:"",trigger:{type:"ui_button",ui:{labelTemplate:"",icon:void 0,placement:"part_footer"}},operation:{type:"call_ha_service",callHAService:{service:"",target:void 0,dataTemplate:{}}},isEnabledExpressionId:"",postEvaluationLogicIds:[]};let s=t?JSON.parse(JSON.stringify(t)):null;if(s){s.trigger=s.trigger||{type:"ui_button",ui:{labelTemplate:"",icon:void 0,placement:"part_footer"}},s.trigger.ui=s.trigger.ui||{labelTemplate:"",icon:void 0,placement:"part_footer"},s.operation=s.operation||{type:"call_ha_service",callHAService:{service:"",target:void 0,dataTemplate:{}}};const t=s.trigger.type||"ui_button";O(t);const o=s.operation.type||"call_ha_service";if(T(o),"call_ha_service"!==o||s.operation.callHAService?"update_inventree_parameter"!==o||s.operation.updateInvenTreeParameter?"dispatch_redux_action"!==o||s.operation.dispatchReduxAction?"trigger_conditional_logic"!==o||s.operation.triggerConditionalLogic||(s.operation.triggerConditionalLogic={logicIdToTrigger:""}):s.operation.dispatchReduxAction={actionType:"",payloadTemplate:{}}:s.operation.updateInvenTreeParameter={partIdContext:"current",parameterName:"",valueTemplate:""}:s.operation.callHAService={service:"",target:void 0,dataTemplate:{}},null===(e=s.operation)||void 0===e?void 0:e.callHAService){const e=s.operation.callHAService.target;let t;"string"==typeof e?(t={type:"direct_entity",entity_id:e},nf.warn("ActionEditorForm","Migrating legacy string target to ActionDirectEntityTarget (likely should be standard_object_target). Review configuration.",{currentTarget:e}),e.trim()?B(!0):B(!1)):e&&!("type"in e)&&("entity_id"in e||"device_id"in e||"area_id"in e)?(t={type:"standard_object_target",target_details:e},e.entity_id?B(!0):B(!1)):e&&"type"in e?(t=e,"standard_object_target"===t.type&&t.target_details.entity_id?B(!0):B(!1)):B(!1),s.operation.callHAService.target=t;const n=s.operation.callHAService.dataTemplate;D(n&&"object"==typeof n?JSON.stringify(n,null,2):"string"==typeof n?n:"{}")}else"call_ha_service"===o?(s.operation.callHAService={service:"",target:void 0,dataTemplate:{}},D("{}"),B(!1)):(D("{}"),B(!1));if(null===(n=s.operation)||void 0===n?void 0:n.dispatchReduxAction){const e=s.operation.dispatchReduxAction.payloadTemplate;M(e&&"object"==typeof e?JSON.stringify(e,null,2):"string"==typeof e?e:"{}")}else M("{}");j(Object.assign(Object.assign({},i),s)),s.confirmation?(q(!0),F(s.confirmation.textTemplate||"")):(q(!1),F("")),(null==s?void 0:s.isEnabledExpressionId)?W("isEnabledExpressionId",s.isEnabledExpressionId):W("isEnabledExpressionId",void 0!==i.isEnabledExpressionId?i.isEnabledExpressionId:""),(null==s?void 0:s.postEvaluationLogicIds)&&Array.isArray(s.postEvaluationLogicIds)?V(s.postEvaluationLogicIds.join(", ")):V(""),(null===(a=null===(r=null==s?void 0:s.trigger)||void 0===r?void 0:r.ui)||void 0===a?void 0:a.icon)&&console.log("[ICON_TRACE] useEffect - Icon from effectiveInitial:",{icon:s.trigger.ui.icon})}else j(i),T((null===(o=i.operation)||void 0===o?void 0:o.type)||"call_ha_service"),D("{}"),M("{}"),q(!1),F(""),B(!1)}),[t]);const W=Ce.useCallback(((e,t)=>{j((n=>{var r,a,o;const i=e.split("."),s=JSON.parse(JSON.stringify(n));let l=s;for(let t=0;t<i.length-1;t++){const n=i[t];l[n]||("operation.callHAService.target.target_details.entity_id"===e&&"target"===n&&t===i.length-3?l[n]={type:"standard_object_target",target_details:{}}:("operation.callHAService.target.target_details.entity_id"===e&&"target_details"===n&&i.length,l[n]={})),l=l[n]}const c=i[i.length-1];return"operation.callHAService.target.target_details.entity_id"===e&&""===t?l[c]?l[c]=void 0:"standard_object_target"===(null===(o=null===(a=null===(r=s.operation)||void 0===r?void 0:r.callHAService)||void 0===a?void 0:a.target)||void 0===o?void 0:o.type)&&s.operation.callHAService.target.target_details&&(s.operation.callHAService.target.target_details.entity_id=void 0):l[c]=t,s}))}),[]),Q=Ce.useCallback((e=>{const t=e.target.value;T(t),j((e=>{var n,r,a,o,i,s,l;let c={},u=!1;switch(t){case"call_ha_service":const t=(null===(n=e.operation)||void 0===n?void 0:n.callHAService)||{service:"",target:void 0,dataTemplate:{}};c={callHAService:t},D(JSON.stringify(t.dataTemplate||{},null,2)),"standard_object_target"===(null===(r=t.target)||void 0===r?void 0:r.type)&&t.target.target_details.entity_id&&(u=!0);break;case"update_inventree_parameter":c={updateInvenTreeParameter:(null===(a=e.operation)||void 0===a?void 0:a.updateInvenTreeParameter)||{partIdContext:"current",parameterName:"",valueTemplate:""}};break;case"dispatch_redux_action":c={dispatchReduxAction:(null===(o=e.operation)||void 0===o?void 0:o.dispatchReduxAction)||{actionType:"",payloadTemplate:{}}},M(JSON.stringify((null===(s=null===(i=e.operation)||void 0===i?void 0:i.dispatchReduxAction)||void 0===s?void 0:s.payloadTemplate)||{},null,2));break;case"trigger_conditional_logic":c={triggerConditionalLogic:(null===(l=e.operation)||void 0===l?void 0:l.triggerConditionalLogic)||{logicIdToTrigger:""}}}return B(u),Object.assign(Object.assign({},e),{operation:Object.assign({type:t},c)})}))}),[]),K=Ce.useCallback((e=>{const t=e.target.value;O(t),j((e=>{var n;const r=Object.assign(Object.assign({},e.trigger||{}),{type:t,ui:(null===(n=e.trigger)||void 0===n?void 0:n.ui)||{labelTemplate:"",icon:void 0,placement:"part_footer"}});return Object.assign(Object.assign({},e),{trigger:r})}))}),[]),J=Ce.useCallback((e=>{q(e.target.checked),e.target.checked||(F(""),j((e=>Object.assign(Object.assign({},e),{confirmation:void 0}))))}),[]),X=Ce.useCallback((e=>{D(e.target.value)}),[]),Y=Ce.useCallback((e=>{M(e.target.value)}),[]),Z=Ce.useCallback((e=>{F(e.target.value)}),[]),ee=Ce.useCallback((e=>{const t=e.target.checked;B(t),j(t?e=>{var t,n,r,a,o,i;const s=JSON.parse(JSON.stringify(e));return(null===(t=s.operation)||void 0===t?void 0:t.callHAService)?s.operation.callHAService.target&&"standard_object_target"===s.operation.callHAService.target.type||(s.operation.callHAService.target={type:"standard_object_target",target_details:{}}):"call_ha_service"===(null===(n=s.operation)||void 0===n?void 0:n.type)&&(s.operation.callHAService={service:(null===(a=null===(r=e.operation)||void 0===r?void 0:r.callHAService)||void 0===a?void 0:a.service)||"",target:{type:"standard_object_target",target_details:{}},dataTemplate:(null===(i=null===(o=e.operation)||void 0===o?void 0:o.callHAService)||void 0===i?void 0:i.dataTemplate)||{}}),s}:e=>{var t;const n=Object.assign({},e);return(null===(t=n.operation)||void 0===t?void 0:t.callHAService)&&(n.operation.callHAService.target=void 0),n})}),[]),te=Ce.useCallback((()=>{var e,t,r,a,o,i,s,l;if(!P.name)return void alert("Action Name is required.");if("ui_button"===N&&!(null===(t=null===(e=P.trigger)||void 0===e?void 0:e.ui)||void 0===t?void 0:t.placement))return void alert("Button Placement is required for UI Button trigger.");if(!(null===(r=P.operation)||void 0===r?void 0:r.type))return void alert("Operation Type is required.");let c=JSON.parse(JSON.stringify(P));if(c.operation=c.operation||{type:R},c.operation.type=R,"call_ha_service"===R){if(c.operation.callHAService=c.operation.callHAService||{service:"",target:void 0,dataTemplate:{}},!(null===(a=c.operation.callHAService.service)||void 0===a?void 0:a.trim()))return void alert("Service Call is required for HA Service operation.");if(U){const e=c.operation.callHAService.target;let t;e&&"standard_object_target"===e.type&&(t=e.target_details.entity_id),t&&""!==t.trim()?c.operation.callHAService.target={type:"standard_object_target",target_details:{entity_id:t}}:c.operation.callHAService.target=void 0}else c.operation.callHAService.target=void 0;try{c.operation.callHAService.dataTemplate=$.trim()?JSON.parse($):{}}catch(e){return void alert("Invalid JSON in Service Data for HA Service.")}}else if("update_inventree_parameter"===R){if(c.operation.updateInvenTreeParameter=c.operation.updateInvenTreeParameter||{partIdContext:"current",parameterName:"",valueTemplate:""},!(null===(o=c.operation.updateInvenTreeParameter.partIdContext)||void 0===o?void 0:o.toString().trim()))return void alert("Part ID Context is required for Update InvenTree Parameter operation.");if(!(null===(i=c.operation.updateInvenTreeParameter.parameterName)||void 0===i?void 0:i.trim()))return void alert("Parameter Name is required for Update InvenTree Parameter operation.")}else if("dispatch_redux_action"===R){if(c.operation.dispatchReduxAction=c.operation.dispatchReduxAction||{actionType:"",payloadTemplate:{}},!(null===(s=c.operation.dispatchReduxAction.actionType)||void 0===s?void 0:s.trim()))return void alert("Action Type is required for Dispatch Redux Action operation.");try{c.operation.dispatchReduxAction.payloadTemplate=L.trim()?JSON.parse(L):{}}catch(e){return void alert("Invalid JSON in Payload Template for Dispatch Redux Action.")}}else if("trigger_conditional_logic"===R&&(c.operation.triggerConditionalLogic=c.operation.triggerConditionalLogic||{logicIdToTrigger:""},!(null===(l=c.operation.triggerConditionalLogic.logicIdToTrigger)||void 0===l?void 0:l.trim())))return void alert("Logic ID to Trigger is required.");G&&z.trim()?c.confirmation={textTemplate:z}:c.confirmation=void 0,H.trim()?c.postEvaluationLogicIds=H.split(",").map((e=>e.trim())).filter((e=>e)):c.postEvaluationLogicIds=void 0,console.log("[ICON_TRACE] Saving action (within handleSave, for context if icon issues persist during save):",{finalAction:c}),n(c)}),[P,n,$,L,G,z,R,N,H,U]);let ne;"standard_object_target"===(null===(i=null===(o=null===(a=P.operation)||void 0===a?void 0:a.callHAService)||void 0===o?void 0:o.target)||void 0===i?void 0:i.type)&&(ne=P.operation.callHAService.target.target_details.entity_id);const re={marginBottom:"16px"},ae={display:"block",marginBottom:"4px",fontWeight:"500"},oe={width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",boxSizing:"border-box"},ie={fontSize:"0.8em",color:"#666",marginTop:"4px",display:"block"},se={width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",minHeight:"80px",boxSizing:"border-box"};return Ue.jsxs("div",{style:{padding:"16px",maxHeight:"70vh",overflowY:"auto"},children:[Ue.jsx("h3",{style:{marginTop:0,marginBottom:"16px"},children:t?"Edit Action":"Add New Action"}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"actionName",children:"Action Name"}),Ue.jsx("input",{type:"text",id:"actionName",style:oe,value:P.name||"",onChange:e=>W("name",e.target.value),placeholder:"e.g., Turn On Light, Order More Stock"})]}),Ue.jsx("h4",{style:{marginBottom:"8px",marginTop:"20px",borderBottom:"1px solid #eee",paddingBottom:"4px"},children:"Trigger"}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"triggerType",children:"Trigger Type"}),Ue.jsxs("select",{id:"triggerType",style:oe,value:N,onChange:K,children:[Ue.jsx("option",{value:"ui_button",children:"UI Button"}),Ue.jsx("option",{value:"ui_thumbnail_click",children:"UI Thumbnail Click"})]})]}),"ui_button"===N&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"buttonLabel",children:"Button Label Template (Optional)"}),Ue.jsx("input",{type:"text",id:"buttonLabel",style:oe,value:(null===(l=null===(s=P.trigger)||void 0===s?void 0:s.ui)||void 0===l?void 0:l.labelTemplate)||"",onChange:e=>W("trigger.ui.labelTemplate",e.target.value),placeholder:"e.g., Turn On, Print %%context.part.name%% Label"}),Ue.jsx("small",{style:ie,children:"Templateable. E.g. `%%context.part.name%%`."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"buttonIcon",children:"Button Icon (Optional)"}),Ue.jsx("input",{type:"text",id:"buttonIcon",style:oe,value:(null===(u=null===(c=P.trigger)||void 0===c?void 0:c.ui)||void 0===u?void 0:u.icon)||"",onChange:e=>W("trigger.ui.icon",e.target.value),placeholder:"mdi:lightbulb"}),Ue.jsx("small",{style:ie,children:"MDI Icon. E.g., `mdi:lightbulb`."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"buttonPlacement",children:"Button Placement"}),Ue.jsxs("select",{id:"buttonPlacement",style:oe,value:(null===(p=null===(d=P.trigger)||void 0===d?void 0:d.ui)||void 0===p?void 0:p.placement)||"part_footer",onChange:e=>W("trigger.ui.placement",e.target.value),children:[Ue.jsx("option",{value:"part_footer",children:"Part Footer"}),Ue.jsx("option",{value:"global_header",children:"Global Header"})]})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"targetPartPks",children:"Target Part PKs (Optional)"}),Ue.jsx("input",{type:"text",id:"targetPartPks",style:oe,value:Array.isArray(null===(h=null===(f=P.trigger)||void 0===f?void 0:f.ui)||void 0===h?void 0:h.targetPartPks)?P.trigger.ui.targetPartPks.join(","):(null===(m=null===(g=P.trigger)||void 0===g?void 0:g.ui)||void 0===m?void 0:m.targetPartPks)||"",onChange:e=>{const t=e.target.value;if(t.trim()){const e=t.split(",").map((e=>parseInt(e.trim(),10))).filter((e=>!isNaN(e)));e.length>0||t.split(",").every((e=>!isNaN(parseInt(e.trim(),10))))?W("trigger.ui.targetPartPks",e):W("trigger.ui.targetPartPks",e.length>0?e:[])}else W("trigger.ui.targetPartPks",[])},placeholder:"e.g., 1, 2, 3 (comma-separated Part PKs)"}),Ue.jsx("small",{style:ie,children:"Comma-separated Part Primary Keys. If empty, applies based on placement (e.g., current part in footer, or all if global and no specific target defined by action operation itself)."})]})]}),"ui_thumbnail_click"===N&&Ue.jsx("div",{style:Object.assign(Object.assign({},re),{padding:"8px",background:"#f0f0f0",borderRadius:"4px"}),children:Ue.jsx("p",{style:{margin:0,fontSize:"0.9em",color:"#333"},children:"This action will be triggered when a part thumbnail is clicked. No further UI configuration is typically needed for this trigger type here, but ensure the `placement` and `partIdContext` are handled correctly by the components rendering the thumbnails if advanced control is desired."})}),Ue.jsx("h4",{style:{marginBottom:"8px",marginTop:"20px",borderBottom:"1px solid #eee",paddingBottom:"4px"},children:"Operation"}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"operationType",children:"Operation Type"}),Ue.jsxs("select",{id:"operationType",style:oe,value:R,onChange:Q,children:[Ue.jsx("option",{value:"call_ha_service",children:"Call Home Assistant Service"}),Ue.jsx("option",{value:"update_inventree_parameter",children:"Update InvenTree Parameter"}),Ue.jsx("option",{value:"dispatch_redux_action",children:"Dispatch Redux Action"}),Ue.jsx("option",{value:"trigger_conditional_logic",children:"Trigger Conditional Logic"})]})]}),"call_ha_service"===R&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"serviceCall",children:"Service Call"}),Ue.jsx("input",{type:"text",id:"serviceCall",style:oe,value:(null===(v=null===(y=P.operation)||void 0===y?void 0:y.callHAService)||void 0===v?void 0:v.service)||"",onChange:e=>W("operation.callHAService.service",e.target.value),placeholder:"e.g., light.turn_on, script.my_script"}),Ue.jsx("small",{style:ie,children:"Format: `domain.service`."})]}),Ue.jsx("div",{style:re,children:Ue.jsxs("label",{style:Object.assign(Object.assign({},ae),{display:"flex",alignItems:"center"}),children:[Ue.jsx("input",{type:"checkbox",checked:U,onChange:ee,style:{marginRight:"8px"}}),"Set Target Entity ID"]})}),U&&Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"targetEntityId",children:"Target Entity ID"}),Ue.jsx(Dp,{hass:e,value:ne,label:"Target Entity",onValueChanged:e=>W("operation.callHAService.target.target_details.entity_id",e)}),Ue.jsx("small",{style:ie,children:"Templateable. E.g., `sensor.%%context.part.name%%_status` or `%%context.hassStates['input_select.my_selector'].state%%`."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"serviceData",children:"Service Data (JSON Template, Optional)"}),Ue.jsx("textarea",{id:"serviceData",style:se,value:$,onChange:X,placeholder:'{\n  "brightness_pct": 80,\n  "message": "Part %%context.part.name%% needs attention"\n}'}),Ue.jsx("small",{style:ie,children:"JSON object. Values can be templates."})]})]}),"update_inventree_parameter"===R&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"paramPartIdContext",children:"Part ID Context"}),Ue.jsx("input",{type:"text",id:"paramPartIdContext",style:oe,value:(null===(S=null===(b=P.operation)||void 0===b?void 0:b.updateInvenTreeParameter)||void 0===S?void 0:S.partIdContext)||"current",onChange:e=>W("operation.updateInvenTreeParameter.partIdContext",e.target.value),placeholder:"e.g., current, 123, or %%context.anotherPart.pk%%"}),Ue.jsx("small",{style:ie,children:"'current', a specific Part PK, or a template resolving to a PK."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"paramName",children:"Parameter Name"}),Ue.jsx("input",{type:"text",id:"paramName",style:oe,value:(null===(w=null===(k=P.operation)||void 0===k?void 0:k.updateInvenTreeParameter)||void 0===w?void 0:w.parameterName)||"",onChange:e=>W("operation.updateInvenTreeParameter.parameterName",e.target.value),placeholder:"e.g., Status, Location"}),Ue.jsx("small",{style:ie,children:"The name of the InvenTree parameter to update."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"paramValueTemplate",children:"Value Template"}),Ue.jsx("input",{type:"text",id:"paramValueTemplate",style:oe,value:(null===(x=null===(_=P.operation)||void 0===_?void 0:_.updateInvenTreeParameter)||void 0===x?void 0:x.valueTemplate)||"",onChange:e=>W("operation.updateInvenTreeParameter.valueTemplate",e.target.value),placeholder:"e.g., %%context.hassStates['input_text.new_status'].state%%"}),Ue.jsx("small",{style:ie,children:"Templateable. The new value for the parameter."})]})]}),"dispatch_redux_action"===R&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"reduxActionType",children:"Redux Action Type"}),Ue.jsx("input",{type:"text",id:"reduxActionType",style:oe,value:(null===(E=null===(C=P.operation)||void 0===C?void 0:C.dispatchReduxAction)||void 0===E?void 0:E.actionType)||"",onChange:e=>W("operation.dispatchReduxAction.actionType",e.target.value),placeholder:"e.g., parts/updatePartStock"}),Ue.jsx("small",{style:ie,children:"The `type` string of the Redux action to dispatch."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"reduxPayloadTemplate",children:"Payload Template (JSON, Optional)"}),Ue.jsx("textarea",{id:"reduxPayloadTemplate",style:se,value:L,onChange:Y,placeholder:'{\n  "partId": "%%context.part.pk%%",\n  "newStock": "%%context.hassStates[\'input_number.adjustment_amount\'].state%%"\n}'}),Ue.jsx("small",{style:ie,children:"JSON object. Values can be templates. This will be the action's payload."})]})]}),"trigger_conditional_logic"===R&&Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"logicIdToTrigger",children:"Conditional Logic ID"}),Ue.jsx("input",{type:"text",id:"logicIdToTrigger",style:oe,value:(null===(I=null===(A=P.operation)||void 0===A?void 0:A.triggerConditionalLogic)||void 0===I?void 0:I.logicIdToTrigger)||"",onChange:e=>W("operation.triggerConditionalLogic.logicIdToTrigger",e.target.value),placeholder:"Enter the ID of the ConditionalLogicItem"}),Ue.jsx("small",{style:ie,children:"The unique ID of a defined Conditional Logic item to re-evaluate."})]}),Ue.jsx("h4",{style:{marginBottom:"8px",marginTop:"20px",borderBottom:"1px solid #eee",paddingBottom:"4px"},children:"Advanced Options"}),Ue.jsxs("div",{style:re,children:[Ue.jsxs("label",{style:Object.assign(Object.assign({},ae),{display:"flex",alignItems:"center"}),children:[Ue.jsx("input",{type:"checkbox",checked:G,onChange:J,style:{marginRight:"8px"}}),"Require Confirmation"]}),G&&Ue.jsx("input",{type:"text",style:Object.assign(Object.assign({},oe),{marginTop:"4px"}),value:z,onChange:Z,placeholder:"Confirmation message (templateable)"})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"isEnabledExpressionId",children:"Is Enabled Expression ID (Optional)"}),Ue.jsx("input",{type:"text",id:"isEnabledExpressionId",style:oe,value:P.isEnabledExpressionId||"",onChange:e=>W("isEnabledExpressionId",e.target.value),placeholder:"ID of an expression from Expression Engine"}),Ue.jsx("small",{style:ie,children:"If provided, the action is enabled only if this expression evaluates to true."})]}),Ue.jsxs("div",{style:re,children:[Ue.jsx("label",{style:ae,htmlFor:"postEvaluationLogicIds",children:"Post-Evaluation Logic IDs (Optional, Comma-separated)"}),Ue.jsx("input",{type:"text",id:"postEvaluationLogicIds",style:oe,value:H,onChange:e=>V(e.target.value),placeholder:"logic_id_1, logic_id_2"}),Ue.jsx("small",{style:ie,children:"Comma-separated IDs of Conditional Logic items to re-evaluate after this action executes."})]}),Ue.jsxs("div",{style:{marginTop:"24px",display:"flex",justifyContent:"flex-end"},children:[Ue.jsx("button",{type:"button",onClick:r,style:{marginRight:"8px"},children:"Cancel"}),Ue.jsx("button",{type:"button",onClick:te,style:{fontWeight:"bold"},children:"Save Action"})]})]})},af=e.getInstance(),of=({hass:e,actions:t=[],onActionsChanged:n})=>{const[r,a]=Ce.useState(!1),[o,i]=Ce.useState(void 0),[s,l]=Ce.useState(null),c=Ce.useCallback(((e,t)=>{i(e?Object.assign({},e):void 0),l(void 0!==t?t:null),a(!0),af.log("Editor:ConfigurableActionsSection","Modal opened",{action:e,index:t})}),[]),u=Ce.useCallback((()=>{a(!1),i(void 0),l(null),af.log("Editor:ConfigurableActionsSection","Modal closed")}),[]),d=Ce.useCallback((e=>{const r=t||[];let a;null!==s?(a=r.map(((t,n)=>n===s?Object.assign(Object.assign({},e),{id:t.id||String(Date.now())}):t)),af.log("Editor:ConfigurableActionsSection","Action updated",{savedAction:e,index:s})):(a=[...r,Object.assign(Object.assign({},e),{id:e.id||String(Date.now())})],af.log("Editor:ConfigurableActionsSection","New action added",{savedAction:e})),n(a),u()}),[t,n,u,s]),p=Ce.useCallback((e=>{const r=(t||[]).filter(((t,n)=>n!==e));n(r),af.log("Editor:ConfigurableActionsSection","Action deleted",{index:e})}),[t,n]);return Ue.jsxs("div",{className:"configurable-actions-section",style:{border:"1px solid #ccc",padding:"16px",margin:"10px 0"},children:[Ue.jsx("h4",{children:"Configurable Actions"}),t&&t.length>0?Ue.jsx("ul",{style:{listStyle:"none",padding:0},children:t.map(((e,t)=>Ue.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",borderBottom:"1px solid #eee"},children:[Ue.jsxs("span",{children:[e.name||`Action ID: ${e.id}`," (Trigger: ",e.trigger.type,")"]}),Ue.jsxs("div",{children:[Ue.jsx("button",{onClick:()=>c(e,t),style:{marginRight:"8px"},children:"Edit"}),Ue.jsx("button",{onClick:()=>p(t),children:"Delete"})]})]},e.id||t)))}):Ue.jsx("p",{children:"No actions defined yet."}),Ue.jsx("button",{onClick:()=>c(),style:{marginTop:"10px"},children:"+ Add New Action"}),r&&Ue.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:u,children:Ue.jsxs("div",{className:"modal-content",style:{background:"var(--ha-card-background, var(--card-background-color, white))",padding:"20px",borderRadius:"8px",minWidth:"400px",maxWidth:"600px",color:"var(--primary-text-color)"},onClick:e=>e.stopPropagation(),children:[Ue.jsx("h5",{style:{marginTop:0},children:o?"Edit Action":"Add New Action"}),Ue.jsx(rf,{hass:e,initialAction:o,onSave:d,onCancel:u})]})})]})};var sf={"¬º":"1/4","¬Ω":"1/2","¬æ":"3/4","‚Öê":"1/7","‚Öë":"1/9","‚Öí":"1/10","‚Öì":"1/3","‚Öî":"2/3","‚Öï":"1/5","‚Öñ":"2/5","‚Öó":"3/5","‚Öò":"4/5","‚Öô":"1/6","‚Öö":"5/6","‚Öõ":"1/8","‚Öú":"3/8","‚Öù":"5/8","‚Öû":"7/8","‚Öü":"1/"},lf=/^(?=-?\s*\.\d|-?\s*\d)(-)?\s*((?:\d(?:[\d,_]*\d)?)*)(([eE][+-]?\d(?:[\d,_]*\d)?)?|\.\d(?:[\d,_]*\d)?([eE][+-]?\d(?:[\d,_]*\d)?)?|(\s+\d(?:[\d,_]*\d)?\s*)?\s*\/\s*\d(?:[\d,_]*\d)?)?$/,cf=new RegExp(lf.source.replace(/\$$/,"(?:\\s*[^\\.\\d\\/].*)?")),uf=new RegExp(`(${Object.keys(sf).join("|")})`),df={MMM:3e3,MM:2e3,M:1e3,CM:900,DCCC:800,DCC:700,DC:600,D:500,CD:400,CCC:300,CC:200,C:100,XC:90,LXXX:80,LXX:70,LX:60,L:50,XL:40,XXX:30,XX:20,XII:12,XI:11,X:10,IX:9,VIII:8,VII:7,VI:6,V:5,IV:4,III:3,II:2,I:1},pf={"‚Ö†":"I","‚Ö°":"II","‚Ö¢":"III","‚Ö£":"IV","‚Ö§":"V","‚Ö•":"VI","‚Ö¶":"VII","‚Öß":"VIII","‚Ö®":"IX","‚Ö©":"X","‚Ö™":"XI","‚Ö´":"XII","‚Ö¨":"L","‚Ö≠":"C","‚ÖÆ":"D","‚ÖØ":"M","‚Ö∞":"I","‚Ö±":"II","‚Ö≤":"III","‚Ö≥":"IV","‚Ö¥":"V","‚Öµ":"VI","‚Ö∂":"VII","‚Ö∑":"VIII","‚Ö∏":"IX","‚Öπ":"X","‚Ö∫":"XI","‚Öª":"XII","‚Öº":"L","‚ÖΩ":"C","‚Öæ":"D","‚Öø":"M"},ff=new RegExp(`(${Object.keys(pf).join("|")})`,"gi"),hf=/^(?=[MDCLXVI])(M{0,3})(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i,gf={round:3,allowTrailingInvalid:!1,romanNumerals:!1},mf=/^\s*\//,yf=(e,t=gf)=>{if("number"==typeof e||"bigint"==typeof e)return e;let n=NaN;const r=`${e}`.replace(uf,((e,t)=>` ${sf[t]}`)).replace("‚ÅÑ","/").trim();if(0===r.length)return NaN;const a={...gf,...t},o=(a.allowTrailingInvalid?cf:lf).exec(r);if(!o)return a.romanNumerals?(e=>{const t=`${e}`.replace(ff,((e,t)=>pf[t])).toUpperCase(),n=hf.exec(t);if(!n)return NaN;const[,r,a,o,i]=n;return(df[r]??0)+(df[a]??0)+(df[o]??0)+(df[i]??0)})(r):NaN;const[,i,s,l]=o,c=s.replace(/[,_]/g,""),u=null==l?void 0:l.replace(/[,_]/g,"");if(n=!c&&u&&u.startsWith(".")?0:parseInt(c),!u)return i?-1*n:n;const d=!1===a.round?NaN:parseFloat(`1e${Math.floor(Math.max(0,a.round))}`);if(u.startsWith(".")||u.startsWith("e")||u.startsWith("E")){const e=parseFloat(`${n}${u}`);n=isNaN(d)?e:Math.round(e*d)/d}else if(mf.test(u)){const e=parseInt(c),t=parseInt(u.replace("/",""));n=isNaN(d)?e/t:Math.round(e*d/t)/d}else{const e=u.split("/"),[t,r]=e.map((e=>parseInt(e)));n+=isNaN(d)?t/r:Math.round(t*d/r)/d}return i?-1*n:n},vf=Ce.createContext({}),bf=e=>Ue.jsx("button",{type:"button","data-testid":e.testID,disabled:e.disabled&&!e.disabledTranslation,className:e.className,title:e.disabledTranslation&&e.disabled?e.disabledTranslation.title:e.title,onClick:t=>e.handleOnClick(t),children:e.disabledTranslation&&e.disabled?e.disabledTranslation.label:e.label}),Sf=Ce.forwardRef(((e,t)=>Ue.jsx("span",{"data-testid":e.testID,ref:t,className:e.className,title:e.title,children:e.label}))),kf="------",wf=kf,_f=kf,xf=kf,Cf=kf,Ef=kf,Af=kf,If=[{name:"=",value:"=",label:"="},{name:"!=",value:"!=",label:"!="},{name:"<",value:"<",label:"<"},{name:">",value:">",label:">"},{name:"<=",value:"<=",label:"<="},{name:">=",value:">=",label:">="},{name:"contains",value:"contains",label:"contains"},{name:"beginsWith",value:"beginsWith",label:"begins with"},{name:"endsWith",value:"endsWith",label:"ends with"},{name:"doesNotContain",value:"doesNotContain",label:"does not contain"},{name:"doesNotBeginWith",value:"doesNotBeginWith",label:"does not begin with"},{name:"doesNotEndWith",value:"doesNotEndWith",label:"does not end with"},{name:"null",value:"null",label:"is null"},{name:"notNull",value:"notNull",label:"is not null"},{name:"in",value:"in",label:"in"},{name:"notIn",value:"notIn",label:"not in"},{name:"between",value:"between",label:"between"},{name:"notBetween",value:"notBetween",label:"not between"}],Pf=[{name:"and",value:"and",label:"AND"},{name:"or",value:"or",label:"OR"}],jf="queryBuilder",Rf="ruleGroup",Tf="ruleGroup-header",Nf="ruleGroup-body",Of="ruleGroup-combinators",$f="ruleGroup-addRule",Df="ruleGroup-addGroup",Lf="rule-cloneRule",Mf="ruleGroup-cloneGroup",zf="ruleGroup-remove",Ff="ruleGroup-notToggle",Gf="rule",qf="rule-fields",Uf="rule-operators",Bf="rule-value",Hf="rule-remove",Vf="betweenRules",Wf="queryBuilder-valid",Qf="queryBuilder-invalid",Kf="shiftActions",Jf="dndDragging",Xf="dndOver",Yf="dndCopy",Zf="dndGroup",eh="queryBuilder-dragHandle",th="queryBuilder-disabled",nh="rule-lock",rh="ruleGroup-lock",ah="rule-valueSource",oh="rule-value-list-item",ih={queryBuilder:"",ruleGroup:"",header:"",body:"",combinators:"",addRule:"",addGroup:"",cloneRule:"",cloneGroup:"",removeGroup:"",notToggle:"",rule:"",fields:"",operators:"",value:"",removeRule:"",shiftActions:"",dragHandle:"",lockRule:"",lockGroup:"",valueSource:"",actionElement:"",valueSelector:"",betweenRules:"",valid:"",invalid:"",dndDragging:"",dndOver:"",dndGroup:"",dndCopy:"",disabled:"",valueListItem:"",branches:""},sh="rule",lh="rule-group",ch="inline-combinator",uh="add-group",dh="remove-group",ph="clone-group",fh="clone-rule",hh="add-rule",gh="remove-rule",mh="combinators",yh="fields",vh="operators",bh="value-editor",Sh="not-toggle",kh="shift-actions",wh="drag-handle",_h="lock-rule",xh="lock-group",Ch="value-source-selector",Eh="action aborted: parent path disabled",Ah="action aborted: path is disabled",Ih="onAddRule callback returned false",Ph="onAddGroup callback returned false",jh="onGroupRule callback returned false",Rh="onGroupGroup callback returned false",Th="onMoveRule callback returned false",Nh="onMoveGroup callback returned false",Oh="onRemove callback returned false",$h="rule or group added",Dh="rule or group removed",Lh="rule or group updated",Mh="rule or group moved",zh="rule or group grouped with another",Fh=[];function Gh(e){let t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){const a=e.length;for(t=0;t<a;t++)e[t]&&(n=Gh(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function qh(){let e,t,n=0,r="";const a=arguments.length;for(;n<a;n++)(e=n<0||arguments.length<=n?void 0:arguments[n])&&(t=Gh(e))&&(r&&(r+=" "),r+=t);return r}var Uh=qh,Bh="QueryBuilder was rendered with a truthy independentCombinators prop. This prop is deprecated and unnecessary. Furthermore, the initial query/defaultQuery prop was of type RuleGroupType instead of type RuleGroupIC. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",Hh="QueryBuilder was rendered with the deprecated and unnecessary independentCombinators prop. To use independent combinators, make sure the query/defaultQuery prop is of type RuleGroupIC when the component mounts. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",Vh="A custom RuleGroup component has rendered a standard RuleGroup component with deprecated props. The combinator, not, and rules props should not be used. Instead, the full group object should be passed as the ruleGroup prop.",Wh="A custom RuleGroup component has rendered a standard Rule component with deprecated props. The field, operator, value, and valueSource props should not be used. Instead, the full rule object should be passed as the rule prop.",Qh="QueryBuilder was rendered with both query and defaultQuery props. QueryBuilder must be either controlled or uncontrolled (specify either the query prop, or the defaultQuery prop, but not both). Decide between using a controlled or uncontrolled query builder and remove one of these props. More info: https://reactjs.org/link/controlled-components",Kh="QueryBuilder is changing from an uncontrolled component to be controlled. This is likely caused by the query changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",Jh="QueryBuilder is changing from a controlled component to be uncontrolled. This is likely caused by the query changing from defined to undefined, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",Xh="QueryBuilder was rendered with the enableDragAndDrop prop set to true, but either react-dnd was not detected or one of react-dnd-html5-backend or react-dnd-touch-backend was not detected. To enable drag-and-drop functionality, install react-dnd and one of the backend packages and wrap QueryBuilder in QueryBuilderDnD from @react-querybuilder/dnd.",Yh=Ce.createContext(null),Zh=ar({name:"queries",initialState:{},reducers:{setQueryState:(e,t)=>{let{payload:{qbId:n,query:r}}=t;e[n]=r}},selectors:{getQuerySelectorById:(e,t)=>e[t]}}),eg=ar({name:"warnings",initialState:{[Bh]:!1,[Hh]:!1,[Vh]:!1,[Wh]:!1,[Qh]:!1,[Kh]:!1,[Jh]:!1,[Xh]:!1},reducers:{rqbWarn:(e,t)=>{let{payload:n}=t;e[n]||(console.error(n),e[n]=!0)}}}),tg=e=>{let{payload:t,onQueryChange:n}=e;return e=>{e(Zh.actions.setQueryState(t)),"function"==typeof n&&n(t.query)}},ng=ut(Yh),rg=lt(Yh);eg.actions;var ag={queries:Zh.getInitialState(),warnings:eg.getInitialState()},og={reducer:{queries:Zh.reducer,warnings:eg.reducer},preloadedState:ag,middleware:e=>e({serializableCheck:{ignoredActions:[Zh.actions.setQueryState.type],ignoredPaths:[/^queries\b.*\.rules\.\d+\.value$/]}})};function ig(e,t,n){ng()}var sg=Symbol.for("react.memo_cache_sentinel");function lg(e){return Ce.useMemo((()=>{const t=Array.from({length:e});for(let n=0;n<e;n++)t[n]=sg;return t[sg]=!0,t}),[])}var cg=e=>{const t=lg(2);let n;return t[0]!==e?(n=(t,n)=>{t?.preventDefault(),t?.stopPropagation(),e(t,n)},t[0]=e,t[1]=n):n=t[1],n},ug=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map((e=>`${e??""}`.replaceAll(t[0],`\\${t[0]}`))).join(t)},dg=function(e){let{retainEmptyStrings:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)?e.map((e=>{return"string"==typeof(t=e)?t.trim():t;var t})):"string"==typeof e?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return"string"==typeof e?e.split(`\\${t}`).map((e=>e.split(t))).reduce(((e,n,r)=>0===r?n:[...e.slice(0,-1),`${e.at(-1)}${t}${n[0]}`,...n.slice(1)]),[]):[]}(e,",").filter(t?()=>!0:e=>!/^\s*$/.test(e)).map((e=>e.trim())):"number"==typeof e?[e]:[]};new RegExp(lf.source.replace(/^\^/,String.raw`^\s*`).replace(/\$$/,String.raw`\s*$`));var pg=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,fg=e=>pg(e)&&Array.isArray(e.rules),hg=e=>fg(e)&&"string"==typeof e.combinator,gg=e=>fg(e)&&void 0===e.combinator,mg=e=>pg(e)&&"name"in e&&"string"==typeof e.name,yg=e=>pg(e)&&"value"in e&&"string"==typeof e.value;function vg(e,t){return kn((e=>{const n={};let r=!!t;if(mg(e)&&!yg(e)?(n.value=e.name,r=!0):!mg(e)&&yg(e)&&(n.name=e.value,r=!0),r)return Object.assign({},t,e,n)}))(e)}function bg(e,t){if(!Array.isArray(e))return[];return kn((e=>{if(_g(e))for(const n of e)for(const[e,r]of n.options.entries())n.options[e]=vg(r,t);else for(const[n,r]of e.entries())e[n]=vg(r,t)}))(e)}function Sg(e,t){return Object.fromEntries(Object.entries(e).map((e=>{let[n,r]=e;return[n,vg(r,t)]})))}var kg=e=>{const t=new Set,n=[];for(const r of e)t.has(r.value??r.name)||(t.add(r.value??r.name),n.push(r));return e.length===n.length?e:n},wg=e=>{let t=!1;if(Array.isArray(e))for(const n of e){if(!mg(n)&&!yg(n))return!1;t=!0}return t},_g=function(e){let{allowEmpty:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;if(Array.isArray(e))for(const r of e){if(!(pg(r)&&"options"in r&&(wg(r.options)||t&&Array.isArray(r.options)&&0===r.options.length)))return!1;n=!0}return n},xg=(e,t)=>(_g(e,{allowEmpty:!0})?e.flatMap((e=>e.options)):e).find((e=>e.value===t||e.name===t)),Cg=e=>{if(!Array.isArray(e)||0===e.length)return null;if(_g(e,{allowEmpty:!0})){for(const t of e)if(t.options.length>0)return t.options[0].value??t.options[0].name;return null}return e[0].value??e[0].name},Eg=e=>{const t=new Set,n=new Set,r=[];for(const a of e)if(!t.has(a.label)){t.add(a.label);const e=[];for(const t of a.options)n.has(t.value??t.name)||(n.add(t.value??t.name),e.push(vg(t)));r.push({...a,options:e})}return r},Ag=(e,t,n)=>{const r=vg(e),a=vg(n);return r.value!==a.value&&("string"==typeof r.comparator?r[r.comparator]===a[r.comparator]:r.comparator?.(a,t)??!1)},Ig=(e,t,n)=>{if(!e.comparator){const n=t=>(t.value??t.name)!==(e.value??e.name);return _g(t)?t.map((e=>({...e,options:e.options.filter((e=>n(e)))}))):t.filter((e=>n(e)))}return _g(t)?t.map((t=>({...t,options:t.options.filter((t=>Ag(e,n,t)))}))).filter((e=>e.options.length>0)):t.filter((t=>Ag(e,n,t)))},Pg=function(e){let{parseNumbers:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"bigint"==typeof e||"number"==typeof e)return e;if("native"===t)return parseFloat(e);const n=yf(e,{allowTrailingInvalid:"enhanced"===t,romanNumerals:!1,round:!1});return isNaN(n)?e:n},jg=(e,t)=>{let n=t,r=0;for(;r<e.length&&n&&fg(n);){const t=n.rules[e[r]];n="string"==typeof t?null:t,r++}return n},Rg=(e,t)=>{if(t.id===e)return t;for(const n of t.rules)if("string"!=typeof n){if(n.id===e)return n;if(fg(n)){const t=Rg(e,n);if(t)return t}}return null},Tg=(e,t)=>{if(t.id===e)return[];const n=t.rules.findIndex((t=>!("string"==typeof t)&&t.id===e));if(n>=0)return[n];for(const[n,r]of Object.entries(t.rules))if(fg(r)){const t=Tg(e,r);if(Array.isArray(t))return[parseInt(n),...t]}return null},Ng=e=>e.slice(0,-1),Og=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n])),$g=(e,t)=>{const n=[],r=Ng(e),a=Ng(t);let o=0;for(;o<r.length&&o<a.length&&r[o]===a[o];)n.push(a[o]),o++;return n},Dg=(e,t)=>{let n=!!t.disabled,r=t,a=0;for(;a<e.length&&!n&&fg(r);){const t=r.rules[e[a]];pg(t)&&(fg(t)||"field"in t&&t.field)&&(n=!!t.disabled,r=t),a++}return n},Lg=e=>Og([],e.path)?"Query builder":`Rule group at path ${e.path.join("-")}`,Mg=globalThis.crypto,zg=()=>"00-0-4-2-000".replaceAll(/[^-]/g,(e=>(65536*(Math.random()+Math.trunc(e))>>parseInt(e)).toString(16).padStart(4,"0")));if(Mg)if("function"==typeof Mg.randomUUID)zg=()=>Mg.randomUUID();else if("function"==typeof Mg.getRandomValues){const e="89ab",t=new Uint32Array(32);zg=()=>{Mg.getRandomValues(t);let n=(t[0]%16).toString(16);for(let r=1;r<32;r++)n=12===r?`${n}4`:16===r?`${n}${e[t[17]%4]}`:`${n}${(t[r]%16).toString(16)}`,7!==r&&11!==r&&15!==r&&19!==r||(n=`${n}-`);return n}}var Fg=(e,t,n)=>((e,t,n)=>e?((e,t)=>!1!==e&&(!!e||!1!==t))(t,n):((e,t)=>!!e||!1!==e&&!!t)(t,n))(e,t,n),Gg=e=>{const t="boolean"==typeof e?e:"object"==typeof e&&null!==e?e.valid:null;return"boolean"==typeof t?t?Wf:Qf:""},qg=["value"],Ug={name:"name",value:"name",valueSources:null,label:"label"},Bg=(e,t)=>qh(t.map((t=>qh(t?.[e])))),Hg=Object.keys,Vg=Object.entries,Wg=(e,t,n)=>{const r=Vg(t).map((t=>{let[r,[a,o]]=t;return[r,a??o??(n?fm:{})[e]?.[r]]})).filter((e=>!!e[1]));return r.length>0?{[e]:Object.fromEntries(r)}:void 0},Qg=function(e){let{idGenerator:t=zg}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kn(e,(e=>{e.id||(e.id=t())}))},Kg=function(e){let{idGenerator:t=zg}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kn(e,(e=>{e.id||(e.id=t()),e.rules=e.rules.map((e=>"string"==typeof e?e:fg(e)?Kg(e,{idGenerator:t}):Qg(e,{idGenerator:t})))}))},Jg=function(e){let{idGenerator:t=zg}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fg(e)?Kg(e,{idGenerator:t}):Qg(e,{idGenerator:t})},Xg=function(e){let{idGenerator:t=zg}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return structuredClone({...e,id:t()})},Yg=function(e){let{idGenerator:t=zg}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!pg(e))return e;if(!fg(e))return structuredClone({...e,id:t()});if(hg(e)){const n=e.rules.map((e=>fg(e)?Yg(e,{idGenerator:t}):Xg(e,{idGenerator:t})));return{...e,id:t(),rules:n}}const n=e.rules.map((e=>"string"==typeof e?e:fg(e)?Yg(e,{idGenerator:t}):Xg(e,{idGenerator:t})));return{...e,id:t(),rules:n}},Zg=function(e,t,n){let{combinators:r=Pf,combinatorPreceding:a,idGenerator:o=zg}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return kn(e,(e=>{const i=Array.isArray(n)?jg(n,e):Rg(n,e);if(i&&fg(i)){if(gg(i)&&i.rules.length>0){const e=i.rules.at(-2);i.rules.push(a??("string"==typeof e?e:Cg(r)))}i.rules.push(Jg(t,{idGenerator:o}))}}))},em=(e,t,n)=>{if(Array.isArray(n))return n;const r=gg(e);if("up"===n){if(Og(t,[0]))return t;if(0===t.at(-1)){const e=Ng(t);return[...Ng(e),Math.max(0,e.at(-1)-(r?1:0))]}{const n=[...Ng(t),Math.max(0,t.at(-1)-(r?2:1))],a=jg(n,e);if(fg(a))return[...n,a.rules.length];return[...Ng(t),Math.max(0,t.at(-1)-(r?3:1))]}}if("down"===n){if(Og([e.rules.length-1],t))return t;if(t.at(-1)===jg(Ng(t),e).rules.length-1){const e=Ng(t);return[...Ng(e),e.at(-1)+1]}{const n=[...Ng(t),t.at(-1)+(r?2:1)],a=jg(n,e);if(fg(a))return[...n,0];return[...Ng(t),t.at(-1)+(r?3:2)]}}return t},tm=e=>(e=>Array.isArray(e)&&e.length>0&&pg(e[0])&&"options"in e[0]&&Array.isArray(e[0].options))(e)?e.map((e=>Ue.jsx("optgroup",{label:e.label,children:e.options.map((e=>Ue.jsx("option",{value:e.name,disabled:e.disabled,children:e.label},e.name)))},e.label))):Array.isArray(e)?e.map((e=>Ue.jsx("option",{value:e.name,disabled:e.disabled,children:e.label},e.name))):null,nm=Ce.memo((function(e){const t=lg(7),n=am(e),r=cg(n.cloneRule),a=cg(n.toggleLockRule),o=cg(n.removeRule),i=cg(n.shiftRuleUp),s=cg(n.shiftRuleDown);let l;return t[0]!==r||t[1]!==n||t[2]!==o||t[3]!==s||t[4]!==i||t[5]!==a?(l=Ue.jsx("div",{ref:n.dndRef,"data-testid":sh,"data-dragmonitorid":n.dragMonitorId,"data-dropmonitorid":n.dropMonitorId,className:n.outerClassName,"data-rule-id":n.id,"data-level":n.path.length,"data-path":JSON.stringify(n.path),children:Ue.jsx(rm,{...n,cloneRule:r,toggleLockRule:a,removeRule:o,shiftRuleUp:i,shiftRuleDown:s})}),t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=i,t[5]=a,t[6]=l):l=t[6],l})),rm=Ce.memo((function(e){const{schema:{controls:{shiftActions:t,dragHandle:n,fieldSelector:r,operatorSelector:a,valueSourceSelector:o,valueEditor:i,cloneRuleAction:s,lockRuleAction:l,removeRuleAction:c}}}=e;return Ue.jsxs(Ue.Fragment,{children:[e.schema.showShiftActions&&Ue.jsx(t,{testID:kh,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftRuleUp,shiftDown:e.shiftRuleDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule},kh),e.schema.enableDragAndDrop&&Ue.jsx(n,{testID:wh,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule},wh),Ue.jsx(r,{testID:yh,options:e.schema.fields,title:e.translations.fields.title,value:e.rule.field,operator:e.rule.operator,className:e.classNames.fields,handleOnChange:e.onChangeField,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},yh),(e.schema.autoSelectField||e.rule.field!==e.translations.fields.placeholderName)&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsx(a,{testID:vh,field:e.rule.field,fieldData:e.fieldData,title:e.translations.operators.title,options:e.operators,value:e.rule.operator,className:e.classNames.operators,handleOnChange:e.onChangeOperator,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},vh),(e.schema.autoSelectOperator||e.rule.operator!==e.translations.operators.placeholderName)&&!e.hideValueControls&&Ue.jsxs(Ue.Fragment,{children:[!["null","notNull"].includes(e.rule.operator)&&e.valueSources.length>1&&Ue.jsx(o,{testID:Ch,field:e.rule.field,fieldData:e.fieldData,title:e.translations.valueSourceSelector.title,options:e.valueSourceOptions,value:e.rule.valueSource??"value",className:e.classNames.valueSource,handleOnChange:e.onChangeValueSource,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},Ch),Ue.jsx(i,{testID:bh,field:e.rule.field,fieldData:e.fieldData,title:e.translations.value.title,operator:e.rule.operator,value:e.rule.value,valueSource:e.rule.valueSource??"value",type:e.valueEditorType,inputType:e.inputType,values:e.values,listsAsArrays:e.schema.listsAsArrays,parseNumbers:e.schema.parseNumbers,separator:e.valueEditorSeparator,className:e.classNames.value,handleOnChange:e.onChangeValue,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},bh)]})]}),e.schema.showCloneButtons&&Ue.jsx(s,{testID:fh,label:e.translations.cloneRule.label,title:e.translations.cloneRule.title,className:e.classNames.cloneRule,handleOnClick:e.cloneRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},fh),e.schema.showLockButtons&&Ue.jsx(l,{testID:_h,label:e.translations.lockRule.label,title:e.translations.lockRule.title,className:e.classNames.lockRule,handleOnClick:e.toggleLockRule,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockRuleDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},_h),Ue.jsx(c,{testID:gh,label:e.translations.removeRule.label,title:e.translations.removeRule.title,className:e.classNames.removeRule,handleOnClick:e.removeRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},gh)]})})),am=e=>{const{id:t,path:n,rule:r,schema:{classNames:a,fields:o,fieldMap:i,getInputType:s,getOperators:l,getValueEditorType:c,getValueEditorSeparator:u,getValueSources:d,getValues:p,validationMap:f,enableDragAndDrop:h,getRuleClassname:g,suppressStandardClassnames:m},actions:{moveRule:y,onPropChange:v,onRuleRemove:b},disabled:S,parentDisabled:k,shiftUpDisabled:w,shiftDownDisabled:_,field:x,operator:C,value:E,valueSource:A,dropEffect:I="move",groupItems:P=!1,dragMonitorId:j="",dropMonitorId:R="",dndRef:T=null,dragRef:N=null,isDragging:O=!1,isOver:$=!1}=e;ig();const D=!!k||!!S,L=Ce.useMemo((()=>r??{id:t,field:x??"",operator:C??"",value:E,valueSource:A}),[x,t,C,r,E,A]),M=Ce.useMemo((()=>({shiftActions:qh(m||Kf,a.shiftActions),dragHandle:qh(m||eh,a.dragHandle),fields:qh(m||qf,a.valueSelector,a.fields),operators:qh(m||Uf,a.valueSelector,a.operators),valueSource:qh(m||ah,a.valueSelector,a.valueSource),value:qh(m||Bf,a.value),cloneRule:qh(m||Lf,a.actionElement,a.cloneRule),lockRule:qh(m||nh,a.actionElement,a.lockRule),removeRule:qh(m||Hf,a.actionElement,a.removeRule),valueListItem:qh(m||oh,a.valueListItem)})),[a.shiftActions,a.dragHandle,a.valueSelector,a.fields,a.operators,a.valueSource,a.value,a.actionElement,a.cloneRule,a.lockRule,a.removeRule,a.valueListItem,m]),z=Ce.useCallback((e=>(t,r)=>{D||v(e,t,n,r)}),[D,v,n]),F=Ce.useMemo((()=>z("field")),[z]),G=Ce.useMemo((()=>z("operator")),[z]),q=Ce.useMemo((()=>z("valueSource")),[z]),U=Ce.useMemo((()=>z("value")),[z]),B=Ce.useCallback(((e,t)=>{if(!D){const e=[...Ng(n),n.at(-1)+1];y(n,e,!0,t)}}),[D,y,n]),H=Ce.useCallback(((e,t)=>v("disabled",!D,n,t)),[D,v,n]),V=Ce.useCallback(((e,t)=>{D||b(n)}),[D,b,n]),W=Ce.useCallback(((e,t)=>{D||w||y(n,"up",e?.altKey,t)}),[D,y,n,w]),Q=Ce.useCallback(((e,t)=>{D||_||y(n,"down",e?.altKey,t)}),[D,y,n,_]),K=Ce.useMemo((()=>i?.[L.field]??{name:L.field,value:L.field,label:L.field}),[i,L.field]),J=Ce.useMemo((()=>K.inputType??s(L.field,L.operator,{fieldData:K})),[K,s,L.field,L.operator]),X=Ce.useMemo((()=>l(L.field,{fieldData:K})),[K,l,L.field]),Y=Ce.useMemo((()=>xg(X,L.operator)),[X,L.operator]),Z=Y?.arity,ee="string"==typeof Z&&"unary"===Z||"number"==typeof Z&&Z<2,te=Ce.useMemo((()=>"function"==typeof K.valueSources?K.valueSources(L.operator):K.valueSources??d(L.field,L.operator,{fieldData:K})),[K,d,L.field,L.operator]),ne=Ce.useMemo((()=>"field"===L.valueSource?"select":c(L.field,L.operator,{fieldData:K})),[K,c,L.field,L.operator,L.valueSource]),re=Ce.useMemo((()=>u(L.field,L.operator,{fieldData:K})),[K,u,L.field,L.operator]),ae=Ce.useMemo((()=>{const e="field"===L.valueSource?Ig(K,o,L.operator):p(L.field,L.operator,{fieldData:K});return wg(e)||_g(e)?bg(e):e}),[K,o,p,L.field,L.operator,L.valueSource]),oe=Ce.useMemo((()=>te.map((e=>({name:e,value:e,label:e})))),[te]),ie=Ce.useMemo((()=>f[t??""]??("function"==typeof K.validator?K.validator(L):null)),[K,t,L,f]),se=Ce.useMemo((()=>Gg(ie)),[ie]),le=Ce.useMemo((()=>K?.className??""),[K?.className]),ce=Ce.useMemo((()=>Y?.className??""),[Y?.className]),ue=Ce.useMemo((()=>qh(g(L,{fieldData:K}),le,ce,m||Gf,a.rule,D&&a.disabled,O&&a.dndDragging,$&&a.dndOver,$&&"copy"===I&&a.dndCopy,$&&P&&a.dndGroup,m||{[th]:D,[Jf]:O,[Xf]:$,[Yf]:$&&"copy"===I,[Zf]:$&&P},se)),[a.disabled,a.dndCopy,a.dndDragging,a.dndGroup,a.dndOver,a.rule,D,I,le,K,g,P,O,$,ce,L,m,se]);return{...e,classNames:M,cloneRule:B,disabled:D,dndRef:T,dragMonitorId:j,dragRef:N,dropMonitorId:R,fieldData:K,generateOnChangeHandler:z,onChangeField:F,onChangeOperator:G,onChangeValueSource:q,onChangeValue:U,hideValueControls:ee,inputType:J,operators:X,outerClassName:ue,removeRule:V,rule:L,shiftRuleUp:W,shiftRuleDown:Q,toggleLockRule:H,validationResult:ie,valueEditorSeparator:re,valueEditorType:ne,values:ae,valueSourceOptions:oe,valueSources:te}},om=Ce.memo((function(e){const t=lg(11),n=lm(e),{schema:r}=n,{controls:a}=r,{ruleGroupBodyElements:o,ruleGroupHeaderElements:i}=a,s=cg(n.addRule),l=cg(n.addGroup),c=cg(n.cloneGroup),u=cg(n.toggleLockGroup),d=cg(n.removeGroup),p=cg(n.shiftGroupUp),f=cg(n.shiftGroupDown);let h;return t[0]!==o||t[1]!==i||t[2]!==l||t[3]!==s||t[4]!==c||t[5]!==d||t[6]!==n||t[7]!==f||t[8]!==p||t[9]!==u?(h=Ue.jsxs("div",{ref:n.previewRef,title:n.accessibleDescription,className:n.outerClassName,"data-testid":lh,"data-dragmonitorid":n.dragMonitorId,"data-dropmonitorid":n.dropMonitorId,"data-rule-group-id":n.id,"data-level":n.path.length,"data-path":JSON.stringify(n.path),children:[Ue.jsx("div",{ref:n.dropRef,className:n.classNames.header,children:Ue.jsx(i,{...n,addRule:s,addGroup:l,cloneGroup:c,toggleLockGroup:u,removeGroup:d,shiftGroupUp:p,shiftGroupDown:f})}),Ue.jsx("div",{className:n.classNames.body,children:Ue.jsx(o,{...n,addRule:s,addGroup:l,cloneGroup:c,toggleLockGroup:u,removeGroup:d,shiftGroupUp:p,shiftGroupDown:f})})]}),t[0]=o,t[1]=i,t[2]=l,t[3]=s,t[4]=c,t[5]=d,t[6]=n,t[7]=f,t[8]=p,t[9]=u,t[10]=h):h=t[10],h})),im=Ce.memo((function(e){const{schema:{controls:{shiftActions:t,dragHandle:n,combinatorSelector:r,notToggle:a,addRuleAction:o,addGroupAction:i,cloneGroupAction:s,lockGroupAction:l,removeGroupAction:c}}}=e;return Ue.jsxs(Ue.Fragment,{children:[e.schema.showShiftActions&&e.path.length>0&&Ue.jsx(t,{testID:kh,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftGroupUp,shiftDown:e.shiftGroupDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup},kh),e.path.length>0&&e.schema.enableDragAndDrop&&Ue.jsx(n,{testID:wh,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup},wh),!e.schema.showCombinatorsBetweenRules&&!e.schema.independentCombinators&&Ue.jsx(r,{testID:mh,options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema},mh),e.schema.showNotToggle&&Ue.jsx(a,{testID:Sh,className:e.classNames.notToggle,title:e.translations.notToggle.title,label:e.translations.notToggle.label,checked:e.ruleGroup.not,handleOnChange:e.onNotToggleChange,level:e.path.length,disabled:e.disabled,path:e.path,context:e.context,validation:e.validationResult,schema:e.schema,ruleGroup:e.ruleGroup},Sh),Ue.jsx(o,{testID:hh,label:e.translations.addRule.label,title:e.translations.addRule.title,className:e.classNames.addRule,handleOnClick:e.addRule,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},hh),Ue.jsx(i,{testID:uh,label:e.translations.addGroup.label,title:e.translations.addGroup.title,className:e.classNames.addGroup,handleOnClick:e.addGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},uh),e.schema.showCloneButtons&&e.path.length>0&&Ue.jsx(s,{testID:ph,label:e.translations.cloneRuleGroup.label,title:e.translations.cloneRuleGroup.title,className:e.classNames.cloneGroup,handleOnClick:e.cloneGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},ph),e.schema.showLockButtons&&Ue.jsx(l,{testID:xh,label:e.translations.lockGroup.label,title:e.translations.lockGroup.title,className:e.classNames.lockGroup,handleOnClick:e.toggleLockGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockGroupDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},xh),e.path.length>0&&Ue.jsx(c,{testID:dh,label:e.translations.removeGroup.label,title:e.translations.removeGroup.title,className:e.classNames.removeGroup,handleOnClick:e.removeGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},dh)]})})),sm=Ce.memo((function(e){const{schema:{controls:{combinatorSelector:t,inlineCombinator:n,ruleGroup:r,rule:a}}}=e;return Ue.jsx(Ue.Fragment,{children:e.ruleGroup.rules.map(((o,i,s)=>{let{length:l}=s;const c=e.pathsMemo[i],u=c.path,d=c.disabled||"string"!=typeof o&&o.disabled,p=Og([0],u),f=0===e.path.length&&i===l-1,h="string"==typeof o?[...u,o].join("-"):o.id;return Ue.jsxs(Ce.Fragment,{children:[i>0&&!e.schema.independentCombinators&&e.schema.showCombinatorsBetweenRules&&Ue.jsx(n,{options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:t,path:u,disabled:e.disabled,schema:e.schema},ch),"string"==typeof o?Ue.jsx(n,{options:e.schema.combinators,value:o,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:t=>e.onIndependentCombinatorChange(t,i),rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:t,path:u,disabled:d,schema:e.schema},`${ch}-independent`):fg(o)?Ue.jsx(r,{id:o.id,schema:e.schema,actions:e.actions,path:u,translations:e.translations,ruleGroup:o,rules:o.rules,combinator:hg(o)?o.combinator:void 0,not:!!o.not,disabled:d,parentDisabled:e.parentDisabled||e.disabled,shiftUpDisabled:p,shiftDownDisabled:f,context:e.context},lh):Ue.jsx(a,{id:o.id,rule:o,field:o.field,operator:o.operator,value:o.value,valueSource:o.valueSource,schema:e.schema,actions:e.actions,path:u,disabled:d,parentDisabled:e.parentDisabled||e.disabled,translations:e.translations,shiftUpDisabled:p,shiftDownDisabled:f,context:e.context},sh)]},h)}))})})),lm=e=>{const{id:t,path:n,ruleGroup:r,schema:{qbId:a,accessibleDescriptionGenerator:o,classNames:i,combinators:s,createRule:l,createRuleGroup:c,disabledPaths:u,independentCombinators:d,validationMap:p,enableDragAndDrop:f,getRuleGroupClassname:h,suppressStandardClassnames:g},actions:{onGroupAdd:m,onGroupRemove:y,onPropChange:v,onRuleAdd:b,moveRule:S},disabled:k,parentDisabled:w,shiftUpDisabled:_,shiftDownDisabled:x,combinator:C,rules:E,not:A,dropEffect:I="move",groupItems:P=!1,dragMonitorId:j="",dropMonitorId:R="",previewRef:T=null,dragRef:N=null,dropRef:O=null,isDragging:$=!1,isOver:D=!1}=e;ig();const L=!!w||!!k,M=Ce.useMemo((()=>r&&hg(r)?r.combinator:r?Cg(s):C??Cg(s)),[C,s,r]),z=Ce.useMemo((()=>{if(r){if(r.combinator===M||d)return r;const e=structuredClone(r);return e.combinator=M,e}return{rules:E,not:A}}),[M,d,A,r,E]),F=Ce.useMemo((()=>({header:qh(g||Tf,i.header,D&&"copy"===I&&i.dndCopy,g||{[Xf]:D,[Yf]:D&&"copy"===I}),shiftActions:qh(g||Kf,i.shiftActions),dragHandle:qh(g||eh,i.dragHandle),combinators:qh(g||Of,i.valueSelector,i.combinators),notToggle:qh(g||Ff,i.notToggle),addRule:qh(g||$f,i.actionElement,i.addRule),addGroup:qh(g||Df,i.actionElement,i.addGroup),cloneGroup:qh(g||Mf,i.actionElement,i.cloneGroup),lockGroup:qh(g||rh,i.actionElement,i.lockGroup),removeGroup:qh(g||zf,i.actionElement,i.removeGroup),body:qh(g||Nf,i.body)})),[i.actionElement,i.addGroup,i.addRule,i.body,i.cloneGroup,i.combinators,i.dndCopy,i.dragHandle,i.header,i.lockGroup,i.notToggle,i.removeGroup,i.shiftActions,i.valueSelector,I,D,g]),G=Ce.useCallback((e=>{L||v("combinator",e,n)}),[L,v,n]),q=Ce.useCallback(((e,t,r)=>{L||v("combinator",e,[...n,t])}),[L,v,n]),U=Ce.useCallback(((e,t)=>{L||v("not",e,n)}),[L,v,n]),B=Ce.useCallback(((e,t)=>{if(!L){const e=l();b(e,n,t)}}),[l,L,b,n]),H=Ce.useCallback(((e,t)=>{if(!L){const e=c(d);m(e,n,t)}}),[c,L,d,m,n]),V=Ce.useCallback((()=>{if(!L){const e=[...Ng(n),n.at(-1)+1];S(n,e,!0)}}),[L,S,n]),W=Ce.useCallback(((e,t)=>{L||_||S(n,"up",e?.altKey)}),[L,S,n,_]),Q=Ce.useCallback(((e,t)=>{L||x||S(n,"down",e?.altKey)}),[L,S,n,x]),K=Ce.useCallback((()=>{v("disabled",!L,n)}),[L,v,n]),J=Ce.useCallback((()=>{L||y(n)}),[L,y,n]),X=Ce.useMemo((()=>p[t??""]),[t,p]),Y=Ce.useMemo((()=>Gg(X)),[X]),Z=Ce.useMemo((()=>d?null:xg(s,M)?.className??""),[M,s,d]),ee=Ce.useMemo((()=>h(z)),[h,z]),te=Ce.useMemo((()=>qh(ee,Z,g||Rf,i.ruleGroup,L&&i.disabled,$&&i.dndDragging,D&&P&&i.dndGroup,g||{[th]:L,[Jf]:$,[Zf]:D&&P},Y)),[i.disabled,i.dndDragging,i.dndGroup,i.ruleGroup,Z,L,P,$,D,ee,g,Y]),ne=Ce.useMemo((()=>{const e=[];for(let t=0;t<z.rules.length;t++){const r=[...n,t];e[t]={path:r,disabled:L||u.some((e=>Og(r,e)))}}return e}),[L,n,z.rules.length,u]),re=Ce.useMemo((()=>o({path:n,qbId:a})),[o,n,a]);return{...e,addGroup:H,addRule:B,accessibleDescription:re,classNames:F,cloneGroup:V,combinator:M,disabled:L,dragMonitorId:j,dragRef:N,dropMonitorId:R,dropRef:O,isDragging:$,isOver:D,onCombinatorChange:G,onGroupAdd:m,onIndependentCombinatorChange:q,onNotToggleChange:U,outerClassName:te,parentDisabled:w,pathsMemo:ne,previewRef:T,removeGroup:J,ruleGroup:z,shiftGroupUp:W,shiftGroupDown:Q,toggleLockGroup:K,validationClassName:Y,validationResult:X}},cm=e=>{const t=lg(29),{handleOnChange:n,inputType:r,operator:a,value:o,listsAsArrays:i,parseNumbers:s,values:l,type:c,skipHook:u,schema:d}=e,{classNames:p,suppressStandardClassnames:f}=d;let h,g,m,y;t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==u||t[4]!==c||t[5]!==o?(h=()=>{u||"multiselect"===c||["between","notBetween","in","notIn"].includes(a)||!(Array.isArray(o)||"number"===r&&"string"==typeof o&&o.includes(","))||n(dg(o,{retainEmptyStrings:!0})[0]??"")},g=[n,r,a,u,c,o],t[0]=n,t[1]=r,t[2]=a,t[3]=u,t[4]=c,t[5]=o,t[6]=h,t[7]=g):(h=t[6],g=t[7]),Ce.useEffect(h,g),t[8]!==o?(y=dg(o,{retainEmptyStrings:!0}),t[8]=o,t[9]=y):y=t[9],m=y;const v=m;let b,S;t[10]!==r||t[11]!==s?(S=(e=>{let{parseNumbers:t,inputType:n}=e;if("string"==typeof t){const[e,r]=t.split("-");return"limited"===r?"number"===n&&e:e}return!!t&&"strict"})({parseNumbers:s,inputType:r}),t[10]=r,t[11]=s,t[12]=S):S=t[12],b=S;const k=b;let w;t[13]!==n||t[14]!==i||t[15]!==a||t[16]!==k||t[17]!==v||t[18]!==l?(w=(e,t)=>{const r=kn(v,(n=>{n[t]=Pg(e,{parseNumbers:k}),0!==t||"between"!==a&&"notBetween"!==a||!(n.length<2||void 0===n[1])||(n[1]=Cg(l))}));n(i?r:ug(r,","))},t[13]=n,t[14]=i,t[15]=a,t[16]=k,t[17]=v,t[18]=l,t[19]=w):w=t[19];const _=w,x=f||oh,C=p?.valueListItem;let E;t[20]!==x||t[21]!==C?(E=Uh(x,C),t[20]=x,t[21]=C,t[22]=E):E=t[22];const A=E,I="in"===a||"notIn"===a?"text":r||"text";let P;return t[23]!==I||t[24]!==_||t[25]!==k||t[26]!==v||t[27]!==A?(P={valueAsArray:v,multiValueHandler:_,parseNumberMethod:k,valueListItemClassName:A,inputTypeCoerced:I},t[23]=I,t[24]=_,t[25]=k,t[26]=v,t[27]=A,t[28]=P):P=t[28],P};function um(e){return e.value}var dm=e=>{const t=lg(12),{onChange:n,val:r}=pm(e);let a;t[0]!==n||t[1]!==e.multiple?(a={multiple:e.multiple,onChange:n},t[0]=n,t[1]=e.multiple,t[2]=a):a=t[2];const o=(e=>{const t=lg(3),{multiple:n,onChange:r}=e;let a,o;return t[0]!==n||t[1]!==r?(o=n?e=>r(Array.from(e.target.selectedOptions).map(um)):e=>r(e.target.value),t[0]=n,t[1]=r,t[2]=o):o=t[2],a=o,a})(a),i=!!e.multiple;let s;return t[3]!==e.className||t[4]!==e.disabled||t[5]!==e.options||t[6]!==e.testID||t[7]!==e.title||t[8]!==o||t[9]!==i||t[10]!==r?(s=Ue.jsx("select",{"data-testid":e.testID,className:e.className,value:r,title:e.title,disabled:e.disabled,multiple:i,onChange:o,children:tm(e.options)}),t[3]=e.className,t[4]=e.disabled,t[5]=e.options,t[6]=e.testID,t[7]=e.title,t[8]=o,t[9]=i,t[10]=r,t[11]=s):s=t[11],s},pm=e=>{const t=lg(10),{handleOnChange:n,listsAsArrays:r,multiple:a,value:o}=e,i=void 0!==r&&r,s=void 0!==a&&a;let l;t[0]!==n||t[1]!==i||t[2]!==s?(l=e=>{if(s){const t=dg(e);n(i?t:ug(t,","))}else n(e)},t[0]=n,t[1]=i,t[2]=s,t[3]=l):l=t[3];const c=l;let u,d;t[4]!==s||t[5]!==o?(d=s?dg(o):o,t[4]=s,t[5]=o,t[6]=d):d=t[6],u=d;const p=u;let f;return t[7]!==c||t[8]!==p?(f={onChange:c,val:p},t[7]=c,t[8]=p,t[9]=f):f=t[9],f},fm={fields:{title:"Fields",placeholderName:"~",placeholderLabel:wf,placeholderGroupLabel:_f},operators:{title:"Operators",placeholderName:"~",placeholderLabel:xf,placeholderGroupLabel:Cf},values:{title:"Values",placeholderName:"~",placeholderLabel:Ef,placeholderGroupLabel:Af},value:{title:"Value"},removeRule:{label:"‚®Ø",title:"Remove rule"},removeGroup:{label:"‚®Ø",title:"Remove group"},addRule:{label:"+ Rule",title:"Add rule"},addGroup:{label:"+ Group",title:"Add group"},combinators:{title:"Combinators"},notToggle:{label:"Not",title:"Invert this group"},cloneRule:{label:"‚ßâ",title:"Clone rule"},cloneRuleGroup:{label:"‚ßâ",title:"Clone group"},shiftActionUp:{label:"ÀÑ",title:"Shift up"},shiftActionDown:{label:"ÀÖ",title:"Shift down"},dragHandle:{label:"‚Åû‚Åû",title:"Drag handle"},lockRule:{label:"üîì",title:"Lock rule"},lockGroup:{label:"üîì",title:"Lock group"},lockRuleDisabled:{label:"üîí",title:"Unlock rule"},lockGroupDisabled:{label:"üîí",title:"Unlock group"},valueSourceSelector:{title:"Value source"}},hm={actionElement:bf,addGroupAction:bf,addRuleAction:bf,cloneGroupAction:bf,cloneRuleAction:bf,combinatorSelector:dm,dragHandle:Sf,fieldSelector:dm,inlineCombinator:e=>{const{component:t,...n}=e,r=qh(n.schema.suppressStandardClassnames||Vf,n.schema.classNames.betweenRules);return Ue.jsx("div",{className:r,"data-testid":ch,children:Ue.jsx(t,{...n,testID:mh})})},lockGroupAction:bf,lockRuleAction:bf,notToggle:e=>Ue.jsxs("label",{"data-testid":e.testID,className:e.className,title:e.title,children:[Ue.jsx("input",{type:"checkbox",onChange:t=>e.handleOnChange(t.target.checked),checked:!!e.checked,disabled:e.disabled}),e.label]}),operatorSelector:dm,removeGroupAction:bf,removeRuleAction:bf,rule:nm,ruleGroup:om,ruleGroupBodyElements:sm,ruleGroupHeaderElements:im,shiftActions:e=>Ue.jsxs("div",{"data-testid":e.testID,className:e.className,children:[Ue.jsx("button",{disabled:e.disabled||e.shiftUpDisabled,onClick:e.shiftUp,title:e.titles?.shiftUp,children:e.labels?.shiftUp}),Ue.jsx("button",{disabled:e.disabled||e.shiftDownDisabled,onClick:e.shiftDown,title:e.titles?.shiftDown,children:e.labels?.shiftDown})]}),valueEditor:e=>{const{operator:t,value:n,handleOnChange:r,title:a,className:o,type:i="text",values:s=[],listsAsArrays:l,fieldData:c,disabled:u,separator:d=null,testID:p,selectorComponent:f=e.schema.controls.valueSelector,inputType:h,parseNumbers:g,skipHook:m,valueSource:y,...v}=e,{valueAsArray:b,multiValueHandler:S,parseNumberMethod:k,valueListItemClassName:w,inputTypeCoerced:_}=cm(e);if("null"===t||"notNull"===t)return null;const x=c?.placeholder??"";if(!("between"!==t&&"notBetween"!==t||"select"!==i&&"text"!==i)){const t=["from","to"].map(((t,n)=>"text"===i?Ue.jsx("input",{type:_,placeholder:x,value:b[n]??"",className:w,disabled:u,onChange:e=>S(e.target.value,n)},t):Ue.jsx(f,{...v,schema:e.schema,className:w,handleOnChange:e=>S(e,n),disabled:u,value:b[n]??Cg(s),options:s,listsAsArrays:l},t)));return Ue.jsxs("span",{"data-testid":p,className:o,title:a,children:[t[0],d,t[1]]})}switch(i){case"select":case"multiselect":return Ue.jsx(f,{...v,schema:e.schema,testID:p,className:o,title:a,handleOnChange:r,disabled:u,value:n,options:s,multiple:"multiselect"===i,listsAsArrays:l});case"textarea":return Ue.jsx("textarea",{"data-testid":p,placeholder:x,value:n,title:a,className:o,disabled:u,onChange:e=>r(e.target.value)});case"switch":case"checkbox":return Ue.jsx("input",{"data-testid":p,type:"checkbox",className:o,title:a,onChange:e=>r(e.target.checked),checked:!!n,disabled:u});case"radio":return Ue.jsx("span",{"data-testid":p,className:o,title:a,children:s.map((e=>Ue.jsxs("label",{children:[Ue.jsx("input",{type:"radio",value:e.name,disabled:u,checked:n===e.name,onChange:e=>r(e.target.value)}),e.label]},e.name)))})}return Ue.jsx("input",{"data-testid":p,type:_,placeholder:x,value:n,title:a,className:o,disabled:u,onChange:e=>r(Pg(e.target.value,{parseNumbers:k}))})},valueSelector:dm,valueSourceSelector:dm},gm=()=>null,mm=Ce.forwardRef(gm),ym={},vm=e=>{const t=lg(193);let n,r;t[0]!==e?(({finalize:n,...r}=e),t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);const a=Ce.useContext(vf),o=Fg(!1,r.debugMode,a.debugMode),i=n?o:r.debugMode??a.debugMode,s=Fg(!0,r.enableMountQueryChange,a.enableMountQueryChange),l=n?s:r.enableMountQueryChange??a.enableMountQueryChange,c=Fg(!1,r.enableDragAndDrop,a.enableDragAndDrop)&&!1!==a.enableDragAndDrop,u=n?c:r.enableDragAndDrop??a.enableDragAndDrop;let d,p;t[3]!==n||t[4]!==r.controlClassnames||t[5]!==a.controlClassnames?(p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{queryBuilder:Bg("queryBuilder",t),ruleGroup:Bg("ruleGroup",t),header:Bg("header",t),body:Bg("body",t),combinators:Bg("combinators",t),addRule:Bg("addRule",t),addGroup:Bg("addGroup",t),cloneRule:Bg("cloneRule",t),cloneGroup:Bg("cloneGroup",t),removeGroup:Bg("removeGroup",t),rule:Bg("rule",t),fields:Bg("fields",t),operators:Bg("operators",t),value:Bg("value",t),removeRule:Bg("removeRule",t),notToggle:Bg("notToggle",t),shiftActions:Bg("shiftActions",t),dragHandle:Bg("dragHandle",t),lockRule:Bg("lockRule",t),lockGroup:Bg("lockGroup",t),valueSource:Bg("valueSource",t),actionElement:Bg("actionElement",t),valueSelector:Bg("valueSelector",t),betweenRules:Bg("betweenRules",t),valid:Bg("valid",t),invalid:Bg("invalid",t),dndDragging:Bg("dndDragging",t),dndOver:Bg("dndOver",t),dndCopy:Bg("dndCopy",t),dndGroup:Bg("dndGroup",t),disabled:Bg("disabled",t),valueListItem:Bg("valueListItem",t),branches:Bg("branches",t)}}(n?Object.assign({},ih):ym,a.controlClassnames,r.controlClassnames),t[3]=n,t[4]=r.controlClassnames,t[5]=a.controlClassnames,t[6]=p):p=t[6],d=p;const f=d;let h,g;t[7]!==f.actionElement||t[8]!==f.addGroup||t[9]!==f.addRule||t[10]!==f.betweenRules||t[11]!==f.body||t[12]!==f.branches||t[13]!==f.cloneGroup||t[14]!==f.cloneRule||t[15]!==f.combinators||t[16]!==f.disabled||t[17]!==f.dndCopy||t[18]!==f.dndDragging||t[19]!==f.dndGroup||t[20]!==f.dndOver||t[21]!==f.dragHandle||t[22]!==f.fields||t[23]!==f.header||t[24]!==f.invalid||t[25]!==f.lockGroup||t[26]!==f.lockRule||t[27]!==f.notToggle||t[28]!==f.operators||t[29]!==f.queryBuilder||t[30]!==f.removeGroup||t[31]!==f.removeRule||t[32]!==f.rule||t[33]!==f.ruleGroup||t[34]!==f.shiftActions||t[35]!==f.valid||t[36]!==f.value||t[37]!==f.valueListItem||t[38]!==f.valueSelector||t[39]!==f.valueSource?(g={actionElement:f.actionElement,addGroup:f.addGroup,addRule:f.addRule,body:f.body,cloneGroup:f.cloneGroup,cloneRule:f.cloneRule,combinators:f.combinators,dragHandle:f.dragHandle,fields:f.fields,header:f.header,lockGroup:f.lockGroup,lockRule:f.lockRule,notToggle:f.notToggle,operators:f.operators,queryBuilder:f.queryBuilder,removeGroup:f.removeGroup,removeRule:f.removeRule,rule:f.rule,ruleGroup:f.ruleGroup,shiftActions:f.shiftActions,value:f.value,valueSelector:f.valueSelector,valueSource:f.valueSource,betweenRules:f.betweenRules,valid:f.valid,invalid:f.invalid,dndDragging:f.dndDragging,dndOver:f.dndOver,dndCopy:f.dndCopy,dndGroup:f.dndGroup,disabled:f.disabled,valueListItem:f.valueListItem,branches:f.branches},t[7]=f.actionElement,t[8]=f.addGroup,t[9]=f.addRule,t[10]=f.betweenRules,t[11]=f.body,t[12]=f.branches,t[13]=f.cloneGroup,t[14]=f.cloneRule,t[15]=f.combinators,t[16]=f.disabled,t[17]=f.dndCopy,t[18]=f.dndDragging,t[19]=f.dndGroup,t[20]=f.dndOver,t[21]=f.dragHandle,t[22]=f.fields,t[23]=f.header,t[24]=f.invalid,t[25]=f.lockGroup,t[26]=f.lockRule,t[27]=f.notToggle,t[28]=f.operators,t[29]=f.queryBuilder,t[30]=f.removeGroup,t[31]=f.removeRule,t[32]=f.rule,t[33]=f.ruleGroup,t[34]=f.shiftActions,t[35]=f.valid,t[36]=f.value,t[37]=f.valueListItem,t[38]=f.valueSelector,t[39]=f.valueSource,t[40]=g):g=t[40],h=g;const m=h,y=a.controlElements??ym,v=r.controlElements??ym;let b;t[41]!==y.actionElement||t[42]!==y.valueSelector||t[43]!==n||t[44]!==v.actionElement||t[45]!==v.valueSelector?(b=(e,t,r)=>{const a="dragHandle"===e?mm:gm,o=(e.endsWith("Action")&&v.actionElement?v.actionElement:void 0)??(e.endsWith("Selector")&&v.valueSelector?v.valueSelector:void 0),i=(e.endsWith("Action")&&y.actionElement?y.actionElement:void 0)??(e.endsWith("Selector")&&y.valueSelector?y.valueSelector:void 0),s=null===t?a:t??(n?o:void 0)??(null===r?a:r??(n?i:void 0));return s?{[e]:s}:n?{[e]:hm[e]}:ym},t[41]=y.actionElement,t[42]=y.valueSelector,t[43]=n,t[44]=v.actionElement,t[45]=v.valueSelector,t[46]=b):b=t[46];const S=b;let k,w;t[47]!==y.actionElement||t[48]!==y.addGroupAction||t[49]!==y.addRuleAction||t[50]!==y.cloneGroupAction||t[51]!==y.cloneRuleAction||t[52]!==y.combinatorSelector||t[53]!==y.dragHandle||t[54]!==y.fieldSelector||t[55]!==y.inlineCombinator||t[56]!==y.lockGroupAction||t[57]!==y.lockRuleAction||t[58]!==y.notToggle||t[59]!==y.operatorSelector||t[60]!==y.removeGroupAction||t[61]!==y.removeRuleAction||t[62]!==y.rule||t[63]!==y.ruleGroup||t[64]!==y.ruleGroupBodyElements||t[65]!==y.ruleGroupHeaderElements||t[66]!==y.shiftActions||t[67]!==y.valueEditor||t[68]!==y.valueSelector||t[69]!==y.valueSourceSelector||t[70]!==n||t[71]!==S||t[72]!==v.actionElement||t[73]!==v.addGroupAction||t[74]!==v.addRuleAction||t[75]!==v.cloneGroupAction||t[76]!==v.cloneRuleAction||t[77]!==v.combinatorSelector||t[78]!==v.dragHandle||t[79]!==v.fieldSelector||t[80]!==v.inlineCombinator||t[81]!==v.lockGroupAction||t[82]!==v.lockRuleAction||t[83]!==v.notToggle||t[84]!==v.operatorSelector||t[85]!==v.removeGroupAction||t[86]!==v.removeRuleAction||t[87]!==v.rule||t[88]!==v.ruleGroup||t[89]!==v.ruleGroupBodyElements||t[90]!==v.ruleGroupHeaderElements||t[91]!==v.shiftActions||t[92]!==v.valueEditor||t[93]!==v.valueSelector||t[94]!==v.valueSourceSelector?(w=Object.assign({},S("addGroupAction",v.addGroupAction,y.addGroupAction),S("addRuleAction",v.addRuleAction,y.addRuleAction),S("cloneGroupAction",v.cloneGroupAction,y.cloneGroupAction),S("cloneRuleAction",v.cloneRuleAction,y.cloneRuleAction),S("combinatorSelector",v.combinatorSelector,y.combinatorSelector),S("dragHandle",v.dragHandle,y.dragHandle),S("fieldSelector",v.fieldSelector,y.fieldSelector),S("inlineCombinator",v.inlineCombinator,y.inlineCombinator),S("lockGroupAction",v.lockGroupAction,y.lockGroupAction),S("lockRuleAction",v.lockRuleAction,y.lockRuleAction),S("notToggle",v.notToggle,y.notToggle),S("operatorSelector",v.operatorSelector,y.operatorSelector),S("removeGroupAction",v.removeGroupAction,y.removeGroupAction),S("removeRuleAction",v.removeRuleAction,y.removeRuleAction),S("shiftActions",v.shiftActions,y.shiftActions),{valueEditor:null===v.valueEditor?gm:v.valueEditor??(null===y.valueEditor?gm:y.valueEditor)??hm.valueEditor},S("valueSourceSelector",v.valueSourceSelector,y.valueSourceSelector),S("rule",v.rule,y.rule),S("ruleGroup",v.ruleGroup,y.ruleGroup),S("ruleGroupBodyElements",v.ruleGroupBodyElements,y.ruleGroupBodyElements),S("ruleGroupHeaderElements",v.ruleGroupHeaderElements,y.ruleGroupHeaderElements),{actionElement:v.actionElement??y.actionElement??(n?hm.actionElement:void 0)},{valueSelector:v.valueSelector??y.valueSelector??(n?hm.valueSelector:void 0)}),t[47]=y.actionElement,t[48]=y.addGroupAction,t[49]=y.addRuleAction,t[50]=y.cloneGroupAction,t[51]=y.cloneRuleAction,t[52]=y.combinatorSelector,t[53]=y.dragHandle,t[54]=y.fieldSelector,t[55]=y.inlineCombinator,t[56]=y.lockGroupAction,t[57]=y.lockRuleAction,t[58]=y.notToggle,t[59]=y.operatorSelector,t[60]=y.removeGroupAction,t[61]=y.removeRuleAction,t[62]=y.rule,t[63]=y.ruleGroup,t[64]=y.ruleGroupBodyElements,t[65]=y.ruleGroupHeaderElements,t[66]=y.shiftActions,t[67]=y.valueEditor,t[68]=y.valueSelector,t[69]=y.valueSourceSelector,t[70]=n,t[71]=S,t[72]=v.actionElement,t[73]=v.addGroupAction,t[74]=v.addRuleAction,t[75]=v.cloneGroupAction,t[76]=v.cloneRuleAction,t[77]=v.combinatorSelector,t[78]=v.dragHandle,t[79]=v.fieldSelector,t[80]=v.inlineCombinator,t[81]=v.lockGroupAction,t[82]=v.lockRuleAction,t[83]=v.notToggle,t[84]=v.operatorSelector,t[85]=v.removeGroupAction,t[86]=v.removeRuleAction,t[87]=v.rule,t[88]=v.ruleGroup,t[89]=v.ruleGroupBodyElements,t[90]=v.ruleGroupHeaderElements,t[91]=v.shiftActions,t[92]=v.valueEditor,t[93]=v.valueSelector,t[94]=v.valueSourceSelector,t[95]=w):w=t[95],k=w;const _=k,x=r.translations??ym,C=a.translations??ym;let E,A;C.addGroup,C.addGroup,C.addRule,C.addRule,C.cloneRule,C.cloneRule,C.cloneRuleGroup,C.cloneRuleGroup,C.combinators,C.dragHandle,C.dragHandle,C.fields,C.fields,C.fields,C.fields,C.lockGroup,C.lockGroup,C.lockGroupDisabled,C.lockGroupDisabled,C.lockRule,C.lockRule,C.lockRuleDisabled,C.lockRuleDisabled,C.notToggle,C.notToggle,C.operators,C.operators,C.operators,C.operators,C.removeGroup,C.removeGroup,C.removeRule,C.removeRule,C.shiftActionDown,C.shiftActionDown,C.shiftActionUp,C.shiftActionUp,C.value,C.values,C.values,C.values,C.values,C.valueSourceSelector,x.addGroup,x.addGroup,x.addRule,x.addRule,x.cloneRule,x.cloneRule,x.cloneRuleGroup,x.cloneRuleGroup,x.combinators,x.dragHandle,x.dragHandle,x.fields,x.fields,x.fields,x.fields,x.lockGroup,x.lockGroup,x.lockGroupDisabled,x.lockGroupDisabled,x.lockRule,x.lockRule,x.lockRuleDisabled,x.lockRuleDisabled,x.notToggle,x.notToggle,x.operators,x.operators,x.operators,x.operators,x.removeGroup,x.removeGroup,x.removeRule,x.removeRule,x.shiftActionDown,x.shiftActionDown,x.shiftActionUp,x.shiftActionUp,x.value,x.values,x.values,x.values,x.values,x.valueSourceSelector,t[96]!==C.addGroup?.label||t[97]!==C.addGroup?.title||t[98]!==C.addRule?.label||t[99]!==C.addRule?.title||t[100]!==C.cloneRule?.label||t[101]!==C.cloneRule?.title||t[102]!==C.cloneRuleGroup?.label||t[103]!==C.cloneRuleGroup?.title||t[104]!==C.combinators?.title||t[105]!==C.dragHandle?.label||t[106]!==C.dragHandle?.title||t[107]!==C.fields?.placeholderGroupLabel||t[108]!==C.fields?.placeholderLabel||t[109]!==C.fields?.placeholderName||t[110]!==C.fields?.title||t[111]!==C.lockGroup?.label||t[112]!==C.lockGroup?.title||t[113]!==C.lockGroupDisabled?.label||t[114]!==C.lockGroupDisabled?.title||t[115]!==C.lockRule?.label||t[116]!==C.lockRule?.title||t[117]!==C.lockRuleDisabled?.label||t[118]!==C.lockRuleDisabled?.title||t[119]!==C.notToggle?.label||t[120]!==C.notToggle?.title||t[121]!==C.operators?.placeholderGroupLabel||t[122]!==C.operators?.placeholderLabel||t[123]!==C.operators?.placeholderName||t[124]!==C.operators?.title||t[125]!==C.removeGroup?.label||t[126]!==C.removeGroup?.title||t[127]!==C.removeRule?.label||t[128]!==C.removeRule?.title||t[129]!==C.shiftActionDown?.label||t[130]!==C.shiftActionDown?.title||t[131]!==C.shiftActionUp?.label||t[132]!==C.shiftActionUp?.title||t[133]!==C.value?.title||t[134]!==C.valueSourceSelector?.title||t[135]!==C.values?.placeholderGroupLabel||t[136]!==C.values?.placeholderLabel||t[137]!==C.values?.placeholderName||t[138]!==C.values?.title||t[139]!==n||t[140]!==x.addGroup?.label||t[141]!==x.addGroup?.title||t[142]!==x.addRule?.label||t[143]!==x.addRule?.title||t[144]!==x.cloneRule?.label||t[145]!==x.cloneRule?.title||t[146]!==x.cloneRuleGroup?.label||t[147]!==x.cloneRuleGroup?.title||t[148]!==x.combinators?.title||t[149]!==x.dragHandle?.label||t[150]!==x.dragHandle?.title||t[151]!==x.fields?.placeholderGroupLabel||t[152]!==x.fields?.placeholderLabel||t[153]!==x.fields?.placeholderName||t[154]!==x.fields?.title||t[155]!==x.lockGroup?.label||t[156]!==x.lockGroup?.title||t[157]!==x.lockGroupDisabled?.label||t[158]!==x.lockGroupDisabled?.title||t[159]!==x.lockRule?.label||t[160]!==x.lockRule?.title||t[161]!==x.lockRuleDisabled?.label||t[162]!==x.lockRuleDisabled?.title||t[163]!==x.notToggle?.label||t[164]!==x.notToggle?.title||t[165]!==x.operators?.placeholderGroupLabel||t[166]!==x.operators?.placeholderLabel||t[167]!==x.operators?.placeholderName||t[168]!==x.operators?.title||t[169]!==x.removeGroup?.label||t[170]!==x.removeGroup?.title||t[171]!==x.removeRule?.label||t[172]!==x.removeRule?.title||t[173]!==x.shiftActionDown?.label||t[174]!==x.shiftActionDown?.title||t[175]!==x.shiftActionUp?.label||t[176]!==x.shiftActionUp?.title||t[177]!==x.value?.title||t[178]!==x.valueSourceSelector?.title||t[179]!==x.values?.placeholderGroupLabel||t[180]!==x.values?.placeholderLabel||t[181]!==x.values?.placeholderName||t[182]!==x.values?.title?(A=Object.assign(n?Object.assign({},fm):{},Wg("addGroup",{label:[x.addGroup?.label,C.addGroup?.label],title:[x.addGroup?.title,C.addGroup?.title]},n),Wg("addRule",{label:[x.addRule?.label,C.addRule?.label],title:[x.addRule?.title,C.addRule?.title]},n),Wg("cloneRule",{label:[x.cloneRule?.label,C.cloneRule?.label],title:[x.cloneRule?.title,C.cloneRule?.title]},n),Wg("cloneRuleGroup",{label:[x.cloneRuleGroup?.label,C.cloneRuleGroup?.label],title:[x.cloneRuleGroup?.title,C.cloneRuleGroup?.title]},n),Wg("combinators",{title:[x.combinators?.title,C.combinators?.title]},n),Wg("dragHandle",{label:[x.dragHandle?.label,C.dragHandle?.label],title:[x.dragHandle?.title,C.dragHandle?.title]},n),Wg("fields",{placeholderGroupLabel:[x.fields?.placeholderGroupLabel,C.fields?.placeholderGroupLabel],placeholderLabel:[x.fields?.placeholderLabel,C.fields?.placeholderLabel],placeholderName:[x.fields?.placeholderName,C.fields?.placeholderName],title:[x.fields?.title,C.fields?.title]},n),Wg("lockGroup",{label:[x.lockGroup?.label,C.lockGroup?.label],title:[x.lockGroup?.title,C.lockGroup?.title]},n),Wg("lockGroupDisabled",{label:[x.lockGroupDisabled?.label,C.lockGroupDisabled?.label],title:[x.lockGroupDisabled?.title,C.lockGroupDisabled?.title]},n),Wg("lockRule",{label:[x.lockRule?.label,C.lockRule?.label],title:[x.lockRule?.title,C.lockRule?.title]},n),Wg("lockRuleDisabled",{label:[x.lockRuleDisabled?.label,C.lockRuleDisabled?.label],title:[x.lockRuleDisabled?.title,C.lockRuleDisabled?.title]},n),Wg("notToggle",{label:[x.notToggle?.label,C.notToggle?.label],title:[x.notToggle?.title,C.notToggle?.title]},n),Wg("operators",{placeholderGroupLabel:[x.operators?.placeholderGroupLabel,C.operators?.placeholderGroupLabel],placeholderLabel:[x.operators?.placeholderLabel,C.operators?.placeholderLabel],placeholderName:[x.operators?.placeholderName,C.operators?.placeholderName],title:[x.operators?.title,C.operators?.title]},n),Wg("values",{placeholderGroupLabel:[x.values?.placeholderGroupLabel,C.values?.placeholderGroupLabel],placeholderLabel:[x.values?.placeholderLabel,C.values?.placeholderLabel],placeholderName:[x.values?.placeholderName,C.values?.placeholderName],title:[x.values?.title,C.values?.title]},n),Wg("removeGroup",{label:[x.removeGroup?.label,C.removeGroup?.label],title:[x.removeGroup?.title,C.removeGroup?.title]},n),Wg("removeRule",{label:[x.removeRule?.label,C.removeRule?.label],title:[x.removeRule?.title,C.removeRule?.title]},n),Wg("shiftActionDown",{label:[x.shiftActionDown?.label,C.shiftActionDown?.label],title:[x.shiftActionDown?.title,C.shiftActionDown?.title]},n),Wg("shiftActionUp",{label:[x.shiftActionUp?.label,C.shiftActionUp?.label],title:[x.shiftActionUp?.title,C.shiftActionUp?.title]},n),Wg("value",{title:[x.value?.title,C.value?.title]},n),Wg("valueSourceSelector",{title:[x.valueSourceSelector?.title,C.valueSourceSelector?.title]},n)),t[96]=C.addGroup?.label,t[97]=C.addGroup?.title,t[98]=C.addRule?.label,t[99]=C.addRule?.title,t[100]=C.cloneRule?.label,t[101]=C.cloneRule?.title,t[102]=C.cloneRuleGroup?.label,t[103]=C.cloneRuleGroup?.title,t[104]=C.combinators?.title,t[105]=C.dragHandle?.label,t[106]=C.dragHandle?.title,t[107]=C.fields?.placeholderGroupLabel,t[108]=C.fields?.placeholderLabel,t[109]=C.fields?.placeholderName,t[110]=C.fields?.title,t[111]=C.lockGroup?.label,t[112]=C.lockGroup?.title,t[113]=C.lockGroupDisabled?.label,t[114]=C.lockGroupDisabled?.title,t[115]=C.lockRule?.label,t[116]=C.lockRule?.title,t[117]=C.lockRuleDisabled?.label,t[118]=C.lockRuleDisabled?.title,t[119]=C.notToggle?.label,t[120]=C.notToggle?.title,t[121]=C.operators?.placeholderGroupLabel,t[122]=C.operators?.placeholderLabel,t[123]=C.operators?.placeholderName,t[124]=C.operators?.title,t[125]=C.removeGroup?.label,t[126]=C.removeGroup?.title,t[127]=C.removeRule?.label,t[128]=C.removeRule?.title,t[129]=C.shiftActionDown?.label,t[130]=C.shiftActionDown?.title,t[131]=C.shiftActionUp?.label,t[132]=C.shiftActionUp?.title,t[133]=C.value?.title,t[134]=C.valueSourceSelector?.title,t[135]=C.values?.placeholderGroupLabel,t[136]=C.values?.placeholderLabel,t[137]=C.values?.placeholderName,t[138]=C.values?.title,t[139]=n,t[140]=x.addGroup?.label,t[141]=x.addGroup?.title,t[142]=x.addRule?.label,t[143]=x.addRule?.title,t[144]=x.cloneRule?.label,t[145]=x.cloneRule?.title,t[146]=x.cloneRuleGroup?.label,t[147]=x.cloneRuleGroup?.title,t[148]=x.combinators?.title,t[149]=x.dragHandle?.label,t[150]=x.dragHandle?.title,t[151]=x.fields?.placeholderGroupLabel,t[152]=x.fields?.placeholderLabel,t[153]=x.fields?.placeholderName,t[154]=x.fields?.title,t[155]=x.lockGroup?.label,t[156]=x.lockGroup?.title,t[157]=x.lockGroupDisabled?.label,t[158]=x.lockGroupDisabled?.title,t[159]=x.lockRule?.label,t[160]=x.lockRule?.title,t[161]=x.lockRuleDisabled?.label,t[162]=x.lockRuleDisabled?.title,t[163]=x.notToggle?.label,t[164]=x.notToggle?.title,t[165]=x.operators?.placeholderGroupLabel,t[166]=x.operators?.placeholderLabel,t[167]=x.operators?.placeholderName,t[168]=x.operators?.title,t[169]=x.removeGroup?.label,t[170]=x.removeGroup?.title,t[171]=x.removeRule?.label,t[172]=x.removeRule?.title,t[173]=x.shiftActionDown?.label,t[174]=x.shiftActionDown?.title,t[175]=x.shiftActionUp?.label,t[176]=x.shiftActionUp?.title,t[177]=x.value?.title,t[178]=x.valueSourceSelector?.title,t[179]=x.values?.placeholderGroupLabel,t[180]=x.values?.placeholderLabel,t[181]=x.values?.placeholderName,t[182]=x.values?.title,t[183]=A):A=t[183],E=A;const I=E;let P;return t[184]!==m||t[185]!==_||t[186]!==i||t[187]!==u||t[188]!==l||t[189]!==r.initialQuery||t[190]!==r.qbId||t[191]!==I?(P={controlClassnames:m,controlElements:_,debugMode:i,enableDragAndDrop:u,enableMountQueryChange:l,translations:I,initialQuery:r.initialQuery,qbId:r.qbId},t[184]=m,t[185]=_,t[186]=i,t[187]=u,t[188]=l,t[189]=r.initialQuery,t[190]=r.qbId,t[191]=I,t[192]=P):P=t[192],P},bm=e=>{ng();const{defaultQuery:t,queryProp:n}=e;(e=>{const t=Ce.useRef({value:e,prev:null}),n=t.current.value;e!==n&&(t.current={value:e,prev:n}),t.current.prev})(!!n)},Sm=e=>t=>Zh.selectors.getQuerySelectorById({queries:t.queries},e),km=ft(Yh),wm={},_m={},xm=[],Cm={},Em=()=>null,Am=()=>"",Im=()=>!0,Pm=function(){console.log(...arguments)};function jm(e,t){const{query:n,defaultQuery:r,getValueEditorSeparator:a=Em,getRuleClassname:o=Am,getRuleGroupClassname:i=Am,onAddRule:s=Im,onAddGroup:l=Im,onMoveRule:c=Im,onMoveGroup:u=Im,onGroupRule:d=Im,onGroupGroup:p=Im,onRemove:f=Im,onQueryChange:h,showCombinatorsBetweenRules:g=!1,showNotToggle:m=!1,showShiftActions:y=!1,showCloneButtons:v=!1,showLockButtons:b=!1,suppressStandardClassnames:S=!1,resetOnFieldChange:k=!0,resetOnOperatorChange:w=!1,autoSelectField:_=!0,autoSelectOperator:x=!0,autoSelectValue:C=!0,addRuleToNewGroups:E=!1,listsAsArrays:A=!1,parseNumbers:I=!1,disabled:P=!1,validator:j,onLog:R=Pm,idGenerator:T,accessibleDescriptionGenerator:N=Lg}=e,{qbId:O,rqbContext:$,fields:D,fieldMap:L,combinators:M,getOperatorsMain:z,getRuleDefaultOperator:F,getValueEditorTypeMain:G,getValueSourcesMain:q,getValuesMain:U,getRuleDefaultValue:B,getInputTypeMain:H,createRule:V,createRuleGroup:W}=t,{controlClassnames:Q,controlElements:K,debugMode:J,enableDragAndDrop:X,enableMountQueryChange:Y,translations:Z}=$,ee=!!g,te=!!m,ne=!!y,re=!!v,ae=!!b,oe=!!k,ie=!!w,se=!!_,le=!!x,ce=!!C,ue=!!E,de=!!A,pe=!!S,fe=Ce.useCallback((function(){J&&R(...arguments)}),[J,R]);bm({defaultQuery:r,queryProp:n});const he=rg(),ge=ng(),me=Ce.useMemo((()=>Sm(O)),[O]),ye=((e,t)=>{const n=Ce.useContext(vf);return km(e,t)??n?.initialQuery})(me),ve=Ce.useCallback((()=>me(he.getState())),[he,me]),be=Ce.useMemo((()=>W()),[W]),Se=n??ye??r??be,ke=Se.id?Se:Kg(Se,{idGenerator:T}),[we]=Ce.useState(ke),_e=Ce.useMemo((()=>({...$,initialQuery:we})),[$,we]);Ce.useEffect((()=>{n&&!Object.is(n,ye)&&ge(tg({payload:{qbId:O,query:n},onQueryChange:void 0}))}),[n,O,ye,ge]);const xe=Ce.useMemo((()=>gg(ke)),[ke]),Ee=!!e.independentCombinators&&!xe;ig(0,Ee||!Ee&&e.independentCombinators);const Ae=Ce.useRef(!1);Ce.useEffect((()=>{Ae.current||(Ae.current=!0,ge(tg({payload:{qbId:O,query:ke},onQueryChange:Y&&"function"==typeof h?h:void 0})))}),[Y,h,O,ge,ke]);const Ie=Ce.useCallback((e=>{ge(tg({payload:{qbId:O,query:e},onQueryChange:h}))}),[h,O,ge]),Pe=Ce.useMemo((()=>Array.isArray(P)&&P||xm),[P]),je=!0===P,Re=Ce.useMemo((()=>ke.disabled||Pe.some((e=>0===e.length))),[Pe,ke.disabled]),Te=Ce.useCallback(((e,t,n)=>{const r=Sm(O)(he.getState());if(!r)return;if(Dg(t,r)||je)return void fe({qbId:O,type:Eh,rule:e,parentPath:t,query:r});const a=s(e,t,r,n);if(!a)return void fe({qbId:O,type:Ih,rule:e,parentPath:t,query:r});const o=!0===a?e:a,i=Zg(r,o,t,{combinators:M,combinatorPreceding:o.combinatorPreceding??void 0,idGenerator:T});fe({qbId:O,type:$h,query:r,newQuery:i,newRule:o,parentPath:t}),Ie(i)}),[O,he,je,s,M,T,fe,Ie]),Ne=Ce.useCallback(((e,t,n)=>{const r=Sm(O)(he.getState());if(!r)return;if(Dg(t,r)||je)return void fe({qbId:O,type:Eh,ruleGroup:e,parentPath:t,query:r});const a=l(e,t,r,n);if(!a)return void fe({qbId:O,type:Ph,ruleGroup:e,parentPath:t,query:r});const o=!0===a?e:a,i=Zg(r,o,t,{combinators:M,combinatorPreceding:o.combinatorPreceding??void 0,idGenerator:T});fe({qbId:O,type:$h,query:r,newQuery:i,newGroup:o,parentPath:t}),Ie(i)}),[O,he,je,l,M,T,fe,Ie]),Oe=Ce.useCallback(((e,t,n)=>{const r=Sm(O)(he.getState());if(!r)return;if(Dg(n,r)&&"disabled"!==e||je)return void fe({qbId:O,type:Ah,path:n,prop:e,value:t,query:r});const a=function(e,t,n,r){let{resetOnFieldChange:a=!0,resetOnOperatorChange:o=!1,getRuleDefaultOperator:i=()=>"=",getValueSources:s=()=>["value"],getRuleDefaultValue:l=()=>""}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return kn(e,(e=>{const c=Array.isArray(r)?r:Tg(r,e);if(!c)return;if("combinator"===t&&!hg(e)){const t=jg(Ng(c),e).rules;return void(c.at(-1)%2==1&&(t[c.at(-1)]=n))}const u=jg(c,e);if(!u)return;const d=fg(u);if(u[t]===n)return;if("valueSource"!==t&&(u[t]=n),d)return;let p=!1,f=!1;a&&"field"===t&&(u.operator=i(n),p=!0,f=!0),o&&"operator"===t&&(p=!0,f=!0);const h=s(u.field,u.operator)[0];(p&&u.valueSource&&h!==u.valueSource||"valueSource"===t&&n!==u.valueSource)&&(f=!!u.valueSource||!u.valueSource&&n!==h,u.valueSource=p?h:n),f&&(u.value=l(u))}))}(r,e,t,n,{resetOnFieldChange:oe,resetOnOperatorChange:ie,getRuleDefaultOperator:F,getValueSources:q,getRuleDefaultValue:B});fe({qbId:O,type:Lh,query:r,newQuery:a,prop:e,value:t,path:n}),Ie(a)}),[O,he,je,oe,ie,F,q,B,fe,Ie]),$e=Ce.useCallback(((e,t)=>{const n=Sm(O)(he.getState());if(!n)return;if(Dg(e,n)||je)return void fe({qbId:O,type:Ah,path:e,query:n});const r=jg(e,n);if(r)if(f(r,e,n,t)){const t=((e,t)=>{const n=Array.isArray(t)?t:Tg(t,e);return n?0===n.length||!hg(e)&&!jg(n,e)?e:kn(e,(e=>{const t=n.at(-1),r=jg(Ng(n),e);if(r&&fg(r))if(!hg(r)&&r.rules.length>1){const e=0===t?0:t-1;r.rules.splice(e,2)}else r.rules.splice(t,1)})):e})(n,e);fe({qbId:O,type:Dh,query:n,newQuery:t,path:e,ruleOrGroup:r}),Ie(t)}else fe({qbId:O,type:Oh,ruleOrGroup:r,path:e,query:n})}),[O,he,je,fe,f,Ie]),De=Ce.useCallback(((e,t,n,r)=>{const a=Sm(O)(he.getState());if(!a)return;if(Dg(e,a)||je)return void fe({qbId:O,type:Ah,oldPath:e,newPath:t,query:a});const o=function(e,t,n){let{clone:r=!1,combinators:a=Pf,idGenerator:o=zg}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Array.isArray(t)?t:Tg(t,e);if(!i)return e;const s=em(e,i,n);if(0===i.length||Og(i,s)||!jg(Ng(s),e))return e;const l=jg(i,e);if(!l)return e;const c=r?Yg(l,{idGenerator:o}):l;return kn(e,(e=>{const t=gg(e),n=jg(Ng(i),e),o=i.at(-1),l=t&&o>0?n.rules[o-1]:null,u=t&&o<n.rules.length-1?n.rules[o+1]:null;if(!r){const e=t?Math.max(0,o-1):o,r=t?2:1;n.rules.splice(e,r)}const d=[...s],p=$g(i,s);!r&&i.length===p.length+1&&s[p.length]>i[p.length]&&(d[p.length]-=t?2:1);const f=Ng(d),h=jg(f,e),g=d.at(-1),m=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.rules.splice(g,0,...t)};if(0!==h.rules.length&&t)if(0===g)if(0===o&&u)m(c,u);else{const e=h.rules[1]??l??Cg(a);m(c,e)}else m(l||(h.rules[g-2]??u??Cg(a)),c);else m(c)}))}(a,e,t,{clone:n,combinators:M,idGenerator:T}),i=jg(e,a),s=fg(i),l=(s?u:c)(i,e,t,a,o,{clone:n,combinators:M},r);if(!l)return void fe({qbId:O,type:s?Nh:Th,ruleOrGroup:i,oldPath:e,newPath:t,clone:n,query:a,nextQuery:o});const d=fg(l)?l:o;fe({qbId:O,type:Mh,query:a,newQuery:d,oldPath:e,newPath:t,clone:n}),Ie(d)}),[O,he,je,M,T,u,c,fe,Ie]),Le=Ce.useCallback(((e,t,n,r)=>{const a=Sm(O)(he.getState());if(!a)return;if(Dg(e,a)||je)return void fe({qbId:O,type:Ah,sourcePath:e,targetPath:t,query:a});const o=function(e,t,n){let{clone:r=!1,combinators:a=Pf,idGenerator:o=zg}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Array.isArray(t)?t:Tg(t,e),s=Array.isArray(n)?n:Tg(n,e);if(!i||!s)return e;const l=em(e,i,s);if(0===i.length||Og(i,l)||!jg(Ng(l),e))return e;const c=jg(i,e),u=jg(s,e);if(!c||!u)return e;const d=r?Yg(c,{idGenerator:o}):c;return kn(e,(e=>{const t=gg(e),n=jg(Ng(i),e),s=i.at(-1);if(!r){const e=t?Math.max(0,s-1):s,r=t?2:1;n.rules.splice(e,r)}const c=[...l],p=$g(i,l);!r&&i.length===p.length+1&&l[p.length]>i[p.length]&&(c[p.length]-=t?2:1);const f=Ng(c),h=jg(f,e),g=c.at(-1);h.rules.splice(g,1,Jg(t?{rules:[u,Cg(a),d]}:{combinator:Cg(a),rules:[u,d]},{idGenerator:o}))}))}(a,e,t,{clone:n,combinators:M,idGenerator:T}),i=jg(e,a),s=fg(i),l=(s?p:d)(i,e,t,a,o,{clone:n,combinators:M},r);if(!l)return void fe({qbId:O,type:s?Rh:jh,ruleOrGroup:i,sourcePath:e,targetPath:t,clone:n,query:a,nextQuery:o});const c=fg(l)?l:o;fe({qbId:O,type:zh,query:a,newQuery:c,sourcePath:e,targetPath:t,clone:n}),Ie(c)}),[O,he,je,M,T,p,d,fe,Ie]),{validationResult:Me,validationMap:ze}=Ce.useMemo((()=>{const e="function"==typeof j&&ke?j(ke):wm;return{validationResult:e,validationMap:"boolean"==typeof e?_m:e}}),[ke,j]),Fe=Ce.useMemo((()=>X?"enabled":"disabled"),[X]),Ge=Ce.useMemo((()=>xe||ee?"enabled":"disabled"),[xe,ee]),qe=Ce.useMemo((()=>"string"==typeof ke.combinator?{combinator:ke.combinator}:Cm),[ke.combinator]),Ue=Ce.useMemo((()=>qh(pe||jf,qh(Q.queryBuilder),je&&Q.disabled,"boolean"==typeof Me&&Me&&Q.valid,"boolean"==typeof Me&&!Me&&Q.invalid,pe||{[th]:je,[Wf]:"boolean"==typeof Me&&Me,[Qf]:"boolean"==typeof Me&&!Me})),[Q.disabled,Q.invalid,Q.queryBuilder,Q.valid,je,pe,Me]),Be=Ce.useMemo((()=>({addRuleToNewGroups:ue,accessibleDescriptionGenerator:N,autoSelectField:se,autoSelectOperator:le,autoSelectValue:ce,classNames:Q,combinators:M,controls:K,createRule:V,createRuleGroup:W,disabledPaths:Pe,enableDragAndDrop:X,fieldMap:L,fields:D,dispatchQuery:Ie,getQuery:ve,getInputType:H,getOperators:z,getRuleClassname:o,getRuleGroupClassname:i,getValueEditorSeparator:a,getValueEditorType:G,getValues:U,getValueSources:q,independentCombinators:xe,listsAsArrays:de,parseNumbers:I,qbId:O,showCloneButtons:re,showCombinatorsBetweenRules:ee,showLockButtons:ae,showNotToggle:te,showShiftActions:ne,suppressStandardClassnames:pe,validationMap:ze})),[N,ue,se,le,ce,M,Q,K,V,W,Pe,Ie,X,L,D,H,z,ve,o,i,a,G,U,q,xe,de,I,O,re,ee,ae,te,ne,pe,ze]);return{actions:Ce.useMemo((()=>({moveRule:De,onGroupAdd:Ne,onGroupRemove:$e,onPropChange:Oe,onRuleAdd:Te,onRuleRemove:$e,groupRule:Le})),[Le,De,Ne,Oe,Te,$e]),rootGroup:ke,rootGroupDisabled:Re,queryDisabled:je,rqbContext:_e,schema:Be,translations:Z,wrapperClassName:Ue,dndEnabledAttr:Fe,inlineCombinatorsAttr:Ge,combinatorPropObject:qe}}var Rm=(e,t,n)=>{const r=Cg(e);if("between"===t.operator||"notBetween"===t.operator){const e=[r,r];return n?e:ug(e.map((e=>e??"")),",")}return r},Tm=e=>{const[t]=Ce.useState(zg),{fields:n,baseField:r,operators:a,baseOperator:o,combinators:i=Pf,baseCombinator:s,translations:l,enableMountQueryChange:c=!0,controlClassnames:u,controlElements:d,getDefaultField:p,getDefaultOperator:f,getDefaultValue:h,getOperators:g,getValueEditorType:m,getValueSources:y,getInputType:v,getValues:b,autoSelectField:S=!0,autoSelectOperator:k=!0,autoSelectValue:w=!0,addRuleToNewGroups:_=!1,enableDragAndDrop:x,listsAsArrays:C=!1,debugMode:E=!1,idGenerator:A=zg}=e,I=a??If,[P]=Ce.useState(e.query??e.defaultQuery),j=vm({controlClassnames:u,controlElements:d,debugMode:E,enableDragAndDrop:x,enableMountQueryChange:c,translations:l,initialQuery:P,qbId:t,finalize:!0}),{translations:R}=j,T=Ce.useMemo((()=>({id:R.fields.placeholderName,name:R.fields.placeholderName,value:R.fields.placeholderName,label:R.fields.placeholderLabel})),[R.fields.placeholderLabel,R.fields.placeholderName]),N=Ce.useMemo((()=>n??[T]),[T,n]),O=Ce.useMemo((()=>{const e=Array.isArray(N)?bg(N,r):Hg(Sg(N,r)).map((e=>({...N[e],name:e,value:e}))).sort(((e,t)=>e.label.localeCompare(t.label)));return _g(e)?Eg(S?e:[{label:R.fields.placeholderGroupLabel,options:[T]},...e]):kg(S?e:[T,...e])}),[S,r,T,N,R.fields.placeholderGroupLabel]),$=Ce.useMemo((()=>{if(!Array.isArray(N)){const e=Sg(N,r);return S?e:{...e,[R.fields.placeholderName]:T}}const e={};if(_g(O))for(const t of O)for(const n of t.options)e[n.value??n.name]=vg(n,r);else for(const t of O)e[t.value??t.name]=vg(t,r);return e}),[S,r,T,O,N,R.fields.placeholderName]),D=Ce.useMemo((()=>bg(i,s)),[s,i]),L=Ce.useMemo((()=>({id:R.operators.placeholderName,name:R.operators.placeholderName,value:R.operators.placeholderName,label:R.operators.placeholderLabel})),[R.operators.placeholderLabel,R.operators.placeholderName]),M=Ce.useCallback(((e,t)=>{let{fieldData:n}=t,r=bg(I,o);if(n?.operators)r=bg(n.operators,o);else if(g){const t=g(e,{fieldData:n});t&&(r=bg(t,o))}return k||(r=_g(r)?[{label:R.operators.placeholderGroupLabel,options:[L]},...r]:[L,...r]),_g(a=r)?Eg(a):kg(a.map((e=>vg(e))));var a}),[k,o,L,g,I,R.operators.placeholderGroupLabel]),z=Ce.useCallback((e=>{const t=$[e];if(t?.defaultOperator)return t.defaultOperator;if(f)return"function"==typeof f?f(e,{fieldData:t}):f;const n=M(e,{fieldData:t})??[];return Cg(n)??""}),[$,f,M]),F=Ce.useCallback(((e,t,n)=>{let{fieldData:r}=n;return r.valueEditorType?"function"==typeof r.valueEditorType?r.valueEditorType(t):r.valueEditorType:m?.(e,t,{fieldData:r})??"text"}),[m]),G=Ce.useCallback(((e,t)=>((e,t,n)=>{const r=e?vg(e):Ug;if(r.valueSources)return"function"==typeof r.valueSources?r.valueSources(t):r.valueSources;if(n){const e=n(r.value,t,{fieldData:vg(r)});if(e)return e}return qg})($[e],t,y)),[$,y]),q=Ce.useMemo((()=>({id:R.values.placeholderName,name:R.values.placeholderName,value:R.values.placeholderName,label:R.values.placeholderLabel})),[R.values.placeholderLabel,R.values.placeholderName]),U=Ce.useCallback(((e,t,n)=>{let{fieldData:r}=n,a=[];return r?.values&&(a=bg(r.values)),b&&(a=bg(b(e,t,{fieldData:r}))),w||(a=_g(a)?[{label:R.values.placeholderGroupLabel,options:[q]},...a]:[q,...a]),a}),[w,q,b,R.values.placeholderGroupLabel]),B=Ce.useCallback((e=>{const t=$[e.field]??{};if(void 0!==t?.defaultValue&&null!==t.defaultValue)return t.defaultValue;if(h)return h(e,{fieldData:t});let n="";const r=U(e.field,e.operator,{fieldData:t});if("field"===e.valueSource){const r=Ig(t,O,e.operator);n=r.length>0?Rm(r,e,C):""}else if(r.length>0){const a=F(e.field,e.operator,{fieldData:t});"multiselect"===a?n=C?[]:"":"select"!==a&&"radio"!==a||(n=Rm(r,e,C))}else{"checkbox"===F(e.field,e.operator,{fieldData:t})&&(n=!1)}return n}),[$,O,h,F,U,C]),H=Ce.useCallback(((e,t,n)=>{let{fieldData:r}=n;if(v){const n=v(e,t,{fieldData:r});if(n)return n}return"text"}),[v]),V=Ce.useCallback((()=>{let e="";const t=O;if(t?.length>0&&t[0]){const n=Cg(t);n&&(e=n)}if(p)if("function"==typeof p){const n=p(t);n&&(e=n)}else e=p;const n=z(e),r=G(e,n)[0]??"value",a={id:A(),field:e,operator:n,valueSource:r,value:""},o=B(a);return{...a,value:o}}),[O,p,z,B,G,A]),W=Ce.useCallback((e=>e?{id:A(),rules:_?[V()]:[],not:!1}:{id:A(),rules:_?[V()]:[],combinator:Cg(D)??"",not:!1}),[_,D,V,A]);return{qbId:t,rqbContext:j,fields:O,fieldMap:$,combinators:D,getOperatorsMain:M,getRuleDefaultOperator:z,getValueEditorTypeMain:F,getValueSourcesMain:G,getValuesMain:U,getRuleDefaultValue:B,getInputTypeMain:H,createRule:V,createRuleGroup:W}},Nm=e=>{const t=lg(15),{props:n}=e,r=(e=>jm(e,Tm(e)))(n),a=r.schema.controls.ruleGroup,o=!!r.rootGroup.not;let i;return t[0]!==a||t[1]!==n.context||t[2]!==r.actions||t[3]!==r.combinatorPropObject||t[4]!==r.dndEnabledAttr||t[5]!==r.inlineCombinatorsAttr||t[6]!==r.queryDisabled||t[7]!==r.rootGroup||t[8]!==r.rootGroupDisabled||t[9]!==r.rqbContext||t[10]!==r.schema||t[11]!==r.translations||t[12]!==r.wrapperClassName||t[13]!==o?(i=Ue.jsx(vf.Provider,{value:r.rqbContext,children:Ue.jsx("div",{role:"form",className:r.wrapperClassName,"data-dnd":r.dndEnabledAttr,"data-inlinecombinators":r.inlineCombinatorsAttr,children:Ue.jsx(a,{translations:r.translations,ruleGroup:r.rootGroup,rules:r.rootGroup.rules,...r.combinatorPropObject,not:o,schema:r.schema,actions:r.actions,id:r.rootGroup.id,path:Fh,disabled:r.rootGroupDisabled,shiftUpDisabled:!0,shiftDownDisabled:!0,parentDisabled:r.queryDisabled,context:n.context})})},r.dndEnabledAttr),t[0]=a,t[1]=n.context,t[2]=r.actions,t[3]=r.combinatorPropObject,t[4]=r.dndEnabledAttr,t[5]=r.inlineCombinatorsAttr,t[6]=r.queryDisabled,t[7]=r.rootGroup,t[8]=r.rootGroupDisabled,t[9]=r.rqbContext,t[10]=r.schema,t[11]=r.translations,t[12]=r.wrapperClassName,t[13]=o,t[14]=i):i=t[14],i},Om=Bn({...og,devTools:!1}),$m=e=>Ue.jsx(ot,{context:Yh,store:Om,children:e.children}),Dm=e=>Ue.jsx($m,{children:Ue.jsx(Nm,{props:e})});const Lm=[];for(let e=0;e<256;++e)Lm.push((e+256).toString(16).slice(1));let Mm;const zm=new Uint8Array(16);var Fm={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Gm(e,t,n){if(Fm.randomUUID&&!t&&!e)return Fm.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!Mm){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Mm=crypto.getRandomValues.bind(crypto)}return Mm(zm)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(Lm[e[t+0]]+Lm[e[t+1]]+Lm[e[t+2]]+Lm[e[t+3]]+"-"+Lm[e[t+4]]+Lm[e[t+5]]+"-"+Lm[e[t+6]]+Lm[e[t+7]]+"-"+Lm[e[t+8]]+Lm[e[t+9]]+"-"+Lm[e[t+10]]+Lm[e[t+11]]+Lm[e[t+12]]+Lm[e[t+13]]+Lm[e[t+14]]+Lm[e[t+15]]).toLowerCase()}(r)}e.getInstance();const qm=({effect:e,onUpdate:t})=>{const[n,r]=Ce.useState(e.type),[a,o]=Ce.useState(e.isVisible),[i,s]=Ce.useState(e.styleProperty),[l,c]=Ce.useState(e.styleValue),[u,d]=Ce.useState(""),[p,f]=Ce.useState(e.customActionId),h=ht((e=>e.actions.actionDefinitions)),g=Ce.useMemo((()=>Object.values(h||{})),[h]);Ce.useEffect((()=>{r(e.type),o(e.isVisible),s(e.styleProperty),c(e.styleValue),f(e.customActionId),"string"==typeof e.targetPartPks?d(e.targetPartPks):Array.isArray(e.targetPartPks)?d(e.targetPartPks.join(", ")):d("")}),[e]);const m=e=>{const t=e.trim();if("all_loaded"===t.toLowerCase())return"all_loaded";if(""===t)return;const n=t.split(",").map((e=>parseInt(e.trim(),10))).filter((e=>!isNaN(e)));return n.length>0?n:void 0};return Ue.jsxs("div",{className:"effect-editor-form",style:{display:"flex",flexDirection:"column",gap:"10px"},children:[Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:`effect-type-${e.id}`,style:{marginRight:"5px"},children:"Effect Type:"}),Ue.jsxs("select",{id:`effect-type-${e.id}`,value:n,onChange:n=>{const a=n.target.value;r(a);let o={type:a};"set_visibility"!==a&&(o.isVisible=void 0),"set_style"!==a&&(o.styleProperty=void 0,o.styleValue=void 0),"trigger_custom_action"!==a&&(o.customActionId=void 0),o.targetPartPks=m(u),t(Object.assign(Object.assign({},e),o))},children:[Ue.jsx("option",{value:"set_visibility",children:"Set Visibility"}),Ue.jsx("option",{value:"set_style",children:"Set Style"}),Ue.jsx("option",{value:"trigger_custom_action",children:"Trigger Custom Action"})]})]}),"set_visibility"===n&&Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:`effect-visible-${e.id}`,style:{marginRight:"5px"},children:"Is Visible:"}),Ue.jsx("input",{type:"checkbox",id:`effect-visible-${e.id}`,checked:!0===a,onChange:n=>{const r=n.target.checked;o(r),t(Object.assign(Object.assign({},e),{type:"set_visibility",isVisible:r,targetPartPks:m(u)}))}})]}),"set_style"===n&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:`effect-style-prop-${e.id}`,style:{marginRight:"5px"},children:"Style Property:"}),Ue.jsxs("select",{id:`effect-style-prop-${e.id}`,value:i||"",onChange:n=>{const r=n.target.value;s(r),t(Object.assign(Object.assign({},e),{type:"set_style",styleProperty:r,styleValue:l,targetPartPks:m(u)}))},children:[Ue.jsx("option",{value:"",disabled:!0,children:"Select property..."}),[{value:"highlight",label:"Highlight Color",mapsTo:"highlight"},{value:"textColor",label:"Text Color",mapsTo:"textColor"},{value:"border",label:"Border Style",mapsTo:"border"},{value:"icon",label:"Icon (MDI)",mapsTo:"icon"},{value:"badge",label:"Badge Text",mapsTo:"badge"},{value:"opacity",label:"Opacity (0-1)",mapsTo:"opacity"},{value:"priority",label:"Layout Priority",mapsTo:"priority"}].map((e=>Ue.jsx("option",{value:e.value,children:e.label},e.value)))]})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:`effect-style-value-${e.id}`,style:{marginRight:"5px"},children:"Value:"}),Ue.jsx("input",{type:"text",id:`effect-style-value-${e.id}`,value:l||"",onChange:n=>{const r=n.target.value;c(r),t(Object.assign(Object.assign({},e),{type:"set_style",styleProperty:i,styleValue:r,targetPartPks:m(u)}))},placeholder:"highlight"===i||"textColor"===i?"e.g., red, #FF0000, rgba(0,0,255,0.5)":"border"===i?"e.g., 2px dashed green":"Enter value"})]})]}),"trigger_custom_action"===n&&Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:`effect-action-id-${e.id}`,style:{marginRight:"5px"},children:"Action to Trigger:"}),Ue.jsxs("select",{id:`effect-action-id-${e.id}`,value:p||"",onChange:n=>{const r=n.target.value;f(r),t(Object.assign(Object.assign({},e),{type:"trigger_custom_action",customActionId:r,targetPartPks:m(u)}))},children:[Ue.jsx("option",{value:"",disabled:!0,children:"Select an action..."}),g.map((e=>Ue.jsxs("option",{value:e.id,children:[e.name," (ID: ",e.id,")"]},e.id))),0===g.length&&Ue.jsx("option",{value:"",disabled:!0,children:"No actions defined"})]})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:`effect-target-pks-${e.id}`,style:{marginRight:"5px"},children:"Target Part PKs (optional):"}),Ue.jsx("input",{type:"text",id:`effect-target-pks-${e.id}`,value:u,onChange:n=>{const r=n.target.value;d(r),t(Object.assign(Object.assign({},e),{targetPartPks:m(r)}))},placeholder:"e.g., 1, 2, 3 or all_loaded",style:{width:"200px"}}),Ue.jsx("small",{style:{marginLeft:"5px",display:"block",color:"gray"},children:"Leave blank to target parts based on rule context. Enter comma-separated part PKs or 'all_loaded'."})]})]})},Um=({effects:e,logicBlockId:t,onAddEffect:n,onUpdateEffect:r,onRemoveEffect:a})=>Ue.jsxs("div",{style:{marginTop:"10px",paddingLeft:"20px",borderLeft:"2px solid #eee"},children:[0===e.length&&Ue.jsx("p",{style:{fontSize:"0.9em",color:"gray"},children:'No effects defined for this block yet. Click "+ Add Effect" to create one.'}),e.map(((e,n)=>Ue.jsxs("div",{style:{marginBottom:"15px",padding:"10px",border:"1px dashed #ccc",borderRadius:"4px"},children:[Ue.jsx(qm,{effect:e,onUpdate:e=>r(e)}),Ue.jsx("button",{onClick:()=>a(e.id),style:{marginTop:"10px",color:"red",background:"none",border:"1px solid red",borderRadius:"4px",padding:"3px 8px",cursor:"pointer"},children:"Remove This Effect"})]},`${t}-effect-${e.id||n}`))),Ue.jsx("button",{onClick:()=>n(),style:{marginTop:"10px",padding:"5px 10px",border:"1px solid #007bff",background:"#007bff",color:"white",borderRadius:"4px",cursor:"pointer"},children:"+ Add Effect"})]}),Bm=e.getInstance(),Hm=e=>e&&e.template_detail?e.template_detail.checkbox?"boolean":e.template_detail.units||"number"==typeof e.data_numeric?"number":"text":"text",Vm={id:Gm(),combinator:"and",rules:[],not:!1},Wm=()=>({id:Gm(),name:"",conditionRules:Object.assign(Object.assign({},Vm),{id:Gm()}),effects:[]}),Qm=e=>({id:e.id||Gm(),combinator:e.combinator||"and",rules:e.rules.map((e=>"combinator"in e?Qm(e):e)),not:e.not||!1}),Km=({conditionalLogicConfig:e,onConfigChanged:t,configuredDataSources:n,hass:r,directApiConfig:a,allParameterValues:o})=>{const[i,s]=Ce.useState([]),l=Ce.useMemo((()=>((e,t,n,r)=>{const a=[];return e?((e.inventree_hass_sensors||[]).forEach((e=>{const n=null==t?void 0:t.states[e],r=(null==n?void 0:n.attributes.friendly_name)||e;a.push({name:`inv_sensor_state_${e}`,label:`InvSensor: ${r} State`})})),(e.ha_entities||[]).forEach((e=>{const n=null==t?void 0:t.states[e];if(n){const t=n.attributes.friendly_name||e,r=`ha_entity_state_${e}`;a.push({name:r,label:`${t} - State`,value:r});for(const r in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,r)){let o="text";const i=n.attributes[r];if("number"==typeof i?o="number":"boolean"==typeof i&&(o="boolean"),"object"!=typeof i&&!Array.isArray(i)){const n=`ha_entity_attr_${e}:::${r}`,i=`${t} - Attribute: ${r}`;a.push({name:n,label:i,value:n,inputType:o})}}}})),(e.inventree_pks||[]).forEach((e=>{isNaN(e)||(a.push({name:`part_${e}_name`,label:`Part ${e}: Name`,inputType:"text"}),a.push({name:`part_${e}_IPN`,label:`Part ${e}: IPN`,inputType:"text"}),a.push({name:`part_${e}_description`,label:`Part ${e}: Description`,inputType:"text"}),a.push({name:`part_${e}_category_name`,label:`Part ${e}: Category`,inputType:"text"}),a.push({name:`part_${e}_stock`,label:`Part ${e}: Stock`,inputType:"number"}),a.push({name:`part_${e}_is_template`,label:`Part ${e}: Is Template`,inputType:"boolean"}),a.push({name:`part_${e}_assembly`,label:`Part ${e}: Is Assembly`,inputType:"boolean"}),a.push({name:`part_${e}_virtual`,label:`Part ${e}: Is Virtual`,inputType:"boolean"}))})),e.inventree_parameters_to_fetch&&e.inventree_parameters_to_fetch.forEach((e=>{const t=e.targetPartIds,o=e.parameterNames;"all_loaded"===t?"*"!==o&&Array.isArray(o)&&o.forEach((e=>{a.push({name:`inv_param_any_${e.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam (Any Part): ${e}`})})):Array.isArray(t)&&t.forEach((e=>{"number"!=typeof e||isNaN(e)||("*"===o?r&&r[e]&&Object.keys(r[e]).forEach((t=>{const n=r[e][t];a.push({name:`inv_param_${e}_${t.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${t} (Part ${e})`,inputType:Hm(n)})})):Array.isArray(o)&&o.forEach((t=>{let o="text";(null==n?void 0:n.enabled)&&r&&r[e]&&r[e][t]&&(o=Hm(r[e][t])),a.push({name:`inv_param_${e}_${t.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${t} (Part ${e})`,inputType:o})})))}))})),(e.inventree_parameters||[]).forEach((e=>{const t=e.split(":");if(3===t.length&&"part"===t[0]){const o=t[1],i=t[2],s=parseInt(o,10);if(isNaN(s))a.push({name:`inv_param_raw_${e.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${e} (Invalid PK)`});else{let e="text";(null==n?void 0:n.enabled)&&r&&r[s]&&r[s][i]&&(e=Hm(r[s][i])),a.push({name:`inv_param_${s}_${i.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${i} (Part ${s})`,inputType:e})}}else a.push({name:`inv_param_raw_${e.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${e} (Malformed)`})})),0===a.length&&a.push({name:"generic_part_name",label:"Part Name (Any)"},{name:"generic_stock_level",label:"Stock Level (Any)",inputType:"number"}),Bm.log("ConditionalLogicSection","Generated fields for QueryBuilder",{count:a.length}),a):[{name:"default_field",label:"Default Field (No Data Sources)"}]})(n,r,a,o)),[n,r,a,o]);Ce.useEffect((()=>{const t=((null==e?void 0:e.definedLogics)||[]).map((e=>Object.assign(Object.assign({},e),{id:e.id||Gm(),logicPairs:Array.isArray(e.logicPairs)?e.logicPairs.map((e=>Object.assign(Object.assign({},e),{id:e.id||Gm(),name:e.name||"",conditionRules:e.conditionRules||Object.assign(Object.assign({},Vm),{id:Gm()}),effects:Array.isArray(e.effects)?e.effects.map((e=>Object.assign(Object.assign({},e),{id:e.id||Gm()}))):[]}))):[Wm()]})));s(t)}),[null==e?void 0:e.definedLogics]);const c={container:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"},header:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},input:{width:"calc(100% - 120px)",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},button:{padding:"8px 12px",border:"none",borderRadius:"4px",cursor:"pointer",marginLeft:"10px"},removeButton:{backgroundColor:"#f44336",color:"white"},addButton:{backgroundColor:"#4CAF50",color:"white",marginTop:"10px",display:"block",width:"100%"},subSection:{marginTop:"15px",paddingTop:"15px",borderTop:"1px dashed #ccc"},subHeader:{marginBottom:"10px",fontWeight:"bold",fontSize:"0.9em"},pairContainer:{marginLeft:"15px",borderLeft:"3px solid #4CAF50",paddingLeft:"15px",marginTop:"10px",marginBottom:"10px"}};return Ue.jsxs("div",{children:[Ue.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"20px"},children:"Conditional Logic"}),i.map(((e,n)=>Ue.jsxs("div",{style:c.container,children:[Ue.jsxs("div",{style:c.header,children:[Ue.jsx("input",{type:"text",value:e.name,onChange:n=>((e,n)=>{const r=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{name:n}):t));s(r),t({definedLogics:r})})(e.id,n.target.value),placeholder:`Logic Block ${n+1} Name`,style:c.input}),Ue.jsx("button",{onClick:()=>(e=>{const n=i.filter((t=>t.id!==e));s(n),t({definedLogics:n})})(e.id),style:Object.assign(Object.assign({},c.button),c.removeButton),children:"Remove Block"})]}),e.logicPairs.map(((n,r)=>Ue.jsxs("div",{style:c.pairContainer,children:[Ue.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[Ue.jsx("input",{type:"text",value:n.name,onChange:r=>((e,n,r)=>{const a=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:t.logicPairs.map((e=>e.id===n?Object.assign(Object.assign({},e),{name:r}):e))}):t));s(a),t({definedLogics:a})})(e.id,n.id,r.target.value),placeholder:`Rule-Effect Pair ${r+1} Name (Optional)`,style:Object.assign(Object.assign({},c.input),{width:"calc(100% - 130px)",fontSize:"0.9em"})}),Ue.jsx("button",{onClick:()=>((e,n)=>{const r=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:t.logicPairs.filter((e=>e.id!==n))}):t));s(r),t({definedLogics:r})})(e.id,n.id),style:Object.assign(Object.assign(Object.assign({},c.button),c.removeButton),{fontSize:"0.8em",padding:"6px 10px"}),children:"Remove Pair"})]}),Ue.jsx("div",{style:c.subHeader,children:"IF (Conditions for this Pair):"}),Ue.jsx(Dm,{fields:l,query:n.conditionRules,onQueryChange:r=>((e,n,r)=>{const a=Qm(r),o=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:t.logicPairs.map((e=>e.id===n?Object.assign(Object.assign({},e),{conditionRules:a}):e))}):t));s(o),t({definedLogics:o})})(e.id,n.id,r)}),Ue.jsx("div",{style:Object.assign(Object.assign({},c.subHeader),{marginTop:"15px"}),children:"THEN (Effects for this Pair):"}),Ue.jsx(Um,{effects:n.effects,logicBlockId:n.id,onAddEffect:()=>((e,n)=>{const r={id:Gm(),type:"set_style",styleProperty:"highlight",styleValue:"yellow"},a=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:t.logicPairs.map((e=>e.id===n?Object.assign(Object.assign({},e),{effects:[...e.effects,r]}):e))}):t));s(a),t({definedLogics:a})})(e.id,n.id),onUpdateEffect:r=>((e,n,r)=>{const a=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:t.logicPairs.map((e=>e.id===n?Object.assign(Object.assign({},e),{effects:e.effects.map((e=>e.id===r.id?r:e))}):e))}):t));s(a),t({definedLogics:a})})(e.id,n.id,r),onRemoveEffect:r=>((e,n,r)=>{const a=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:t.logicPairs.map((e=>e.id===n?Object.assign(Object.assign({},e),{effects:e.effects.filter((e=>e.id!==r))}):e))}):t));s(a),t({definedLogics:a})})(e.id,n.id,r)})]},n.id))),Ue.jsx("button",{onClick:()=>(e=>{const n=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{logicPairs:[...t.logicPairs,Wm()]}):t));s(n),t({definedLogics:n})})(e.id),style:Object.assign(Object.assign({},c.button),{backgroundColor:"#2196F3",color:"white",marginTop:"15px"}),children:"Add Rule-Effect Pair to Block"})]},e.id))),Ue.jsx("button",{onClick:()=>{const e={id:Gm(),name:`New Logic Block ${i.length+1}`,logicPairs:[Wm()]},n=[...i,e];s(n),t({definedLogics:n})},style:c.addButton,children:"Add New Conditional Logic Block"})]})},Jm=e.getInstance(),Xm=({hass:e,lovelace:t,config:n,onConfigChanged:r})=>{var a,o,i,s,l;const[c,u]=Ce.useState(n||{}),d=ht((e=>e.parameters.parameterValues));Ce.useEffect((()=>{Jm.log("Editor:Main","Editor mounted or initialConfig changed",{initialConfig:n}),u((e=>{var t,r,a,o,i,s,l,c,u,d;const p=Object.assign(Object.assign({},e),n);return p.data_sources={inventree_hass_sensors:(null===(t=p.data_sources)||void 0===t?void 0:t.inventree_hass_sensors)||[],ha_entities:(null===(r=p.data_sources)||void 0===r?void 0:r.ha_entities)||[],inventree_pks:(null===(a=p.data_sources)||void 0===a?void 0:a.inventree_pks)||[],inventree_parameters:(null===(o=p.data_sources)||void 0===o?void 0:o.inventree_parameters)||[],inventree_parameters_to_fetch:(null===(i=p.data_sources)||void 0===i?void 0:i.inventree_parameters_to_fetch)||[],inventree_pk_thumbnail_overrides:(null===(s=p.data_sources)||void 0===s?void 0:s.inventree_pk_thumbnail_overrides)||[]},p.direct_api||(p.direct_api={enabled:!1,url:"",api_key:""}),p.layout||(p.layout={viewType:"detail"}),!p.view_type&&(null===(l=p.layout)||void 0===l?void 0:l.viewType)?p.view_type=p.layout.viewType:p.view_type||(p.view_type="detail"),!p.columns&&(null===(c=p.layout)||void 0===c?void 0:c.columns)&&(p.columns=p.layout.columns),!p.grid_spacing&&(null===(u=p.layout)||void 0===u?void 0:u.grid_spacing)&&(p.grid_spacing=p.layout.grid_spacing),!p.item_height&&(null===(d=p.layout)||void 0===d?void 0:d.item_height)&&(p.item_height=p.layout.item_height),p.display||(p.display={show_header:!0,show_image:!0,show_name:!0,show_stock:!0}),p.style||(p.style={background:"var(--ha-card-background, var(--card-background-color, white))",spacing:8,image_size:50}),p.interactions||(p.interactions={buttons:[]}),p.actions||(p.actions=[]),p.conditional_logic?p.conditional_logic.definedLogics||(p.conditional_logic.definedLogics=[]):p.conditional_logic={definedLogics:[]},p}))}),[n]);const p=Ce.useCallback(((e,t)=>{u((n=>{const a=Object.assign(Object.assign({},n),{[e]:t});return r(a),a}))}),[r]),f=Ce.useCallback((e=>{u((t=>{const n=Object.assign(Object.assign({},t),{data_sources:e});return r(n),Jm.log("Editor:Main","Updated data_sources in config",{data_sources:n.data_sources}),n}))}),[r]),h=Ce.useCallback((e=>{f(Object.assign(Object.assign({},c.data_sources||{}),{inventree_hass_sensors:e}))}),[c.data_sources,f]),g=Ce.useCallback((e=>{f(Object.assign(Object.assign({},c.data_sources||{}),{ha_entities:e}))}),[c.data_sources,f]),m=Ce.useCallback((e=>{f(Object.assign(Object.assign({},c.data_sources||{}),{inventree_pks:e}))}),[c.data_sources,f]),y=Ce.useCallback((e=>{f(Object.assign(Object.assign({},c.data_sources||{}),{inventree_pk_thumbnail_overrides:e}))}),[c.data_sources,f]),v=Ce.useCallback((e=>{Jm.log("Editor:Main","Received updated InventreeParameterFetchConfig list",{configs:e});const t=c.data_sources||{},n=Object.assign(Object.assign({},t),{inventree_parameters_to_fetch:e});f(n)}),[c.data_sources,f]),b=Ce.useCallback((e=>{p("direct_api",e)}),[p]),S=Ce.useCallback(((e,t)=>{u((n=>{var a,o,i,s,l,c,u,d,p;const f={viewType:e,columns:null!==(a=t.columns)&&void 0!==a?a:null===(o=n.layout)||void 0===o?void 0:o.columns,grid_spacing:null!==(i=t.grid_spacing)&&void 0!==i?i:null===(s=n.layout)||void 0===s?void 0:s.grid_spacing,item_height:null!==(l=t.item_height)&&void 0!==l?l:null===(c=n.layout)||void 0===c?void 0:c.item_height},h=Object.assign(Object.assign({},n),{view_type:e,columns:null!==(u=t.columns)&&void 0!==u?u:n.columns,grid_spacing:null!==(d=t.grid_spacing)&&void 0!==d?d:n.grid_spacing,item_height:null!==(p=t.item_height)&&void 0!==p?p:n.item_height,layout:f});return r(h),h}))}),[r]),k=Ce.useCallback((e=>{p("display",e)}),[p]),w=Ce.useCallback((e=>{p("style",e)}),[p]);Ce.useCallback((e=>{p("interactions",e)}),[p]);const _=Ce.useCallback((e=>{p("actions",e)}),[p]),x=Ce.useCallback((e=>{p("conditional_logic",e)}),[p]);if(!e)return Ue.jsx("p",{children:"Loading Home Assistant..."});const C=Ce.useMemo((()=>{var e,t,n,r,a,o;return{name:c.name||"",entity:c.entity||"",type:c.type||"inventree-card",view_type:c.view_type||"detail",columns:c.columns,grid_spacing:c.grid_spacing,item_height:c.item_height,data_sources:{inventree_hass_sensors:(null===(e=c.data_sources)||void 0===e?void 0:e.inventree_hass_sensors)||[],ha_entities:(null===(t=c.data_sources)||void 0===t?void 0:t.ha_entities)||[],inventree_pks:(null===(n=c.data_sources)||void 0===n?void 0:n.inventree_pks)||[],inventree_parameters:(null===(r=c.data_sources)||void 0===r?void 0:r.inventree_parameters)||[],inventree_parameters_to_fetch:(null===(a=c.data_sources)||void 0===a?void 0:a.inventree_parameters_to_fetch)||[],inventree_pk_thumbnail_overrides:(null===(o=c.data_sources)||void 0===o?void 0:o.inventree_pk_thumbnail_overrides)||[]},direct_api:c.direct_api||{enabled:!1,url:"",api_key:""},layout:c.layout||{viewType:"detail"},display:c.display||{show_header:!0,show_image:!0,show_name:!0,show_stock:!0},style:c.style||{background:"var(--ha-card-background, var(--card-background-color, white))",spacing:8,image_size:50},interactions:c.interactions||{buttons:[]},actions:c.actions||[],conditional_logic:c.conditional_logic||{definedLogics:[]}}}),[c]);return Ue.jsxs("div",{className:"inventree-card-editor",children:[Ue.jsx("h2",{children:"InvenTree Card Configuration (React Editor)"}),Ue.jsxs("section",{className:"editor-section",children:[Ue.jsx("h3",{children:"Data Sources"}),Ue.jsx(zp,{hass:e,selectedSensors:(null===(a=C.data_sources)||void 0===a?void 0:a.inventree_hass_sensors)||[],onSensorsChanged:h}),Ue.jsx(Gp,{hass:e,selectedEntities:(null===(o=C.data_sources)||void 0===o?void 0:o.ha_entities)||[],onEntitiesChanged:g}),Ue.jsx(Up,{hass:e,selectedPks:(null===(i=C.data_sources)||void 0===i?void 0:i.inventree_pks)||[],onPksChanged:m,thumbnailOverrides:(null===(s=C.data_sources)||void 0===s?void 0:s.inventree_pk_thumbnail_overrides)||[],onThumbnailOverridesChanged:y}),Ue.jsx(Hp,{hass:e,parameterFetchConfigs:(null===(l=C.data_sources)||void 0===l?void 0:l.inventree_parameters_to_fetch)||[],onFetchConfigsChanged:v}),Ue.jsx(Wp,{hass:e,directApiConfig:C.direct_api,onDirectApiConfigChanged:b})]}),Ue.jsxs("section",{className:"editor-section",children:[Ue.jsx("h3",{children:"Presentation"}),Ue.jsx(Jp,{viewType:C.view_type,layoutOptions:{columns:C.columns,grid_spacing:C.grid_spacing,item_height:C.item_height},onLayoutConfigChanged:S}),Ue.jsx(Zp,{displayConfig:C.display,onDisplayConfigChanged:k}),Ue.jsx(tf,{styleConfig:C.style,onStyleConfigChanged:w})]}),Ue.jsxs("section",{className:"editor-section",children:[Ue.jsx("h3",{children:"Actions (Triggers & Operations)"}),Ue.jsx(of,{hass:e,actions:C.actions,onActionsChanged:_})]}),Ue.jsxs("section",{className:"editor-section",children:[Ue.jsx("h3",{children:"Conditional Logic"}),Ue.jsx(Km,{conditionalLogicConfig:C.conditional_logic,onConfigChanged:x,configuredDataSources:C.data_sources,hass:e,directApiConfig:C.direct_api,allParameterValues:d})]}),Ue.jsxs("section",{className:"editor-section",children:[Ue.jsx("h3",{children:"System Settings"}),Ue.jsx("p",{children:"Performance, caching, and advanced debug settings will go here."})]}),Ue.jsxs("details",{children:[Ue.jsx("summary",{children:"Current Editor Configuration State (Debug)"}),Ue.jsx("pre",{style:{fontSize:"0.8em",backgroundColor:"#f0f0f0",padding:"10px",borderRadius:"4px",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:JSON.stringify(C,null,2)})]})]})},Ym=`${n}-react-editor-host`;let Zm=class extends le{constructor(){super(...arguments),this._reactRoot=null,this._mountPoint=null,this.logger=e.getInstance(),this._handleReactConfigChange=e=>{this.logger.log("ReactEditorHost","React editor changed config, attempting to fire event.",{newConfig:e});let t=this;this.lovelace&&"function"==typeof this.lovelace.dispatchEvent?(this.logger.log("ReactEditorHost","Using this.lovelace as event target."),t=this.lovelace):this.lovelace?this.logger.warn("ReactEditorHost","this.lovelace exists but has no dispatchEvent method or is not HTMLElement. Defaulting to dispatching on self.",{lovelaceObject:this.lovelace}):this.logger.log("ReactEditorHost","this.lovelace is not available. Dispatching event on self (this custom element).");try{na(t,"config-changed",{config:e}),this.logger.log("ReactEditorHost","Successfully fired config-changed event.",{target:t===this?"self":"lovelace"})}catch(n){this.logger.error("ReactEditorHost","Error firing config-changed event:",{error:n,target:t,newConfig:e})}}}setConfig(e){this.logger.log("ReactEditorHost","setConfig called",{config:e}),this._config=e,this._renderReactApp()}firstUpdated(e){super.firstUpdated(e),this.shadowRoot&&(this._mountPoint=this.shadowRoot.getElementById("react-editor-mount-point")),this._mountPoint?this._renderReactApp():this.logger.error("ReactEditorHost","CRITICAL: react-editor-mount-point NOT FOUND in shadowRoot.")}updated(e){super.updated(e),(e.has("hass")||e.has("_config"))&&this._renderReactApp()}_renderReactApp(){if(!this._mountPoint){if(this.logger.warn("ReactEditorHost","Attempted to render React app, but mount point is not available. Re-checking..."),!this.shadowRoot)return void this.logger.error("ReactEditorHost","Shadow DOM not available for mount point re-check. Cannot render.");if(this._mountPoint=this.shadowRoot.getElementById("react-editor-mount-point"),!this._mountPoint)return void this.logger.error("ReactEditorHost","Mount point still NOT available after re-check. Cannot render.");this.logger.log("ReactEditorHost","Mount point re-acquired.")}if(!this.hass||void 0===this._config)return this.logger.warn("ReactEditorHost","Hass or config is not yet available. Skipping React render.",{hasHass:!!this.hass,hasConfig:void 0!==this._config}),void(this._reactRoot?this._reactRoot.render(Ee.createElement("div",null,"Loading editor resources...")):this._mountPoint&&(this._mountPoint.innerHTML="<div>Loading editor resources...</div>"));this._reactRoot||(this._reactRoot=ze.createRoot(this._mountPoint)),this.logger.log("ReactEditorHost","Rendering React editor component.",{hasHass:!!this.hass,hasConfig:!!this._config,config:this._config});const e={hass:this.hass,lovelace:this.lovelace,config:this._config,onConfigChanged:this._handleReactConfigChange},t=Ee.createElement(Xm,e);this._reactRoot.render(Ee.createElement(ot,{store:Qd,children:t}))}disconnectedCallback(){super.disconnectedCallback(),this._reactRoot&&(this._reactRoot.unmount(),this._reactRoot=null,this.logger.log("ReactEditorHost","React editor unmounted.")),this._mountPoint=null}render(){return q`<div id="react-editor-mount-point"></div>`}};Zm.styles=u`
    :host {
      display: block;
    }
    #react-editor-mount-point {
      width: 100%;
      height: 100%;
    }
  `,a([fe({attribute:!1})],Zm.prototype,"hass",void 0),a([fe({attribute:!1})],Zm.prototype,"lovelace",void 0),a([he()],Zm.prototype,"_config",void 0),Zm=a([ue(Ym)],Zm);const ey=le;try{let t=class extends ey{constructor(){super(),this.logger=e.getInstance(),this._cleanupFunctions=[],this._websocketSubscriptions=[],this._reactRoot=null,this._reactMountPoint=null,this._isDestroyed=!1,this.logger.log("InventreeCard","Creating InventreeCard instance (Lit Wrapper)",{category:"card",subsystem:"lifecycle"})}static async getConfigElement(){const t=e.getInstance();t.log("InventreeCard","getConfigElement called for React editor",{category:"card",subsystem:"editor"}),customElements.get(Ym)||(customElements.define(Ym,Zm),e.getInstance().log("ReactEditorHost",`Defined custom element: ${Ym}`)),t.log("InventreeCard",`Creating editor element: ${Ym}`,{category:"card",subsystem:"editor"});const n=document.createElement(Ym);if(!n)throw t.error("InventreeCard",`Failed to create editor element: ${Ym}`),new Error(`Failed to create editor element: ${Ym}`);return t.log("InventreeCard",`React editor host element created: ${Ym}`,{category:"card",subsystem:"editor"}),n}static getStubConfig(e){const t=Object.keys(e.states).find((t=>{var n;return t.startsWith("sensor.")&&void 0!==(null===(n=e.states[t].attributes)||void 0===n?void 0:n.items)})),r=JSON.parse(JSON.stringify(me));return r.type=`custom:${n}`,r.name="InvenTree Card",r.data_sources.inventree_hass_sensors=t?[t]:[],delete r.entity,delete r.selected_entities,delete r.columns,delete r.grid_spacing,delete r.item_height,delete r.parts_config,delete r.thumbnails,delete r.buttons,delete r.services,delete r.variant_groups,delete r.variant_view_type,delete r.auto_detect_variants,r}setConfig(e){if(!e)throw new Error("No configuration provided");this.logger.log("InventreeCard","setConfig called with config (raw):",{category:"card",subsystem:"config",data:{config:JSON.stringify(e,null,2)}}),this.logger.info("Card","Setting configuration",{category:"card",subsystem:"config",data:{entityId:e.entity,viewType:e.view_type}}),this.config=e,this._setupDebugMode(e)}render(){return this.logger.log("InventreeCardLit","render() called, creating react-root-container div."),q`<div id="react-root-container"></div>`}firstUpdated(e){super.firstUpdated(e),this.logger.log("InventreeCardLit","firstUpdated() called."),this.shadowRoot?(this._reactMountPoint=this.shadowRoot.getElementById("react-root-container"),this._reactMountPoint?this.logger.log("InventreeCardLit","react-root-container found and cached in firstUpdated."):this.logger.error("InventreeCardLit","CRITICAL: react-root-container NOT FOUND in shadowRoot during firstUpdated.")):this.logger.error("InventreeCardLit","CRITICAL: shadowRoot NOT AVAILABLE during firstUpdated."),this._mountOrUpdateReactApp()}updated(e){super.updated(e),(e.has("_hass")||e.has("config"))&&(this.logger.log("InventreeCard","Hass or Config changed in Lit, triggering React update.",{changed:Array.from(e.keys())}),this._mountOrUpdateReactApp()),e.has("config")||e.has("_hass")}_mountOrUpdateReactApp(){if(!this._reactMountPoint){if(this.logger.error("InventreeCardLit","Cannot mount React app: _reactMountPoint is not set. Attempting to find it again."),!this.shadowRoot)return void this.logger.error("InventreeCardLit","shadowRoot not available in _mountOrUpdateReactApp for re-check.");if(this._reactMountPoint=this.shadowRoot.getElementById("react-root-container"),!this._reactMountPoint)return void this.logger.error("InventreeCardLit","Still cannot find react-root-container on re-check.");this.logger.warn("InventreeCardLit","Found react-root-container on re-check within _mountOrUpdateReactApp.")}if(!this._reactRoot){if(!this._reactMountPoint)return void this.logger.error("InventreeCardLit","Cannot create React root: _reactMountPoint is null just before createRoot.");this._reactRoot=ze.createRoot(this._reactMountPoint),this.logger.log("InventreeCardLit","Mounting React app for the first time.",{hass:!!this._hass,config:!!this.config})}this._hass&&this.config?(this.logger.log("InventreeCardLit","Rendering ReactApp with HASS and Config."),this._reactRoot.render(Ee.createElement($p,{hass:this._hass,config:this.config}))):(this.logger.warn("InventreeCardLit","HASS or Config object is null/undefined, not rendering ReactApp.",{hass:!!this._hass,config:!!this.config}),!this._reactRoot||this._hass&&this.config||this.logger.log("InventreeCardLit","Skipping render call as HASS or Config is missing."))}_unmountReactApp(){this._reactRoot&&(this._reactRoot.unmount(),this._reactRoot=null,this.logger.log("InventreeCard","React app unmounted successfully.")),this._reactMountPoint=null}getCardSize(){return 3}static getConfigForm(){}_setupDebugMode(e){this.logger.setDebugConfig(e),this.logger.log("Card","Debug mode configuration set (Lit wrapper)")}_cleanupEventListeners(){this._websocketSubscriptions.forEach((e=>e())),this._websocketSubscriptions=[],this.logger.log("Card","Cleaned up Lit event listeners/subscriptions",{category:"card",subsystem:"lifecycle"})}connectedCallback(){super.connectedCallback();try{this.logger.log("InventreeCard","Lit wrapper connected to DOM",{category:"card",subsystem:"lifecycle"})}catch(e){this.logger.error("InventreeCard","Error in connectedCallback (Lit wrapper):",{category:"card",subsystem:"lifecycle",data:e})}}get hass(){return this._hass?this._hass:void 0}set hass(e){e&&e!==this._hass&&(this.logger.log("Card Lit","HASS object received."),this._hass=e)}requestUpdate(e,t){try{super.requestUpdate(e,t)}catch(e){this.logger.error("InventreeCard",`Critical error in requestUpdate: ${e}`,{category:"card",subsystem:"lifecycle",data:e})}}disconnectedCallback(){super.disconnectedCallback(),this.logger.log("InventreeCard","Lit wrapper disconnectedCallback - cleaning up",{category:"card",subsystem:"lifecycle"}),this._isDestroyed=!0,this._unmountReactApp(),this._cleanupEventListeners(),this._cleanupFunctions.forEach((e=>e())),this._cleanupFunctions=[],ve("lit","cardDisconnected")}};t.styles=[u`
                :host { /* Style the host element itself */
                    display: block; /* Ensure it takes up space */
                    width: 100%;
                    height: 100%;
                }
                #react-root-container {
                    width: 100%;
                    height: 100%;
                }
            `],a([fe({attribute:!1})],t.prototype,"config",void 0),a([he()],t.prototype,"_hass",void 0),a([he()],t.prototype,"_reactRoot",void 0),t=a([ue("inventree-card")],t)}catch(pe){if(e.getInstance().error("InventreeCardGlobal","Error defining InventreeCard (Lit Wrapper):",{data:pe}),!customElements.get(n)){e.getInstance().log("InventreeCardGlobal","Attempting fallback definition for InventreeCard",{category:"card",subsystem:"lifecycle"});try{class t extends le{setConfig(t){e.getInstance().error("FallbackInventreeCard","setConfig called. Card failed to load properly.",{data:t}),this.shadowRoot&&(this.shadowRoot.innerHTML='<div style="color: red; padding: 16px;">Error: InvenTree Card failed to load. Check console.</div>')}getCardSize(){return 1}}customElements.define(n,t)}catch(t){e.getInstance().error("FallbackInventreeCard","Even fallback InventreeCard failed to register:",{data:t})}}}let ty;try{ty=customElements.get(n)}catch(pe){}"undefined"==typeof window||window.process||(window.process={env:{NODE_ENV:"production"}});const ny=e.getInstance();ny.info("Index","Starting React module initialization",{category:"initialization",subsystem:"index"}),ny.info("Index","Redux store initialized",{category:"initialization",subsystem:"redux"});try{!function(n,r,a){const o=e.getInstance();try{return t.has(r)?(o.log("CustomElements",`Constructor for ${n} already used for registration, skipping`,{category:"initialization",subsystem:"components"}),!1):customElements.get(n)?(o.log("CustomElements",`Element ${n} already registered, skipping`,{category:"initialization",subsystem:"components"}),!1):(customElements.define(n,r,a),t.add(r),o.log("CustomElements",`Successfully registered ${n}`,{category:"initialization",subsystem:"components"}),!0)}catch(e){return o.error("CustomElements",`Error registering ${n}: ${e}`,{category:"initialization",subsystem:"components"}),!1}}(r,ty),ny.info("Index",`Registering main wrapper component: ${r}`,{category:"initialization",subsystem:"components"})}catch(e){ny.error("Index",`Error registering main wrapper component: ${e}`,{category:"initialization",subsystem:"components"})}window.customCards=window.customCards||[],window.customCards.push({type:r,name:"InvenTree Card",description:"Display and manage InvenTree inventory (React Version)",preview:!0}),ny.info("Index","Card registration complete",{category:"initialization",subsystem:"card"}),ny.info("Index","React Module initialization complete",{category:"initialization",subsystem:"index"});
//# sourceMappingURL=inventree-card.js.map
