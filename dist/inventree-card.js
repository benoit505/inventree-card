class e{constructor(){this.debugMode=!1,this.verboseMode=!1,this.logLevel="error",this.debugCategories={api:{enabled:!1,subsystems:{calls:!1,responses:!1,errors:!1,fallbacks:!1,throttling:!1}},parameters:{enabled:!1,subsystems:{updates:!1,conditions:!1,filtering:!1,actions:!1}},websocket:{enabled:!1,subsystems:{connection:!1,messages:!1,events:!1,plugin:!1,subscriptions:!1,authentication:!1}},redux:{enabled:!1,subsystems:{actions:!1,state:!1,components:!1,middleware:!1,dispatch:!1,sync:!1,parameters:!1,migration:!1}},layouts:{enabled:!1,subsystems:{rendering:!1,filtering:!1,updates:!1}},rendering:{enabled:!1,subsystems:{updates:!1,performance:!1,cycle:!1,debounce:!1}},cache:{enabled:!1,subsystems:{hits:!1,misses:!1,pruning:!1,performance:!1}},card:{enabled:!1,subsystems:{initialization:!1,lifecycle:!1,rendering:!1,updates:!1}},diagnostics:{enabled:!1,subsystems:{performance:!1,memory:!1,errors:!1}}},this._logSequence=0,this._recentLogs=new Map,this._dedupeTimeWindow=2e3,this._maxDuplicatesPerWindow=1,setTimeout((()=>{try{Promise.resolve().then((function(){return Ga})).then((e=>{this._cache=e.CacheService.getInstance(),console.info("Logger: Successfully initialized CacheService after delay")}))}catch(e){console.warn("Logger: Could not initialize CacheService, using built-in deduplication")}}),100)}static getInstance(){return e.instance||(e.instance=new e),e.instance}isEnabled(e,t){var n;return!(!this.verboseMode&&!this.anyCategoryEnabled())&&(!!this.debugCategories[e]&&(!!this.verboseMode||!!this.debugCategories[e].enabled&&(!t||!0===(null===(n=this.debugCategories[e].subsystems)||void 0===n?void 0:n[t]))))}anyCategoryEnabled(){return Object.keys(this.debugCategories).some((e=>this.debugCategories[e].enabled))}getNextSequence(){return++this._logSequence}setDebug(e){this.debugMode=e,e?this.logLevel="debug":(this.logLevel="error",this.verboseMode=!1),console.info("Logger debug mode "+(e?"ENABLED":"DISABLED"))}setVerboseMode(e){e&&!this.debugMode&&this.setDebug(!0),this.verboseMode=e,console.info("Logger verbose mode "+(e?"ENABLED - ALL categories will log":"DISABLED - only selected categories will log"))}setDebugConfig(e){var t,n,r,a,i,o,s,l;e&&(this.setDebug(e.debug||!1),this.setVerboseMode(e.debug_verbose||!1),e.debug_hierarchical?this.processHierarchicalConfig(e.debug_hierarchical):(this.setCategoryDebug("api",null!==(t=e.debug_api)&&void 0!==t&&t),this.setCategoryDebug("parameters",null!==(n=e.debug_parameters)&&void 0!==n&&n),this.setCategoryDebug("websocket",null!==(r=e.debug_websocket)&&void 0!==r&&r),this.setCategoryDebug("layouts",null!==(a=e.debug_layouts)&&void 0!==a&&a),this.setCategoryDebug("rendering",null!==(i=e.debug_rendering)&&void 0!==i&&i),this.setCategoryDebug("cache",null!==(o=e.debug_cache)&&void 0!==o&&o),this.setCategoryDebug("card",null!==(s=e.debug_card)&&void 0!==s&&s),this.setCategoryDebug("diagnostics",null!==(l=e.debug_diagnostics)&&void 0!==l&&l)),this.logConfigStatus())}processHierarchicalConfig(e){var t,n;for(const r in this.debugCategories){const a=e[r];if(a){if(this.setCategoryDebug(r,null!==(t=a.enabled)&&void 0!==t&&t),a.subsystems)for(const e in a.subsystems)this.setSubsystemDebug(r,e,null!==(n=a.subsystems[e])&&void 0!==n&&n)}else this.setCategoryDebug(r,!1)}}formatSystemStatus(e){if(!this.debugCategories[e])return"Not configured";if(!this.debugCategories[e].enabled)return"Disabled";const t=this.debugCategories[e].subsystems,n=Object.keys(t).filter((e=>t[e])).join(", ");return n?`Enabled with subsystems: ${n}`:"Enabled (no subsystems)"}setLogLevel(e){this.logLevel=e}setCategoryDebug(e,t){this.debugCategories[e]?this.debugCategories[e].enabled=t:console.warn(`Logger: Unknown debug category '${e}'`)}setSubsystemDebug(e,t,n){this.debugCategories[e]&&this.debugCategories[e].subsystems.hasOwnProperty(t)?this.debugCategories[e].subsystems[t]=n:console.warn(`Logger: Unknown debug subsystem '${t}' for system '${e}'`)}isDuplicate(e){const t=Date.now(),n=this._recentLogs.get(e);return!!(n&&t-n<this._dedupeTimeWindow)||(this._recentLogs.set(e,t),this._logSequence%10==0&&this.pruneRecentLogs(),!1)}pruneRecentLogs(){const e=Date.now();for(const[t,n]of this._recentLogs.entries())e-n>this._dedupeTimeWindow&&this._recentLogs.delete(t)}log(e,t,n,...r){n&&(n instanceof Error||"object"!=typeof n||Array.isArray(n))&&(r=[n,...r],n={});const a=n&&"object"==typeof n?n.category:void 0,i=n&&"object"==typeof n?n.subsystem:void 0,o=n&&"object"==typeof n&&n.level||"debug",s=n&&"object"==typeof n?n.performance:void 0;if(a&&!this.isEnabled(a,i))return;if(!a&&!this.debugMode)return;if("none"===this.logLevel)return;if("error"===this.logLevel&&"error"!==o)return;if("warn"===this.logLevel&&"error"!==o&&"warn"!==o)return;const l=`${e}:${a||"main"}:${i||""}:${t}`;if(this.isDuplicate(l))return;const c=this.getNextSequence(),u=Date.now().toString(),d=a?i?`${e}:${a}:${i}`:`${e}:${a}`:e;if("trace"===o){if(console.groupCollapsed(`[${u}][${c}][${d}] ${t}`),r.length>0&&console.log(...r),s){const{startTime:e,duration:t}=s;t?console.log(`‚è±Ô∏è Duration: ${t.toFixed(2)}ms`):e&&console.log(`‚è±Ô∏è Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}console.groupEnd()}else if(console.log(`üîç [${u}][${c}][${d}] ${t}`,...r),s){const{startTime:e,duration:t}=s;t?console.log(`‚è±Ô∏è [${u}][${c}][${d}] Duration: ${t.toFixed(2)}ms`):e&&console.log(`‚è±Ô∏è [${u}][${c}][${d}] Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}}info(e,t,...n){const r=n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])?n.shift():{};if("none"===this.logLevel||"error"===this.logLevel||"warn"===this.logLevel)return;const a=null==r?void 0:r.category,i=null==r?void 0:r.subsystem;if(a&&!this.isEnabled(a,i))return;const o=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),s=this.getNextSequence(),l=a?i?`${e}:${a}:${i}`:`${e}:${a}`:e;if(console.info(`‚ÑπÔ∏è [${o}][${s}][${l}] ${t}`,...n),null==r?void 0:r.performance){const{startTime:e,duration:t}=r.performance;t?console.info(`‚è±Ô∏è [${o}][${s}][${l}] Duration: ${t.toFixed(2)}ms`):e&&console.info(`‚è±Ô∏è [${o}][${s}][${l}] Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}}warn(e,t,...n){const r=n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])?n.shift():{};if("none"===this.logLevel||"error"===this.logLevel)return;const a=null==r?void 0:r.category,i=null==r?void 0:r.subsystem,o=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),s=this.getNextSequence(),l=a?i?`${e}:${a}:${i}`:`${e}:${a}`:e;console.warn(`‚ö†Ô∏è [${o}][${s}][${l}] ${t}`,...n)}error(e,t,...n){const r=n.length>0?n[0]:void 0,a=r instanceof Error||r&&"object"==typeof r&&"stack"in r||"string"==typeof r||!r||"object"!=typeof r||Array.isArray(r)?{}:n.shift();if("none"===this.logLevel)return;const i=null==a?void 0:a.category,o=null==a?void 0:a.subsystem,s=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),l=this.getNextSequence(),c=i?o?`${e}:${i}:${o}`:`${e}:${i}`:e;console.error(`‚ùå [${s}][${l}][${c}] ${t}`,...n)}startPerformance(e){return Date.now()}endPerformance(e,t,n,r){const a=Date.now()-n;this.log(e,t,Object.assign(Object.assign({},r),{performance:{duration:a}}))}resetDebugConfig(){console.log("Resetting logger config to defaults"),this.debugMode=!1,this.verboseMode=!1,this.logLevel="error";for(const e in this.debugCategories){this.debugCategories[e].enabled=!1;for(const t in this.debugCategories[e].subsystems)this.debugCategories[e].subsystems[t]=!1}this._recentLogs.clear(),console.info("Logger debug settings reset - all logging disabled")}setEnabled(e,t){this.setCategoryDebug(e,t)}getSystemsStatus(){const e={};for(const t in this.debugCategories){const n=this.debugCategories[t];e[t]={enabled:n.enabled,subsystems:Object.assign({},n.subsystems)}}return e}getSubsystems(e){return this.debugCategories[e]?Object.keys(this.debugCategories[e].subsystems):[]}isCategoryEnabled(e){return this.isEnabled(e)}logConfigStatus(){console.log("Logger configuration:"),console.log(`      Debug mode: ${this.debugMode} (controls debug UI view)`),console.log(`      Verbose mode: ${this.verboseMode} (logs everything when true)`);for(const e in this.debugCategories){const t=this.debugCategories[e].enabled;if(console.log(`      ${e.charAt(0).toUpperCase()+e.slice(1)}: ${t?"Enabled":"Disabled"}`),t&&!this.verboseMode)for(const t in this.debugCategories[e].subsystems){const n=this.debugCategories[e].subsystems[t];console.log(`        - ${t}: ${n?"Enabled":"Disabled"}`)}}}}const t=new WeakSet;function n(n,r,a){const i=e.getInstance();try{return t.has(r)?(i.log("CustomElements",`Constructor for ${n} already used for registration, skipping`,{category:"initialization",subsystem:"components"}),!1):customElements.get(n)?(i.log("CustomElements",`Element ${n} already registered, skipping`,{category:"initialization",subsystem:"components"}),!1):(customElements.define(n,r,a),t.add(r),i.log("CustomElements",`Successfully registered ${n}`,{category:"initialization",subsystem:"components"}),!0)}catch(e){return i.error("CustomElements",`Error registering ${n}: ${e}`,{category:"initialization",subsystem:"components"}),!1}}const r="inventree-card",a="inventree-card",i="inventree-card-editor";function o(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const s=window,l=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,c=Symbol(),u=new WeakMap;class d{constructor(e,t,n){if(this._$cssResult$=!0,n!==c)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(l&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=u.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&u.set(t,e))}return e}toString(){return this.cssText}}const p=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1]),e[0]);return new d(n,e,c)},f=l?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new d("string"==typeof e?e:e+"",void 0,c))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var g;const h=window,m=h.trustedTypes,v=m?m.emptyScript:"",y=h.reactiveElementPolyfillSupport,b={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},_=(e,t)=>t!==e&&(t==t||e==e),w={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:_},S="finalized";class k extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const r=this._$Ep(n,t);void 0!==r&&(this._$Ev.set(r,n),e.push(r))})),e}static createProperty(e,t=w){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const a=this[e];this[t]=r,this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||w}static finalize(){if(this.hasOwnProperty(S))return!1;this[S]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(f(e))}else void 0!==e&&t.push(f(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{l?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),r=s.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=w){var r;const a=this.constructor._$Ep(e,n);if(void 0!==a&&!0===n.reflect){const i=(void 0!==(null===(r=n.converter)||void 0===r?void 0:r.toAttribute)?n.converter:b).toAttribute(t,n.type);this._$El=e,null==i?this.removeAttribute(a):this.setAttribute(a,i),this._$El=null}}_$AK(e,t){var n;const r=this.constructor,a=r._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=r.getPropertyOptions(a),i="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:b;this._$El=a,this[a]=i.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||_)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var C;k[S]=!0,k.elementProperties=new Map,k.elementStyles=[],k.shadowRootOptions={mode:"open"},null==y||y({ReactiveElement:k}),(null!==(g=h.reactiveElementVersions)&&void 0!==g?g:h.reactiveElementVersions=[]).push("1.6.3");const x=window,$=x.trustedTypes,E=$?$.createPolicy("lit-html",{createHTML:e=>e}):void 0,I="$lit$",P=`lit$${(Math.random()+"").slice(9)}$`,A="?"+P,T=`<${A}>`,N=document,D=()=>N.createComment(""),R=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,L="[ \t\n\f\r]",O=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,z=/-->/g,M=/>/g,F=RegExp(`>|${L}(?:([^\\s"'>=/]+)(${L}*=${L}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),V=/'/g,W=/"/g,U=/^(?:script|style|textarea|title)$/i,B=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),q=Symbol.for("lit-noChange"),H=Symbol.for("lit-nothing"),G=new WeakMap,K=N.createTreeWalker(N,129,null,!1);function Q(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==E?E.createHTML(t):t}const J=(e,t)=>{const n=e.length-1,r=[];let a,i=2===t?"<svg>":"",o=O;for(let t=0;t<n;t++){const n=e[t];let s,l,c=-1,u=0;for(;u<n.length&&(o.lastIndex=u,l=o.exec(n),null!==l);)u=o.lastIndex,o===O?"!--"===l[1]?o=z:void 0!==l[1]?o=M:void 0!==l[2]?(U.test(l[2])&&(a=RegExp("</"+l[2],"g")),o=F):void 0!==l[3]&&(o=F):o===F?">"===l[0]?(o=null!=a?a:O,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?F:'"'===l[3]?W:V):o===W||o===V?o=F:o===z||o===M?o=O:(o=F,a=void 0);const d=o===F&&e[t+1].startsWith("/>")?" ":"";i+=o===O?n+T:c>=0?(r.push(s),n.slice(0,c)+I+n.slice(c)+P+d):n+P+(-2===c?(r.push(void 0),t):d)}return[Q(e,i+(e[n]||"<?>")+(2===t?"</svg>":"")),r]};class Y{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let a=0,i=0;const o=e.length-1,s=this.parts,[l,c]=J(e,t);if(this.el=Y.createElement(l,n),K.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(r=K.nextNode())&&s.length<o;){if(1===r.nodeType){if(r.hasAttributes()){const e=[];for(const t of r.getAttributeNames())if(t.endsWith(I)||t.startsWith(P)){const n=c[i++];if(e.push(t),void 0!==n){const e=r.getAttribute(n.toLowerCase()+I).split(P),t=/([.?@])?(.*)/.exec(n);s.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?ne:"?"===t[1]?ae:"@"===t[1]?ie:te})}else s.push({type:6,index:a})}for(const t of e)r.removeAttribute(t)}if(U.test(r.tagName)){const e=r.textContent.split(P),t=e.length-1;if(t>0){r.textContent=$?$.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],D()),K.nextNode(),s.push({type:2,index:++a});r.append(e[t],D())}}}else if(8===r.nodeType)if(r.data===A)s.push({type:2,index:a});else{let e=-1;for(;-1!==(e=r.data.indexOf(P,e+1));)s.push({type:7,index:a}),e+=P.length-1}a++}}static createElement(e,t){const n=N.createElement("template");return n.innerHTML=e,n}}function X(e,t,n=e,r){var a,i,o,s;if(t===q)return t;let l=void 0!==r?null===(a=n._$Co)||void 0===a?void 0:a[r]:n._$Cl;const c=R(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(i=null==l?void 0:l._$AO)||void 0===i||i.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,n,r)),void 0!==r?(null!==(o=(s=n)._$Co)&&void 0!==o?o:s._$Co=[])[r]=l:n._$Cl=l),void 0!==l&&(t=X(e,l._$AS(e,t.values),l,r)),t}class Z{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:n},parts:r}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:N).importNode(n,!0);K.currentNode=a;let i=K.nextNode(),o=0,s=0,l=r[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new ee(i,i.nextSibling,this,e):1===l.type?t=new l.ctor(i,l.name,l.strings,this,e):6===l.type&&(t=new oe(i,this,e)),this._$AV.push(t),l=r[++s]}o!==(null==l?void 0:l.index)&&(i=K.nextNode(),o++)}return K.currentNode=N,a}v(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class ee{constructor(e,t,n,r){var a;this.type=2,this._$AH=H,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cp=null===(a=null==r?void 0:r.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=X(this,e,t),R(e)?e===H||null==e||""===e?(this._$AH!==H&&this._$AR(),this._$AH=H):e!==this._$AH&&e!==q&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>j(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==H&&R(this._$AH)?this._$AA.nextSibling.data=e:this.$(N.createTextNode(e)),this._$AH=e}g(e){var t;const{values:n,_$litType$:r}=e,a="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=Y.createElement(Q(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.v(n);else{const e=new Z(a,this),t=e.u(this.options);e.v(n),this.$(t),this._$AH=e}}_$AC(e){let t=G.get(e.strings);return void 0===t&&G.set(e.strings,t=new Y(e)),t}T(e){j(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const a of e)r===t.length?t.push(n=new ee(this.k(D()),this.k(D()),this,this.options)):n=t[r],n._$AI(a),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class te{constructor(e,t,n,r,a){this.type=1,this._$AH=H,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=H}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){const a=this.strings;let i=!1;if(void 0===a)e=X(this,e,t,0),i=!R(e)||e!==this._$AH&&e!==q,i&&(this._$AH=e);else{const r=e;let o,s;for(e=a[0],o=0;o<a.length-1;o++)s=X(this,r[n+o],t,o),s===q&&(s=this._$AH[o]),i||(i=!R(s)||s!==this._$AH[o]),s===H?e=H:e!==H&&(e+=(null!=s?s:"")+a[o+1]),this._$AH[o]=s}i&&!r&&this.j(e)}j(e){e===H?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ne extends te{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===H?void 0:e}}const re=$?$.emptyScript:"";class ae extends te{constructor(){super(...arguments),this.type=4}j(e){e&&e!==H?this.element.setAttribute(this.name,re):this.element.removeAttribute(this.name)}}class ie extends te{constructor(e,t,n,r,a){super(e,t,n,r,a),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=X(this,e,t,0))&&void 0!==n?n:H)===q)return;const r=this._$AH,a=e===H&&r!==H||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==H&&(r===H||a);a&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class oe{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const se=x.litHtmlPolyfillSupport;null==se||se(Y,ee),(null!==(C=x.litHtmlVersions)&&void 0!==C?C:x.litHtmlVersions=[]).push("2.8.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var le,ce;class ue extends k{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var r,a;const i=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t;let o=i._$litPart$;if(void 0===o){const e=null!==(a=null==n?void 0:n.renderBefore)&&void 0!==a?a:null;i._$litPart$=o=new ee(t.insertBefore(D(),e),e,void 0,null!=n?n:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return q}}ue.finalized=!0,ue._$litElement$=!0,null===(le=globalThis.litElementHydrateSupport)||void 0===le||le.call(globalThis,{LitElement:ue});const de=globalThis.litElementPolyfillSupport;null==de||de({LitElement:ue}),(null!==(ce=globalThis.litElementVersions)&&void 0!==ce?ce:globalThis.litElementVersions=[]).push("3.3.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const pe=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:n,elements:r}=t;return{kind:n,elements:r,finisher(t){customElements.define(e,t)}}})(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,fe=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},ge=(e,t,n)=>{t.constructor.createProperty(n,e)};function he(e){return(t,n)=>void 0!==n?((e,t,n)=>{t.constructor.createProperty(n,e)})(e,t,n):fe(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function me(e){return he({...e,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ve;null===(ve=window.HTMLSlotElement)||void 0===ve||ve.prototype.assignedElements;const ye=e.getInstance();function be(e,t,n={}){try{n.source,ye.log("MetricsTracker",`${e}/${t} [${n.source||"unknown"}]`,Object.assign({category:"metrics",subsystem:"tracking"},n))}catch(e){ye.error("MetricsTracker",`Error tracking metrics: ${e}`,{category:"metrics",subsystem:"error"})}}function _e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var we,Se,ke={exports:{}},Ce={};function xe(){if(we)return Ce;we=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function h(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function m(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=h.prototype;var y=v.prototype=new m;y.constructor=v,f(y,h.prototype),y.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(t,n,r){var a,i={},o=null,s=null;if(null!=n)for(a in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(o=""+n.key),n)_.call(n,a)&&!S.hasOwnProperty(a)&&(i[a]=n[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(a in l=t.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:e,type:t,key:o,ref:s,props:i,_owner:w.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var x=/\/+/g;function $(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(n,r,a,i,o){var s=typeof n;"undefined"!==s&&"boolean"!==s||(n=null);var l=!1;if(null===n)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return o=o(l=n),n=""===i?"."+$(l,0):i,b(o)?(a="",null!=n&&(a=n.replace(x,"$&/")+"/"),E(o,r,a,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+n)),r.push(o)),1;if(l=0,i=""===i?".":i+":",b(n))for(var c=0;c<n.length;c++){var u=i+$(s=n[c],c);l+=E(s,r,a,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(s=n.next()).done;)l+=E(s=s.value,r,a,u=i+$(s,c++),o);else if("object"===s)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},T={transition:null},N={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:T,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Ce.Component=h,Ce.Fragment=n,Ce.Profiler=a,Ce.PureComponent=v,Ce.StrictMode=r,Ce.Suspense=l,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,Ce.act=D,Ce.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=f({},t.props),i=t.key,o=t.ref,s=t._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,s=w.current),void 0!==n.key&&(i=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)_.call(n,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:e,type:t.type,key:i,ref:o,props:a,_owner:s}},Ce.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},Ce.createElement=k,Ce.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(e){return{$$typeof:s,render:e}},Ce.isValidElement=C,Ce.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:P}},Ce.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},Ce.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},Ce.unstable_act=D,Ce.useCallback=function(e,t){return A.current.useCallback(e,t)},Ce.useContext=function(e){return A.current.useContext(e)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(e){return A.current.useDeferredValue(e)},Ce.useEffect=function(e,t){return A.current.useEffect(e,t)},Ce.useId=function(){return A.current.useId()},Ce.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},Ce.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},Ce.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},Ce.useMemo=function(e,t){return A.current.useMemo(e,t)},Ce.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},Ce.useRef=function(e){return A.current.useRef(e)},Ce.useState=function(e){return A.current.useState(e)},Ce.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},Ce.useTransition=function(){return A.current.useTransition()},Ce.version="18.3.1",Ce}function $e(){return Se||(Se=1,ke.exports=xe()),ke.exports}var Ee,Ie,Pe,Ae,Te,Ne=$e(),De=_e(Ne),Re={},je={exports:{}},Le={},Oe={exports:{}},ze={};function Me(){return Ie||(Ie=1,Oe.exports=(Ee||(Ee=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,p=3,f=!1,g=!1,h=!1,m="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function _(e){if(h=!1,b(e),!g)if(null!==n(l))g=!0,N(w);else{var t=n(c);null!==t&&D(_,t.startTime-e)}}function w(t,a){g=!1,h&&(h=!1,v(x),x=-1),f=!0;var i=p;try{for(b(a),d=n(l);null!==d&&(!(d.expirationTime>a)||t&&!I());){var o=d.callback;if("function"==typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=a);a=e.unstable_now(),"function"==typeof s?d.callback=s:d===n(l)&&r(l),b(a)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var m=n(c);null!==m&&D(_,m.startTime-a),u=!1}return u}finally{d=null,p=i,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,x=-1,$=5,E=-1;function I(){return!(e.unstable_now()-E<$)}function P(){if(null!==C){var t=e.unstable_now();E=t;var n=!0;try{n=C(!0,t)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"==typeof y)S=function(){y(P)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=P,S=function(){T.postMessage(null)}}else S=function(){m(P,0)};function N(e){C=e,k||(k=!0,S())}function D(t,n){x=m((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,N(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,a,i){var o=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?o+i:o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(h?(v(x),x=-1):h=!0,D(_,i-o))):(r.sortIndex=s,t(l,r),g||f||(g=!0,N(w))),r},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(ze)),ze)),Oe.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Fe(){if(Pe)return Le;Pe=1;var e=$e(),t=Me();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function i(e,t){o(e,t),o(e+"Capture",t)}function o(e,t){for(a[e]=t,e=0;e<t.length;e++)r.add(t[e])}var s=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function p(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function h(e){return e[1].toUpperCase()}function m(e,t,n,r){var a=f.hasOwnProperty(t)?f[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,h);f[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,h);f[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,h);f[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),T=Symbol.iterator;function N(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var D,R=Object.assign;function j(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var L=!1;function O(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function M(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case b:return"Portal";case S:return"Profiler";case w:return"StrictMode";case $:return"Suspense";case E:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return M(e(t))}catch(e){}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function B(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function H(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&m(e,"checked",t,!1)}function Q(e,t){K(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Y(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Y(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var X=Array.isArray;function Z(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ee(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function te(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(X(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ne(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var oe,se=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((oe=oe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function le(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ue=["Webkit","ms","Moz","O"];function de(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ce.hasOwnProperty(e)&&ce[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=de(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ce).forEach((function(e){ue.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ce[t]=ce[e]}))}));var fe=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function he(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var me=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,be=null,_e=null;function we(e){if(e=ba(e)){if("function"!=typeof ye)throw Error(n(280));var t=e.stateNode;t&&(t=wa(t),ye(e.stateNode,e.type,t))}}function Se(e){be?_e?_e.push(e):_e=[e]:be=e}function ke(){if(be){var e=be,t=_e;if(_e=be=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Ce(e,t){return e(t)}function xe(){}var Ee=!1;function Ie(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Ce(e,t,n)}finally{Ee=!1,(null!==be||null!==_e)&&(xe(),ke())}}function Ae(e,t){var r=e.stateNode;if(null===r)return null;var a=wa(r);if(null===a)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var Te=!1;if(s)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(e){Te=!1}function De(e,t,n,r,a,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Re=!1,je=null,Oe=!1,ze=null,Fe={onError:function(e){Re=!0,je=e}};function Ve(e,t,n,r,a,i,o,s,l){Re=!1,je=null,De.apply(Fe,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(We(e)!==e)throw Error(n(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,a=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(a=i.return)){r=a;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Be(i),e;if(o===a)return Be(i),t;o=o.sibling}throw Error(n(188))}if(r.return!==a.return)r=i,a=o;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,a=o;break}if(l===a){s=!0,a=i,r=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===r){s=!0,r=o,a=i;break}if(l===a){s=!0,a=o,r=i;break}l=l.sibling}if(!s)throw Error(n(189))}}if(r.alternate!==a)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Ke=t.unstable_cancelCallback,Qe=t.unstable_shouldYield,Je=t.unstable_requestPaint,Ye=t.unstable_now,Xe=t.unstable_getCurrentPriorityLevel,Ze=t.unstable_ImmediatePriority,et=t.unstable_UserBlockingPriority,tt=t.unstable_NormalPriority,nt=t.unstable_LowPriority,rt=t.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&!(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,St,kt,Ct,xt,$t=!1,Et=[],It=null,Pt=null,At=null,Tt=new Map,Nt=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ot(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void xt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);me=r,n.target.dispatchEvent(r),me=null,t.shift()}return!0}function Mt(e,t,n){zt(e)&&n.delete(t)}function Ft(){$t=!1,null!==It&&zt(It)&&(It=null),null!==Pt&&zt(Pt)&&(Pt=null),null!==At&&zt(At)&&(At=null),Tt.forEach(Mt),Nt.forEach(Mt)}function Vt(e,n){e.blockedOn===n&&(e.blockedOn=null,$t||($t=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ft)))}function Wt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Pt&&Vt(Pt,e),null!==At&&Vt(At,e),Tt.forEach(t),Nt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Dt.shift()}var Ut=v.ReactCurrentBatchConfig,Bt=!0;function qt(e,t,n,r){var a=bt,i=Ut.transition;Ut.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,Ut.transition=i}}function Ht(e,t,n,r){var a=bt,i=Ut.transition;Ut.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,Ut.transition=i}}function Gt(e,t,n,r){if(Bt){var a=Qt(e,t,n,r);if(null===a)Br(e,t,r,Kt,n),jt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Lt(It,e,t,n,r,a),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,r,a),!0;case"mouseover":return At=Lt(At,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Tt.set(i,Lt(Tt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Nt.set(i,Lt(Nt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&Br(e,t,r,Kt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Br(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=ya(e=ve(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=R({},cn,{view:0,detail:0}),pn=an(dn),fn=R({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),gn=an(fn),hn=an(R({},fn,{dataTransfer:0})),mn=an(R({},dn,{relatedTarget:0})),vn=an(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),_n=an(R({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function xn(){return Cn}var $n=R({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an($n),In=an(R({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(R({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),An=an(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=R({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=an(Tn),Dn=[9,13,27,32],Rn=s&&"CompositionEvent"in window,jn=null;s&&"documentMode"in document&&(jn=document.documentMode);var Ln=s&&"TextEvent"in window&&!jn,On=s&&(!Rn||jn&&8<jn&&11>=jn),zn=String.fromCharCode(32),Mn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Kn(e){zr(e,0)}function Qn(e){if(B(_a(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(s){var Xn;if(s){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,ve(e)),Ie(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ir(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!l.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(n,i);var o=ur(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=s&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Cr={};function xr(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}s&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var $r=xr("animationend"),Er=xr("animationiteration"),Ir=xr("animationstart"),Pr=xr("transitionend"),Ar=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Ar.set(e,t),i(t,[e])}for(var Dr=0;Dr<Tr.length;Dr++){var Rr=Tr[Dr];Nr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Nr($r,"onAnimationEnd"),Nr(Er,"onAnimationIteration"),Nr(Ir,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Pr,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Or(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,a,i,o,s,l,c){if(Ve.apply(this,arguments),Re){if(!Re)throw Error(n(198));var u=je;Re=!1,je=null,Oe||(Oe=!0,ze=u)}}(a,t,void 0,e),e.currentTarget=null}function zr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;Or(a,s,c),i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;Or(a,s,c),i=l}}}if(Oe)throw e=ze,Oe=!1,ze=null,e}function Mr(e,t){var n=t[ha];void 0===n&&(n=t[ha]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Vr]){e[Vr]=!0,r.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Fr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Jt(t)){case 1:var a=qt;break;case 4:a=Ht;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,a){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=i,a=ve(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case $r:case Er:case Ir:l=vn;break;case Pr:l=An;break;case"scroll":l=pn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=!!(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var f,g=r;null!==g;){var h=(f=g).stateNode;if(5===f.tag&&null!==h&&(f=h,null!==p&&(null!=(h=Ae(g,p))&&u.push(qr(g,h,f)))),d)break;g=g.return}0<u.length&&(s=new l(s,c,null,n,a),o.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===me||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ga])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,h="onMouseLeave",p="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,h="onPointerLeave",p="onPointerEnter",g="pointer"),d=null==l?s:_a(l),f=null==c?s:_a(c),(s=new u(h,g+"leave",l,n,a)).target=d,s.relatedTarget=f,h=null,ya(a)===r&&((u=new u(p,g+"enter",c,n,a)).target=f,u.relatedTarget=d,h=u),d=h,l&&c)e:{for(p=c,g=0,f=u=l;f;f=Gr(f))g++;for(f=0,h=p;h;h=Gr(h))f++;for(;0<g-f;)u=Gr(u),g--;for(;0<f-g;)p=Gr(p),f--;for(;g--;){if(u===p||null!==p&&u===p.alternate)break e;u=Gr(u),p=Gr(p)}u=null}else u=null;null!==l&&Kr(o,s,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(s=r?_a(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Jn;else if(Bn(s))if(Yn)m=or;else{m=ar;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?qn(o,m,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&Y(s,"number",s.value)),v=r?_a(r):window,e){case"focusin":(Bn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,a);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":_r(o,n,a)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Wn=!0)),0<(v=Hr(r,b)).length&&(b=new _n(b,e,null,n,a),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Mn=!0,zn);case"textInput":return(e=t.data)===zn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Rn&&Fn(e,t)?(e=en(),Zt=Xt=Yt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new _n("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}zr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ae(e,n))&&r.unshift(qr(e,i,a)),null!=(i=Ae(e,t))&&r.push(qr(e,i,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Ae(n,i))&&o.unshift(qr(n,l,s)):a||null!=(l=Ae(n,i))&&o.push(qr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Xr(e,t,r){if(t=Yr(t),Yr(e)!==t&&r)throw Error(n(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,ia="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),pa="__reactFiber$"+da,fa="__reactProps$"+da,ga="__reactContainer$"+da,ha="__reactEvents$"+da,ma="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[pa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ga]||n[pa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[pa])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[pa]||e[ga])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _a(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function wa(e){return e[fa]||null}var Sa=[],ka=-1;function Ca(e){return{current:e}}function xa(e){0>ka||(e.current=Sa[ka],Sa[ka]=null,ka--)}function $a(e,t){ka++,Sa[ka]=e.current,e.current=t}var Ea={},Ia=Ca(Ea),Pa=Ca(!1),Aa=Ea;function Ta(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Na(e){return null!=(e=e.childContextTypes)}function Da(){xa(Pa),xa(Ia)}function Ra(e,t,r){if(Ia.current!==Ea)throw Error(n(168));$a(Ia,t),$a(Pa,r)}function ja(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,"function"!=typeof a.getChildContext)return r;for(var i in a=a.getChildContext())if(!(i in t))throw Error(n(108,F(e)||"Unknown",i));return R({},r,a)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Aa=Ia.current,$a(Ia,e),$a(Pa,Pa.current),!0}function Oa(e,t,r){var a=e.stateNode;if(!a)throw Error(n(169));r?(e=ja(e,t,Aa),a.__reactInternalMemoizedMergedChildContext=e,xa(Pa),xa(Ia),$a(Ia,e)):xa(Pa),$a(Pa,r)}var za=null,Ma=!1,Fa=!1;function Va(e){null===za?za=[e]:za.push(e)}function Wa(){if(!Fa&&null!==za){Fa=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Ma=!1}catch(t){throw null!==za&&(za=za.slice(e+1)),Ge(Ze,Wa),t}finally{bt=t,Fa=!1}}return null}var Ua=[],Ba=0,qa=null,Ha=0,Ga=[],Ka=0,Qa=null,Ja=1,Ya="";function Xa(e,t){Ua[Ba++]=Ha,Ua[Ba++]=qa,qa=e,Ha=t}function Za(e,t,n){Ga[Ka++]=Ja,Ga[Ka++]=Ya,Ga[Ka++]=Qa,Qa=e;var r=Ja;e=Ya;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ja=1<<32-ot(t)+a|n<<a|r,Ya=i+e}else Ja=1<<i|n<<a|r,Ya=e}function ei(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ti(e){for(;e===qa;)qa=Ua[--Ba],Ua[Ba]=null,Ha=Ua[--Ba],Ua[Ba]=null;for(;e===Qa;)Qa=Ga[--Ka],Ga[Ka]=null,Ya=Ga[--Ka],Ga[Ka]=null,Ja=Ga[--Ka],Ga[Ka]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:Ja,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return!(!(1&e.mode)||128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var r=t;if(!si(e,t)){if(li(e))throw Error(n(418));t=ca(r.nextSibling);var a=ni;t&&si(e,t)?oi(a,r):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(n(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw pi(),Error(n(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ri;e;)e=ca(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function gi(e){null===ii?ii=[e]:ii.push(e)}var hi=v.ReactCurrentBatchConfig;function mi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var a=r.stateNode}if(!a)throw Error(n(147,e));var i=a,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===P&&yi(a)===t.type)?((r=i(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=jc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case y:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case b:return(t=zc(t,e.mode,n)).return=e,t;case P:return p(e,(0,t._init)(t._payload),n)}if(X(t)||N(t))return(t=jc(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===a?c(e,t,n,r):null;case b:return n.key===a?u(e,t,n,r):null;case P:return f(e,t,(a=n._init)(n._payload),r)}if(X(n)||N(n))return null!==a?null:d(e,t,n,r,null);vi(e,n)}return null}function g(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case y:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return g(e,t,n,(0,r._init)(r._payload),a)}if(X(r)||N(r))return d(t,e=e.get(n)||null,r,a,null);vi(t,r)}return null}function h(n,i,s,l){for(var c=null,u=null,d=i,h=i=0,m=null;null!==d&&h<s.length;h++){d.index>h?(m=d,d=null):m=d.sibling;var v=f(n,d,s[h],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(n,d),i=o(v,i,h),null===u?c=v:u.sibling=v,u=v,d=m}if(h===s.length)return r(n,d),ai&&Xa(n,h),c;if(null===d){for(;h<s.length;h++)null!==(d=p(n,s[h],l))&&(i=o(d,i,h),null===u?c=d:u.sibling=d,u=d);return ai&&Xa(n,h),c}for(d=a(n,d);h<s.length;h++)null!==(m=g(d,n,h,s[h],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?h:m.key),i=o(m,i,h),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(n,e)})),ai&&Xa(n,h),c}function m(i,s,l,c){var u=N(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var d=u=null,h=s,m=s=0,v=null,y=l.next();null!==h&&!y.done;m++,y=l.next()){h.index>m?(v=h,h=null):v=h.sibling;var b=f(i,h,y.value,c);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&t(i,h),s=o(b,s,m),null===d?u=b:d.sibling=b,d=b,h=v}if(y.done)return r(i,h),ai&&Xa(i,m),u;if(null===h){for(;!y.done;m++,y=l.next())null!==(y=p(i,y.value,c))&&(s=o(y,s,m),null===d?u=y:d.sibling=y,d=y);return ai&&Xa(i,m),u}for(h=a(i,h);!y.done;m++,y=l.next())null!==(y=g(h,i,m,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),s=o(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(i,e)})),ai&&Xa(i,m),u}return function e(n,a,o,l){if("object"==typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case y:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===_){if(7===u.tag){r(n,u.sibling),(a=i(u,o.props.children)).return=n,n=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===P&&yi(c)===u.type){r(n,u.sibling),(a=i(u,o.props)).ref=mi(n,u,o),a.return=n,n=a;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===_?((a=jc(o.props.children,n.mode,l,o.key)).return=n,n=a):((l=Rc(o.type,o.key,o.props,null,n.mode,l)).ref=mi(n,a,o),l.return=n,n=l)}return s(n);case b:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){r(n,a.sibling),(a=i(a,o.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=zc(o,n.mode,l)).return=n,n=a}return s(n);case P:return e(n,a,(u=o._init)(o._payload),l)}if(X(o))return h(n,a,o,l);if(N(o))return m(n,a,o,l);vi(n,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(r(n,a.sibling),(a=i(a,o)).return=n,n=a):(r(n,a),(a=Oc(o,n.mode,l)).return=n,n=a),s(n)):r(n,a)}}var _i=bi(!0),wi=bi(!1),Si=Ca(null),ki=null,Ci=null,xi=null;function $i(){xi=Ci=ki=null}function Ei(e){var t=Si.current;xa(Si),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){ki=e,xi=Ci=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ci){if(null===ki)throw Error(n(308));Ci=e,ki.dependencies={lanes:0,firstContext:e}}else Ci=Ci.next=e;return t}var Ti=null;function Ni(e){null===Ti?Ti=[e]:Ti.push(e)}function Di(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ni(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ji=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Il){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ri(e,n)}return null===(a=r.interleaved)?(t.next=t,Ni(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ri(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,r){var a=e.updateQueue;ji=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(o=0,u=c=l=null,s=i;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,h=s;switch(p=t,f=n,h.tag){case 1:if("function"==typeof(g=h.payload)){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(p="function"==typeof(g=h.payload)?g.call(f,d,p):g))break e;d=R({},d,p);break e;case 2:ji=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=d}}function Ui(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],i=a.callback;if(null!==i){if(a.callback=null,a=r,"function"!=typeof i)throw Error(n(191,i));i.call(a)}}}var Bi={},qi=Ca(Bi),Hi=Ca(Bi),Gi=Ca(Bi);function Ki(e){if(e===Bi)throw Error(n(174));return e}function Qi(e,t){switch($a(Gi,t),$a(Hi,e),$a(qi,Bi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xa(qi),$a(qi,t)}function Ji(){xa(qi),xa(Hi),xa(Gi)}function Yi(e){Ki(Gi.current);var t=Ki(qi.current),n=ie(t,e.type);t!==n&&($a(Hi,e),$a(qi,n))}function Xi(e){Hi.current===e&&(xa(qi),xa(Hi))}var Zi=Ca(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=v.ReactCurrentDispatcher,ao=v.ReactCurrentBatchConfig,io=0,oo=null,so=null,lo=null,co=!1,uo=!1,po=0,fo=0;function go(){throw Error(n(321))}function ho(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function mo(e,t,r,a,i,o){if(io=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:es,e=r(a,i),uo){o=0;do{if(uo=!1,po=0,25<=o)throw Error(n(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=r(a,i)}while(uo)}if(ro.current=Xo,t=null!==so&&null!==so.next,io=0,lo=so=oo=null,co=!1,t)throw Error(n(300));return e}function vo(){var e=0!==po;return po=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(n(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function _o(e,t){return"function"==typeof t?t(e):t}function wo(e){var t=bo(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var a=so,i=a.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}a.baseQueue=i=o,r.pending=null}if(null!==i){o=i.next,a=a.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((io&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,s=a):c=c.next=p,oo.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==o);null===c?s=a:c.next=l,sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=c,r.lastRenderedState=a}if(null!==(e=r.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function So(e){var t=bo(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var a=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,a]}function ko(){}function Co(e,t){var r=oo,a=bo(),i=t(),o=!sr(a.memoizedState,i);if(o&&(a.memoizedState=i,bs=!0),a=a.queue,Lo(Eo.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(r.flags|=2048,To(9,$o.bind(null,r,a,i,t),void 0,null),null===Pl)throw Error(n(349));30&io||xo(r,t,i)}return i}function xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $o(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Po(e)}function Eo(e,t,n){return n((function(){Io(t)&&Po(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Po(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ao(e){var t=yo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function To(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function No(){return bo().memoizedState}function Do(e,t,n,r){var a=yo();oo.flags|=e,a.memoizedState=To(1|t,n,void 0,void 0===r?null:r)}function Ro(e,t,n,r){var a=bo();r=void 0===r?null:r;var i=void 0;if(null!==so){var o=so.memoizedState;if(i=o.destroy,null!==r&&ho(r,o.deps))return void(a.memoizedState=To(t,n,i,r))}oo.flags|=e,a.memoizedState=To(1|t,n,i,r)}function jo(e,t){return Do(8390656,8,e,t)}function Lo(e,t){return Ro(2048,8,e,t)}function Oo(e,t){return Ro(4,2,e,t)}function zo(e,t){return Ro(4,4,e,t)}function Mo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fo(e,t,n){return n=null!=n?n.concat([e]):null,Ro(4,4,Mo.bind(null,t,e),n)}function Vo(){}function Wo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ho(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Uo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ho(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bo(e,t,n){return 21&io?(sr(n,t)||(n=ht(),oo.lanes|=n,Ll|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n)}function qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{bt=n,ao.transition=r}}function Ho(){return bo().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Jo(t,n);else if(null!==(n=Di(e,t,n,r))){nc(n,e,r,ec()),Yo(n,t,r)}}function Ko(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Jo(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(a.next=a,Ni(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(e){}null!==(n=Di(e,t,a,r))&&(nc(n,e,r,a=ec()),Yo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:Ai,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},Zo={readContext:Ai,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Do(4194308,4,Mo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ao,useDebugValue:Vo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=qo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=oo,i=yo();if(ai){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Pl)throw Error(n(349));30&io||xo(a,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,jo(Eo.bind(null,a,o,e),[e]),a.flags|=2048,To(9,$o.bind(null,a,o,r,t),void 0,null),r},useId:function(){var e=yo(),t=Pl.identifierPrefix;if(ai){var n=Ya;t=":"+t+"R"+(n=(Ja&~(1<<32-ot(Ja)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ai,useCallback:Wo,useContext:Ai,useEffect:Lo,useImperativeHandle:Fo,useInsertionEffect:Oo,useLayoutEffect:zo,useMemo:Uo,useReducer:wo,useRef:No,useState:function(){return wo(_o)},useDebugValue:Vo,useDeferredValue:function(e){return Bo(bo(),so.memoizedState,e)},useTransition:function(){return[wo(_o)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Co,useId:Ho,unstable_isNewReconciler:!1},ts={readContext:Ai,useCallback:Wo,useContext:Ai,useEffect:Lo,useImperativeHandle:Fo,useInsertionEffect:Oo,useLayoutEffect:zo,useMemo:Uo,useReducer:So,useRef:No,useState:function(){return So(_o)},useDebugValue:Vo,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Bo(t,so.memoizedState,e)},useTransition:function(){return[So(_o)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Co,useId:Ho,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=zi(r,a);i.payload=t,null!=n&&(i.callback=n),null!==(t=Mi(e,i,a))&&(nc(t,e,a,r),Fi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=zi(r,a);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=Mi(e,i,a))&&(nc(t,e,a,r),Fi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=zi(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=Mi(e,a,r))&&(nc(t,e,r,n),Fi(t,e,r))}};function is(e,t,n,r,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function os(e,t,n){var r=!1,a=Ea,i=t.contextType;return"object"==typeof i&&null!==i?i=Ai(i):(a=Na(t)?Aa:Ia.current,i=(r=null!=(r=t.contextTypes))?Ta(e,a):Ea),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Li(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=Ai(i):(i=Na(t)?Aa:Ia.current,a.context=Ta(e,i)),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&as.enqueueReplaceState(a,a.state,null),Wi(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,ql=r),ds(0,t)},n}function gs(e,t,n){(n=zi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,Mi(n,t,1))),n.lanes|=1),e)}var ys=v.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?wi(t,null,n,r):_i(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var i=t.ref;return Pi(t,a),r=mo(e,t,n,r,i,a),n=vo(),null===e||bs?(ai&&n&&ei(t),t.flags|=1,_s(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!=typeof i||Nc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ks(e,t,i,r,a))}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Bs(e,t,a)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=i,!(e.lanes&a))return t.lanes=e.lanes,Bs(e,t,a);131072&e.flags&&(bs=!0)}}return $s(e,t,n,r,a)}function Cs(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$a(Dl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,$a(Dl,Nl),Nl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$a(Dl,Nl),Nl|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,$a(Dl,Nl),Nl|=r;return _s(e,t,a,n),t.child}function xs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $s(e,t,n,r,a){var i=Na(n)?Aa:Ia.current;return i=Ta(t,i),Pi(t,a),n=mo(e,t,n,r,i,a),r=vo(),null===e||bs?(ai&&r&&ei(t),t.flags|=1,_s(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a))}function Es(e,t,n,r,a){if(Na(n)){var i=!0;La(t)}else i=!1;if(Pi(t,a),null===t.stateNode)Us(e,t),os(t,n,r),ls(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ai(c):c=Ta(t,c=Na(n)?Aa:Ia.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,o,r,c),ji=!1;var p=t.memoizedState;o.state=p,Wi(t,r,o,a),l=t.memoizedState,s!==r||p!==l||Pa.current||ji?("function"==typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=ji||is(t,n,s,r,p,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,d=t.pendingProps,p=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ai(l):l=Ta(t,l=Na(n)?Aa:Ia.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||p!==l)&&ss(t,o,r,l),ji=!1,p=t.memoizedState,o.state=p,Wi(t,r,o,a);var g=t.memoizedState;s!==d||p!==g||Pa.current||ji?("function"==typeof f&&(rs(t,n,f,r),g=t.memoizedState),(c=ji||is(t,n,c,r,p,g,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,g,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,g,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,i,a)}function Is(e,t,n,r,a,i){xs(e,t);var o=!!(128&t.flags);if(!r&&!o)return a&&Oa(t,n,!1),Bs(e,t,i);r=t.stateNode,ys.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,s,i)):_s(e,t,s,i),t.memoizedState=r.state,a&&Oa(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Qi(e,t.containerInfo)}function As(e,t,n,r,a){return fi(),gi(a),t.flags|=256,_s(e,t,n,r),t.child}var Ts,Ns,Ds,Rs,js={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,r){var a,i=t.pendingProps,o=Zi.current,s=!1,l=!!(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&!!(2&o)),a?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),$a(Zi,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},1&i||null===s?s=Lc(l,i,0,null):(s.childLanes=0,s.pendingProps=l),e=jc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(r),t.memoizedState=js,e):zs(t,l));if(null!==(o=e.memoizedState)&&null!==(a=o.dehydrated))return function(e,t,r,a,i,o,s){if(r)return 256&t.flags?(t.flags&=-257,Ms(e,t,s,a=us(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=a.fallback,i=t.mode,a=Lc({mode:"visible",children:a.children},i,0,null),(o=jc(o,i,s,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,1&t.mode&&_i(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=js,o);if(!(1&t.mode))return Ms(e,t,s,null);if("$!"===i.data){if(a=i.nextSibling&&i.nextSibling.dataset)var l=a.dgst;return a=l,Ms(e,t,s,a=us(o=Error(n(419)),a,void 0))}if(l=!!(s&e.childLanes),bs||l){if(null!==(a=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(a.suspendedLanes|s)?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ri(e,i),nc(a,e,i,-1))}return hc(),Ms(e,t,s,a=us(Error(n(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ri=ca(i.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Ga[Ka++]=Ja,Ga[Ka++]=Ya,Ga[Ka++]=Qa,Ja=e.id,Ya=e.overflow,Qa=t),t=zs(t,a.children),t.flags|=4096,t)}(e,t,l,i,a,o,r);if(s){s=i.fallback,l=t.mode,a=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 1&l||t.child===o?(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null),null!==a?s=Dc(a,s):(s=jc(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=js,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function zs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ms(e,t,n,r){return null!==r&&gi(r),_i(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function Vs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(_s(e,t,r.children,n),2&(r=Zi.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($a(Zi,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Vs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===eo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Us(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,!(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Dc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Dc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,r){var i=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Na(t.type)&&Da(),Hs(t),null;case 3:return i=t.stateNode,Ji(),xa(Pa),xa(Ia),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Ns(e,t),Hs(t),null;case 5:Xi(t);var o=Ki(Gi.current);if(r=t.type,null!==e&&null!=t.stateNode)Ds(e,t,r,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(n(166));return Hs(t),null}if(e=Ki(qi.current),di(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[pa]=t,i[fa]=s,e=!!(1&t.mode),r){case"dialog":Mr("cancel",i),Mr("close",i);break;case"iframe":case"object":case"embed":Mr("load",i);break;case"video":case"audio":for(o=0;o<jr.length;o++)Mr(jr[o],i);break;case"source":Mr("error",i);break;case"img":case"image":case"link":Mr("error",i),Mr("load",i);break;case"details":Mr("toggle",i);break;case"input":G(i,s),Mr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Mr("invalid",i);break;case"textarea":te(i,s),Mr("invalid",i)}for(var l in ge(r,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(i.textContent,c,e),o=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(i.textContent,c,e),o=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Mr("scroll",i)}switch(r){case"input":U(i),J(i,s,!0);break;case"textarea":U(i),re(i);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(i.onclick=Zr)}i=o,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),"select"===r&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[pa]=t,e[fa]=i,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(l=he(r,i),r){case"dialog":Mr("cancel",e),Mr("close",e),o=i;break;case"iframe":case"object":case"embed":Mr("load",e),o=i;break;case"video":case"audio":for(o=0;o<jr.length;o++)Mr(jr[o],e);o=i;break;case"source":Mr("error",e),o=i;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),o=i;break;case"details":Mr("toggle",e),o=i;break;case"input":G(e,i),o=H(e,i),Mr("invalid",e);break;case"option":default:o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=R({},i,{value:void 0}),Mr("invalid",e);break;case"textarea":te(e,i),o=ee(e,i),Mr("invalid",e)}for(s in ge(r,o),c=o)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?pe(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&se(e,u):"children"===s?"string"==typeof u?("textarea"!==r||""!==u)&&le(e,u):"number"==typeof u&&le(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Mr("scroll",e):null!=u&&m(e,s,u,l))}switch(r){case"input":U(e),J(e,i,!1);break;case"textarea":U(e),re(e);break;case"option":null!=i.value&&e.setAttribute("value",""+V(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?Z(e,!!i.multiple,s,!1):null!=i.defaultValue&&Z(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Zr)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(n(166));if(r=Ki(Gi.current),Ki(qi.current),di(t)){if(i=t.stateNode,r=t.memoizedProps,i[pa]=t,(s=i.nodeValue!==r)&&null!==(e=ni))switch(e.tag){case 3:Xr(i.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(i.nodeValue,r,!!(1&e.mode))}s&&(t.flags|=4)}else(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[pa]=t,t.stateNode=i}return Hs(t),null;case 13:if(xa(Zi),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&1&t.mode&&!(128&t.flags))pi(),fi(),t.flags|=98560,s=!1;else if(s=di(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(n(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(n(317));s[pa]=t}else fi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),s=!1}else null!==ii&&(oc(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Zi.current?0===Rl&&(Rl=3):hc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return Ji(),Ns(e,t),null===e&&Wr(t.stateNode.containerInfo),Hs(t),null;case 10:return Ei(t.type._context),Hs(t),null;case 19:if(xa(Zi),null===(s=t.memoizedState))return Hs(t),null;if(i=!!(128&t.flags),null===(l=s.rendering))if(i)qs(s,!1);else{if(0!==Rl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,qs(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;null!==r;)e=i,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $a(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Wl&&(t.flags|=128,i=!0,qs(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qs(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ai)return Hs(t),null}else 2*Ye()-s.renderingStartTime>Wl&&1073741824!==r&&(t.flags|=128,i=!0,qs(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=s.last)?r.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,r=Zi.current,$a(Zi,i?1&r|2:1&r),t):(Hs(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&1&t.mode?!!(1073741824&Nl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Ks(e,t){switch(ti(t),t.tag){case 1:return Na(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),xa(Pa),xa(Ia),no(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(xa(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xa(Zi),null;case 4:return Ji(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ki(qi.current);var o,s=null;switch(n){case"input":i=H(e,i),r=H(e,r),s=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),s=[];break;case"textarea":i=ee(e,i),r=ee(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in ge(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Mr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Js=!1,Ys="function"==typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Cc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Cc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&el(t,n,i)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[fa],delete t[ha],delete t[ma],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(e){}switch(n.tag){case 5:Js||Zs(n,t);case 6:var r=ul,a=dl;ul=null,pl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Wt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,pl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(2&i||4&i)&&el(n,t,o),a=a.next}while(a!==r)}pl(e,t,n);break;case 1:if(!Js&&(Zs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Cc(n,t,e)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,pl(e,t,n),Js=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hl(e,t){var r=t.deletions;if(null!==r)for(var a=0;a<r.length;a++){var i=r[a];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(n(160));fl(o,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Cc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hl(t,e),vl(e),4&a){try{nl(3,e,e.return),rl(3,e)}catch(t){Cc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Cc(e,e.return,t)}}break;case 1:hl(t,e),vl(e),512&a&&null!==r&&Zs(r,r.return);break;case 5:if(hl(t,e),vl(e),512&a&&null!==r&&Zs(r,r.return),32&e.flags){var i=e.stateNode;try{le(i,"")}catch(t){Cc(e,e.return,t)}}if(4&a&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&K(i,o),he(l,s);var u=he(l,o);for(s=0;s<c.length;s+=2){var d=c[s],p=c[s+1];"style"===d?pe(i,p):"dangerouslySetInnerHTML"===d?se(i,p):"children"===d?le(i,p):m(i,d,p,u)}switch(l){case"input":Q(i,o);break;case"textarea":ne(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?Z(i,!!o.multiple,g,!1):f!==!!o.multiple&&(null!=o.defaultValue?Z(i,!!o.multiple,o.defaultValue,!0):Z(i,!!o.multiple,o.multiple?[]:"",!1))}i[fa]=o}catch(t){Cc(e,e.return,t)}}break;case 6:if(hl(t,e),vl(e),4&a){if(null===e.stateNode)throw Error(n(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){Cc(e,e.return,t)}}break;case 3:if(hl(t,e),vl(e),4&a&&null!==r&&r.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(t){Cc(e,e.return,t)}break;case 4:default:hl(t,e),vl(e);break;case 13:hl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ye())),4&a&&gl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Js=(u=Js)||d,hl(t,e),Js=u):hl(t,e),vl(e),8192&a){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Xs=e,d=e.child;null!==d;){for(p=Xs=d;null!==Xs;){switch(g=(f=Xs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var h=f.stateNode;if("function"==typeof h.componentWillUnmount){a=f,r=f.return;try{t=a,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(e){Cc(a,r,e)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){wl(p);continue}}null!==g?(g.return=f,Xs=g):wl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,s=null!=(c=p.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=de("display",s))}catch(t){Cc(e,e.return,t)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(t){Cc(e,e.return,t)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:hl(t,e),vl(e),4&a&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var a=r;break e}r=r.return}throw Error(n(160))}switch(a.tag){case 5:var i=a.stateNode;32&a.flags&&(le(i,""),a.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var o=a.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(n(161))}}catch(t){Cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xs=e,bl(e)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Xs;){var a=Xs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Qs;if(!o){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=o,(Js=l)&&!c)for(Xs=a;null!==Xs;)l=(o=Xs).child,22===o.tag&&null!==o.memoizedState?Sl(a):null!==l?(l.return=o,Xs=l):Sl(a);for(;null!==i;)Xs=i,bl(i),i=i.sibling;Xs=a,Qs=s,Js=c}_l(e)}else 8772&a.subtreeFlags&&null!==i?(i.return=a,Xs=i):_l(e)}}function _l(e){for(;null!==Xs;){var t=Xs;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Js||rl(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Js)if(null===r)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ns(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ui(t,o,a);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ui(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Wt(p)}}}break;default:throw Error(n(163))}Js||512&t.flags&&al(t)}catch(e){Cc(t,t.return,e)}}if(t===e){Xs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xs=r;break}Xs=t.return}}function wl(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function Sl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Cc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(e){Cc(t,a,e)}}var i=t.return;try{al(t)}catch(e){Cc(t,i,e)}break;case 5:var o=t.return;try{al(t)}catch(e){Cc(t,o,e)}}}catch(e){Cc(t,t.return,e)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var kl,Cl=Math.ceil,xl=v.ReactCurrentDispatcher,$l=v.ReactCurrentOwner,El=v.ReactCurrentBatchConfig,Il=0,Pl=null,Al=null,Tl=0,Nl=0,Dl=Ca(0),Rl=0,jl=null,Ll=0,Ol=0,zl=0,Ml=null,Fl=null,Vl=0,Wl=1/0,Ul=null,Bl=!1,ql=null,Hl=null,Gl=!1,Kl=null,Ql=0,Jl=0,Yl=null,Xl=-1,Zl=0;function ec(){return 6&Il?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 1&e.mode?2&Il&&0!==Tl?Tl&-Tl:null!==hi.transition?(0===Zl&&(Zl=ht()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type):1}function nc(e,t,r,a){if(50<Jl)throw Jl=0,Yl=null,Error(n(185));vt(e,r,a),2&Il&&e===Pl||(e===Pl&&(!(2&Il)&&(Ol|=r),4===Rl&&sc(e,Tl)),rc(e,a),1===r&&0===Il&&!(1&t.mode)&&(Wl=Ye()+500,Ma&&Wa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=a[o];-1===l?s&n&&!(s&r)||(a[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=pt(e,e===Pl?Tl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ma=!0,Va(e)}(lc.bind(null,e)):Va(lc.bind(null,e)),oa((function(){!(6&Il)&&Wa()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xl=-1,Zl=0,6&Il)throw Error(n(327));var r=e.callbackNode;if(Sc()&&e.callbackNode!==r)return null;var a=pt(e,e===Pl?Tl:0);if(0===a)return null;if(30&a||a&e.expiredLanes||t)t=mc(e,a);else{t=a;var i=Il;Il|=2;var o=gc();for(Pl===e&&Tl===t||(Ul=null,Wl=Ye()+500,pc(e,t));;)try{yc();break}catch(t){fc(e,t)}$i(),xl.current=o,Il=i,null!==Al?t=0:(Pl=null,Tl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=gt(e))&&(a=i,t=ic(e,i))),1===t)throw r=jl,pc(e,0),sc(e,a),rc(e,Ye()),r;if(6===t)sc(e,a);else{if(i=e.current.alternate,!(30&a||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=mc(e,a),2===t&&(o=gt(e),0!==o&&(a=o,t=ic(e,o))),1!==t)))throw r=jl,pc(e,0),sc(e,a),rc(e,Ye()),r;switch(e.finishedWork=i,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:case 5:wc(e,Fl,Ul);break;case 3:if(sc(e,a),(130023424&a)===a&&10<(t=Vl+500-Ye())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ra(wc.bind(null,e,Fl,Ul),t);break}wc(e,Fl,Ul);break;case 4:if(sc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,i=-1;0<a;){var s=31-ot(a);o=1<<s,(s=t[s])>i&&(i=s),a&=~o}if(a=i,10<(a=(120>(a=Ye()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Cl(a/1960))-a)){e.timeoutHandle=ra(wc.bind(null,e,Fl,Ul),a);break}wc(e,Fl,Ul);break;default:throw Error(n(329))}}}return rc(e,Ye()),e.callbackNode===r?ac.bind(null,e):null}function ic(e,t){var n=Ml;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Fl,Fl=n,null!==t&&oc(t)),e}function oc(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function sc(e,t){for(t&=~zl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Il)throw Error(n(327));Sc();var t=pt(e,0);if(!(1&t))return rc(e,Ye()),null;var r=mc(e,t);if(0!==e.tag&&2===r){var a=gt(e);0!==a&&(t=a,r=ic(e,a))}if(1===r)throw r=jl,pc(e,0),sc(e,t),rc(e,Ye()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Ul),rc(e,Ye()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Wl=Ye()+500,Ma&&Wa())}}function uc(e){null!==Kl&&0===Kl.tag&&!(6&Il)&&Sc();var t=Il;Il|=1;var n=El.transition,r=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=r,El.transition=n,!(6&(Il=t))&&Wa()}}function dc(){Nl=Dl.current,xa(Dl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Da();break;case 3:Ji(),xa(Pa),xa(Ia),no();break;case 5:Xi(r);break;case 4:Ji();break;case 13:case 19:xa(Zi);break;case 10:Ei(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Al=e=Dc(e.current,null),Tl=Nl=t,Rl=0,jl=null,zl=Ol=Ll=0,Fl=Ml=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ti=null}return e}function fc(e,t){for(;;){var r=Al;try{if($i(),ro.current=Xo,co){for(var a=oo.memoizedState;null!==a;){var i=a.queue;null!==i&&(i.pending=null),a=a.next}co=!1}if(io=0,lo=so=oo=null,uo=!1,po=0,$l.current=null,null===r||null===r.return){Rl=1,jl=t,Al=null;break}e:{var o=e,s=r.return,l=r,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,p=d.tag;if(!(1&d.mode||0!==p&&11!==p&&15!==p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ms(s);if(null!==g){g.flags&=-257,vs(g,s,l,0,t),1&g.mode&&hs(o,u,t),c=u;var h=(t=g).updateQueue;if(null===h){var m=new Set;m.add(c),t.updateQueue=m}else h.add(c);break e}if(!(1&t)){hs(o,u,t),hc();break e}c=Error(n(426))}else if(ai&&1&l.mode){var v=ms(s);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),gi(cs(c,l));break e}}o=c=cs(c,l),4!==Rl&&(Rl=2),null===Ml?Ml=[o]:Ml.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vi(o,fs(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(!(128&o.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Hl&&Hl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Vi(o,gs(o,l,t));break e}}o=o.return}while(null!==o)}_c(r)}catch(e){t=e,Al===r&&null!==r&&(Al=r=r.return);continue}break}}function gc(){var e=xl.current;return xl.current=Xo,null===e?Xo:e}function hc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||!(268435455&Ll)&&!(268435455&Ol)||sc(Pl,Tl)}function mc(e,t){var r=Il;Il|=2;var a=gc();for(Pl===e&&Tl===t||(Ul=null,pc(e,t));;)try{vc();break}catch(t){fc(e,t)}if($i(),Il=r,xl.current=a,null!==Al)throw Error(n(261));return Pl=null,Tl=0,Rl}function vc(){for(;null!==Al;)bc(Al)}function yc(){for(;null!==Al&&!Qe();)bc(Al)}function bc(e){var t=kl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?_c(e):Al=t,$l.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Rl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Gs(n,t,Nl)))return void(Al=n);if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,r){var a=bt,i=El.transition;try{El.transition=null,bt=1,function(e,t,r,a){do{Sc()}while(null!==Kl);if(6&Il)throw Error(n(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Pl&&(Al=Pl=null,Tl=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Gl||(Gl=!0,Pc(tt,(function(){return Sc(),null}))),o=!!(15990&r.flags),!!(15990&r.subtreeFlags)||o){o=El.transition,El.transition=null;var s=bt;bt=1;var l=Il;Il|=4,$l.current=null,function(e,t){if(ea=Bt,fr(e=pr())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(a&&0!==a.rangeCount){r=a.anchorNode;var i=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{r.nodeType,o.nodeType}catch(e){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var g;p!==r||0!==i&&3!==p.nodeType||(l=s+i),p!==o||0!==a&&3!==p.nodeType||(c=s+a),3===p.nodeType&&(s+=p.nodeValue.length),null!==(g=p.firstChild);)f=p,p=g;for(;;){if(p===e)break t;if(f===r&&++u===i&&(l=s),f===o&&++d===a&&(c=s),null!==(g=p.nextSibling))break;f=(p=f).parentNode}p=g}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Bt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,1028&t.subtreeFlags&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var h=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var m=h.memoizedProps,v=h.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(n(163))}}catch(e){Cc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}h=tl,tl=!1}(e,r),ml(r,e),gr(ta),Bt=!!ea,ta=ea=null,e.current=r,yl(r),Je(),Il=l,bt=s,El.transition=o}else e.current=r;if(Gl&&(Gl=!1,Kl=e,Ql=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,!(128&~e.current.flags))}catch(e){}}(r.stateNode),rc(e,Ye()),null!==t)for(a=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(Bl)throw Bl=!1,e=ql,ql=null,e;!!(1&Ql)&&0!==e.tag&&Sc(),o=e.pendingLanes,1&o?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Wa()}(e,t,r,a)}finally{El.transition=i,bt=a}return null}function Sc(){if(null!==Kl){var e=_t(Ql),t=El.transition,r=bt;try{if(El.transition=null,bt=16>e?16:e,null===Kl)var a=!1;else{if(e=Kl,Kl=null,Ql=0,6&Il)throw Error(n(331));var i=Il;for(Il|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(16&Xs.flags){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var p=d.child;if(null!==p)p.return=d,Xs=p;else for(;null!==Xs;){var f=(d=Xs).sibling,g=d.return;if(il(d),d===u){Xs=null;break}if(null!==f){f.return=g,Xs=f;break}Xs=g}}}var h=o.alternate;if(null!==h){var m=h.child;if(null!==m){h.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Xs=o}}if(2064&o.subtreeFlags&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(2048&(o=Xs).flags)switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xs=y;break e}Xs=o.return}}var b=e.current;for(Xs=b;null!==Xs;){var _=(s=Xs).child;if(2064&s.subtreeFlags&&null!==_)_.return=s,Xs=_;else e:for(s=b;null!==Xs;){if(2048&(l=Xs).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Cc(l,l.return,e)}if(l===s){Xs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xs=w;break e}Xs=l.return}}if(Il=i,Wa(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(e){}a=!0}return a}finally{bt=r,El.transition=t}}return!1}function kc(e,t,n){e=Mi(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Mi(t,e=gs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Tl&n)===n&&(4===Rl||3===Rl&&(130023424&Tl)===Tl&&500>Ye()-Vl?pc(e,0):zl|=n),rc(e,t)}function $c(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ec();null!==(e=Ri(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),$c(e,n)}function Ic(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}null!==a&&a.delete(t),$c(e,r)}function Pc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Ac(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,r,a,i,o){var s=2;if(a=e,"function"==typeof e)Nc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case _:return jc(r.children,i,o,t);case w:s=8,i|=8;break;case S:return(e=Tc(12,r,t,2|i)).elementType=S,e.lanes=o,e;case $:return(e=Tc(13,r,t,i)).elementType=$,e.lanes=o,e;case E:return(e=Tc(19,r,t,i)).elementType=E,e.lanes=o,e;case A:return Lc(r,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case C:s=9;break e;case x:s=11;break e;case I:s=14;break e;case P:s=16,a=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Tc(s,r,t,i)).elementType=e,t.type=a,t.lanes=o,t}function jc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,a,i,o,s,l){return e=new Mc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Tc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Vc(e){if(!e)return Ea;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Na(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(Na(r))return ja(e,r,t)}return t}function Wc(e,t,n,r,a,i,o,s,l){return(e=Fc(n,r,!0,e,0,i,0,s,l)).context=Vc(null),n=e.current,(i=zi(r=ec(),a=tc(n))).callback=null!=t?t:null,Mi(n,i,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function Uc(e,t,n,r){var a=t.current,i=ec(),o=tc(a);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mi(a,t,o))&&(nc(e,a,o,i),Fi(e,a,o)),o}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)bs=!0;else{if(!(e.lanes&r||128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),fi();break;case 5:Yi(t);break;case 1:Na(t.type)&&La(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;$a(Si,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?($a(Zi,1&Zi.current),t.flags|=128,null):n&t.child.childLanes?Os(e,t,n):($a(Zi,1&Zi.current),null!==(e=Bs(e,t,n))?e.sibling:null);$a(Zi,1&Zi.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),$a(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Bs(e,t,n)}(e,t,r);bs=!!(131072&e.flags)}else bs=!1,ai&&1048576&t.flags&&Za(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Us(e,t),e=t.pendingProps;var i=Ta(t,Ia.current);Pi(t,r),i=mo(null,t,a,e,i,r);var o=vo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Na(a)?(o=!0,La(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Li(t),i.updater=as,t.stateNode=i,i._reactInternals=t,ls(t,a,e,r),t=Is(null,t,a,!0,o,r)):(t.tag=0,ai&&o&&ei(t),_s(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"==typeof e)return Nc(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===I)return 14}return 2}(a),e=ns(a,e),i){case 0:t=$s(null,t,a,e,r);break e;case 1:t=Es(null,t,a,e,r);break e;case 11:t=ws(null,t,a,e,r);break e;case 14:t=Ss(null,t,a,ns(a.type,e),r);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,$s(e,t,a,i=t.elementType===a?i:ns(a,i),r);case 1:return a=t.type,i=t.pendingProps,Es(e,t,a,i=t.elementType===a?i:ns(a,i),r);case 3:e:{if(Ps(t),null===e)throw Error(n(387));a=t.pendingProps,i=(o=t.memoizedState).element,Oi(e,t),Wi(t,a,null,r);var s=t.memoizedState;if(a=s.element,o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,a,r,i=cs(Error(n(423)),t));break e}if(a!==i){t=As(e,t,a,r,i=cs(Error(n(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,r=wi(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),a===i){t=Bs(e,t,r);break e}_s(e,t,a,r)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,na(a,i)?s=null:null!==o&&na(a,o)&&(t.flags|=32),xs(e,t),_s(e,t,s,r),t.child;case 6:return null===e&&ci(t),null;case 13:return Os(e,t,r);case 4:return Qi(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=_i(t,null,a,r):_s(e,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,ws(e,t,a,i=t.elementType===a?i:ns(a,i),r);case 7:return _s(e,t,t.pendingProps,r),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,$a(Si,a._currentValue),a._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Pa.current){t=Bs(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===o.tag){(c=zi(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),Ii(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(n(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Ii(s,r,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Pi(t,r),a=a(i=Ai(i)),t.flags|=1,_s(e,t,a,r),t.child;case 14:return i=ns(a=t.type,t.pendingProps),Ss(e,t,a,i=ns(a.type,i),r);case 15:return ks(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ns(a,i),Us(e,t),t.tag=1,Na(a)?(e=!0,La(t)):e=!1,Pi(t,r),os(t,a,i),ls(t,a,i,r),Is(null,t,a,!0,e,r);case 19:return Ws(e,t,r);case 22:return Cs(e,t,r)}throw Error(n(156,t.tag))};var Gc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"==typeof a){var s=a;a=function(){var e=Bc(o);s.call(e)}}Uc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"==typeof r){var i=r;r=function(){var e=Bc(o);i.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[ga]=o.current,Wr(8===e.nodeType?e.parentNode:e),uc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var s=r;r=function(){var e=Bc(l);s.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ga]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc((function(){Uc(t,l,n,r)})),l}(n,t,e,a,r);return Bc(o)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Uc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Uc(null,e,null,null)})),t[ga]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),!(6&Il)&&(Wl=Ye()+500,Wa()))}break;case 13:uc((function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},St=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},Ct=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ye=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var i=wa(a);if(!i)throw Error(n(90));B(a),Q(a,i)}}}break;case"textarea":ne(e,r);break;case"select":null!=(t=r.value)&&Z(e,!!r.multiple,t,!1)}},Ce=cc,xe=uc;var eu={usingClientEntryPoint:!1,Events:[ba,_a,wa,Se,ke,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),it=ru}catch(e){}}return Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,Le.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(n(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},Le.createRoot=function(e,t){if(!Jc(e))throw Error(n(299));var r=!1,a="",i=Gc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fc(e,1,!1,null,0,r,0,a,i),e[ga]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Kc(t)},Le.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=qe(t))?null:e.stateNode},Le.flushSync=function(e){return uc(e)},Le.hydrate=function(e,t,r){if(!Yc(t))throw Error(n(200));return Zc(null,e,t,!0,r)},Le.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(n(405));var a=null!=r&&r.hydratedSources||null,i=!1,o="",s=Gc;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,i,0,o,s),e[ga]=t.current,Wr(e),a)for(e=0;e<a.length;e++)i=(i=(r=a[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Qc(t)},Le.render=function(e,t,r){if(!Yc(t))throw Error(n(200));return Zc(null,e,t,!1,r)},Le.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(n(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ga]=null}))})),!0)},Le.unstable_batchedUpdates=cc,Le.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Yc(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Zc(e,t,r,!1,a)},Le.version="18.3.1-next-f1338f8080-20240426",Le}var Ve,We,Ue=function(){if(Te)return Re;Te=1;var e=(Ae||(Ae=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),je.exports=Fe()),je.exports);return Re.createRoot=e.createRoot,Re.hydrateRoot=e.hydrateRoot,Re}(),Be=_e(Ue),qe={exports:{}},He={};var Ge,Ke,Qe=(We||(We=1,qe.exports=function(){if(Ve)return He;Ve=1;var e=$e(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,o){var s,l={},c=null,u=null;for(s in void 0!==o&&(c=""+o),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,s)&&!i.hasOwnProperty(s)&&(l[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===l[s]&&(l[s]=n[s]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:a.current}}return He.Fragment=n,He.jsx=o,He.jsxs=o,He}()),qe.exports),Je={exports:{}},Ye={};var Xe=(Ke||(Ke=1,Je.exports=function(){if(Ge)return Ye;Ge=1;var e=$e(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Ye.useSyncExternalStoreWithSelector=function(e,s,l,c,u){var d=r(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=i((function(){function e(e){if(!a){if(a=!0,n=e,e=c(e),void 0!==u&&p.hasValue){var i=p.value;if(u(i,e))return r=i}return r=e}if(i=r,t(n,e))return i;var o=c(e);return void 0!==u&&u(i,o)?(n=e,i):(n=e,r=o)}var n,r,a=!1,i=void 0===l?null:l;return[function(){return e(s())},null===i?void 0:function(){return e(i())}]}),[s,l,c,u]);var f=n(e,d[0],d[1]);return a((function(){p.hasValue=!0,p.value=f}),[f]),o(f),f},Ye}()),Je.exports);var Ze={notify(){},get:()=>[]};var et=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),tt=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),nt=(()=>et||tt?Ne.useLayoutEffect:Ne.useEffect)(),rt=Symbol.for("react-redux-context"),at="undefined"!=typeof globalThis?globalThis:{};function it(){if(!Ne.createContext)return{};const e=at[rt]??=new Map;let t=e.get(Ne.createContext);return t||(t=Ne.createContext(null),e.set(Ne.createContext,t)),t}var ot=it();var st=function(e){const{children:t,context:n,serverState:r,store:a}=e,i=Ne.useMemo((()=>{const e=function(e,t){let n,r=Ze,a=0,i=!1;function o(){c.onStateChange&&c.onStateChange()}function s(){a++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=Ze)}const c={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>r};return c}(a);return{store:a,subscription:e,getServerState:r?()=>r:void 0}}),[a,r]),o=Ne.useMemo((()=>a.getState()),[a]);nt((()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[i,o]);const s=n||ot;return Ne.createElement(s.Provider,{value:i},t)};function lt(e=ot){return function(){return Ne.useContext(e)}}var ct=lt();function ut(e=ot){const t=e===ot?ct:lt(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var dt=ut();function pt(e=ot){const t=e===ot?dt:ut(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ft=pt(),gt=(e,t)=>e===t;function ht(e=ot){const t=e===ot?ct:lt(e),n=(e,n={})=>{const{equalityFn:r=gt}="function"==typeof n?{equalityFn:n}:n,a=t(),{store:i,subscription:o,getServerState:s}=a;Ne.useRef(!0);const l=Ne.useCallback({[e.name]:t=>e(t)}[e.name],[e]),c=Xe.useSyncExternalStoreWithSelector(o.addNestedSub,i.getState,s||i.getState,l,r);return Ne.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var mt=ht();function vt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yt=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),bt=()=>Math.random().toString(36).substring(7).split("").join("."),_t={INIT:`@@redux/INIT${bt()}`,REPLACE:`@@redux/REPLACE${bt()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bt()}`};function wt(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function St(e,t,n){if("function"!=typeof e)throw new Error(vt(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(vt(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(vt(1));return n(St)(e,t)}let r=e,a=t,i=new Map,o=i,s=0,l=!1;function c(){o===i&&(o=new Map,i.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(vt(3));return a}function d(e){if("function"!=typeof e)throw new Error(vt(4));if(l)throw new Error(vt(5));let t=!0;c();const n=s++;return o.set(n,e),function(){if(t){if(l)throw new Error(vt(6));t=!1,c(),o.delete(n),i=null}}}function p(e){if(!wt(e))throw new Error(vt(7));if(void 0===e.type)throw new Error(vt(8));if("string"!=typeof e.type)throw new Error(vt(17));if(l)throw new Error(vt(9));try{l=!0,a=r(a,e)}finally{l=!1}return(i=o).forEach((e=>{e()})),e}p({type:_t.INIT});return{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(vt(10));r=e,p({type:_t.REPLACE})},[yt]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(vt(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[yt](){return this}}}}}function kt(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:_t.INIT}))throw new Error(vt(12));if(void 0===n(void 0,{type:_t.PROBE_UNKNOWN_ACTION()}))throw new Error(vt(13))}))}(n)}catch(e){a=e}return function(e={},t){if(a)throw a;let i=!1;const o={};for(let a=0;a<r.length;a++){const s=r[a],l=n[s],c=e[s],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(vt(14));o[s]=u,i=i||u!==c}return i=i||r.length!==Object.keys(e).length,i?o:e}}function Ct(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}var xt=Symbol.for("immer-nothing"),$t=Symbol.for("immer-draftable"),Et=Symbol.for("immer-state");function It(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pt=Object.getPrototypeOf;function At(e){return!!e&&!!e[Et]}function Tt(e){return!!e&&(Dt(e)||Array.isArray(e)||!!e[$t]||!!e.constructor?.[$t]||zt(e)||Mt(e))}var Nt=Object.prototype.constructor.toString();function Dt(e){if(!e||"object"!=typeof e)return!1;const t=Pt(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Nt}function Rt(e,t){0===jt(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function jt(e){const t=e[Et];return t?t.type_:Array.isArray(e)?1:zt(e)?2:Mt(e)?3:0}function Lt(e,t){return 2===jt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ot(e,t,n){const r=jt(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function zt(e){return e instanceof Map}function Mt(e){return e instanceof Set}function Ft(e){return e.copy_||e.base_}function Vt(e,t){if(zt(e))return new Map(e);if(Mt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Dt(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Et];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Pt(e),t)}{const t=Pt(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function Wt(e,t=!1){return Bt(e)||At(e)||!Tt(e)||(jt(e)>1&&(e.set=e.add=e.clear=e.delete=Ut),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>Wt(t,!0)))),e}function Ut(){It(2)}function Bt(e){return Object.isFrozen(e)}var qt,Ht={};function Gt(e){const t=Ht[e];return t||It(0),t}function Kt(){return qt}function Qt(e,t){t&&(Gt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jt(e){Yt(e),e.drafts_.forEach(Zt),e.drafts_=null}function Yt(e){e===qt&&(qt=e.parent_)}function Xt(e){return qt={drafts_:[],parent_:qt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zt(e){const t=e[Et];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function en(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Et].modified_&&(Jt(t),It(4)),Tt(e)&&(e=tn(t,e),t.parent_||rn(t,e)),t.patches_&&Gt("Patches").generateReplacementPatches_(n[Et].base_,e,t.patches_,t.inversePatches_)):e=tn(t,n,[]),Jt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==xt?e:void 0}function tn(e,t,n){if(Bt(t))return t;const r=t[Et];if(!r)return Rt(t,((a,i)=>nn(e,r,t,a,i,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return rn(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,i=!1;3===r.type_&&(a=new Set(t),t.clear(),i=!0),Rt(a,((a,o)=>nn(e,r,t,a,o,n,i))),rn(e,t,!1),n&&e.patches_&&Gt("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function nn(e,t,n,r,a,i,o){if(At(a)){const o=tn(e,a,i&&t&&3!==t.type_&&!Lt(t.assigned_,r)?i.concat(r):void 0);if(Ot(n,r,o),!At(o))return;e.canAutoFreeze_=!1}else o&&n.add(a);if(Tt(a)&&!Bt(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tn(e,a),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||rn(e,a)}}function rn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wt(t,n)}var an={get(e,t){if(t===Et)return e;const n=Ft(e);if(!Lt(n,t))return function(e,t,n){const r=ln(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Tt(r)?r:r===sn(e.base_,t)?(un(e),e.copy_[t]=dn(r,e)):r},has:(e,t)=>t in Ft(e),ownKeys:e=>Reflect.ownKeys(Ft(e)),set(e,t,n){const r=ln(Ft(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=sn(Ft(e),t),a=r?.[Et];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||Lt(e.base_,t)))return!0;un(e),cn(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==sn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,un(e),cn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Ft(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){It(11)},getPrototypeOf:e=>Pt(e.base_),setPrototypeOf(){It(12)}},on={};function sn(e,t){const n=e[Et];return(n?Ft(n):e)[t]}function ln(e,t){if(!(t in e))return;let n=Pt(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Pt(n)}}function cn(e){e.modified_||(e.modified_=!0,e.parent_&&cn(e.parent_))}function un(e){e.copy_||(e.copy_=Vt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Rt(an,((e,t)=>{on[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),on.deleteProperty=function(e,t){return on.set.call(this,e,t,void 0)},on.set=function(e,t,n){return an.set.call(this,e[0],t,n,e[0])};function dn(e,t){const n=zt(e)?Gt("MapSet").proxyMap_(e,t):Mt(e)?Gt("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Kt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=an;n&&(a=[r],i=on);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}(e,t);return(t?t.scope_:Kt()).drafts_.push(n),n}function pn(e){if(!Tt(e)||Bt(e))return e;const t=e[Et];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Vt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Vt(e,!0);return Rt(n,((e,t)=>{Ot(n,e,pn(t))})),t&&(t.finalized_=!1),n}var fn=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...a){return r.produce(e,(e=>t.call(this,e,...a)))}}let r;if("function"!=typeof t&&It(6),void 0!==n&&"function"!=typeof n&&It(7),Tt(e)){const a=Xt(this),i=dn(e,void 0);let o=!0;try{r=t(i),o=!1}finally{o?Jt(a):Yt(a)}return Qt(a,n),en(r,a)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===xt&&(r=void 0),this.autoFreeze_&&Wt(r,!0),n){const t=[],a=[];Gt("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}It(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;const a=this.produce(e,t,((e,t)=>{n=e,r=t}));return[a,n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Tt(e)||It(8),At(e)&&(e=function(e){At(e)||It(10);return pn(e)}(e));const t=Xt(this),n=dn(e,void 0);return n[Et].isManual_=!0,Yt(t),n}finishDraft(e,t){const n=e&&e[Et];n&&n.isManual_||It(9);const{scope_:r}=n;return Qt(r,t),en(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Gt("Patches").applyPatches_;return At(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},gn=fn.produce;fn.produceWithPatches.bind(fn),fn.setAutoFreeze.bind(fn),fn.setUseStrictShallowCopy.bind(fn),fn.applyPatches.bind(fn),fn.createDraft.bind(fn),fn.finishDraft.bind(fn);var hn=e=>Array.isArray(e)?e:[e];function mn(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var vn="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function yn(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,i=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const s=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),i++,r){const e=a?.deref?.()??a;null!=e&&r(e,l)&&(l=e,0!==i&&i--);a="object"==typeof l&&null!==l||"function"==typeof l?new vn(l):l}return s.s=1,s.v=l,l}return o.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function bn(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,a=0,i={},o=e.pop();"object"==typeof o&&(i=o,o=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);const s={...n,...i},{memoize:l,memoizeOptions:c=[],argsMemoize:u=yn,argsMemoizeOptions:d=[],devModeChecks:p={}}=s,f=hn(c),g=hn(d),h=mn(e),m=l((function(){return r++,o.apply(null,arguments)}),...f),v=u((function(){a++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(h,arguments);return t=m.apply(null,e),t}),...g);return Object.assign(v,{resultFunc:o,memoizedResultFunc:m,dependencies:h,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:u})};return Object.assign(r,{withTypes:()=>r}),r}var _n=bn(yn),wn=Object.assign(((e,t=_n)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>wn});function Sn(e){return({dispatch:t,getState:n})=>r=>a=>"function"==typeof a?a(t,n,e):r(a)}var kn=Sn(),Cn=Sn,xn="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Ct:Ct.apply(null,arguments)};function $n(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(Qn(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return wt(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var En=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function In(e){return Tt(e)?gn(e,(()=>{})):e}function Pn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var An=e=>t=>{setTimeout(t,e)},Tn=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new En(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,i=!1,o=!1;const s=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:An(10):"callback"===e.type?e.queueNotification:An(e.timeout),c=()=>{o=!1,i&&(i=!1,s.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>a&&e()));return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{return a=!e?.meta?.RTK_autoBatch,i=!a,i&&(o||(o=!0,l(c))),r.dispatch(e)}finally{a=!0}}})})("object"==typeof n?n:void 0)),r};function Nn(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(Qn(28));if(r in t)throw new Error(Qn(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}function Dn(...e){return t=>e.some((e=>((e,t)=>(e=>e&&"function"==typeof e.match)(e)?e.match(t):e(t))(e,t)))}var Rn=["name","message","stack","code"],jn=class{constructor(e,t){this.payload=e,this.meta=t}_type},Ln=class{constructor(e,t){this.payload=e,this.meta=t}_type},On=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Rn)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},zn="External signal was aborted",Mn=(()=>{function e(e,t,n){const r=$n(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),a=$n(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),i=$n(e+"/rejected",((e,t,r,a,i)=>({payload:a,error:(n&&n.serializeError||On)(e||"Rejected"),meta:{...i||{},arg:r,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e,{signal:o}={}){return(s,l,c)=>{const u=n?.idGenerator?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),d=new AbortController;let p,f;function g(e){f=e,d.abort()}o&&(o.aborted?g(zn):o.addEventListener("abort",(()=>g(zn)),{once:!0}));const h=async function(){let o;try{let i=n?.condition?.(e,{getState:l,extra:c});if(null!==(h=i)&&"object"==typeof h&&"function"==typeof h.then&&(i=await i),!1===i||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const m=new Promise(((e,t)=>{p=()=>{t({name:"AbortError",message:f||"Aborted"})},d.signal.addEventListener("abort",p)}));s(a(u,e,n?.getPendingMeta?.({requestId:u,arg:e},{getState:l,extra:c}))),o=await Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:l,extra:c,requestId:u,signal:d.signal,abort:g,rejectWithValue:(e,t)=>new jn(e,t),fulfillWithValue:(e,t)=>new Ln(e,t)})).then((t=>{if(t instanceof jn)throw t;return t instanceof Ln?r(t.payload,u,e,t.meta):r(t,u,e)}))])}catch(t){o=t instanceof jn?i(null,u,e,t.payload,t.meta):i(t,u,e)}finally{p&&d.signal.removeEventListener("abort",p)}var h;return n&&!n.dispatchConditionRejection&&i.match(o)&&o.meta.condition||s(o),o}();return Object.assign(h,{abort:g,requestId:u,arg:e,unwrap:()=>h.then(Fn)})}}),{pending:a,rejected:i,fulfilled:r,settled:Dn(i,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Fn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Vn=Symbol.for("rtk-slice-createasyncthunk");function Wn(e,t){return`${e}/${t}`}function Un({creators:e}={}){const t=e?.asyncThunk?.[Vn];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(Qn(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(Qn(12));if(n in o.sliceCaseReducersByType)throw new Error(Qn(13));return o.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(o.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],r]="function"==typeof e.extraReducers?Nn(e.extraReducers):[e.extraReducers],a={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,a,i]=Nn(t);if(function(e){return"function"==typeof e}(e))n=()=>In(e());else{const t=In(e);n=()=>t}function o(e=n(),t){let o=[r[t.type],...a.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===o.filter((e=>!!e)).length&&(o=[i]),o.reduce(((e,n)=>{if(n){if(At(e)){const r=n(e,t);return void 0===r?e:r}if(Tt(e))return gn(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}i.forEach((r=>{const i=a[r],o={reducerName:r,type:Wn(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function({type:e,reducerName:t,createNotation:n},r,a){let i,o;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(Qn(17));i=r.reducer,o=r.prepare}else i=r;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?$n(e,o):$n(e))}(o,i,s):function({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Qn(18));const{payloadCreator:i,fulfilled:o,pending:s,rejected:l,settled:c,options:u}=n,d=a(e,i,u);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o);s&&r.addCase(d.pending,s);l&&r.addCase(d.rejected,l);c&&r.addMatcher(d.settled,c);r.exposeCaseReducer(t,{fulfilled:o||Kn,pending:s||Kn,rejected:l||Kn,settled:c||Kn})}(o,i,s,t)}));const c=e=>e,u=new Map,d=new WeakMap;let p;function f(e,t){return p||(p=l()),p(e,t)}function g(){return p||(p=l()),p.getInitialState()}function h(t,n=!1){function r(e){let a=e[t];return void 0===a&&n&&(a=Pn(d,r,g)),a}function a(t=c){const r=Pn(u,n,(()=>new WeakMap));return Pn(r,t,(()=>{const r={};for(const[a,i]of Object.entries(e.selectors??{}))r[a]=Bn(i,t,(()=>Pn(d,t,g)),n);return r}))}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const m={name:n,reducer:f,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:g,...h(r),injectInto(e,{reducerPath:t,...n}={}){const a=t??r;return e.inject({reducerPath:a,reducer:f},n),{...m,...h(a,!0)}}};return m}}function Bn(e,t,n,r){function a(a,...i){let o=t(a);return void 0===o&&r&&(o=n()),e(o,...i)}return a.unwrapped=e,a}var qn,Hn,Gn=Un();function Kn(){}function Qn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(qn||(qn={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(Hn||(Hn={}));var Jn=function(e,t,n,r){r=r||{},n=null==n?{}:n;var a=new Event(t,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});return a.detail=n,e.dispatchEvent(a),a},Yn=function(e){Jn(window,"haptic",e)};class Xn{constructor(e){this.hass=e,console.debug("üåà WLED Service: Initialized")}async toggleLED(e){try{if(!e)throw Yn("failure"),new Error("No entity_id provided");const t=this.hass.states[e];if(!t)throw Yn("failure"),new Error(`Entity ${e} not found`);await this.hass.callService("light","on"===t.state?"turn_off":"turn_on",{entity_id:e}),Yn("success")}catch(e){throw Yn("failure"),console.error("Failed to toggle LED:",e),e}}async locatePart(e,t){var n,r,a;try{if(console.debug("üåà WLED: Starting locate part process",{part:e,config:t}),!t.entity_id)throw Yn("failure"),new Error("No entity_id configured for WLED");const i=null===(r=null===(n=e.parameters)||void 0===n?void 0:n.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t.parameter_name})))||void 0===r?void 0:r.data;if(!i)throw new Error(`No ${t.parameter_name} parameter found for part`);const o=parseInt(i);console.debug("üåà WLED: Using LED position:",o);const s=this.hass.states[t.entity_id];if(!s)throw new Error(`Entity ${t.entity_id} not found`);const l=(null===(a=t.ip_address)||void 0===a?void 0:a.replace("http://",""))||"192.168.0.61";console.debug("üåà WLED IP:",l);const c="on"===s.state;await this.hass.callService("rest_command","wled_segment",{url:`http://${l}/json/state`,payload:JSON.stringify(c?{on:!1}:{on:!0,bri:t.intensity||128,seg:[{id:0,start:o-1,stop:o,col:[[255,0,0],[0,0,0],[0,0,0]],fx:0}]})}),Yn("success")}catch(e){throw Yn("failure"),console.error("Failed to locate part with WLED:",e),e}}}const Zn=e.getInstance();const er=new class{constructor(){this.lastApiCallTimestamp=0,this.lastApiFailureTimestamp=0,Zn.log("InventreeApiService","Initialized.")}async request(e,t={}){const n=si.getState().api,r=n.url,a=n.apiKey,i=n.throttleDelayMs,o=n.failedRequestRetryDelayMs;if(!r||!a){const e="API base URL or API key is not configured in Redux store (apiSlice).";throw Zn.error("InventreeApiService",e),this.lastApiFailureTimestamp=Date.now(),new Error(e)}const s=`${r.endsWith("/")?r.slice(0,-1):r}/${e.startsWith("/")?e.substring(1):e}`,l=new Headers(Object.assign({Authorization:`Token ${a}`,"Content-Type":"application/json"},t.headers||{}));if(Zn.log("InventreeApiService",`Requesting URL: ${s}`,{method:t.method||"GET",level:"debug"}),this.lastApiFailureTimestamp>0){const e=Date.now()-this.lastApiFailureTimestamp;if(e<o){const t=o-e;Zn.warn("InventreeApiService",`Recent API Failure: Delaying next request by ${t}ms. Cooldown until ${new Date(Date.now()+t).toISOString()}`),await new Promise((e=>setTimeout(e,t)))}}if(i>0){const e=Date.now()-this.lastApiCallTimestamp;if(e<i){const t=i-e;Zn.log("InventreeApiService",`General Throttling: Delaying by ${t}ms.`,{level:"debug"}),await new Promise((e=>setTimeout(e,t)))}}this.lastApiCallTimestamp=Date.now();try{const e=await fetch(s,Object.assign(Object.assign({},t),{headers:l}));if(!e.ok){let t;try{t=await e.json()}catch(n){t=await e.text()}const n=`API request failed: ${e.status} ${e.statusText}`;throw Zn.error("InventreeApiService",n,{url:s,status:e.status,errorData:t}),this.lastApiFailureTimestamp=Date.now(),new Error(n)}if(204===e.status)return this.lastApiFailureTimestamp=0,null;const n=await e.json();return this.lastApiFailureTimestamp=0,n}catch(e){throw Zn.error("InventreeApiService",`Catch-all for ${s}. Setting failure timestamp. Error:`,e),this.lastApiFailureTimestamp=Date.now(),e}}async getPart(e){Zn.log("InventreeApiService",`Fetching part ${e}...`);try{return await this.request(`part/${e}/`)}catch(t){return Zn.error("InventreeApiService",`Failed to get part ${e}:`,t),null}}async getParts(e={}){Zn.log("InventreeApiService","Fetching parts with params:",e);try{const t=new URLSearchParams(e).toString();return await this.request(`part/?${t}`)}catch(t){return Zn.error("InventreeApiService","Failed to get parts:",{params:e,error:t}),[]}}async adjustStock(e,t,n,r){var a;Zn.log("InventreeApiService",`Adjusting stock for part ${e} by ${t}. Location: ${n}, Notes: "${r}"`);try{if(0===t)Zn.log("InventreeApiService",`Relative amount is 0 for part ${e}, no stock change needed. Fetching current stock.`);else if(t>0){const a=await this.addStockItem(e,t,n,r);if(!a)throw new Error("Failed to add stock item during positive adjustment.");Zn.log("InventreeApiService",`Added stock item PK: ${a.pk} for part ${e}.`)}else{const i=Math.abs(t);Zn.log("InventreeApiService",`Attempting to remove ${i} for part ${e}.`);await this.consolidateStockForPart(e,n,r||"Consolidating before stock removal");const o=await this.getStockItemsForPart(e,n),s=null!==(a=null==o?void 0:o.reduce(((e,t)=>e+parseFloat(t.quantity||"0")),0))&&void 0!==a?a:0;if(!o||0===o.length||s<i)Zn.warn("InventreeApiService",`Cannot remove ${i} for part ${e}: Insufficient stock (${s}) available after consolidation attempt.`);else{const t=o[0];if(!t)throw Zn.error("InventreeApiService",`Logic error: Stock exists (${s}) but no stock item found after consolidation for part ${e}.`),new Error("Stock item not found after consolidation despite available quantity.");Zn.log("InventreeApiService",`Removing ${i} from stock item PK ${t.pk} for part ${e}.`);await this.removeStockItems([{pk:t.pk,quantity:i}],r||"Stock removal")||Zn.error("InventreeApiService",`Stock removal API call failed for part ${e}, item ${t.pk}.`)}}Zn.log("InventreeApiService",`Fetching final part details for ${e} after stock adjustment.`);const i=await this.getPart(e);return i?(Zn.log("InventreeApiService",`Stock adjustment process complete for part ${e}. Final stock: ${i.in_stock}.`),{pk:e,newTotalStock:i.in_stock}):(Zn.error("InventreeApiService",`Failed to fetch updated part details for part ${e} after stock adjustment.`),null)}catch(t){Zn.error("InventreeApiService",`Failed to adjust stock for part ${e}:`,t);try{const t=await this.getPart(e);if(t)return Zn.warn("InventreeApiService",`Returning last known stock (${t.in_stock}) for part ${e} after adjustment error.`),{pk:e,newTotalStock:t.in_stock}}catch(t){Zn.error("InventreeApiService",`Failed to fetch final part details for ${e} even after catching primary error:`,t)}return null}}async getPartParameters(e){Zn.log("InventreeApiService",`Fetching parameters for part ${e}...`);try{return await this.request(`part/parameter/?part=${e}`)}catch(t){return Zn.error("InventreeApiService",`Failed to get parameters for part ${e}:`,t),null}}async updatePartParameter(e,t){Zn.log("InventreeApiService",`Updating parameter ${e} to value: "${t}"...`);try{return await this.request(`part/parameter/${e}/`,{method:"PATCH",body:JSON.stringify({data:t})})}catch(t){return Zn.error("InventreeApiService",`Failed to update parameter ${e}:`,t),null}}async getStockItemsForPart(e,t){Zn.log("InventreeApiService",`Fetching stock items for part ${e}${t?` at location ${t}`:""}...`);try{const n=new URLSearchParams({part:String(e)});return void 0!==t&&n.set("location",String(t)),await this.request(`stock/?${n.toString()}`)}catch(t){return Zn.error("InventreeApiService",`Failed to get stock items for part ${e}:`,t),null}}async addStockItem(e,t,n,r){Zn.log("InventreeApiService",`Adding stock for part ${e}: quantity ${t}, location ${n}, notes: "${r}"`);try{const a={part:e,quantity:String(t),status:10};return void 0!==n&&(a.location=n),r&&(a.notes=r),await this.request("stock/",{method:"POST",body:JSON.stringify(a)})}catch(t){return Zn.error("InventreeApiService",`Failed to add stock for part ${e}:`,t),null}}async removeStockItems(e,t){if(Zn.log("InventreeApiService",`Removing stock for items: ${e.map((e=>`PK: ${e.pk}, Qty: ${e.quantity}`)).join("; ")}. Notes: "${t}"`),0===e.length)return Zn.warn("InventreeApiService","removeStockItems called with empty stockItems array."),{success:!0,message:"No items to remove."};try{const n={items:e.map((e=>({pk:e.pk,quantity:String(e.quantity)})))};return t&&(n.notes=t),await this.request("stock/remove/",{method:"POST",body:JSON.stringify(n)})}catch(t){return Zn.error("InventreeApiService","Failed to remove stock items:",{stockItems:e,error:t}),null}}async deleteStockItem(e){Zn.log("InventreeApiService",`Deleting stock item PK ${e}...`);try{return void await this.request(`stock/${e}/`,{method:"DELETE"})}catch(t){return Zn.error("InventreeApiService",`Failed to delete stock item ${e}:`,t),null}}async consolidateStockForPart(e,t,n){var r;Zn.log("InventreeApiService",`Consolidating stock for part ${e}${void 0!==t?` to location ${t}`:""}...`);try{const a=await this.getStockItemsForPart(e);if(!a)return Zn.error("InventreeApiService",`Failed to fetch existing stock items for part ${e} during consolidation.`),null;if(0===a.length)return Zn.log("InventreeApiService",`No stock items found for part ${e} to consolidate.`),null;let i=0;a.forEach((e=>{const t=parseFloat(e.quantity);isNaN(t)?Zn.warn("InventreeApiService",`Invalid quantity found for stock item ${e.pk}: ${e.quantity}. Skipping in total calculation.`):i+=t}));const o=n||`Consolidated from ${a.length} item(s).`,s=a.map((e=>e.pk));let l=t;void 0===l&&(l=null===(r=a[0])||void 0===r?void 0:r.location);const c=null===l?void 0:l;if(void 0===c&&i>0){const t=a.find((e=>null!==e.location&&void 0!==e.location));if(!t)return Zn.error("InventreeApiService",`Cannot determine location for consolidated stock for part ${e}. Provide targetLocationId or ensure at least one existing item has a location.`),null;Zn.warn("InventreeApiService",`No targetLocationId provided and first item had no location. Using location ${t.location} from item ${t.pk}.`),l=t.location}let u=null;if(i>0){if(u=await this.addStockItem(e,i,c,o),!u)return Zn.error("InventreeApiService",`Failed to create new consolidated stock item for part ${e}. Aborting consolidation.`),null;Zn.log("InventreeApiService",`Created new consolidated stock item PK: ${u.pk}`);const t=s.indexOf(u.pk);t>-1&&s.splice(t,1)}else Zn.log("InventreeApiService",`Total quantity is 0 for part ${e}. Proceeding to delete old items.`);Zn.log("InventreeApiService",`Deleting ${s.length} old stock items for part ${e}: [${s.join(", ")}]`);let d=0;for(const e of s){null===await this.deleteStockItem(e)&&(Zn.warn("InventreeApiService",`Failed to delete old stock item ${e} during consolidation.`),d++)}return d>0&&Zn.warn("InventreeApiService",`Consolidation completed for part ${e}, but ${d} old stock items failed to delete.`),Zn.log("InventreeApiService",`Successfully consolidated stock for part ${e}. Returning ${u?`new item PK ${u.pk}`:"null (zero stock)"}.`),u}catch(t){return Zn.error("InventreeApiService",`Failed to consolidate stock for part ${e}:`,t),null}}},tr=e.getInstance(),nr=Mn("parts/fetchPartDetails",(async(e,{rejectWithValue:t,getState:n})=>{var r;tr.info("partsSlice",`Fetching details for part ${e}...`);try{const{api:a}=n();if(!(null===(r=a.directApiConfig)||void 0===r?void 0:r.url)||!a.directApiConfig.apiKey)return tr.warn("partsSlice","Direct API URL or API Key not configured. Cannot fetch part details."),t("Direct API not configured.");const i=await er.getPart(e);return i?(tr.log("partsSlice",`Successfully fetched part details for ${e}`,i),i):(tr.warn("partsSlice",`No data returned for part ${e} from API.`),t(`Part ${e} not found or API error.`))}catch(n){return tr.error("partsSlice",`Error fetching part details for ${e}:`,n),t(n.message||`Failed to fetch part ${e}`)}})),rr=Mn("parts/locatePartById",(async(e,{getState:t,dispatch:n,rejectWithValue:r})=>{var a,i,o;const s=t(),l=s.parts.partsById[e],c=null===(i=null===(a=s.config.resolvedConfig)||void 0===a?void 0:a.services)||void 0===i?void 0:i.wled;if(!l)return tr.warn("partsSlice",`Part with ID ${e} not found for location.`),r(`Part with ID ${e} not found.`);if(!(c&&c.enabled&&c.entity_id&&c.parameter_name))return tr.warn("partsSlice",`WLED service not configured or enabled for part ${e}.`),r("WLED service not configured or enabled.");const u=new Xn(s.hass.hass),d=null===(o=l.parameters)||void 0===o?void 0:o.find((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===c.parameter_name}));if(!d||!d.data)return tr.warn("partsSlice",`Location parameter '${c.parameter_name}' not found or empty for part ${e}.`),r(`Location parameter not found for part ${e}.`);try{await u.locatePart(l,c),tr.log("partsSlice",`Successfully triggered WLED location for part ${e} at segment ${d.data}.`),setTimeout((()=>{n(ir.actions.setLocatingPartId(null))}),5e3)}catch(t){return tr.error("partsSlice",`Error locating part ${e} via WLED:`,t),r(t.message||`Failed to locate part ${e}.`)}})),ar=Mn("parts/adjustPartStock",(async({partId:e,amount:t,locationId:n,notes:r},{rejectWithValue:a})=>{tr.info("partsSlice",`Adjusting stock for part ${e} by ${t}. Location: ${n}, Notes: "${r}"`);try{const i=await er.adjustStock(e,t,n,r);if(!i||"number"!=typeof i.newTotalStock){tr.error("partsSlice",`Stock adjustment for part ${e} failed or did not return expected result format.`,i);return a(`Stock adjustment failed: ${i?"API response missing newTotalStock":"API call failed"}.`)}return tr.log("partsSlice",`Stock for part ${e} adjusted successfully via API. New total stock: ${i.newTotalStock}.`),{partId:i.pk,newTotalStock:i.newTotalStock}}catch(t){return tr.error("partsSlice",`Error calling inventreeApiService.adjustStock for part ${e}:`,t),a(t.message||`Failed to adjust stock for part ${e}.`)}})),ir=Gn({name:"parts",initialState:{partsById:{},partsByEntity:{},loading:!1,error:null,locatingPartId:null,adjustingStockPartId:null,adjustmentError:null},reducers:{setParts(e,t){const{entityId:n,parts:r}=t.payload,a=[];r.forEach((t=>{e.partsById[t.pk]=Object.assign(Object.assign({},e.partsById[t.pk]),t),a.push(t.pk)})),e.partsByEntity[n]=a,tr.log("partsSlice",`Set ${r.length} parts for entity '${n}'. Part IDs: [${a.join(", ")}]`,{level:"debug"})},updatePart(e,t){const n=t.payload;e.partsById[n.pk]?(e.partsById[n.pk]=Object.assign(Object.assign({},e.partsById[n.pk]),n),tr.log("partsSlice",`Updated part ${n.pk} in partsById.`,{level:"debug"})):(e.partsById[n.pk]=n,tr.log("partsSlice",`Added new part ${n.pk} to partsById.`,{level:"debug"}))},updatePartStock(e,t){const{partId:n,newStock:r}=t.payload,a=e.partsById[n];a?(a.in_stock=r,tr.log("partsSlice",`Updated stock for part ${n} to ${r} in partsById.`,{level:"debug"})):tr.warn("partsSlice",`Attempted to update stock for non-existent partId: ${n}`)},clearParts(e,t){const n=t.payload;tr.log("partsSlice",`Clearing parts mapping for entity '${n}'.`,{level:"debug"}),delete e.partsByEntity[n]},registerEntity(e,t){const n=t.payload;n in e.partsByEntity||(e.partsByEntity[n]=[],tr.log("partsSlice",`Registered entity '${n}' in partsByEntity.`,{level:"debug"}))},partStockUpdateFromWebSocket(e,t){const n=t.payload,{partId:r,quantity:a}=n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["partId","quantity"]),o=e.partsById[r];o?(tr.log("partsSlice",`Processing WebSocket stock update for part ${r}. Current stock: ${o.in_stock}, New quantity from WS: ${a}`),void 0!==a&&(o.in_stock=parseFloat(a)),tr.log("partsSlice",`Part ${r} stock updated to ${o.in_stock} via WebSocket.`,{level:"debug",otherStockData:i})):tr.warn("partsSlice",`Received WebSocket stock update for unknown part ${r}. Triggering fetch.`)},setLocatingPartId(e,t){e.locatingPartId=t.payload}},extraReducers:e=>{e.addCase(rr.pending,((e,t)=>{e.locatingPartId=t.meta.arg})).addCase(rr.rejected,((e,t)=>{e.locatingPartId===t.meta.arg&&(e.locatingPartId=null)})).addCase(rr.fulfilled,((e,t)=>{})).addCase(ar.pending,((e,t)=>{var n;const{partId:r,amount:a}=t.meta.arg;e.adjustingStockPartId=r,e.adjustmentError=null;const i=e.partsById[r];if(i){const e=i.in_stock;i.in_stock=(null!==(n=i.in_stock)&&void 0!==n?n:0)+a,tr.log("partsSlice",`Optimistically updated stock for part ${r} from ${e} to ${i.in_stock}`,{level:"debug"})}else tr.warn("partsSlice",`Cannot optimistically update stock for partId ${r}: Part not found.`)})).addCase(ar.fulfilled,((e,t)=>{const{partId:n,newTotalStock:r}=t.payload,a=e.partsById[n];a&&(a.in_stock=r),e.adjustingStockPartId===n&&(e.adjustingStockPartId=null),e.adjustmentError=null})).addCase(ar.rejected,((e,t)=>{var n;const r=t.meta.arg.partId,a=t.meta.arg;e.adjustmentError=t.payload||t.error.message||"Failed to adjust stock",tr.error("partsSlice",`Stock adjustment failed for part ${r}: ${e.adjustmentError}`);const i=e.partsById[r];i&&"number"==typeof a.amount&&(i.in_stock=(null!==(n=i.in_stock)&&void 0!==n?n:0)-a.amount,tr.warn("partsSlice",`Reverted optimistic stock update for part ${r}. New reverted stock: ${i.in_stock}`)),e.adjustingStockPartId===r&&(e.adjustingStockPartId=null)})).addCase(nr.pending,((e,t)=>{const n=t.meta.arg;tr.info("partsSlice",`Fetching details for part ${n} (pending)...`),e.loading=!0})).addCase(nr.fulfilled,((e,t)=>{const n=t.payload;tr.info("partsSlice",`Successfully fetched details for part ${n.pk}. Updating state.`),e.partsById[n.pk]=Object.assign(Object.assign({},e.partsById[n.pk]),n),e.loading=!1})).addCase(nr.rejected,((e,t)=>{const n=t.meta.arg;tr.error("partsSlice",`Failed to fetch details for part ${n}: ${t.payload||t.error.message}`),e.loading=!1,e.error=t.payload||t.error.message||`Failed to fetch details for part ${n}`}))}}),{setParts:or,updatePart:sr,updatePartStock:lr,clearParts:cr,registerEntity:ur,partStockUpdateFromWebSocket:dr,setLocatingPartId:pr}=ir.actions;var fr=ir.reducer;const gr=e=>e.parts.partsByEntity,hr=e=>e.parts.partsById;_n([hr],(e=>Object.keys(e).map(Number)));const mr=_n([hr],(e=>Object.values(e))),vr=_n([gr,hr,(e,t)=>t],((e,t,n)=>{const r=new Set;n.forEach((t=>{const n=e[t];n&&n.forEach((e=>r.add(e)))}));const a=[];return r.forEach((e=>{const n=t[e];n&&a.push(n)})),a}));_n([hr,gr,(e,t)=>t],((e,t,n)=>{var r;return(null!==(r=t[n])&&void 0!==r?r:[]).map((t=>e[t])).filter((e=>!!e))}));const yr=_n([e=>e.parts.partsById,(e,t)=>t],((e,t)=>null!=t?e[t]:void 0)),br=e=>e.parts.loading,_r=e=>e.parts.locatingPartId;_n([mr],(e=>e)),_n([e=>e.parts.partsById,e=>e.parts.partsByEntity,(e,t)=>t],((e,t,n)=>{if(!n)return[];const r=t[n];return r?r.map((t=>e[t])).filter((e=>void 0!==e)):[]})),_n([e=>e.parts.partsById,e=>e.parts.partsByEntity,(e,t,n=[])=>({primaryEntityId:t,additionalEntityIds:n})],((e,t,{primaryEntityId:n,additionalEntityIds:r})=>{const a=new Set;if(n){const e=t[n];e&&e.forEach((e=>a.add(e)))}return r.forEach((e=>{const n=t[e];n&&n.forEach((e=>a.add(e)))})),Array.from(a).map((t=>e[t])).filter((e=>void 0!==e))}));const wr=e.getInstance(),Sr={url:null,apiKey:null,initialized:!1,error:null,throttleDelayMs:200,cacheLifetimeMs:6e4,failedRequestRetryDelayMs:3e4},kr=Gn({name:"api",initialState:Sr,reducers:{setApiConfig(e,t){e.url=t.payload.url,e.apiKey=t.payload.apiKey,"number"==typeof t.payload.throttleDelayMs&&t.payload.throttleDelayMs>=0&&(e.throttleDelayMs=t.payload.throttleDelayMs),"number"==typeof t.payload.cacheLifetime&&t.payload.cacheLifetime>=0?e.cacheLifetimeMs=1e3*t.payload.cacheLifetime:void 0===t.payload.cacheLifetime||(e.cacheLifetimeMs=Sr.cacheLifetimeMs,wr.warn("apiSlice","Invalid cacheLifetime provided, reset to default.")),"number"==typeof t.payload.failedRequestRetryDelaySeconds&&t.payload.failedRequestRetryDelaySeconds>=0?e.failedRequestRetryDelayMs=1e3*t.payload.failedRequestRetryDelaySeconds:void 0===t.payload.failedRequestRetryDelaySeconds||(e.failedRequestRetryDelayMs=Sr.failedRequestRetryDelayMs,wr.warn("apiSlice","Invalid failedRequestRetryDelaySeconds provided, reset to default.")),e.error=null,wr.log("apiSlice","API config set.",{data:{url:e.url,throttle:e.throttleDelayMs,cacheLifetime:e.cacheLifetimeMs,failedRetryDelay:e.failedRequestRetryDelayMs}})},apiInitializationSuccess(e){e.url&&e.apiKey?(e.initialized=!0,e.error=null,wr.log("apiSlice","API marked as initialized successfully.")):(wr.warn("apiSlice","Tried to mark API as initialized, but URL or API Key is missing."),e.error="Initialization attempted without full config.")},apiInitializationError(e,t){e.initialized=!1,e.error=t.payload,wr.error("apiSlice",`API initialization failed: ${t.payload}`)},clearApiConfig(e){e.url=null,e.apiKey=null,e.initialized=!1,e.error=null,e.throttleDelayMs=Sr.throttleDelayMs,e.cacheLifetimeMs=Sr.cacheLifetimeMs,e.failedRequestRetryDelayMs=Sr.failedRequestRetryDelayMs,wr.log("apiSlice","API config cleared.")}}}),{setApiConfig:Cr,apiInitializationSuccess:xr,apiInitializationError:$r,clearApiConfig:Er}=kr.actions,Ir=e=>e.api.initialized,Pr=e=>e.api.cacheLifetimeMs;var Ar=kr.reducer;const Tr=e.getInstance(),Nr=Mn("parameters/initializeConditions",(async(e,{dispatch:t,getState:n,rejectWithValue:r})=>{if(Tr.log("ParameterThunk","Initializing conditions and parameters...",{rawConditionsCount:e.length}),!e||0===e.length)return Tr.log("ParameterThunk","No raw conditions provided. Clearing processed conditions."),t(Fr([])),void t(Vr([]));t(Fr(e));const a=n(),i=[],o=new Set;for(let t=0;t<e.length;t++){const n=e[t];let r=null,s="";const l=n.parameter;if(l&&l.startsWith("part:")){{const e=l.split(":");if(3!==e.length){Tr.warn("ParameterThunk",`Malformed condition parameter string (expected part:id:name): ${l}`,{rawCond:n});continue}{const t=parseInt(e[1],10);if(isNaN(t)){Tr.warn("ParameterThunk",`Invalid partId in condition parameter string: ${l}`,{rawCond:n});continue}r=t,s=e[2]}}if(null!==r&&s)if(n.operator&&n.action&&void 0!==n.action_value){i.push({id:`cond-${t}-${Date.now()}`,rawConditionString:JSON.stringify(n),sourceParameterString:n.parameter,partId:r,parameterName:s,operator:n.operator,valueToCompare:n.value,action:n.action,actionValue:n.action_value,targetPartIds:n.targetPartIds});const e=ta(a,r);"idle"===e?o.add(r):"failed"===e?Tr.warn("ParameterThunk",`Parameters for part ${r} previously failed to load. Skipping automatic refetch in this cycle. Part: ${r}, ParamName: ${s}`):"loading"===e&&Tr.log("ParameterThunk",`Parameters for part ${r} are already loading. Skipping. Part: ${r}, ParamName: ${s}`,{level:"debug"})}else Tr.warn("ParameterThunk","Skipping condition due to missing operator, action, or action_value",{rawCond:n})}else Tr.warn("ParameterThunk",`Condition parameter string does not follow part:id:name format: ${l}`,{rawCond:n})}if(t(Vr(i)),Tr.log("ParameterThunk",`Processed ${i.length} conditions.`,{processedConditions:i}),o.size>0){const e=Array.from(o);if(Tr.log("ParameterThunk",`Need to fetch parameters for part IDs: ${e.join(", ")}`),e.length>0)try{await t(Rr(e)).unwrap(),Tr.log("ParameterThunk",`Successfully initiated fetch for referenced parts: ${e.join(", ")}`)}catch(t){Tr.error("ParameterThunk",`Failed to fetch parameters for referenced parts: ${e.join(", ")}`,{error:t})}}else Tr.log("ParameterThunk","No new part parameters need to be fetched based on conditions.");try{await t(Lr()).unwrap()}catch(e){Tr.error("ParameterThunk","Error during evaluateAndApplyConditions",{evalError:e})}})),Dr=Mn("parameters/fetchForPart",(async(e,t)=>{const n=t.getState(),r=Ir(n);if(Tr.log("ParameterThunk",`Fetching parameters for part ID: ${e}`,{category:"parameters",subsystem:"thunk-fetch"}),!r){const e="Direct API is not initialized (checked via apiSlice).";return Tr.error("ParameterThunk",e,{category:"parameters",subsystem:"thunk-fetch"}),t.rejectWithValue(e)}try{const t=await er.getPartParameters(e);if(null===t)throw new Error("API call to getPartParameters returned null.");const n=t.length;return Tr.log("ParameterThunk",`Successfully fetched ${n} parameters for part ID: ${e}`,{category:"parameters",subsystem:"thunk-fetch"}),{partId:e,parameters:t}}catch(n){const r=`Failed to fetch parameters for part ${e}: ${n.message||n}`;return Tr.error("ParameterThunk",r,{error:n,category:"parameters",subsystem:"thunk-fetch"}),t.rejectWithValue(r)}})),Rr=Mn("parameters/fetchForReferencedParts",(async(e,{getState:t,rejectWithValue:n})=>{const r=t(),a=Ir(r);if(Tr.log("fetchParametersForReferencedParts Thunk",`Thunk started. Original partIds received: ${e.join(", ")}`,{level:"debug"}),!a){const e="API not initialized. Cannot fetch referenced parameters.";return Tr.error("fetchParametersForReferencedParts Thunk",e),n(e)}if(!e||0===e.length)return Tr.log("fetchParametersForReferencedParts Thunk","No part IDs provided, skipping fetch."),{};const i=e.filter((e=>"failed"!==ta(r,e)||(Tr.warn("fetchParametersForReferencedParts Thunk",`Part ${e} previously failed. Skipping fetch in this batch.`),!1)));if(0===i.length)return Tr.log("fetchParametersForReferencedParts Thunk","All provided part IDs are already loading, recently failed, or list was empty after filtering. Skipping API calls."),{};Tr.log("fetchParametersForReferencedParts Thunk",`Attempting to fetch parameters for part IDs: ${i.join(", ")} (after filtering). Original IDs: ${e.join(", ")}`);try{const e={},t=i.map((e=>(Tr.log("fetchParametersForReferencedParts Thunk",`Preparing API call for partId: ${e}`,{level:"silly"}),er.getPartParameters(e).then((t=>({status:"fulfilled",value:t,partId:e}))).catch((t=>({status:"rejected",reason:t,partId:e})))))),n=await Promise.all(t.map((e=>e.catch((e=>e)))));return Tr.log("fetchParametersForReferencedParts Thunk","Raw settledIndividualPromises:",{data:n,level:"silly"}),n.forEach((t=>{const n=t.partId;if(Tr.log("fetchParametersForReferencedParts Thunk",`Processing settled promise for partId: ${n}`,{status:t.status,level:"silly"}),"fulfilled"===t.status){const r=t.value;if(null===r){const t=`API returned null or failed to fetch parameters for part ${n}.`;Tr.warn("fetchParametersForReferencedParts Thunk",t,{partIdForContext:n}),e[n]={data:[],error:t}}else e[n]={data:r},Tr.log("fetchParametersForReferencedParts Thunk",`Fetched ${r.length} parameters for part ${n}.`,{level:"debug",partIdForContext:n})}else{const r=t.reason||t,a=(null==r?void 0:r.message)||String(r);Tr.error("fetchParametersForReferencedParts Thunk",`Failed to fetch parameters for part ${n}: ${a}`,{partIdForContext:n,errorDetail:r}),e[n]={data:[],error:a}}})),Tr.log("fetchParametersForReferencedParts Thunk",`Finished processing parameter fetches for ${i.length} parts.`),Tr.log("fetchParametersForReferencedParts Thunk","Final results object being returned:",{data:e,level:"debug"}),e}catch(e){const t=`Overall failure in fetchParametersForReferencedParts thunk: ${e.message||e}`;return Tr.error("fetchParametersForReferencedParts Thunk",t),i.forEach((e=>{})),n(t)}})),jr=Mn("parameters/updateValue",(async({partId:e,paramName:t,value:n},{getState:r,rejectWithValue:a})=>{const i=r();if(!Ir(i)){const e="API not initialized. Cannot update parameter.";return Tr.error("updateParameterValue Thunk",e),a(e)}try{const r=(i.parameters.parametersByPartId[e]||[]).find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t}));if(!r){const n=`Parameter '${t}' not found in state for part ${e}. Cannot get PK for update.`;return Tr.error("updateParameterValue Thunk",n),a(n)}const o=r.pk;if(!await er.updatePartParameter(o,n))throw new Error("API call to updatePartParameter returned null.");return Tr.log("updateParameterValue Thunk",`Successfully updated param PK ${o} (${t}) for part ${e} to ${n}.`),{partId:e,parameterName:t,value:n}}catch(n){const r=`Failed to update parameter ${t} for part ${e}: ${n.message||n}`;return Tr.error("updateParameterValue Thunk",r),a(r)}})),Lr=Mn("parameters/evaluateAndApplyConditions",(async(e,{dispatch:t,getState:n})=>{var r,a;const i=n(),{processedConditions:o,parameterValues:s}=i.parameters;console.log("[PT_DEBUG] evaluateAndApplyConditions - START. Processed Conditions:",JSON.parse(JSON.stringify(o))),console.log("[PT_DEBUG] evaluateAndApplyConditions - Current parameterValues:",JSON.parse(JSON.stringify(s)));const l=i.parts.partsById;if(!o||0===o.length)return Tr.log("ParameterThunk","No processed conditions to evaluate. Clearing existing effects."),void t(Ur());const c={};for(const e of o){const t=null===(a=null===(r=s[e.partId])||void 0===r?void 0:r[e.parameterName])||void 0===a?void 0:a.data;let n=!1;switch(145===e.partId&&"microwavables"===e.parameterName&&console.log("[PT_DEBUG] Evaluating condition for part:145:microwavables",{conditionSourceString:e.sourceParameterString,operator:e.operator,valueToCompare:e.valueToCompare,paramValueReadFromState:t,currentParameterValuesForPart145:s[145]}),e.operator){case"equals":n=String(t)===String(e.valueToCompare);break;case"not_equals":n=String(t)!==String(e.valueToCompare);break;case"contains":n=String(t).includes(String(e.valueToCompare));break;case"exists":n=null!=t&&""!==t;break;case"is_empty":n=null==t||""===t;break;case"greater_than":n=parseFloat(t)>parseFloat(e.valueToCompare);break;case"less_than":n=parseFloat(t)<parseFloat(e.valueToCompare);break;default:Tr.warn("ParameterThunk",`Unknown operator: ${e.operator}`,{condition:e})}if(n){console.log("[PT_DEBUG] Condition MET",{conditionSource:e.sourceParameterString,evaluatedParamValue:t,comparedTo:e.valueToCompare,operator:e.operator});let n=[];if("*"===e.targetPartIds?n=Object.keys(l).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))):Array.isArray(e.targetPartIds)&&(n=e.targetPartIds),Tr.log("ParameterThunk","[DEBUG] Target Part ID Resolution",{level:"info",conditionSource:e.sourceParameterString,rawTargetPartIds:e.targetPartIds,resolvedTargetPartPks:n,targetPartPksLength:n.length}),n.length>0){let t={};switch(e.action){case"filter":t.isVisible="show"===e.actionValue;break;case"highlight":t.highlight=e.actionValue;break;case"text_color":t.textColor=e.actionValue;break;case"border":t.border=e.actionValue;break;case"icon":t.icon=e.actionValue;break;case"badge":t.badge=e.actionValue;break;case"sort":case"priority":case"show_section":Tr.log("ParameterThunk",`Action type '${e.action}' requires specific handling not yet implemented in basic effects.`,{condition:e});break;default:Tr.warn("ParameterThunk",`Unknown action type: ${e.action}`,{condition:e})}console.log("[PT_DEBUG] Effect to Apply for MET condition",{conditionSource:e.sourceParameterString,action:e.action,actionValue:e.actionValue,effectToApply:t,targetPartPks:n}),Object.keys(t).length>0?n.forEach((e=>{return r=t,c[n=e]||(c[n]={}),void(c[n]=Object.assign(Object.assign({},c[n]),r));var n,r})):console.warn("[PT_DEBUG] effectToApply is empty, no effect merged.",{conditionSource:e.sourceParameterString,action:e.action,actionValue:e.actionValue,targetPartPks:n})}else Tr.warn("ParameterThunk","[DEBUG] No target part PKs resolved for MET condition. Effect will not be applied.",{conditionSource:e.sourceParameterString,rawTargetPartIds:e.targetPartIds,conditionAction:e.action,conditionActionValue:e.actionValue})}else Tr.log("ParameterThunk","Condition NOT MET",{level:"info",conditionSource:e.sourceParameterString,evaluatedParamValue:t,comparedTo:e.valueToCompare,operator:e.operator})}console.log("[PT_DEBUG] Final newEffects before dispatching setConditionalPartEffectsBatch",{newEffects:c}),t(Wr(c)),Tr.log("ParameterThunk","Finished evaluating conditions and dispatched effects batch.",{newEffectsCount:Object.keys(c).length})})),Or=e.getInstance(),zr=Gn({name:"parameters",initialState:{conditions:{},definedConditions:[],processedConditions:[],conditionalPartEffects:{},actions:{},parameterValues:{},parameterLoadingStatus:{},parameterError:{},config:null,strictWebSocketMode:!1,recentlyChanged:[],cache:{conditionResults:{},lastCleared:Date.now()},parametersByPartId:{}},reducers:{setConditions(e,t){const{entityId:n,conditions:r}=t.payload;e.conditions[n]=r},setDefinedConditions(e,t){e.definedConditions=t.payload,Or.log("parametersSlice","Defined conditions have been set.",{count:t.payload.length,level:"debug"})},setProcessedConditions(e,t){e.processedConditions=t.payload,Or.log("parametersSlice","Processed conditions have been set.",{count:t.payload.length,level:"debug"})},setConditionalPartEffectsBatch(e,t){e.conditionalPartEffects=t.payload,Or.log("parametersSlice","Conditional part effects batch updated.",{count:Object.keys(t.payload).length,level:"debug"})},clearConditionalPartEffects(e){e.conditionalPartEffects={},Or.log("parametersSlice","Conditional part effects cleared.",{level:"debug"})},setActions(e,t){const{entityId:n,actions:r}=t.payload;e.actions[n]=r},setConfig(e,t){e.config=t.payload},setStrictWebSocketMode(e,t){e.strictWebSocketMode=t.payload},clearConditionCache(e){e.cache.conditionResults={},e.cache.lastCleared=Date.now(),Or.log("parametersSlice","Condition cache cleared.",{level:"debug"})},clearCache(e){e.cache.conditionResults={},e.cache.lastCleared=Date.now(),e.parameterValues={},e.parameterLoadingStatus={},e.parameterError={},e.recentlyChanged=[],Or.info("parametersSlice","Full parameter cache cleared (values, status, errors, conditions, recent).")},checkCondition(e,t){},updateValue(e,t){const{partId:n,paramName:r,value:a,source:i}=t.payload;e.parameterValues[n]||(e.parameterValues[n]={},Or.log("parametersSlice",`Created parameter entry for part ${n} during updateValue.`,{level:"debug"})),e.parameterValues[n][r]?e.parameterValues[n][r].data=a:(e.parameterValues[n][r]={pk:0,part:n,template:0,template_detail:{pk:0,name:r,units:"",description:"",checkbox:!1,choices:"",selectionlist:null},data:a,data_numeric:null},Or.log("parametersSlice",`Created parameter entry for ${r} on part ${n} during updateValue.`,{level:"debug"})),"succeeded"!==e.parameterLoadingStatus[n]&&(e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null);const o=`${n}:${r}`;e.recentlyChanged.includes(o)||(e.recentlyChanged.push(o),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100))),Or.log("parametersSlice",`Updated value for ${o} to '${a}' (Source: ${i||"Unknown"}). Status set to succeeded.`,{level:"debug"})},webSocketUpdateReceived(e,t){var n,r,a,i;const{partId:o,parameterName:s,value:l,source:c}=t.payload;Or.log("parametersSlice","[Reducer START] webSocketUpdateReceived",{level:"info",partId:o,parameterName:s,receivedValue:l,valueType:typeof l,source:c}),e.parameterValues[o]||(e.parameterValues[o]={},Or.log("parametersSlice",`Created parameter structure for part ${o} during WebSocket update.`,{level:"debug"}));const u=null===(r=null===(n=e.parameterValues[o])||void 0===n?void 0:n[s])||void 0===r?void 0:r.data;Or.log("parametersSlice",`Value before update for ${o}:${s}: ${u}`,{level:"debug"}),e.parameterValues[o][s]?(e.parameterValues[o][s].data=String(l),Or.log("parametersSlice",`Updated existing parameter ${s} for part ${o} via WebSocket. New data: ${String(l)}`,{level:"debug"})):(e.parameterValues[o][s]={pk:0,part:o,template:0,template_detail:{pk:0,name:s,units:"",description:"",checkbox:"boolean"==typeof l,choices:"",selectionlist:null},data:String(l),data_numeric:"number"==typeof l?l:null},Or.log("parametersSlice",`Created new parameter entry for ${s} on part ${o} via WebSocket. New data: ${String(l)}`,{level:"debug"}));const d=null===(i=null===(a=e.parameterValues[o])||void 0===a?void 0:a[s])||void 0===i?void 0:i.data;Or.log("parametersSlice",`Value AFTER update for ${o}:${s}: ${d}`,{level:"debug"}),e.parameterLoadingStatus[o]="succeeded",e.parameterError[o]=null;const p=`${o}:${s}`;e.recentlyChanged.includes(p)||(e.recentlyChanged.push(p),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100))),Or.log("parametersSlice",`[Reducer END] Value for ${p} processed via WebSocket. Status set to succeeded. Final data in store: ${d}`,{level:"info"})},markChanged(e,t){const{parameterId:n}=t.payload;e.recentlyChanged.includes(n)||(e.recentlyChanged.push(n),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100)))},addParametersForPart(e,t){const{partId:n,parameters:r}=t.payload;e.parametersByPartId[n]||(e.parametersByPartId[n]=[]),e.parametersByPartId[n]=[...e.parametersByPartId[n],...r]},updateParameterForPart(e,t){const{partId:n,parameterName:r,value:a}=t.payload,i=e.parametersByPartId[n];if(i){const e=i.findIndex((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===r}));-1!==e?(i[e]=Object.assign(Object.assign({},i[e]),{data:a}),Or.log("ParameterSlice",`Updated parameter '${r}' for part ${n} to value: ${a}`,{level:"debug"})):Or.warn("ParameterSlice",`Parameter '${r}' not found for part ${n} during update.`)}else Or.warn("ParameterSlice",`Part ${n} not found in parametersByPartId during update.`)}},extraReducers:e=>{e.addCase(Dr.pending,((e,t)=>{const n=t.meta.arg;e.parameterLoadingStatus[n]="loading",e.parameterError[n]=null,Or.log("parametersSlice",`Fetching parameters for part ${n}...`,{level:"debug"})})).addCase(Dr.fulfilled,((e,t)=>{const{partId:n,parameters:r}=t.payload;e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null,e.parameterValues[n]||(e.parameterValues[n]={}),r.length>0?(r.forEach((t=>{var r;const a=null===(r=t.template_detail)||void 0===r?void 0:r.name;a?e.parameterValues[n][a]=t:Or.warn("parametersSlice",`Fetched parameter for part ${n} is missing template_detail.name`,t)})),Or.log("parametersSlice",`Successfully fetched ${r.length} parameters for part ${n}.`,{level:"debug"})):Or.log("parametersSlice",`Fetched parameters for part ${n}, but received an empty array. Marking as succeeded.`,{level:"debug"})})).addCase(Dr.rejected,((e,t)=>{var n;const r=t.meta.arg;e.parameterLoadingStatus[r]="failed",e.parameterError[r]=null!==(n=t.payload)&&void 0!==n?n:"Failed to fetch parameters",Or.error("parametersSlice",`Failed to fetch parameters for part ${r}: ${e.parameterError[r]}`)})).addCase(Rr.pending,((e,t)=>{Or.log("parametersSlice","Handling fetchParametersForReferencedParts.pending",{level:"debug",subsystem:"thunkStatus"});const n=t.meta.arg;Or.log("parametersSlice",`- Pending for partIds from thunk argument: ${n.join(", ")}`,{level:"debug",subsystem:"thunkStatus",data:n}),n.forEach((t=>{var n;const r=null!==(n=e.parameterLoadingStatus[t])&&void 0!==n?n:"idle";"idle"===r||"failed"===r?(e.parameterLoadingStatus[t]="loading",e.parameterError[t]=null,Or.log("parametersSlice",`Set part ${t} to loading (was ${r})`,{level:"silly"})):Or.log("parametersSlice",`Part ${t} already ${r}, not changing to loading in pending reducer.`,{level:"silly"})}))})).addCase(Rr.fulfilled,((e,t)=>{const n=t.payload;Or.log("parametersSlice","Handling fetchParametersForReferencedParts.fulfilled",{level:"debug",subsystem:"thunkStatus",data:n}),Object.entries(n).forEach((([t,n])=>{const r=parseInt(t,10);if(n.error)e.parameterLoadingStatus[r]="failed",e.parameterError[r]=n.error,e.parameterValues[r]||(e.parameterValues[r]={}),Or.warn("parametersSlice",`fetchParametersForReferencedParts fulfilled but part ${r} failed: ${n.error}`);else{e.parameterLoadingStatus[r]="succeeded",e.parameterError[r]=null,e.parameterValues[r]||(e.parameterValues[r]={});const t={};n.data.length>0&&n.data.forEach((e=>{var n;const a=null===(n=e.template_detail)||void 0===n?void 0:n.name;a?t[a]=e:Or.warn("parametersSlice",`Fetched parameter for part ${r} is missing template_detail.name`,{paramData:e})})),e.parameterValues[r]=t,Or.log("parametersSlice",`Updated parameters for part ${r}. Count: ${n.data.length}.`,{level:"debug"})}}))})).addCase(Rr.rejected,((e,t)=>{Or.error("parametersSlice",`Handling fetchParametersForReferencedParts.rejected: ${t.payload||t.error.message}`,{subsystem:"thunkStatus",error:t.payload||t.error});const n=t.meta.arg;n&&Array.isArray(n)&&n.forEach((n=>{"loading"===e.parameterLoadingStatus[n]&&(e.parameterLoadingStatus[n]="failed",e.parameterError[n]=t.payload||t.error.message||"Thunk rejected")}))})).addCase(jr.pending,((e,t)=>{const{partId:n,paramName:r}=t.meta.arg;Or.log("parametersSlice",`Updating parameter ${r} for part ${n}...`,{level:"debug"})})).addCase(jr.fulfilled,((e,t)=>{const{partId:n,paramName:r,value:a}=t.payload,i=`${n}:${r}`;e.parameterValues[n]&&e.parameterValues[n][r]?(e.parameterValues[n][r].data=a,Or.log("parametersSlice",`Successfully updated parameter ${i} to '${a}' via API.`,{level:"debug"})):Or.warn("parametersSlice",`Parameter ${i} not found in state during updateParameterValue.fulfilled. Value set by API might not be reflected unless fetched.`),e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null,e.recentlyChanged.includes(i)||(e.recentlyChanged.push(i),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100)))})).addCase(jr.rejected,((e,t)=>{const{partId:n,paramName:r}=t.meta.arg,a=`${n}:${r}`;Or.error("parametersSlice",`Failed to update parameter ${a} via API: ${t.payload}`)}))}}),{setConditions:Mr,setDefinedConditions:Fr,setProcessedConditions:Vr,setConditionalPartEffectsBatch:Wr,clearConditionalPartEffects:Ur,setActions:Br,setConfig:qr,setStrictWebSocketMode:Hr,clearConditionCache:Gr,clearCache:Kr,checkCondition:Qr,updateValue:Jr,webSocketUpdateReceived:Yr,markChanged:Xr,addParametersForPart:Zr,updateParameterForPart:ea}=zr.actions,ta=(e,t)=>{var n;return null!==(n=e.parameters.parameterLoadingStatus[t])&&void 0!==n?n:"idle"};var na=zr.reducer;const ra=Gn({name:"ui",initialState:{activeView:"detail",selectedPartId:null,debug:{showDebugPanel:!1,activeTab:"data"},loading:!1},reducers:{setActiveView(e,t){e.activeView=t.payload},setSelectedPart(e,t){e.selectedPartId=t.payload},toggleDebugPanel(e){e.debug.showDebugPanel=!e.debug.showDebugPanel},setDebugTab(e,t){e.debug.activeTab=t.payload},setLoading(e,t){e.loading=t.payload}}});ra.actions;var aa=ra.reducer;const ia=new Map,oa=new Map;function sa(e,t,n){const r=window.setTimeout(e,t);return ia.set(r,n||"anonymous"),r}function la(e){window.clearTimeout(e),ia.delete(e)}const ca=Gn({name:"timers",initialState:{timers:{},componentTimers:{},lastId:0},reducers:{addTimer:(e,t)=>{const{componentId:n,label:r,startTime:a,delay:i,type:o}=t.payload,s=++e.lastId;e.timers[s]={id:s,componentId:n,label:r,startTime:a,delay:i,type:o},e.componentTimers[n]||(e.componentTimers[n]=new Set),e.componentTimers[n].add(s)},removeTimer:(e,t)=>{const n=t.payload,r=e.timers[n];r&&(e.componentTimers[r.componentId]&&(e.componentTimers[r.componentId].delete(n),0===e.componentTimers[r.componentId].size&&delete e.componentTimers[r.componentId]),delete e.timers[n])},clearComponentTimers:(e,t)=>{const n=t.payload,r=e.componentTimers[n];r&&(r.forEach((t=>{delete e.timers[t]})),delete e.componentTimers[n])},clearAllTimers:e=>{e.timers={},e.componentTimers={}}}}),{addTimer:ua,removeTimer:da,clearComponentTimers:pa,clearAllTimers:fa}=ca.actions;function ga(e){return(t,n)=>{const r=((e,t)=>Object.values(e.timers.timers).filter((e=>null!==e&&"object"==typeof e&&"componentId"in e&&e.componentId===t)))(n(),e);r.forEach((e=>{var t;"timeout"===e.type?la(e.id):(t=e.id,window.clearInterval(t),oa.delete(t))})),t(pa(e))}}var ha=ca.reducer;const ma=e.getInstance(),va={status:"idle",lastMessage:null,lastError:null,messageCount:0},ya=Gn({name:"websocket",initialState:va,reducers:{setWebSocketStatus:(e,t)=>{ma.log("WebSocketSlice",`Status changing from ${e.status} to ${t.payload}`),e.status=t.payload,"error"===t.payload?e.lastError="An error occurred":e.lastError=null},webSocketMessageReceived:(e,t)=>{e.lastMessage=t.payload,e.messageCount+=1,ma.log("WebSocketSlice",`Message received (Count: ${e.messageCount})`,t.payload)},resetWebSocketState:e=>{ma.log("WebSocketSlice","Resetting WebSocket state"),Object.assign(e,va)}}}),{setWebSocketStatus:ba,webSocketMessageReceived:_a,resetWebSocketState:wa}=ya.actions;var Sa=ya.reducer;const ka=Gn({name:"components",initialState:{registeredComponents:{}},reducers:{registerComponent:(e,t)=>{const n=t.payload,r=Date.now();e.registeredComponents[n]={isActive:!0,registeredAt:r,lastActive:r}},disconnectComponent:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&(e.registeredComponents[n].isActive=!1)},reconnectComponent:(e,t)=>{const n=t.payload,r=Date.now();e.registeredComponents[n]?(e.registeredComponents[n].isActive=!0,e.registeredComponents[n].lastActive=r):e.registeredComponents[n]={isActive:!0,registeredAt:r,lastActive:r}},updateComponentActivity:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&(e.registeredComponents[n].lastActive=Date.now())},removeComponent:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&delete e.registeredComponents[n]}}});ka.actions;var Ca=ka.reducer;const xa=e.getInstance(),$a=Mn("search/perform",(async(e,t)=>{try{xa.log("performSearch",`Searching for: "${e}"`,{level:"debug"});const t=(await er.getParts({search:e})).map((e=>({pk:e.pk,name:e.name,thumbnail:e.thumbnail||void 0})));return xa.log("performSearch",`Search successful, found ${t.length} results.`),t}catch(e){const n=e.message||"Failed to perform search";return xa.error("performSearch",`Search failed: ${n}`,e),t.rejectWithValue("string"==typeof e?e:n)}}));Mn("search/searchInventree",(async(e,{getState:t,rejectWithValue:n})=>{t(),xa.warn("searchInventree Thunk","Attempting to create API instance inside thunk - this should be refactored.");try{xa.warn("searchInventree Thunk","Using MOCKED API response"),await new Promise((e=>setTimeout(e,500)));const t=e.toLowerCase().includes("resistor")?[{pk:101,name:"Resistor 1k",in_stock:100,thumbnail:""},{pk:102,name:"Resistor 10k",in_stock:50,thumbnail:""}]:[];return xa.log("searchInventree Thunk",`Search for "${e}" returned ${t.length} results.`),t}catch(e){return xa.error("searchInventree Thunk",`Search failed: ${e.message||e}`),n(e.message||"Search failed")}}));const Ea=e.getInstance(),Ia=Gn({name:"search",initialState:{query:"",results:[],loading:"idle",error:null},reducers:{setSearchQuery:(e,t)=>{e.query=t.payload,Ea.log("searchSlice",`Search query set to: "${t.payload}"`,{level:"debug"})},clearSearch:e=>{e.query="",e.results=[],e.loading="idle",e.error=null,Ea.log("searchSlice","Search state cleared.",{level:"debug"})}},extraReducers:e=>{e.addCase($a.pending,(e=>{e.loading="pending",e.error=null,Ea.log("searchSlice","Search pending...",{level:"debug"})})).addCase($a.fulfilled,((e,t)=>{e.loading="succeeded",e.results=t.payload,e.error=null,Ea.log("searchSlice",`Search succeeded with ${t.payload.length} results.`,{level:"debug"})})).addCase($a.rejected,((e,t)=>{var n;e.loading="failed",e.error=null!==(n=t.payload)&&void 0!==n?n:"Search failed",e.results=[],Ea.error("searchSlice",`Search failed: ${e.error}`)}))}}),{setSearchQuery:Pa,clearSearch:Aa}=Ia.actions,Ta=e=>e.search.query,Na=e=>e.search.results,Da=e=>e.search.loading,Ra=e=>e.search.error;var ja=Ia.reducer;const La=e.getInstance(),Oa=Gn({name:"visualEffects",initialState:{effectsByPartId:{}},reducers:{setVisualEffect(e,t){const{partId:n,effect:r}=t.payload;e.effectsByPartId[n]||(e.effectsByPartId[n]={}),e.effectsByPartId[n]=Object.assign(Object.assign({},e.effectsByPartId[n]),r),La.log("visualEffectsSlice",`Visual effect set/merged for part ${n}.`,{partId:n,newEffect:r,level:"debug"})},setVisualEffectsBatch(e,t){e.effectsByPartId=t.payload,La.log("visualEffectsSlice","Visual effects batch updated.",{count:Object.keys(t.payload).length,level:"debug"})},clearVisualEffect(e,t){const n=t.payload;delete e.effectsByPartId[n],La.log("visualEffectsSlice",`Visual effects cleared for part ${n}.`,{partId:n,level:"debug"})},clearAllVisualEffects(e){e.effectsByPartId={},La.log("visualEffectsSlice","All visual effects cleared.",{level:"debug"})}}});Oa.actions;var za=Oa.reducer;const Ma=e.getInstance(),Fa=Gn({name:"config",initialState:{dataSources:{primary:{entityId:null},additional:{entities:[],directPartIds:[],categories:[]},inventreeParametersToFetch:[],api:{enabled:!1,url:null,apiKey:null,websocketUrl:null},bindings:{},refresh:{pollingInterval:300,websocketEnabled:!0,cacheLifetime:60}},objectTransformations:{filters:[],derivedProperties:[],sorting:[],grouping:{groupByProperty:null,enabled:!1},resolveVariants:!1},expressions:{},presentation:{viewType:"detail",layout:{},display:{showImage:!0,showName:!0,showStock:!0,showDescription:!1,showCategory:!1,showIPN:!1,showLocation:!1,showButtonsArea:!0,showParametersSection:!0},styling:{},conditionalRules:{}},interactions:{buttons:{}},system:{performance:{rendering:{debounceTime:50,idleRenderInterval:5e3,maxRenderFrequency:10},websocket:{reconnectInterval:5e3,messageDebounce:50},api:{throttle:.2,cacheLifetime:60,batchSize:20,failedRequestRetryDelaySeconds:30},parameters:{updateFrequency:1e3,conditionEvalFrequency:1e3}},debug:{enabled:!1,verbose:!1,hierarchical:{}}},configVersion:"1.0.0",lastSaved:void 0},reducers:{setFullConfig(e,t){Object.assign(e,t.payload),e.lastSaved=(new Date).toISOString(),Ma.log("configSlice","Full configuration set and updated lastSaved.",{newConfig:t.payload})},setDataSourcesConfig(e,t){e.dataSources=Object.assign(Object.assign({},e.dataSources),t.payload),e.lastSaved=(new Date).toISOString(),Ma.log("configSlice","DataSources configuration updated.",{updates:t.payload})},setObjectTransformationsConfig(e,t){e.objectTransformations=Object.assign(Object.assign({},e.objectTransformations),t.payload),e.lastSaved=(new Date).toISOString()},setExpressionsConfig(e,t){e.expressions=t.payload,e.lastSaved=(new Date).toISOString()},setPresentationConfig(e,t){e.presentation=Object.assign(Object.assign({},e.presentation),t.payload),e.lastSaved=(new Date).toISOString()},setInteractionsConfig(e,t){e.interactions=Object.assign(Object.assign({},e.interactions),t.payload),e.lastSaved=(new Date).toISOString()},setSystemConfig(e,t){t.payload.performance&&(e.system.performance=Object.assign(Object.assign({},e.system.performance),t.payload.performance)),t.payload.debug&&(e.system.debug=Object.assign(Object.assign({},e.system.debug),t.payload.debug)),e.lastSaved=(new Date).toISOString()},setApiConfig(e,t){e.dataSources.api=Object.assign(Object.assign({},e.dataSources.api),t.payload),e.lastSaved=(new Date).toISOString(),Ma.log("configSlice","API configuration within DataSources updated.",{updates:t.payload})}}});Fa.actions;var Va=Fa.reducer;const Wa=e.getInstance(),Ua=e=>t=>n=>{const r=performance.now();Wa.log("Redux Middleware",`üöÄ Action Dispatched: ${n.type}`,{category:"redux",subsystem:"action",data:n.payload});const a=t(n),i=performance.now()-r;if(Wa.log("Redux Middleware",`‚è±Ô∏è Action Completed: ${n.type} (${i.toFixed(2)}ms)`,{category:"redux",subsystem:"performance"}),Wa.isEnabled("redux","state")){const t=e.getState();Wa.log("Redux Middleware",`üîÑ State After Action: ${n.type}`,{category:"redux",subsystem:"state",data:t})}return a},Ba={ENTITY_DATA:3e4,PARAMETER:6e4,RENDER_DEDUP:300,WS_DEDUP:500,CONDITION:2e3,FALLBACK:6e4};var qa;!function(e){e.ENTITY="entity",e.PARAMETER="parameter",e.RENDER="render",e.WEBSOCKET="websocket",e.CONDITION="condition",e.GENERAL="general"}(qa||(qa={}));class Ha{constructor(){this.cache=new Map,this._fallbackValues=new Map,this._missCallbacks=new Map,this._pruneIntervalId=null,this._isDestroyed=!1,this._useRedux=!0,this.logger=e.getInstance();try{this._useRedux=!0,this.logger.log("CacheService","CacheService instance created"),be("cache","initialize",{source:this._useRedux?"redux":"legacy"})}catch(e){this._useRedux=!1,this.logger.error("Cache","Error during feature flag check, using fallback timer implementation",{category:"cache",subsystem:"errors",error:e})}this._startPruneInterval()}_startPruneInterval(){if(!this._isDestroyed&&null===this._pruneIntervalId)try{be("cache","startPruneInterval",{source:this._useRedux?"redux":"legacy"}),this._pruneIntervalId=setInterval((()=>{this._isDestroyed||this.prune()}),6e4),this.logger.log("Cache","Prune interval started",{category:"cache",subsystem:this._useRedux?"redux":"legacy"})}catch(e){if(this.logger.error("Cache",`Failed to start prune interval: ${e}`,{category:"cache",subsystem:"errors"}),!this._pruneIntervalId)try{this._pruneIntervalId=setTimeout((()=>{this._isDestroyed||this.prune()}),6e4),this.logger.log("Cache","Prune interval started with fallback timer",{category:"cache"})}catch(e){this.logger.error("Cache",`Failed to start fallback prune interval: ${e}`,{category:"cache",subsystem:"errors"})}}}static getInstance(){return Ha.instance||(Ha.instance=new Ha),Ha.instance}set(e,t,n,r=qa.GENERAL){if(this._isDestroyed)return;be("cache","set",{category:r,source:this._useRedux?"redux":"legacy"});let a=n;if(void 0===a)if(r===qa.ENTITY||r===qa.PARAMETER){const t=Pr(si.getState());t>0?(a=t,this.logger.log("Cache",`Using configured API cache lifetime for ${e}: ${a}ms`,{category:"cache",subsystem:r})):(a=r===qa.ENTITY?Ba.ENTITY_DATA:Ba.PARAMETER,this.logger.log("Cache",`Using default API cache lifetime for ${e}: ${a}ms (configured was ${t}ms)`,{category:"cache",subsystem:r}))}else a=e.startsWith("render:")?Ba.RENDER_DEDUP:e.startsWith("ws-")||e.startsWith("websocket:")?Ba.WS_DEDUP:e.startsWith("condition:")?Ba.CONDITION:Ba.FALLBACK;else if(n===Ba.FALLBACK&&(r===qa.ENTITY||r===qa.PARAMETER)){const e=Pr(si.getState());e>0&&(a=e)}("number"!=typeof a||a<=0)&&(this.logger.warn("Cache",`Invalid or zero TTL determined for key ${e}. Using fallback TTL: ${Ba.FALLBACK}ms`,{category:"cache",subsystem:r,determinedTtl:a}),a=Ba.FALLBACK),this.cache.set(e,{value:t,timestamp:Date.now(),ttl:a,category:r}),this.logger.log("Cache",`Set ${e}, expires in ${a}ms`,{category:"cache",subsystem:r})}get(e,t=!0){const n=this.cache.get(e);if(n){if(!(n.timestamp+n.ttl<Date.now()))return t&&this._fallbackValues.set(e,n.value),this.logger.log("Cache",`Hit: ${e}`,{category:"cache",subsystem:n.category}),n.value;if(this.cache.delete(e),this.logger.log("Cache",`Miss: ${e} (expired)`,{category:"cache",subsystem:n.category}),this._handleCacheMiss(e),t&&this._fallbackValues.has(e)){const t=this._fallbackValues.get(e);return this.logger.log("Cache",`Using fallback for ${e} (expired)`,{category:"cache"}),t}}else if(this.logger.log("Cache",`Miss: ${e} (not found)`,{category:"cache"}),this._handleCacheMiss(e),t&&this._fallbackValues.has(e)){const t=this._fallbackValues.get(e);return this.logger.log("Cache",`Using fallback for ${e}`,{category:"cache"}),t}}_handleCacheMiss(e){if(this._missCallbacks.has(e)){const t=this._missCallbacks.get(e);t&&(this.logger.log("Cache",`Executing miss callback for ${e}`,{category:"cache"}),t().then((t=>{if(void 0!==t){let n=Ba.FALLBACK;e.startsWith("entity-data:")&&(n=Ba.ENTITY_DATA),this.set(e,t,n),this.logger.log("Cache",`Miss callback successfully updated ${e}`,{category:"cache"})}})).catch((t=>{this.logger.error("Cache",`Error in miss callback for ${e}: ${t}`,{category:"cache"})})))}}registerMissCallback(e,t){this._missCallbacks.set(e,t),this.logger.log("Cache",`Registered miss callback for ${e}`,{category:"cache"})}setFallback(e,t){this._fallbackValues.set(e,t),this.logger.log("Cache",`Set fallback value for ${e}`,{category:"cache"})}has(e){const t=this.cache.get(e);return!!t&&(!(t.timestamp+t.ttl<Date.now())||(this.cache.delete(e),!1))}updateTTL(e,t){if(this._isDestroyed)return!1;const n=this.cache.get(e);return!!n&&(this.cache.set(e,Object.assign(Object.assign({},n),{ttl:t})),this.logger.log("Cache",`Updated TTL for ${e}, new expiry in ${t}ms`,{category:"cache"}),!0)}refreshEntityCache(e){const t=`entity-data:${e}`;return this.updateTTL(t,Ba.ENTITY_DATA)}delete(e){const t=this.cache.get(e);this.cache.delete(e),t?this.logger.log("Cache",`Deleted ${e}`,{category:"cache",subsystem:t.category}):this.logger.log("Cache",`Attempted to delete non-existent key: ${e}`,{category:"cache"})}prune(){const e=Date.now();let t=0;const n={};for(const[r,a]of this.cache.entries())if(a.timestamp+a.ttl<e){this.cache.delete(r),t++;const e=a.category||qa.GENERAL;n[e]=(n[e]||0)+1}if(t>0){const e=Object.entries(n).map((([e,t])=>`${e}: ${t}`)).join(", ");this.logger.log("Cache",`Pruned ${t} expired entries (${e})`,{category:"cache"})}}clear(){const e=this.cache.size;this.cache.clear(),this._fallbackValues.clear(),this.logger.log("Cache",`Cleared ${e} entries`,{category:"cache"})}getStats(){const e=Date.now();let t=0;const n={};for(const[r,a]of this.cache.entries()){const r=a.category||qa.GENERAL;n[r]=(n[r]||0)+1,a.timestamp+a.ttl<e&&t++}return{size:this.cache.size,expired:t,byCategory:n,fallbackCount:this._fallbackValues.size}}getKeys(){return Array.from(this.cache.keys())}clearPattern(e){let t=0;const n=[];for(const r of this.cache.keys())r.includes(e)&&(n.push(r),t++);for(const e of n){const t=this.cache.get(e);this.cache.delete(e),t&&this.logger.log("Cache",`Deleted ${e} by pattern match`,{category:"cache",subsystem:t.category})}return this.logger.log("Cache",`Cleared ${t} entries matching pattern: ${e}`,{category:"cache"}),t}clearEntityCache(){return this.clearPattern("entity-data:")}clearConditionCache(){return this.clearPattern("condition:")}clearRenderCache(){return this.clearPattern("render:")}clearWebSocketCache(){return this.clearPattern("ws-")+this.clearPattern("websocket:")}destroy(){if(this._isDestroyed=!0,be("cache","destroy",{source:this._useRedux?"redux":"legacy"}),null!==this._pruneIntervalId){try{clearInterval(this._pruneIntervalId)}catch(e){this.logger.error("Cache",`Error clearing prune interval: ${e}`,{category:"cache",subsystem:"errors"})}this._pruneIntervalId=null}this.clear(),this.logger.log("Cache","Cache service destroyed and resources released",{category:"cache",subsystem:this._useRedux?"redux":"legacy"})}}var Ga=Object.freeze({__proto__:null,DEFAULT_TTL:Ba,get CacheCategory(){return qa},CacheService:Ha});const Ka=e.getInstance(),Qa=e=>e=>t=>{if(Ka.log("Redux",`Action dispatched: ${t.type}`,{category:"redux",subsystem:"middleware"}),"parts/fetchParts/fulfilled"===t.type){const{entityId:e,data:n}=t.payload,r=`entity-data:${e}`;Ha.getInstance().set(r,n),Ka.log("Redux",`Updated service data for entity ${e}`,{category:"redux",subsystem:"sync"})}if("parameters/updateValue"===t.type){const{partId:e,parameterName:n,value:r}=t.payload;si.dispatch(jr({partId:e,parameterName:n,value:r})),Ka.log("Redux",`Dispatched updateParameterValue thunk for ${n}`,{})}if("parameters/checkCondition"===t.type){const{part:e,condition:n}=t.payload;Ka.log("Redux",`Checking condition for part ${null==e?void 0:e.pk}`,{category:"redux",subsystem:"parameters",condition:n})}return"parameters/clearConditionCache"!==t.type&&"parameters/clearCache"!==t.type||Ka.log("Redux","Clearing parameter cache",{category:"redux",subsystem:"parameters"}),e(t)},Ja=e=>t=>n=>{if("components/disconnectComponent"===n.type){const t=n.payload;e.dispatch(ga(t))}return t(n)},Ya=e.getInstance();let Xa=0,Za=null;const ei=e=>t=>n=>{var r;const a=t(n);if(_a.match(n)){const t=n.payload;if("object"==typeof t&&null!==t&&"event"===t.type&&"string"==typeof t.event&&"object"==typeof t.data&&null!==t.data){const n=t.event,a=t.data;if(Ya.log("WebSocketMiddleware",`Processing event: ${n}`,{eventData:a,level:"info"}),n.includes("part_partparameter.saved")||n.includes("part_partparameter.created")){const t=a;Ya.log("WebSocketMiddleware","Parameter event data:",{data:t,level:"debug"});const n=null!==(r=t.part_pk)&&void 0!==r?r:t.parent_id,i=t.parameter_name,o=t.parameter_value;void 0!==n&&void 0!==i&&void 0!==o?(Ya.log("WebSocketMiddleware",`Dispatching parameters/updateValue (direct action) for Part ${n}, Param ${i} to value ${o}`,{level:"info"}),e.dispatch(Jr({partId:Number(n),paramName:String(i),value:String(o),source:"websocket"})),setTimeout((()=>{var t,n,r;const a=e.getState().parameters.config,i=null!==(r=null===(n=null===(t=null==a?void 0:a.performance)||void 0===t?void 0:t.parameters)||void 0===n?void 0:n.conditionEvalFrequency)&&void 0!==r?r:1e3,o=Date.now();if(Za&&(clearTimeout(Za),Za=null,Ya.log("WebSocketMiddleware","Cleared pending (trailing) evaluateAndApplyConditions call due to new trigger.",{level:"silly"})),o-Xa>i)Ya.log("WebSocketMiddleware",`Dispatching evaluateAndApplyConditions (direct). Interval: ${i}ms. lastEval: ${Xa}, now: ${o}`,{level:"info"}),e.dispatch(Lr()),Xa=o;else{const t=Math.max(0,i-(o-Xa));Ya.log("WebSocketMiddleware",`Throttling evaluateAndApplyConditions. Scheduling trailing call. Delay: ${t}ms. lastEval: ${Xa}, now: ${o}`,{level:"info"}),Za=setTimeout((()=>{Ya.log("WebSocketMiddleware",`Dispatching evaluateAndApplyConditions (trailing call). Interval: ${i}ms.`,{level:"info"}),e.dispatch(Lr()),Xa=Date.now(),Za=null}),t)}}),0)):Ya.warn("WebSocketMiddleware","Received parameter update, but missing key data fields.",{paramData:t})}else if(n.includes("stock_stockitem.saved")||n.includes("stock_stockitem.created")){const t=a,n=t.part_id;void 0!==n?(Ya.log("WebSocketMiddleware",`Dispatching partStockUpdateFromWebSocket for Part ${n}`),e.dispatch(dr({partId:Number(n),quantity:t.quantity,batch:t.batch,serial:t.serial,status_label:t.status_label,status_value:t.status_value,last_updated:t.last_updated,part_name:t.part_name,part_ipn:t.part_ipn,part_thumbnail:t.part_thumbnail,location_id:t.location_id,location_name:t.location_name,location_pathstring:t.location_pathstring,stockItemId:t.id})),Ya.log("WebSocketMiddleware",`Dispatching fetchPartDetails for Part ${n} due to stock event.`),e.dispatch(nr(Number(n)))):Ya.warn("WebSocketMiddleware","Received stock update, but missing part_id.",{stockData:t})}else Ya.log("WebSocketMiddleware",`Received unhandled event type: ${n}`,{eventData:a})}else Ya.warn("WebSocketMiddleware","Received webSocketMessageReceived action, but payload was not a valid WebSocketEventMessage structure",{payload:n.payload})}return"websocket/connect"===n.type?Ya.log("WebSocket Middleware","Explicit connect action received (currently informational)"):"websocket/disconnect"===n.type&&Ya.log("WebSocket Middleware","Explicit disconnect action received (currently informational)"),a},ti=e.getInstance(),ni=new Map,ri={"parameters/webSocketUpdateReceived":250},ai=e=>e=>t=>{const n=t.type;if(!ri[n])return e(t);{const r=ri[n],a=`${n}:${JSON.stringify(t.payload||{})}`;ti.log("DebounceMiddleware",`Debouncing action: ${n}, Key: ${a}, Time: ${r}ms`),ni.has(a)&&clearTimeout(ni.get(a));const i=setTimeout((()=>{ti.log("DebounceMiddleware",`Executing debounced action: ${n}, Key: ${a}`),ni.delete(a),e(t)}),r);ni.set(a,i)}},ii=e.getInstance(),oi=e=>e=>t=>{const n=e(t);if("metrics/trackEvent"===t.type){const{category:e,action:n,label:r,value:a}=t.payload;try{be(e,n,{label:r,value:a,source:"redux"}),ii.log("MetricsMiddleware",`Tracked event: ${e}/${n}`,{category:"metrics",data:t.payload})}catch(e){ii.error("MetricsMiddleware",`Error tracking usage: ${e}`,{category:"metrics",error:e})}}return n},si=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let i=new En;return t&&(function(e){return"boolean"==typeof e}(t)?i.push(kn):i.push(Cn(t.extraArgument))),i},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o,enhancers:s}=e||{};let l,c;if("function"==typeof n)l=n;else{if(!wt(n))throw new Error(Qn(1));l=kt(n)}c="function"==typeof r?r(t):t();let u=Ct;a&&(u=xn({trace:!1,..."object"==typeof a&&a}));const d=function(...e){return t=>(n,r)=>{const a=t(n,r);let i=()=>{throw new Error(vt(15))};const o={getState:a.getState,dispatch:(e,...t)=>i(e,...t)},s=e.map((e=>e(o)));return i=Ct(...s)(a.dispatch),{...a,dispatch:i}}}(...c),p=Tn(d);return St(l,o,u(..."function"==typeof s?s(p):p()))}({reducer:{parts:fr,parameters:na,ui:aa,timers:ha,websocket:Sa,components:Ca,search:ja,api:Ar,visualEffects:za,config:Va},middleware:e=>e({serializableCheck:!1}).concat(Ua,Qa,Ja,ei,ai,oi)});var li;!function(e){e.DISCONNECTED="disconnected",e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.FAILED="failed",e.CLOSING="closing"}(li||(li={}));class ci{static getInstance(){return ci.instance||(ci.instance=new ci),ci.instance}constructor(){this._config=null,this._connection=null,this._connectionId=null,this._isConnected=!1,this._messageCallbacks=[],this.cache=Ha.getInstance(),this._errorCount=0,this._url="",this._debug=!1,this._disconnecting=!1,this._autoReconnect=!0,this._reconnectInterval=5e3,this._timersInitialized=!1,this._connectionState=li.DISCONNECTED,this._lastConnectionAttempt=0,this._connectionAttempts=0,this._maxReconnectDelay=3e5,this._minReconnectDelay=1e3,this._cooldownPeriod=2e3,this._lastStateChangeTime=0,this._lastSuccessfulConnection=0,this._lastServerMessageTime=0,this._serverInactivityTimeoutDuration=9e4,this._serverInactivityTimerId=null,this._messageCount=0,this._lastMessageTime=0,this._processingMessages=new Set,this._messageDebounceTime=50,this._messageDebounceQueue=new Map,this._dispatch=null,this._logger=e.getInstance(),this._lastServerMessageTime=0,this._timersInitialized||(this._timersInitialized=!0),this._logger.log("WebSocketPlugin","Instance created.",{category:"websocket",subsystem:"plugin"})}configure(e){var t,n,r,a,i,o,s,l;if(this._config=e,e.websocket_url&&""!==e.websocket_url.trim())this._url=e.websocket_url.trim(),this._logger.log("WebSocket",`Using explicit WebSocket URL: ${this._url}`,{category:"websocket",subsystem:"plugin"});else if(e.url&&""!==e.url.trim()){const t=e.url.trim().replace(/\/+$/,"");t.startsWith("http")?this._url=t.replace(/^http/,"ws")+"/ws/":this._url=`ws://${t}/ws/`,this._logger.log("WebSocket",`Derived WebSocket URL from API URL: ${this._url} (Base: ${e.url})`,{category:"websocket",subsystem:"plugin"})}else this._url="",this._logger.warn("WebSocket","Could not determine WebSocket URL from configuration.",{category:"websocket",subsystem:"plugin"});this._autoReconnect=void 0!==(null===(n=null===(t=e.performance)||void 0===t?void 0:t.websocket)||void 0===n?void 0:n.reconnectInterval),void 0!==(null===(a=null===(r=e.performance)||void 0===r?void 0:r.websocket)||void 0===a?void 0:a.reconnectInterval)&&e.performance.websocket.reconnectInterval<=0&&(this._autoReconnect=!1),(null===(o=null===(i=e.performance)||void 0===i?void 0:i.websocket)||void 0===o?void 0:o.reconnectInterval)&&e.performance.websocket.reconnectInterval>0?this._reconnectInterval=e.performance.websocket.reconnectInterval:this._reconnectInterval=5e3,(null===(l=null===(s=e.performance)||void 0===s?void 0:s.websocket)||void 0===l?void 0:l.messageDebounce)&&e.performance.websocket.messageDebounce>=0?this._messageDebounceTime=e.performance.websocket.messageDebounce:this._messageDebounceTime=50,this._logger.log("WebSocket",`Configured WebSocket plugin. Target URL: ${this._url}, Auto-Reconnect: ${this._autoReconnect}, Reconnect Interval: ${this._reconnectInterval}ms, Debounce: ${this._messageDebounceTime}ms, Server Inactivity Timeout: ${this._serverInactivityTimeoutDuration}ms`,{category:"websocket",subsystem:"plugin"})}_setConnectionState(e){const t=this._connectionState;if(t===e)return;if({[li.DISCONNECTED]:[li.CONNECTING],[li.CONNECTING]:[li.CONNECTED,li.FAILED,li.DISCONNECTED],[li.CONNECTED]:[li.DISCONNECTED,li.CLOSING],[li.RECONNECTING]:[li.CONNECTING,li.DISCONNECTED,li.FAILED],[li.FAILED]:[li.RECONNECTING,li.DISCONNECTED],[li.CLOSING]:[li.DISCONNECTED]}[t].includes(e))switch(this._connectionState=e,this._lastStateChangeTime=Date.now(),this._logger.log("WebSocket",`Connection state changed: ${t} -> ${e}`,{category:"websocket",subsystem:"state"}),e){case li.CONNECTED:this._lastSuccessfulConnection=Date.now(),this._errorCount=0,this._connectionAttempts=0,this._startServerInactivityTimer(),window.dispatchEvent(new CustomEvent("inventree-websocket-connected"));break;case li.DISCONNECTED:this._clearAllTimers(),this._clearServerInactivityTimer();break;case li.FAILED:this._errorCount++,this._autoReconnect&&this._errorCount<20&&(this._setConnectionState(li.RECONNECTING),this._scheduleReconnect())}else this._logger.warn("WebSocket",`Invalid state transition from ${t} to ${e}`,{category:"websocket",subsystem:"state"})}_clearAllTimers(){this._logger.log("WebSocketPlugin","Clearing all timers",{category:"websocket",subsystem:"timers"}),this._serverInactivityTimerId&&(la(this._serverInactivityTimerId),this._serverInactivityTimerId=null)}connect(){if(!this._timersInitialized||!this._url)return void this._logger.warn("WebSocket","Cannot connect - plugin not initialized or URL not provided",{category:"websocket",subsystem:"plugin"});if(this._connectionState===li.CONNECTING||this._connectionState===li.CONNECTED)return void this._logger.log("WebSocket",`Already ${this._connectionState}, not initiating new connection`,{category:"websocket",subsystem:"plugin"});const e=Date.now()-this._lastConnectionAttempt;if(e<this._cooldownPeriod)return this._logger.log("WebSocket",`Connection attempt too soon (${e}ms since last attempt), enforcing cooldown`,{category:"websocket",subsystem:"plugin"}),void sa((()=>{this.connect()}),this._cooldownPeriod-e,"connection-cooldown");this._lastConnectionAttempt=Date.now(),this._connectionAttempts++;try{this._setConnectionState(li.CONNECTING),this._logger.log("WebSocket",`Connecting to InvenTree WebSocket at ${this._url} (attempt #${this._connectionAttempts+1})`,{category:"websocket",subsystem:"plugin"}),this._connection=new WebSocket(this._url),sa((()=>{this._connectionState===li.CONNECTING&&(this._logger.warn("WebSocket","Connection attempt timed out after 10 seconds",{category:"websocket",subsystem:"plugin"}),this._closeConnection(),this._setConnectionState(li.FAILED))}),1e4,"connection-timeout"),this._connection.onopen=this._onConnectionOpen.bind(this),this._connection.onmessage=this._onConnectionMessage.bind(this),this._connection.onerror=this._onConnectionError.bind(this),this._connection.onclose=this._onConnectionClose.bind(this)}catch(e){this._logger.error("WebSocket",`Error creating WebSocket: ${e}`,{category:"websocket",subsystem:"plugin"}),this._setConnectionState(li.FAILED)}}_onConnectionOpen(e){this._setConnectionState(li.CONNECTED),this._isConnected=!0,this._connectionAttempts=0,this._lastSuccessfulConnection=Date.now(),this._errorCount=0,this._dispatch&&this._dispatch(ba("connected")),this._logger.log("WebSocketPlugin","WebSocket connection established successfully.",{category:"websocket",subsystem:"connection",connectionId:this._connectionId}),this._lastServerMessageTime=Date.now(),this._startServerInactivityTimer()}_onConnectionMessage(e){let t;this._lastMessageTime=Date.now(),this._messageCount++,this._lastServerMessageTime=Date.now(),this._resetServerInactivityTimer();try{t=JSON.parse(e.data)}catch(t){return void this._logger.error("WebSocket","Failed to parse incoming JSON message",{category:"websocket",subsystem:"message",error:t,rawData:e.data})}const n=t.event||t.type||JSON.stringify(t);console.log("RAW WEBSOCKET MESSAGE (messageData):",JSON.stringify(t,null,2)),this._logger.log("WebSocket","Raw message received (stringified)",{category:"websocket",subsystem:"message",data:JSON.stringify(t,null,2),level:"info"}),this._debouncedProcessMessage(t,n)}_debouncedProcessMessage(e,t){if(this._messageDebounceQueue.has(t)){la(this._messageDebounceQueue.get(t).timerId),this._logger.log("WebSocket",`Debounce: Cleared existing timer for messageId: ${t}`,{level:"silly"})}const n=sa((()=>{this._messageDebounceQueue.delete(t),this._logger.log("WebSocket",`Debounce: Executing for messageId: ${t}`,{data:e,level:"silly"}),this._processMessage(e)}),this._messageDebounceTime);this._messageDebounceQueue.set(t,{message:e,timerId:n}),this._logger.log("WebSocket",`Debounce: Set new timer for messageId: ${t}, delay: ${this._messageDebounceTime}ms`,{level:"silly"})}_notifyMessageCallbacks(e){for(const t of this._messageCallbacks)try{t(e)}catch(e){this._logger.error("WebSocket",`Error in message callback: ${e}`,{category:"websocket",subsystem:"callback"})}}_onConnectionError(e){this._errorCount++,this._logger.error("WebSocketPlugin",`WebSocket error event triggered - error count: ${this._errorCount}`,{category:"websocket",subsystem:"error",eventData:e}),this._connectionState!==li.CONNECTING&&this._connectionState!==li.RECONNECTING&&(this._setConnectionState(li.FAILED),this._autoReconnect&&this._scheduleReconnect())}_onConnectionClose(e){const t=this._connectionState;this._setConnectionState(li.DISCONNECTED),this._isConnected=!1,this._clearServerInactivityTimer(),this._logger.log("WebSocketPlugin",`WebSocket connection closed. Code: ${e.code}, Reason: "${e.reason||"Unknown reason"}", Was Clean: ${e.wasClean}`,{category:"websocket",subsystem:"connection",connectionId:this._connectionId,previousState:t}),this._dispatch&&this._dispatch(ba("disconnected")),!this._disconnecting&&this._autoReconnect?(this._logger.log("WebSocketPlugin","Auto-reconnect is enabled, scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),this._scheduleReconnect()):(this._logger.log("WebSocketPlugin","Auto-reconnect disabled or intentionally disconnecting, not scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),t===li.CLOSING&&this._setConnectionState(li.DISCONNECTED)),this._connection=null}_closeConnection(){this._logger.log("WebSocketPlugin","Attempting to close WebSocket connection.",{category:"websocket",subsystem:"connection",currentState:this._connectionState}),this._connection?this._connection.readyState===WebSocket.OPEN||this._connection.readyState===WebSocket.CONNECTING?(this._setConnectionState(li.CLOSING),this._connection.close(1e3,"Client initiated disconnect")):(this._logger.log("WebSocketPlugin","Connection already closed or closing.",{readyState:this._connection.readyState}),this._clearAllTimers(),this._setConnectionState(li.DISCONNECTED)):(this._logger.log("WebSocketPlugin","No active connection to close."),this._setConnectionState(li.DISCONNECTED))}_startServerInactivityTimer(){this._clearServerInactivityTimer(),this._connectionState===li.CONNECTED&&(this._logger.log("WebSocketPlugin",`Starting server inactivity timer for ${this._serverInactivityTimeoutDuration}ms.`,{category:"websocket",subsystem:"heartbeat"}),this._serverInactivityTimerId=sa((()=>{this._handleServerInactivity()}),this._serverInactivityTimeoutDuration))}_clearServerInactivityTimer(){this._serverInactivityTimerId&&(la(this._serverInactivityTimerId),this._serverInactivityTimerId=null)}_resetServerInactivityTimer(){this._startServerInactivityTimer()}_handleServerInactivity(){this._logger.warn("WebSocketPlugin","Server inactivity detected. Last message received more than timeout period ago.",{category:"websocket",subsystem:"heartbeat",lastMessageTime:new Date(this._lastServerMessageTime).toISOString(),timeoutDuration:this._serverInactivityTimeoutDuration}),this._errorCount++,this._logger.error("WebSocketPlugin","Max server inactivity reached, closing connection as potentially stale.",{category:"websocket",subsystem:"heartbeat"}),this._disconnecting=!1,this.disconnect()}onMessage(e){return this._messageCallbacks.push(e),()=>{const t=this._messageCallbacks.indexOf(e);-1!==t&&this._messageCallbacks.splice(t,1)}}_processMessage(e){e.data&&"PartParameter"===e.data.model&&this._handleParameterUpdate(e.data)}_handleParameterUpdate(e){this._logger.log("WebSocketPlugin",`Handling parameter update: ${JSON.stringify(e)}`,{category:"websocket",subsystem:"parameters",level:"info"});const t=e.part_pk,n=e.parameter_name,r=e.parameter_value;t&&n?(this._logger.log("WebSocketPlugin","Dispatching action from webSocketUpdateReceivedAction for parameter update.",{level:"info",subsystem:"dispatch",data:{partId:t,parameterName:n,value:r}}),si.dispatch(Yr({partId:Number(t),parameterName:String(n),value:r,source:"websocket-plugin"}))):this._logger.warn("WebSocketPlugin","Missing partId or parameter name in update messageData",{data:e})}isConnected(){return this._connectionState===li.CONNECTED}getStats(){return{connectionState:this._connectionState,isConnected:this._isConnected,messageCount:this._messageCount,errorCount:this._errorCount,lastMessageTime:this._lastMessageTime,connectionAttempts:this._connectionAttempts,lastConnectionAttempt:this._lastConnectionAttempt,lastSuccessfulConnection:this._lastSuccessfulConnection,lastServerMessageTime:this._lastServerMessageTime}}reset(){this._logger.log("WebSocket","Resetting WebSocket connection",{category:"websocket",subsystem:"control"}),this.disconnect(),this._errorCount=0,this._connectionAttempts=0,sa((()=>{var e;(null===(e=this._config)||void 0===e?void 0:e.enabled)&&this.connect()}),1e3)}getTimerStats(){return{isInitialized:this._timersInitialized,messageQueueSize:this._messageDebounceQueue.size}}sendMessage(e){if(!this._connection||this._connection.readyState!==WebSocket.OPEN)return this._logger.warn("WebSocket","Cannot send message - WebSocket not connected",{category:"websocket",subsystem:"message"}),!1;try{return this._connection.send(JSON.stringify(e)),!0}catch(e){return this._logger.error("WebSocket",`Error sending message: ${e}`,{category:"websocket",subsystem:"message"}),!1}}registerMessageCallback(e){this._messageCallbacks.includes(e)||this._messageCallbacks.push(e)}unregisterMessageCallback(e){const t=this._messageCallbacks.indexOf(e);-1!==t&&this._messageCallbacks.splice(t,1)}getDiagnostics(){const e=Date.now();return{config:this._config?(e=>{try{return JSON.stringify(e)}catch(e){return`Error stringifying object: ${e instanceof Error?e.message:String(e)}`}})(this._config):"Not configured",url:this._url,connectionState:this._connectionState,isConnected:this._isConnected,isConfigured:this._timersInitialized,lastConnectionAttempt:this._lastConnectionAttempt?new Date(this._lastConnectionAttempt).toISOString():"N/A",connectionAttempts:this._connectionAttempts,lastSuccessfulConnection:this._lastSuccessfulConnection?new Date(this._lastSuccessfulConnection).toISOString():"N/A",lastStateChangeTime:this._lastStateChangeTime?new Date(this._lastStateChangeTime).toISOString():"N/A",timeSinceLastStateChangeMs:this._lastStateChangeTime?e-this._lastStateChangeTime:"N/A",disconnectingIntentional:this._disconnecting,autoReconnectEnabled:this._autoReconnect,reconnectIntervalMs:this._reconnectInterval,timersInitialized:this._timersInitialized,messageStats:{count:this._messageCount,lastReceivedTime:this._lastMessageTime?new Date(this._lastMessageTime).toISOString():"N/A",timeSinceLastMessageMs:this._lastMessageTime?e-this._lastMessageTime:"N/A",debounceQueueSize:this._messageDebounceQueue.size,processingMessagesCount:this._processingMessages.size},serverInactivity:{lastServerMessageTime:this._lastServerMessageTime?new Date(this._lastServerMessageTime).toISOString():"N/A",timeSinceLastServerMessageMs:this._lastServerMessageTime?e-this._lastServerMessageTime:"N/A",inactivityTimeoutMs:this._serverInactivityTimeoutDuration,inactivityTimerRunning:!!this._serverInactivityTimerId},timerManagerStats:this.getTimerStats()}}forceReconnect(){this._logger.log("WebSocket","Forcing reconnection...",{category:"websocket",subsystem:"plugin"}),this._closeConnection(),this._errorCount=0,this._setConnectionState(li.RECONNECTING),sa((()=>{this.connect()}),100,"force-reconnect")}disconnect(){this._disconnecting=!0,this._clearAllTimers(),this._closeConnection(),sa((()=>{this._disconnecting=!1,this._setConnectionState(li.DISCONNECTED)}),100,"disconnect-complete")}_scheduleReconnect(e=!1){if(!this._autoReconnect||this._disconnecting)return this._logger.log("WebSocket","Auto-reconnect disabled or intentionally disconnecting, not scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),void(this._connectionState===li.RECONNECTING&&this._setConnectionState(li.DISCONNECTED));if(this._connectionState===li.CONNECTING||this._connectionState===li.CONNECTED)return void this._logger.log("WebSocketPlugin","Already connecting or connected, skipping scheduled reconnect.",{category:"websocket",subsystem:"reconnect"});this._setConnectionState(li.RECONNECTING);const t=e?0:this._reconnectInterval;this._logger.log("WebSocket",`Scheduling reconnect in ${t}ms (attempt ${this._connectionAttempts+1})`,{category:"websocket",subsystem:"reconnect"}),sa((()=>{this._connectionState===li.RECONNECTING?this.connect():this._logger.log("WebSocketPlugin",`Reconnect was scheduled but current state is ${this._connectionState}, aborting connect attempt.`,{category:"websocket",subsystem:"reconnect"})}),t,`reconnect-${this._connectionId||"global"}`)}}const ui=Mn("system/initializeDirectApi",(async(e,{dispatch:t,getState:n})=>{var r,a,i,o,s,l;const{directApiConfig:c,logger:u}=e;try{u.log("SystemThunks","Initializing Direct API...",c);const e=null===(a=null===(r=c.performance)||void 0===r?void 0:r.api)||void 0===a?void 0:a.throttle;let n=200;"number"==typeof e&&e>=0?n=1e3*e:void 0!==e&&u.warn("SystemThunks",`Invalid API throttle value: ${e}, using default ${n}ms`);const d=null===(o=null===(i=c.performance)||void 0===i?void 0:i.api)||void 0===o?void 0:o.cacheLifetime,p=null===(l=null===(s=c.performance)||void 0===s?void 0:s.api)||void 0===l?void 0:l.failedRequestRetryDelaySeconds;return c.url&&c.api_key?(t(Cr({url:c.url,apiKey:c.api_key,throttleDelayMs:n,cacheLifetime:d,failedRequestRetryDelaySeconds:p})),t(xr()),u.log("SystemThunks","Direct API Initialized"),be("api","initialize",{success:!0,method:"direct"}),!0):(u.error("SystemThunks","Direct API Initialization Failed: Missing URL or API key"),t($r("Missing URL or API key")),!1)}catch(e){return u.error("SystemThunks","Direct API Initialization Failed:",e.message),t($r(e.message||"Unknown API initialization error")),!1}})),di=Mn("system/initializeWebSocketPlugin",(async(e,{dispatch:t,getState:n})=>{const{directApiConfig:r,cardDebugWebSocket:a,logger:i}=e;if(!r)return void i.warn("Thunk:initializeWebSocketPlugin","Direct API config not provided, skipping WebSocket plugin initialization.");const o=ci.getInstance();if(i.log("Thunk:initializeWebSocketPlugin","Configuring WebSocket Plugin with settings",{data:r}),o.configure(r),i.log("Thunk:initializeWebSocketPlugin","WebSocket Plugin configured."),r.enabled&&(r.url||r.websocket_url)){i.log("Thunk:initializeWebSocketPlugin","Attempting to connect WebSocket plugin...");try{await o.connect(),i.log("Thunk:initializeWebSocketPlugin","WebSocket plugin connected successfully.")}catch(e){i.error("Thunk:initializeWebSocketPlugin","WebSocket plugin connection failed:",{error:e}),t(ba("disconnected"))}}else i.warn("Thunk:initializeWebSocketPlugin","WebSocket plugin not connected: Direct API not enabled or URL/WebSocket URL is missing in config."),t(ba("disconnected"))})),pi=Mn("system/processHassEntities",(async(e,{dispatch:t})=>{var n;const{hass:r,mainEntityId:a,selectedEntities:i=[],logger:o}=e;let s=0;const l=new Set;if(a&&l.add(a),i.forEach((e=>l.add(e))),0===l.size)return o.warn("Thunk:processHassEntities","No entities configured for HASS processing."),be("redux","thunk:processHassEntities:noentities"),{processedCount:0,errors:0};o.log("Thunk:processHassEntities",`Processing HASS state for entities: ${Array.from(l).join(", ")}`),be("redux","thunk:processHassEntities:attempt",{count:l.size});let c=0;for(const e of l){const a=r.states[e];if(!a){o.warn("Thunk:processHassEntities",`Entity ${e} not found in HASS states.`),c++;continue}const i=null===(n=a.attributes)||void 0===n?void 0:n.items;if(i&&Array.isArray(i)){const n=i.map((t=>Object.assign(Object.assign({},t),{source:`hass:${e}`}))),r=n.map((e=>e.pk));n.length>0?(o.log("Thunk:processHassEntities",`Dispatching setParts for ${e} with ${n.length} items.`),t(or({entityId:e,parts:n})),t(ur({entityId:e,partIds:r})),s++):(o.log("Thunk:processHassEntities",`No items found for entity ${e} after processing.`),t(or({entityId:e,parts:[]})),t(ur({entityId:e,partIds:[]})))}else o.warn("Thunk:processHassEntities",`No 'items' attribute or not an array for entity ${e}.`,{attributes:a.attributes}),t(or({entityId:e,parts:[]})),t(ur({entityId:e,partIds:[]})),c++}return be("redux","thunk:processHassEntities:"+(c>0?"partial_success":"success"),{processed:s,errors:c}),{processedCount:s,errors:c}})),fi=e.getInstance(),gi=e=>e.parameters.config,hi=(e,t,n)=>{var r,a,i;const o=e.parameter;let s;const l=o.match(/^part:(\d+):(.+)$/);if(l){const e=parseInt(l[1],10),t=l[2];s=null===(a=null===(r=null==n?void 0:n[e])||void 0===r?void 0:r[t])||void 0===a?void 0:a.data}else{if(!t)return!1;s=null===(i=t[o])||void 0===i?void 0:i.data}const c=e.value;return"exists"===e.operator?null!=s&&""!==s:"is_empty"===e.operator?null==s||""===s:null!=s&&((e,t,n)=>{const r=String(t),a=String(e);switch(n){case"equals":case"eq":return a===r;case"not_equals":return a!==r;case"contains":return a.toLowerCase().includes(r.toLowerCase());case"greater_than":case"gt":{const e=parseFloat(a),t=parseFloat(r);return!isNaN(e)&&!isNaN(t)&&e>t}case"less_than":case"lt":{const e=parseFloat(a),t=parseFloat(r);return!isNaN(e)&&!isNaN(t)&&e<t}case"exists":return null!=e&&""!==e;case"is_empty":return null==e||""===e;default:return console.warn(`[parameterSelectors] Unknown compare operator: ${n}`),!1}})(s,c||"",e.operator)},mi=_n([e=>e.parameters.parametersByPartId,(e,t)=>t],((e,t)=>e[t])),vi=_n([gi,e=>e.parameters.parameterValues,(e,t)=>t],((e,t,n)=>{const r={};if(!(null==e?void 0:e.enabled)||!e.conditions||0===e.conditions.length)return r;if(!t||!t[n])return r;const a=t[n];for(const i of e.conditions)try{if(hi(i,a,t))switch(i.action){case"highlight":r.highlight=i.action_value;break;case"text_color":r.textColor=i.action_value;break;case"border":r.border=i.action_value;break;case"icon":r.icon=i.action_value;break;case"badge":r.badge=i.action_value;break;case"sort":r.sort=i.action_value;break;case"filter":r.filter=i.action_value;break;case"show_section":r.showSection=i.action_value;break;case"priority":r.priority=i.action_value}}catch(e){fi.error("selectVisualModifiers",`Error evaluating condition for part ${n}:`,{condition:i,error:e})}return r})),yi=e=>{const t=e.parameters;return"loading"===t.configLoadingStatus||"loading"===t.valuesLoadingStatus};_n([e=>e.parameters.loadingStatus,(e,t)=>t],((e,t)=>e[t])),_n([e=>e.parameters.error,(e,t)=>t],((e,t)=>e?e[t]:null)),_n([(e,t)=>mi(e,t),(e,t,n)=>n],((e,t)=>{if(!e)return;const n=e.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t}));return null==n?void 0:n.data}));const bi=(e,t,n,r)=>((null==t?void 0:t.enabled)&&t.conditions,!0),_i=({partData:e,config:t,layout:n,icon:r,badge:a})=>{if(!e)return null;const i=n||(null==t?void 0:t.view_type)||"grid";let o={};switch(i){case"grid":o={aspectRatio:"1 / 1",maxHeight:"150px"};break;case"list":o={width:"60px",height:"60px"};break;case"detail":o={maxHeight:"200px"}}const s=Object.assign(Object.assign({},{width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#f5f5f5",borderRadius:"8px"}),o),[l,c]=Ne.useState(!1),u=Object.assign(Object.assign({},{width:"100%",height:"100%",objectFit:"contain",transition:"transform 0.2s ease-in-out"}),{transform:l?"scale(1.05)":"scale(1)"}),d={position:"absolute",top:"4px",left:"4px",fontSize:"list"===i?"16px":"20px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",padding:"2px",zIndex:1},p={position:"absolute",top:"4px",right:"4px",backgroundColor:"var(--primary-color, #3498db)",color:"white",borderRadius:"50%",padding:"list"===i?"1px 4px":"2px 6px",fontSize:"list"===i?"0.7em":"0.8em",fontWeight:"bold",minWidth:"list"===i?"12px":"16px",textAlign:"center",boxShadow:"0px 0px 3px rgba(0,0,0,0.3)",zIndex:1};return Qe.jsxs("div",{style:s,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[r&&Qe.jsx("span",{className:"thumbnail-icon",style:d,children:r.startsWith("mdi:")?Qe.jsx("ha-icon",{icon:r}):Qe.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}),a&&Qe.jsx("span",{className:"thumbnail-badge",style:p,children:a}),e.thumbnail?Qe.jsx("img",{style:u,src:e.thumbnail,alt:e.name}):Qe.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"1.5em",fontWeight:"bold"},children:Qe.jsx("span",{children:e.name.substring(0,2).toUpperCase()})})]})},wi={partDetails:{flex:1,display:"flex",flexDirection:"column",gap:"4px",overflow:"hidden"},partName:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},partDescription:{fontSize:"0.9em",opacity:.8,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},partStock:{fontSize:"0.9em",fontWeight:"500"},partParameters:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"4px",fontSize:"0.8em"},partParameter:{display:"flex",justifyContent:"space-between"},paramName:{fontWeight:"500",marginRight:"4px"},paramValue:{}},Si=({partId:e,config:t})=>{const n=mt((t=>e?yr(t,e):void 0));if(!n)return null;const r=(null==t?void 0:t.display)||{};return Qe.jsxs("div",{style:wi.partDetails,children:[!1!==r.show_name&&Qe.jsx("div",{style:wi.partName,children:n.name}),r.show_description&&n.description&&Qe.jsx("div",{style:wi.partDescription,children:n.description}),!1!==r.show_stock&&Qe.jsxs("div",{style:wi.partStock,children:["Stock: ",n.in_stock,n.minimum_stock&&n.minimum_stock>0?` / Min: ${n.minimum_stock}`:"",n.units?` ${n.units}`:""]}),!1!==r.show_parameters&&n.parameters&&n.parameters.length>0&&Qe.jsx("div",{style:wi.partParameters,children:n.parameters.map((e=>{var t,n,r;return Qe.jsxs("div",{style:wi.partParameter,children:[Qe.jsxs("span",{style:wi.paramName,children:[(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Param",":"]}),Qe.jsxs("span",{style:wi.paramValue,children:[e.data,(null===(n=e.template_detail)||void 0===n?void 0:n.units)?` ${e.template_detail.units}`:""]})]},e.pk||(null===(r=e.template_detail)||void 0===r?void 0:r.name)||Math.random())}))})]})},ki=({path:e,style:t})=>Qe.jsxs("span",{style:Object.assign(Object.assign({},t),{fontFamily:"monospace"}),children:["(Icon: ",e,")"]}),Ci=({partItem:t,config:n,hass:r})=>{var a;const i=Ne.useMemo((()=>e.getInstance()),[]),o=ft(),s=Ne.useCallback(((e,t=!1)=>{if("locate"===e&&t)return"orange";switch(e){case"increment":return"green";case"decrement":return"red";case"locate":return"blue";case"print":return"purple";default:return"gray"}}),[]),l=Ne.useCallback((e=>{switch(e.type){case"increment":return`Increase stock by ${e.value}`;case"decrement":return`Decrease stock by ${e.value}`;case"locate":return"Locate part";case"print":return"Print label";case"custom":return e.label||"Custom action";default:return""}}),[]),c=Ne.useCallback((e=>{switch(e.type){case"increment":return`+${e.value||1}`;case"decrement":return`-${e.value||1}`;case"locate":return"Locate";case"print":return"Print";default:return""}}),[]),u=Ne.useCallback((()=>{var e,a,i,o,s,l;if(!(r&&n&&(null===(a=null===(e=n.services)||void 0===e?void 0:e.wled)||void 0===a?void 0:a.entity_id)&&t))return!1;const c=r.states[n.services.wled.entity_id];if(!c||"on"!==c.state)return!1;const u=null===(o=null===(i=t.parameters)||void 0===i?void 0:i.find((e=>{var t,r,a;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===(null===(a=null===(r=n.services)||void 0===r?void 0:r.wled)||void 0===a?void 0:a.parameter_name)})))||void 0===o?void 0:o.data;if(!u)return!1;const d=null===(l=null===(s=c.attributes)||void 0===s?void 0:s.seg)||void 0===l?void 0:l[0];if(!d)return!1;const p=parseInt(u,10);return d.start+1===p}),[r,n,t]),d=Ne.useCallback((()=>{var e,t,r,a,o,s,l,c,u,d;if(!n||!n.buttons)return[];const p=n.buttons.preset||"default",f=n.buttons.custom_buttons||[];let g=[];if("custom"!==p){let e=1;switch(p){case"precise":e=.1;break;case"bulk":e=10;break;default:e=1}g.push({type:"decrement",value:e,icon:"mdi:minus",label:`- ${e}`}),g.push({type:"increment",value:e,icon:"mdi:plus",label:`+ ${e}`})}return(null===(t=null===(e=n.services)||void 0===e?void 0:e.wled)||void 0===t?void 0:t.enabled)&&(null===(a=null===(r=n.services)||void 0===r?void 0:r.wled)||void 0===a?void 0:a.entity_id)&&(null===(s=null===(o=n.services)||void 0===o?void 0:o.wled)||void 0===s?void 0:s.parameter_name)&&g.push({type:"locate",icon:"mdi:map-marker-radius",label:"Locate"}),(null===(c=null===(l=n.services)||void 0===l?void 0:l.print)||void 0===c?void 0:c.enabled)&&(null===(d=null===(u=n.services)||void 0===u?void 0:u.print)||void 0===d?void 0:d.template_id)&&g.push({type:"print",icon:"mdi:printer",label:"Print"}),"custom"!==p&&"full"!==p||(g=[...g,...f]),i.log("PartButtons React",`Processed buttons for preset '${p}'`,g),g}),[n,i]),p=Ne.useCallback((async e=>{if(t)switch(i.log("PartButtons React",`Button clicked: ${e.type}`,{button:e,partId:t.pk}),e.type){case"increment":case"decrement":void 0!==e.value&&o(ar({partId:t.pk,amount:e.value,hass:r}));break;case"locate":o(rr(t.pk));break;case"print":i.warn("PartButtons React","Print action not yet implemented.");break;case"custom":if(!r||!e.service)return void i.warn("PartButtons React","Custom button clicked, but HASS or service definition is missing.",{button:e});try{await r.callService(e.service.split(".")[0],e.service.split(".")[1],Object.assign(Object.assign({},e.service_data),{part_id:t.pk}))}catch(t){const n=(null==t?void 0:t.message)||String(t);i.error("PartButtons React",`Failed custom service call ${e.service}: ${n}`)}}}),[t,o,r,i]);if(!t||!d().length||!(null===(a=null==n?void 0:n.display)||void 0===a?void 0:a.show_buttons))return null;const f={padding:"4px 8px",margin:"0 2px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",minWidth:"30px",textAlign:"center"};return Qe.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",padding:"4px 0"},children:d().map((e=>{const t="locate"===e.type&&u(),n=e.color||s(e.type||"default",t);return Qe.jsx("button",{style:Object.assign(Object.assign({},f),{color:t?"white":"inherit",backgroundColor:t||e.color?n:"transparent"}),onClick:()=>p(e),title:l(e),className:"action-button "+(t?"active":""),children:e.icon?Qe.jsx(ki,{path:e.icon,style:{color:t?"white":e.color?"inherit":n}}):e.label||c(e)},e.type+(e.label||"")+(e.value||""))}))})},xi=({partId:t,config:n,hass:r})=>{var a,i;const o=Ne.useMemo((()=>e.getInstance()),[]),s=mt((e=>t?yr(e,t):void 0));Ne.useEffect((()=>{s&&o.log("PartView React","Received part data from Redux:",{partId:null==s?void 0:s.pk,partName:null==s?void 0:s.name,hasPartData:!!s})}),[s,o]);const l=Ne.useCallback((()=>s&&"number"==typeof s.in_stock?s.in_stock<=0?"none":s.minimum_stock&&s.in_stock<=s.minimum_stock?"low":"good":"none"),[s]),c=Ne.useCallback((e=>{switch(e){case"none":return"#f44336";case"low":return"#ff9800";case"good":return"#4caf50";default:return"transparent"}}),[]);if(!s||!n)return null;const u=n.display||{},d=c(l()),p={position:"relative",display:"flex",flexDirection:"column",gap:"0.5rem",padding:"1rem",borderRadius:"4px",background:"white",borderTop:u.show_stock_status_border?`3px solid ${d}`:void 0},f={display:"inline-block",padding:"2px 8px",borderRadius:"12px",fontSize:"0.9em",backgroundColor:(null===(a=n.display)||void 0===a?void 0:a.show_stock_status_colors)?d:"transparent",color:(null===(i=n.display)||void 0===i?void 0:i.show_stock_status_colors)?"white":"inherit"};return Qe.jsxs("div",{style:p,children:[!1!==u.show_header&&Qe.jsxs("div",{className:"part-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[!1!==u.show_name&&Qe.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:s.name}),!1!==u.show_stock&&Qe.jsxs("span",{style:f,children:[s.in_stock," ",s.units||""]})]}),Qe.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[!1!==u.show_image&&s.thumbnail&&Qe.jsx("div",{className:"part-thumbnail-wrapper",style:{width:"100px",height:"100px"},children:Qe.jsx(_i,{partData:s,config:n,layout:"detail"})}),Qe.jsx("div",{style:{flexGrow:1},children:Qe.jsx(Si,{partId:s.pk,config:n})})]}),!1!==u.show_buttons&&Qe.jsx("div",{className:"part-buttons-wrapper",style:{marginTop:"0.5rem"},children:Qe.jsx(Ci,{partItem:s,config:n,hass:r})})]})},$i=({hass:t,config:n,selectedPartId:r})=>{const a=Ne.useMemo((()=>e.getInstance()),[]),i=mt(br),o=mt(yi);if(Ne.useEffect((()=>{a.log("DetailLayout","Props update",{hasHass:!!t,hasConfig:!!n,selectedPartId:r})}),[t,n,r,a]),!n)return a.log("DetailLayout","Warn - No config provided",{config:n}),Qe.jsx("div",{children:"Error: Configuration is missing."});return Qe.jsx("div",{style:{padding:"1rem",background:"var(--ha-card-background, var(--card-background-color, white))",borderRadius:"var(--ha-card-border-radius, 4px)"},children:r?Qe.jsx(xi,{partId:r,config:n,hass:t}):Qe.jsx("div",{children:i||o?"Loading initial data...":Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("div",{children:"No part selected or available for the configured entities."}),Qe.jsx("div",{children:"Please check your card configuration and ensure entities have associated parts."})]})})})},Ei=({part:e,config:t,hass:n,isCurrentlyLocating:r,parameterActions:a,handleLocateGridItem:i,handleParameterActionClick:o})=>{const s=e.pk,l=mt((e=>((e,t)=>e.parameters.conditionalPartEffects[t])(e,s))),c=t.display||{},u=l||{},d=((e,t)=>{const n={border:"1px solid #eee",padding:"8px",textAlign:"center",cursor:"pointer",height:(null==t?void 0:t.item_height)?`${t.item_height}px`:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between"};return(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=e.border),n})(u,t),p=(f=u)&&f.textColor?{color:f.textColor}:{};var f;const g=["part-container",r?"locating":"",(null==u?void 0:u.priority)?`priority-${u.priority}`:""].filter(Boolean).join(" ");return!1===u.isVisible?null:Qe.jsxs("div",{className:g,style:d,onClick:()=>i(s),children:[c.show_image&&Qe.jsx("div",{className:"part-thumbnail",style:{marginBottom:"8px"},children:Qe.jsx(_i,{partData:e,config:t,layout:"grid",icon:null==u?void 0:u.icon,badge:null==u?void 0:u.badge})}),Qe.jsxs("div",{className:"part-info",style:Object.assign(Object.assign({},p),{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}),children:[c.show_name&&Qe.jsx("div",{className:"part-name",style:{fontWeight:"bold"},children:e.name}),c.show_stock&&Qe.jsxs("div",{className:"part-stock",children:["Stock: ",e.in_stock," ",e.units||""]}),c.show_description&&e.description&&Qe.jsx("p",{className:"part-description",style:{fontSize:"0.8em",margin:"4px 0"},children:e.description})]}),Qe.jsxs("div",{className:"part-actions-footer",style:{marginTop:"auto"},children:[c.show_buttons&&n&&t&&Qe.jsx("div",{style:{fontSize:"small",color:"gray",padding:"4px 0"},children:Qe.jsx(Ci,{partItem:e,config:t,hass:n})}),a.length>0&&Qe.jsx("div",{className:"action-buttons",style:{display:"flex",justifyContent:"center",gap:"4px",marginTop:"4px"},children:a.map((e=>Qe.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),o(s,e)},title:e.label,style:{fontSize:"0.75em",padding:"2px 5px"},children:e.icon?Qe.jsxs("span",{children:["(",e.icon,")"]}):e.label},`${s}-${e.label}`)))})]}),r&&Qe.jsx("div",{className:"locating-indicator",children:"Locating..."})]},s)},Ii=({hass:t,config:n,parts:r})=>{var a,i,o;const s=Ne.useMemo((()=>e.getInstance()),[]),l=ft();Ne.useEffect((()=>{var e;s.log("GridLayout","Parts prop reference changed.",{partsLength:r.length,firstPartPk:null===(e=r[0])||void 0===e?void 0:e.pk})}),[r]);const c=mt((e=>_r(e))),u=mt(gi),d=mt((e=>e.parameters.loadingStatus||{})),p=mt((e=>e.parameters.parameterValues||{})),f=mt((e=>{var t;return(null===(t=e.parameters.config)||void 0===t?void 0:t.actions)||[]})),[g,h]=Ne.useState(new Set),[m,v]=Ne.useState(!1),y=Ne.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);if(r&&r[1]){const e=parseInt(r[1],10);isNaN(e)||t.add(e)}}})),Array.from(t)}),[]);Ne.useEffect((()=>{const e=r.map((e=>e.pk)),t=y(null==u?void 0:u.conditions),n=new Set([...e,...t]);g.size===n.size&&[...g].every((e=>n.has(e)))||h(n)}),[r,null==u?void 0:u.conditions,y,g.size]),Ne.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===g.size)return void(m&&v(!1));let t=!1;for(const e of g)if("loading"===d[e]){t=!0;break}m!==t&&v(t)}),[g,d,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,m]),Ne.useEffect((()=>{var e,t,r;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===g.size)return void s.log("GridLayout","FetchParameters Effect: Skipped (Direct API disabled or no required part IDs)",{directApiEnabled:null===(t=null==n?void 0:n.direct_api)||void 0===t?void 0:t.enabled,requiredPartIdsSize:g.size});const a=[],i={};g.forEach((e=>{const t=d[e]||"idle";i[e]=t,"idle"!==t&&"failed"!==t||a.push(e)})),s.log("GridLayout","FetchParameters Effect: Evaluation",{requiredPartIds:Array.from(g),allStatuses:i,idsBeingFetchedThisCycle:a,directApiEnabled:null===(r=null==n?void 0:n.direct_api)||void 0===r?void 0:r.enabled}),a.length>0?(s.log("GridLayout",`FetchParameters Effect: Dispatching fetchParametersForReferencedParts for IDs: ${a.join(", ")}`),l(Rr(a))):s.log("GridLayout","FetchParameters Effect: No IDs to fetch in this cycle.")}),[l,null===(i=null==n?void 0:n.direct_api)||void 0===i?void 0:i.enabled,g]);const b=Ne.useMemo((()=>{var e;if(!r)return[];let t=r;return(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)&&n.parameters.conditions&&(t=r.filter((e=>e&&bi(e.pk,n.parameters)))),t.sort(((e,t)=>e.pk-t.pk)),t}),[r,null==n?void 0:n.parameters,d,p]),_=Ne.useCallback((e=>{l(rr(e))}),[l]),w=Ne.useCallback(((e,t)=>{l(jr({partId:e,parameterName:t.parameter,value:t.value}))}),[l]);if(!n)return Qe.jsx("div",{className:"grid-layout loading",children:Qe.jsx("p",{children:"Loading config..."})});if(!r||0===r.length)return Qe.jsx("div",{className:"grid-layout no-parts",children:Qe.jsx("p",{children:"No parts to display."})});if(m&&(null===(o=n.parameters)||void 0===o?void 0:o.enabled))return Qe.jsx("div",{className:"grid-layout loading",children:Qe.jsx("p",{children:"Loading parameters..."})});if(0===b.length)return Qe.jsx("div",{className:"grid-layout no-parts",children:Qe.jsx("p",{children:"All parts filtered out."})});n.display;const S={display:"grid",gridTemplateColumns:`repeat(${n.columns||3}, 1fr)`,gap:`${n.grid_spacing||8}px`,padding:"8px"};return Qe.jsx("div",{className:"grid-layout",style:S,children:b.map((e=>{if(!e)return null;const r=e.pk,a=c===r;return Qe.jsx(Ei,{part:e,config:n,hass:t,isCurrentlyLocating:a,parameterActions:f,handleLocateGridItem:_,handleParameterActionClick:w},r)}))})},Pi=({hass:t,config:n,parts:r})=>{var a,i,o;const s=Ne.useMemo((()=>e.getInstance()),[]),l=ft(),c=mt((e=>_r(e))),u=mt(gi),d=mt((e=>e.parameters.loadingStatus||{})),p=mt((e=>e.parameters.parameterValues||{})),[f,g]=Ne.useState(new Set),[h,m]=Ne.useState(!1),v=Ne.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);if(r&&r[1]){const e=parseInt(r[1],10);isNaN(e)||t.add(e)}}})),Array.from(t)}),[]);Ne.useEffect((()=>{var e;s.log("ListLayout React","useEffect[parts, parameterConfigGlobal.conditions] - Recalculating required IDs.",{numParts:r.length,conditions:null===(e=null==u?void 0:u.conditions)||void 0===e?void 0:e.length});const t=r.map((e=>e.pk)),n=v(null==u?void 0:u.conditions),a=new Set([...t,...n]);f.size===a.size&&[...f].every((e=>a.has(e)))?s.log("ListLayout React","No change to requiredParameterPartIds."):(s.log("ListLayout React",`Setting new requiredParameterPartIds. Old: [${Array.from(f).join(", ")}], New: [${Array.from(a).join(", ")}]`),g(a))}),[r,null==u?void 0:u.conditions,v,s,f.size]),Ne.useEffect((()=>{var e;if(s.log("ListLayout React","useEffect[requiredPartIds, allLoadingStatuses] - Recalculating isLoadingParameters.",{requiredNum:f.size}),!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===f.size)return void(h&&m(!1));let t=!1;for(const e of f)if("loading"===d[e]){t=!0;break}h!==t&&(s.log("ListLayout React",`Setting isLoadingParameters to ${t}.`),m(t))}),[f,d,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,s,h]),Ne.useEffect((()=>{var e,t;if(s.log("ListLayout React","useEffect[fetchParameters] - Checking if parameters need fetching.",{directApiEnabled:null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled,requiredNum:f.size}),!(null===(t=null==n?void 0:n.direct_api)||void 0===t?void 0:t.enabled)||0===f.size)return;const r=[];f.forEach((e=>{const t=d[e]||"idle";"idle"!==t&&"failed"!==t||r.push(e)})),r.length>0?(s.log("ListLayout React",`Dispatching fetchParametersForReferencedParts for IDs: [${r.join(", ")}]`),l(Rr(r))):s.log("ListLayout React","No parameter IDs to fetch.")}),[l,null===(i=null==n?void 0:n.direct_api)||void 0===i?void 0:i.enabled,f,d,s]);const y=Ne.useMemo((()=>{var e,t,a;if(s.log("ListLayout React","useMemo[filteredAndSortedParts] - Recalculating.",{numParts:r.length,conditions:null===(t=null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.conditions)||void 0===t?void 0:t.length}),!r)return[];let i=r;return(null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled)&&n.parameters.conditions&&(i=r.filter((e=>!!e&&bi(e.pk,n.parameters))),s.log("ListLayout React",`Parts after visibility filter: ${i.length}`)),i.sort(((e,t)=>e.pk-t.pk)),s.log("ListLayout React",`Parts after sorting: ${i.length}`),i}),[r,null==n?void 0:n.parameters,d,p,s]),b=Ne.useCallback((e=>{s.log("ListLayout React",`Locating part: ${e}`),l(rr(e))}),[l,s]),_=Ne.useCallback(((e,t)=>{s.log("ListLayout React",`Handling parameter action click: "${t.label}" for part ${e}`,{action:t}),l(jr({partId:e,parameterName:t.parameter,value:t.value}))}),[l,s]);if(!n)return Qe.jsx("div",{className:"list-container loading-container",children:Qe.jsx("div",{className:"loading",children:"Loading config..."})});if(!r||0===r.length)return Qe.jsx("div",{className:"list-container no-parts",children:Qe.jsx("p",{children:"No parts to display."})});if(h&&(null===(o=n.parameters)||void 0===o?void 0:o.enabled))return s.log("ListLayout React Render","Showing Loading Parameters state."),Qe.jsx("div",{className:"list-container loading-container",children:Qe.jsx("div",{className:"loading",children:"Loading parameters..."})});if(0===y.length)return s.log("ListLayout React Render","No parts to display after filtering."),Qe.jsx("div",{className:"list-container no-parts",children:Qe.jsx("p",{children:"All parts filtered out or parameters still loading for relevant items."})});const w=n.display||{};return s.log("ListLayout React Render",`Rendering with ${y.length} parts.`),Qe.jsx("div",{className:"list-container",style:{padding:"8px"},children:y.map((e=>{if(!e)return null;const r=e.pk,a=mt((e=>vi(e,r))),i=mt((e=>{var t;return(null===(t=e.parameters.config)||void 0===t?void 0:t.actions)||[]})),o=c===r,s=(e=>{if(!e)return{};const t={};return e.highlight&&(t.backgroundColor=e.highlight),e.border&&(t.border=`2px solid ${e.border}`),t.padding="8px",t.marginBottom="4px",t.cursor="pointer",t})(a),l=(u=a)&&u.textColor?{color:u.textColor}:{};var u;const d=["list-item",o?"locating":"",(null==a?void 0:a.priority)?`priority-${a.priority}`:""].filter(Boolean).join(" ");return Qe.jsxs("div",{className:d,style:s,onClick:()=>b(r),children:[Qe.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[" ",w.show_image&&Qe.jsxs("div",{className:"list-item-image",style:{marginRight:"8px"},children:[" ",Qe.jsx(_i,{partData:e,config:n,layout:"list",icon:null==a?void 0:a.icon,badge:null==a?void 0:a.badge})]}),Qe.jsxs("div",{className:"list-item-info",style:l,children:[!1!==w.show_name&&Qe.jsx("div",{className:"name",style:{fontWeight:"bold"},children:e.name}),!1!==w.show_stock&&Qe.jsxs("div",{className:"stock",children:["In Stock: ",e.in_stock," ",e.units||""]})]})]}),Qe.jsxs("div",{className:"list-item-actions-footer",style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",marginLeft:"auto"},children:[i.length>0&&Qe.jsx("div",{className:"parameter-action-buttons",style:{display:"flex",gap:"4px",marginBottom:"4px"},children:i.map((e=>Qe.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),_(r,e)},title:e.label,style:{fontSize:"0.7em",padding:"2px 4px"},children:e.icon?Qe.jsxs("span",{children:["(",e.icon,")"]}):e.label},`${r}-${e.label}`)))}),w.show_buttons&&t&&n&&Qe.jsx(Ci,{partItem:e,config:n,hass:t})]}),o&&Qe.jsx("div",{className:"locating-indicator",children:"Locating..."})]},r)}))})};const Ai={searchContainer:{display:"flex",alignItems:"center",border:"1px solid #ccc",borderRadius:"4px",padding:"4px 8px",backgroundColor:"#f9f9f9",position:"relative",marginBottom:"1rem"},input:{flexGrow:1,border:"none",background:"none",outline:"none",padding:"8px",fontSize:"1rem"},iconButton:{border:"none",background:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#555"},clearButton:{color:"#333"},statusIndicator:{marginLeft:"8px",display:"flex",alignItems:"center"},loadingSpinner:{border:"2px solid #f3f3f3",borderTop:"2px solid #3498db",borderRadius:"50%",width:"16px",height:"16px",animation:"spin 1s linear infinite"},errorMessage:{color:"red",fontSize:"0.8em",marginTop:"4px",paddingLeft:"8px"}},Ti=t=>{const n=Ne.useMemo((()=>e.getInstance()),[]),r=ft(),a=mt(Ta),i=mt(Da),o=mt(Ra),[s,l]=Ne.useState(a);Ne.useEffect((()=>{a!==s&&l(a)}),[a,s]);const c=Ne.useCallback(function(e,t){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>e(...r)),t)}}((e=>{e.trim().length>1?(n.log("SearchBar React",`Dispatching debounced search for: "${e}"`),r($a(e.trim()))):0===e.trim().length&&(n.log("SearchBar React","Dispatching clearSearch due to empty debounced query"),r(Aa()))}),300),[r,n]);return Qe.jsxs("form",{onSubmit:e=>{null==e||e.preventDefault(),s.trim().length>1?(n.log("SearchBar React",`Dispatching immediate search for: "${s}"`),r($a(s.trim()))):0===s.trim().length&&(n.log("SearchBar React","Dispatching clearSearch from submit (empty query)"),r(Aa()))},style:{width:"100%"},children:[Qe.jsx("style",{children:"\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n"})," ",Qe.jsxs("div",{style:Ai.searchContainer,children:[Qe.jsx("span",{style:{paddingRight:"8px",color:"#555"},children:"üîç"}),Qe.jsx("input",{type:"text",placeholder:"Search Parts...",value:s,onChange:e=>{const t=e.target.value;l(t),r(Pa(t)),c(t)},style:Ai.input}),Qe.jsx("div",{style:Ai.statusIndicator,children:"pending"===i&&Qe.jsx("div",{style:Ai.loadingSpinner})}),s?Qe.jsx("button",{type:"button",onClick:()=>{n.log("SearchBar React","Dispatching clearSearch from clear button"),r(Aa()),l("")},style:Object.assign(Object.assign({},Ai.iconButton),Ai.clearButton),title:"Clear Search",children:"‚úï"}):Qe.jsx("button",{type:"submit",style:Ai.iconButton,title:"Search",children:"üîç"})]}),o&&Qe.jsx("div",{style:Ai.errorMessage,children:o})]})},Ni=({hass:t,config:n,parts:r})=>{var a,i,o;Ne.useMemo((()=>e.getInstance()),[]);const s=ft(),l=mt((e=>_r(e))),c=mt(gi),u=mt((e=>e.parameters.loadingStatus||{})),d=mt((e=>e.parameters.parameterValues||{})),p=mt(Ta),f=mt(Na),g=mt(Da),[h,m]=Ne.useState(new Set),[v,y]=Ne.useState(!1),b=Ne.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);r&&r[1]&&t.add(parseInt(r[1],10))}})),Array.from(t)}),[]);Ne.useEffect((()=>{const e=r.map((e=>e.pk)),t=b(null==c?void 0:c.conditions),n=new Set([...e,...t]);h.size===n.size&&[...h].every((e=>n.has(e)))||m(n)}),[r,null==c?void 0:c.conditions,b,h.size]),Ne.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===h.size)return void(v&&y(!1));let t=!1;for(const e of h)if("loading"===u[e]){t=!0;break}v!==t&&y(t)}),[h,u,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,v]),Ne.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===h.size)return;const t=[];h.forEach((e=>{const n=u[e]||"idle";"idle"!==n&&"failed"!==n||t.push(e)})),t.length>0&&s(Rr(t))}),[s,null===(i=null==n?void 0:n.direct_api)||void 0===i?void 0:i.enabled,h,u]);const _=Ne.useMemo((()=>{var e;let t=r;const a=new Set(f.map((e=>e.pk)));return p.trim().length>0&&("succeeded"===g||f.length>0?t=r.filter((e=>a.has(e.pk))):"pending"!==g&&(t=[])),(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)&&n.parameters.conditions&&(t=t.filter((e=>e&&bi(e.pk,n.parameters)))),p.trim().length>0&&("pending"===g||0===f.length)&&(t=t.filter((e=>e.name.toLowerCase().includes(p.toLowerCase())))),t.sort(((e,t)=>{const n=d[e.pk]?vi({parameters:{parameterValues:d,config:c,loadingStatus:u}},e.pk):{},r=d[t.pk]?vi({parameters:{parameterValues:d,config:c,loadingStatus:u}},t.pk):{};if("top"===n.sort&&"top"!==r.sort)return-1;if("top"!==n.sort&&"top"===r.sort)return 1;if("bottom"===n.sort&&"bottom"!==r.sort)return 1;if("bottom"!==n.sort&&"bottom"===r.sort)return-1;const a="high"===n.priority?3:"medium"===n.priority?2:1,i="high"===r.priority?3:"medium"===r.priority?2:1;return a!==i?i-a:e.name.localeCompare(t.name)})),t}),[r,null==n?void 0:n.parameters,u,d,p,f,g,c]),w=Ne.useCallback((e=>{s(rr(e))}),[s]),S=Ne.useCallback(((e,t)=>{s(jr({partId:e,parameterName:t.parameter,value:t.value}))}),[s]);if(!n)return Qe.jsx("div",{className:"parts-layout loading",children:Qe.jsx("p",{children:"Loading config..."})});if(!r&&"pending"!==g)return Qe.jsx("div",{className:"parts-layout no-parts",children:Qe.jsx("p",{children:"No parts to display."})});if(v&&(null===(o=n.parameters)||void 0===o?void 0:o.enabled))return Qe.jsx("div",{className:"parts-layout loading",children:Qe.jsx("p",{children:"Loading parameters..."})});const k=n.display||{},C=n.parts_layout_mode||"grid",x={display:"grid",gridTemplateColumns:`repeat(${n.columns||3}, 1fr)`,gap:`${n.grid_spacing||8}px`,padding:"8px"};let $="No parts match the current filters or search.";p.trim().length>0&&0===_.length&&"pending"!==g&&($=`No parts found matching "${p}".`);return Qe.jsxs("div",{className:"parts-layout",style:{padding:"8px"},children:[Qe.jsx(Ti,{}),0===_.length?Qe.jsx("div",{className:"no-parts",children:Qe.jsx("p",{children:$})}):Qe.jsx("div",{style:"grid"===C?x:{padding:"8px"},children:_.map((e=>(e=>{if(!e)return null;const r=e.pk,a=vi({parameters:{parameterValues:d,config:c,loadingStatus:u}},r),i=(null==c?void 0:c.actions)||[],o=l===r,s=((e,t,n)=>{const r={border:"1px solid #ddd",padding:"8px",cursor:"pointer",marginBottom:"list"===t?"4px":"0",display:"flex",flexDirection:"list"===t?"row":"column",alignItems:"list"===t?"center":"stretch",textAlign:"grid"===t?"center":"left"};return"grid"===t&&(r.height=(null==n?void 0:n.item_height)?`${n.item_height}px`:"auto",r.justifyContent="space-between"),(null==e?void 0:e.highlight)&&(r.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(r.border=`2px solid ${e.border}`),r})(a,C,n),p=(f=a)&&f.textColor?{color:f.textColor}:{};var f;const g=["grid"===C?"part-container":"list-item",o?"locating":"",(null==a?void 0:a.priority)?`priority-${a.priority}`:""].filter(Boolean).join(" ");return Qe.jsxs("div",{className:g,style:s,onClick:()=>w(r),children:[Qe.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",flexDirection:"grid"===C?"column":"row"},children:[k.show_image&&Qe.jsxs("div",{className:"grid"===C?"part-thumbnail":"list-item-image",style:{marginBottom:"grid"===C?"8px":"0",marginRight:"list"===C?"8px":"0",display:"flex",justifyContent:"center",alignItems:"center"},children:[Qe.jsx(_i,{partData:e,config:n,layout:C}),(null==a?void 0:a.icon)&&Qe.jsxs("span",{style:{fontSize:"0.7em"},children:[" (Icon: ",a.icon,")"]})]}),Qe.jsxs("div",{className:"grid"===C?"part-info":"list-item-info",style:Object.assign(Object.assign({},p),{flexGrow:1,textAlign:"grid"===C?"center":"left"}),children:[k.show_name&&Qe.jsx("div",{className:"part-name",style:{fontWeight:"bold"},children:e.name}),k.show_stock&&Qe.jsxs("div",{className:"part-stock",children:["Stock: ",e.in_stock," ",e.units||""]})]}),Qe.jsxs("div",{className:"item-actions-footer",style:{marginTop:"grid"===C?"auto":"0",marginLeft:"list"===C?"auto":"0",paddingTop:"4px"},children:[i.length>0&&Qe.jsx("div",{className:"parameter-action-buttons",style:{display:"flex",justifyContent:"grid"===C?"center":"flex-start",gap:"4px",marginBottom:"4px"},children:i.map((e=>Qe.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),S(r,e)},title:e.label,style:{fontSize:"0.7em",padding:"2px 4px"},children:e.icon?Qe.jsxs("span",{children:["(",e.icon,")"]}):e.label},`${r}-${e.label}`)))}),k.show_buttons&&t&&n&&Qe.jsx(Ci,{partItem:e,config:n,hass:t})]})]}),o&&Qe.jsx("div",{className:"locating-indicator",children:"Locating..."})]},r)})(e)))})]})};e.getInstance();class Di{constructor(t){this.logger=e.getInstance(),this.hass=t}static getTemplateKey(e){const t=e.parameters||[];if(t.length>0){const n=t.find((e=>{var t,n,r;return"Food_State"===(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Color"===(null===(n=e.template_detail)||void 0===n?void 0:n.name)||"Size"===(null===(r=e.template_detail)||void 0===r?void 0:r.name)}));if(n)return e.name.split(" ")[0]}return e.name}static getVariants(e){const t={};return e.forEach((e=>{const n=this.getTemplateKey(e);t[n]||(t[n]=[]),t[n].push(e)})),t}static groupVariants(e,t){var n,r;const a={};if(!(null===(n=t.variants)||void 0===n?void 0:n.show_variants))return a;return((null===(r=t.variants)||void 0===r?void 0:r.variant_groups)||[]).forEach((t=>{const n=e.find((e=>e.pk===t.main_pk));n&&(a[n.pk]=[n,...e.filter((e=>(t.variantPks||[]).includes(e.pk)))])})),a}static processVariants(t,n){var r;if(!(null===(r=n.variants)||void 0===r?void 0:r.show_variants))return t;try{this.groupVariants(t,n);return t}catch(n){return e.getInstance().error("VariantService","Failed to process variants:",n),t}}static getTotalStock(e,t){return(e.in_stock||0)+t.reduce(((e,t)=>e+(t.in_stock||0)),0)}static isVariant(e){return!!e.variant_of}static isTemplate(e){return!!e.is_template&&!e.variant_of}async getVariants(e){var t;if(!(null===(t=e.variants)||void 0===t?void 0:t.show_variants))return[];try{return e.variants.variant_groups||[]}catch(e){return this.logger.error("VariantService","Failed to get variants:",e),[]}}detectVariantGroups(e){this.logger.log("VariantService",`Detecting variant groups from ${e.length} parts`,{subsystem:"detectVariantGroupsFn"}),e.filter((e=>e.is_template));const t=e.filter((e=>null!==e.variant_of)),n={};t.forEach((e=>{e.variant_of&&(n[e.variant_of]||(n[e.variant_of]=[]),n[e.variant_of].push(e))}));const r=Object.keys(n).map((t=>{const r=Number(t),a=n[r],i=e.find((e=>e.pk===r));return{main_pk:r,templatePk:r,variantPks:a.map((e=>e.pk)),template_id:r,name:(null==i?void 0:i.name)||`Group ${r}`,parts:a.map((e=>e.pk))}}));return this.logger.log("VariantService",`Detected ${r.length} variant groups`,{subsystem:"detectVariantGroupsFn"}),r}processVariantGroups(e,t){const n={};e.forEach((e=>{n[e.pk]=e}));const r=t.map((e=>{const t=n[e.template_id];if(!t)return this.logger.warn("VariantService",`Template part not found for group ${e.template_id}`),null;const r=(e.parts||[]).map((e=>n[e])).filter((e=>void 0!==e)),a=this.getTotalStock(t,r);return Object.assign(Object.assign({},t),{variants:r,is_variant_group:!0,totalStock:a})})).filter((e=>null!==e)),a=new Set;r.forEach((e=>{a.add(e.pk),e.variants&&e.variants.forEach((e=>{a.add(e.pk)}))}));const i=e.filter((e=>!a.has(e.pk)));return[...r,...i]}getTotalStock(e,t){let n=e.in_stock||0;return t.forEach((e=>{n+=e.in_stock||0})),n}async getVariantData(e){try{if(!this.hass||!e)return[];const t=this.hass.states[e];return t&&t.attributes&&t.attributes.items?t.attributes.items:[]}catch(e){return this.logger.error("VariantService","Failed to get variant data:",e),[]}}}const Ri=e.getInstance();class ji{constructor(t){this.hass=t,this.variantService=new Di(t),this.logger=e.getInstance()}static processItems(t,n){var r,a;if(Ri.log("VariantHandler","Processing items with config:",{data:{auto_detect:n.auto_detect_variants,variant_view_type:n.variant_view_type,variants_config:n.variants},subsystem:"processItems"}),!t||0===t.length)return[];if(!(null===(r=n.variants)||void 0===r?void 0:r.show_variants))return t;try{const e=[...t],r=[],i=new Set;if(n.variants.auto_detect){Ri.log("VariantHandler",`Auto-detecting variants from ${t.length} items`,{subsystem:"processItems"});const n=e.filter((e=>null!==e.variant_of));Ri.log("VariantHandler",`Found ${n.length} parts with variant_of set`,{subsystem:"processItems"});const a={};n.forEach((e=>{e.variant_of&&(a[e.variant_of]||(a[e.variant_of]=[]),a[e.variant_of].push(e))})),Object.keys(a).forEach((t=>{const n=Number(t),o=a[n],s=e.find((e=>e.pk===n));s&&(r.push({pk:s.pk,name:s.name,template:s,variants:o,totalStock:ji.calculateTotalStock(s,o)}),i.add(s.pk),o.forEach((e=>i.add(e.pk))))})),Ri.log("VariantHandler",`Created ${r.length} variant groups`,{subsystem:"processItems"})}else(null===(a=n.variants.variant_groups)||void 0===a?void 0:a.length)&&(Ri.log("VariantHandler",`Processing ${n.variants.variant_groups.length} configured variant groups`,{subsystem:"processItems"}),n.variants.variant_groups.forEach((t=>{const n=t.templatePk,a=t.variantPks||[];if(n&&a.length){const o=e.find((e=>e.pk===n));if(o){const n=e.filter((e=>a.includes(e.pk)));n.length>0&&(r.push({pk:o.pk,name:t.name||o.name,template:o,variants:n,totalStock:ji.calculateTotalStock(o,n)}),i.add(o.pk),n.forEach((e=>i.add(e.pk))))}}})));const o=e.filter((e=>!i.has(e.pk))),s=[...r,...o];return Ri.log("VariantHandler",`Processed ${r.length} variant groups and ${o.length} regular items`,{subsystem:"processItems"}),s}catch(n){return e.getInstance().error("VariantHandler","Error processing variants:",{data:n,subsystem:"processItems"}),t}}static isVariant(e){return void 0!==e.template&&void 0!==e.variants&&Array.isArray(e.variants)}static calculateTotalStock(e,t){let n=e.in_stock||0;return t.forEach((e=>{n+=e.in_stock||0})),n}processVariants(e,t){var n;if(!(null===(n=null==t?void 0:t.variants)||void 0===n?void 0:n.show_variants))return e;let r=[];return t.variants.auto_detect?r=this.variantService.detectVariantGroups(e):t.variants.variant_groups&&t.variants.variant_groups.length>0&&(r=t.variants.variant_groups),this.variantService.processVariantGroups(e,r)}getTotalStock(e,t){return ji.calculateTotalStock(e,t)}}const Li=({hass:t,config:n,parts:r})=>{var a,i,o;const s=Ne.useMemo((()=>e.getInstance()),[]),l=ft(),c=mt((e=>_r(e))),u=mt(gi),d=mt((e=>e.parameters.loadingStatus||{})),p=mt((e=>e.parameters.parameterValues||{})),[f,g]=Ne.useState([]),[h,m]=Ne.useState(new Set),[v,y]=Ne.useState(!1);Ne.useState(null);const[b,_]=Ne.useState(new Set);Ne.useEffect((()=>{if(n&&r){s.log("VariantLayout React","useEffect[parts, config] - Processing variants",{numParts:r.length});const e=ji.processItems(r,n);g(e)}else g([])}),[r,n,s]);const w=Ne.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);r&&r[1]&&t.add(parseInt(r[1],10))}})),Array.from(t)}),[]);Ne.useEffect((()=>{s.log("VariantLayout React","useEffect[processedVariants, conditions] - Recalculating requiredPartIds");const e=new Set;f.forEach((t=>{ji.isVariant(t)?(e.add(t.template.pk),t.variants.forEach((t=>e.add(t.pk)))):e.add(t.pk)}));const t=w(null==u?void 0:u.conditions),n=new Set([...Array.from(e),...t]);h.size===n.size&&[...h].every((e=>n.has(e)))||m(n)}),[f,null==u?void 0:u.conditions,w,s,h.size]),Ne.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===h.size)return void(v&&y(!1));let t=!1;for(const e of h)if("loading"===d[e]){t=!0;break}v!==t&&y(t)}),[h,d,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,s,v]),Ne.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===h.size)return;const t=[];h.forEach((e=>{const n=d[e]||"idle";"idle"!==n&&"failed"!==n||t.push(e)})),t.length>0&&l(Rr(t))}),[l,null===(i=null==n?void 0:n.direct_api)||void 0===i?void 0:i.enabled,h,d,s]);const S=Ne.useMemo((()=>{var e;return(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)?f.filter((e=>{const t=ji.isVariant(e)?e.template.pk:e.pk;return"succeeded"!==(d[t]||"idle")||bi(0,n.parameters)})):f}),[f,null==n?void 0:n.parameters,d,p]),k=Ne.useCallback((e=>{e.currentTarget.style.display="none"}),[]),C=Ne.useCallback((e=>{l(rr(e))}),[l]);Ne.useCallback(((e,t)=>{l(jr({partId:e,parameterName:t.parameter,value:t.value}))}),[l]);const x=Ne.useCallback((e=>{_((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),$=Ne.useCallback(((e,r=!1,a=!1)=>{const i=e.pk,o=vi({parameters:{parameterValues:p,config:u,loadingStatus:d}},i),s=c===i,l=(null==n?void 0:n.display)||{},f=Object.assign({},l);a?(f.show_buttons=!1,f.show_part_details_component=!1,f.show_stock_status_border=!1!==l.show_stock_status_border_for_templates):r&&(f.show_buttons=void 0!==l.show_buttons_for_variants&&l.show_buttons_for_variants,f.show_part_details_component=void 0!==l.show_part_details_component_for_variants&&l.show_part_details_component_for_variants,f.show_image=void 0===l.show_image_for_variants||l.show_image_for_variants,f.show_stock=void 0===l.show_stock_for_variants||l.show_stock_for_variants,f.show_name=void 0===l.show_name_for_variants||l.show_name_for_variants);const g=Object.assign(Object.assign({},n),{display:f}),h=((e,t)=>{const n={border:"1px solid #e0e0e0",padding:"8px",marginBottom:"8px",cursor:"pointer"};return t&&(n.backgroundColor="#f5f5f5"),(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=`2px solid ${e.border}`),n})(o,a);return Qe.jsxs("div",{className:`variant-part-item ${r?"variant-member":""} ${a?"group-header":""}`,style:h,onClick:()=>!a&&C(i),children:[Qe.jsx(xi,{partId:i,config:g,hass:t}),s&&Qe.jsx("div",{className:"locating-indicator",style:{marginTop:"5px",textAlign:"center",color:"blue"},children:"Locating..."})]},i)}),[n,t,p,u,d,c,C,k]);if(!n)return Qe.jsx("div",{className:"variant-layout loading",children:Qe.jsx("p",{children:"Loading config..."})});if(v&&(null===(o=n.parameters)||void 0===o?void 0:o.enabled))return Qe.jsx("div",{className:"variant-layout loading",children:Qe.jsx("p",{children:"Loading parameters..."})});if(!f||0===f.length)return Qe.jsx("div",{className:"variant-layout no-variants",children:Qe.jsx("p",{children:"No parts or variants to display."})});if(0===S.length&&f.length>0)return Qe.jsx("div",{className:"variant-layout no-variants",children:Qe.jsx("p",{children:"All items filtered out."})});const E=n.variant_view_type||"grid";s.log("VariantLayout React Render",`Rendering in ${E} mode with ${S.length} visible items.`);switch(E){case"list":return Qe.jsx("div",{style:{padding:"10px"},children:S.map((e=>ji.isVariant(e)?Qe.jsxs("div",{className:"variant-group-list",style:{marginBottom:"15px"},children:[$(e.template,!1,!0),Qe.jsx("div",{style:{marginLeft:"30px",paddingTop:"5px"},children:e.variants.map((e=>$(e,!0)))})]},e.template.pk):$(e)))});case"tree":return Qe.jsx("div",{style:{padding:"10px"},children:S.map((e=>{if(ji.isVariant(e)){const t=b.has(e.template.pk);return Qe.jsxs("div",{className:"variant-group-tree",style:{marginBottom:"5px"},children:[Qe.jsxs("div",{onClick:()=>x(e.template.pk),style:{display:"flex",alignItems:"center"},children:[Qe.jsx("span",{style:{marginRight:"5px"},children:t?"‚ñº":"‚ñ∫"}),$(e.template,!1,!0)]}),t&&Qe.jsx("div",{style:{marginLeft:"30px",paddingTop:"5px",borderLeft:"1px dashed #ccc"},children:e.variants.map((e=>$(e,!0)))})]},e.template.pk)}return $(e)}))});default:return Qe.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${(null==n?void 0:n.item_width)||150}px, 1fr))`,gap:"10px",padding:"10px"},children:S.map((e=>ji.isVariant(e)?Qe.jsxs("div",{className:"variant-group-grid",children:[$(e.template,!1,!0)," ",Qe.jsx("div",{style:{marginLeft:"20px",borderLeft:"2px solid #f0f0f0",paddingLeft:"10px"},children:e.variants.map((e=>$(e,!0)))})]},e.template.pk):$(e)))})}},Oi=e.getInstance();const zi=({hass:e,config:t})=>{var n,r,a;const i=ft(),o=null===(n=null==t?void 0:t.performance)||void 0===n?void 0:n.rendering,s=null!==(r=null==o?void 0:o.debounceTime)&&void 0!==r?r:50,l=null!==(a=null==o?void 0:o.idleRenderInterval)&&void 0!==a?a:5e3,c=Ne.useMemo((()=>{if(!t)return[];const e=t.entity?[t.entity]:[];return Array.isArray(t.selected_entities)&&e.push(...t.selected_entities),[...new Set(e)]}),[null==t?void 0:t.entity,null==t?void 0:t.selected_entities]),u=mt((e=>vr(e,c))),d=mt((e=>{if(t&&u&&0!==u.length)return"detail"===t.view_type||"variants"===t.view_type?t.part_id&&u.find((e=>e.pk===t.part_id))||u[0]:void 0}));Ne.useEffect((()=>{t&&(Oi.log("InventreeCard.tsx","Config updated or available.",{config:t}),Oi.setDebugConfig(t))}),[t]);const p=Ne.useCallback(function(e,t){let n=null;return(...r)=>new Promise((a=>{n&&clearTimeout(n),n=setTimeout((()=>{n=null,a(e(...r))}),t)}))}((async(e,t,n)=>{var r,a,i;if(e&&t){Oi.log("InventreeCard.tsx","Debounced Effect: HASS and Config are available. Initializing.",{hass:!!e,config:!!t}),(null===(r=t.direct_api)||void 0===r?void 0:r.enabled)?(t.direct_api.url&&t.direct_api.api_key?(Oi.log("InventreeCard.tsx","üöÄ Debounced Effect: Dispatching initializeDirectApi thunk"),n(ui({directApiConfig:t.direct_api,logger:Oi}))):Oi.warn("InventreeCard.tsx","‚ö†Ô∏è Debounced Effect: Direct API URL or API Key missing, skipping initialization."),"hass"!==t.direct_api.method&&(t.direct_api.url||t.direct_api.websocket_url?(Oi.log("InventreeCard.tsx","üîå Debounced Effect: Dispatching initializeWebSocketPlugin thunk"),n(di({directApiConfig:t.direct_api,cardDebugWebSocket:t.debug_websocket,logger:Oi}))):Oi.warn("InventreeCard.tsx","‚ö†Ô∏è Debounced Effect: Cannot initialize WebSocket, base URL for WS derivation is missing when method is not HASS."))):Oi.log("InventreeCard.tsx","Debounced Effect: Direct API not enabled, skipping API/WebSocket initialization.");const o=t.entity,s=t.selected_entities||[];e&&(o||s.length>0)?(Oi.log("InventreeCard.tsx","üîÑ Debounced Effect: Dispatching processHassEntities thunk"),n(pi({hass:e,mainEntityId:o,selectedEntities:s,logger:Oi}))):e?Oi.warn("InventreeCard.tsx","Debounced Effect: No main entity or selected entities configured, skipping HASS state processing."):Oi.warn("InventreeCard.tsx","Debounced Effect: HASS object not available, skipping HASS entity processing."),(null===(a=t.direct_api)||void 0===a?void 0:a.enabled)&&(null===(i=t.parameters)||void 0===i?void 0:i.enabled)&&t.parameters.conditions?(Oi.log("InventreeCard.tsx","Debounced Effect: Dispatching initializeConditionsAndParameters..."),n(Nr(t.parameters.conditions))):(Oi.log("InventreeCard.tsx","Debounced Effect: Skipping parameter conditions initialization (Direct API/Parameters disabled or no conditions defined)."),n(Nr([])))}}),s),[s,Oi]);if(Ne.useEffect((()=>{p(e,t,i)}),[e,t,i,p]),Ne.useEffect((()=>{if(l<=0)return;Oi.log("InventreeCard.tsx",`Setting up idle render interval: ${l}ms`);const e=setInterval((()=>{Oi.log("InventreeCard.tsx","Idle render interval fired.",{interval:l})}),l);return()=>{Oi.log("InventreeCard.tsx","Clearing idle render interval."),clearInterval(e)}}),[l,Oi]),!t)return De.createElement("div",null,"Loading configuration...");return Qe.jsxs("div",{style:{padding:"16px",border:"2px solid navy"},children:[Qe.jsx("h1",{style:{marginTop:0,marginBottom:"8px"},children:"InvenTree Card (React)"}),Qe.jsxs("p",{style:{fontSize:"12px",color:"#555",marginTop:0,marginBottom:"16px"},children:["Config Entity: ",t.entity||"N/A"," | View: ",t.view_type||"N/A"," | Parts in Store for Config: ",u.length," | Selected Item PK: ",(null==d?void 0:d.pk)||"N/A"]}),(()=>{let n={hass:e,config:t};switch(t.view_type){case"detail":return De.createElement($i,Object.assign(Object.assign({},n),{selectedPartId:null==d?void 0:d.pk}));case"grid":return De.createElement(Ii,Object.assign(Object.assign({},n),{parts:u,item:d}));case"list":return De.createElement(Pi,Object.assign(Object.assign({},n),{parts:u,item:d}));case"parts":return De.createElement(Ni,Object.assign(Object.assign({},n),{parts:u}));case"variants":return De.createElement(Li,Object.assign(Object.assign({},n),{item:d,parts:u}));default:return Oi.warn("InventreeCard.tsx",`Unknown view_type: ${t.view_type}. Defaulting to Detail view or placeholder.`),De.createElement("div",null,`Unknown view_type: ${t.view_type}. Please configure a valid view.`)}})()]})},Mi=e.getInstance(),Fi=({hass:e,config:t})=>(De.useEffect((()=>{Mi.log("ReactApp","ReactApp component mounted or props updated.",{hasHass:!!e,hasConfig:!!t,viewType:null==t?void 0:t.view_type})}),[e,t]),e&&t?Qe.jsx(st,{store:si,children:Qe.jsx(zi,{hass:e,config:t})}):(Mi.warn("ReactApp","ReactApp rendered without HASS or config. Displaying loading/error."),Qe.jsxs("div",{style:{padding:"16px",border:"1px dashed red"},children:[!e&&Qe.jsx("p",{children:"Waiting for Home Assistant connection..."}),!t&&Qe.jsx("p",{children:"Waiting for card configuration..."})]})));window.customCards||(window.customCards=[]),window.customCards.push({type:"inventree-card",name:"InvenTree Card",description:"A card for displaying InvenTree inventory data",preview:!0});const Vi=ue;try{let t=class extends Vi{constructor(){super(),this.logger=e.getInstance(),this._cleanupFunctions=[],this._entitySubscriptions=new Map,this._websocketSubscriptions=[],this._reactRoot=null,this._reactMountPoint=null,this._isDestroyed=!1,this.logger.log("InventreeCard","Creating InventreeCard instance (Lit Wrapper)",{category:"card",subsystem:"lifecycle"})}static async getConfigElement(){if(!customElements.get(i)){e.getInstance().log("InventreeCard","Editor not registered yet, importing dynamically",{category:"card",subsystem:"editor"});try{await Promise.resolve().then((function(){return qi})),e.getInstance().log("InventreeCard","Dynamic editor import successful",{category:"card",subsystem:"editor"})}catch(t){e.getInstance().error("InventreeCard",`Error importing editor component: ${t}`,{category:"card",subsystem:"editor",data:t})}}e.getInstance().log("InventreeCard",`Creating editor element: ${i}`,{category:"card",subsystem:"editor"});const t=document.createElement(i);return e.getInstance().log("InventreeCard","Editor element created",{category:"card",subsystem:"editor"}),t}static getStubConfig(e){const t=Object.keys(e.states).find((t=>{var n;return t.startsWith("sensor.")&&void 0!==(null===(n=e.states[t].attributes)||void 0===n?void 0:n.items)}));return{type:`custom:${r}`,entity:t||"",view_type:"detail",selected_entities:[],display:{show_header:!0,show_image:!0},direct_api:{enabled:!1,url:"",api_key:"",method:"websocket"}}}setConfig(e){if(!e)throw new Error("No configuration provided");this.logger.log("InventreeCard","setConfig called with config (raw):",{category:"card",subsystem:"config",data:{config:JSON.stringify(e,null,2)}}),this.logger.info("Card","Setting configuration",{category:"card",subsystem:"config",data:{entityId:e.entity,viewType:e.view_type}}),this.config=e,this._setupDebugMode(e)}_setupEntitySubscriptions(){var e,t,n;if(this._clearEntitySubscriptions(),!(null===(e=this._hass)||void 0===e?void 0:e.connection)||!(null===(t=this.config)||void 0===t?void 0:t.entity)&&(!(null===(n=this.config)||void 0===n?void 0:n.selected_entities)||0===this.config.selected_entities.length))return void this.logger.warn("Card Lit","Cannot set up entity subscription - HASS connection or relevant entityIds missing.");const r=[this.config.entity,...this.config.selected_entities||[]].filter(Boolean);[...new Set(r)].forEach((e=>{if(this._entitySubscriptions.has(e))return;(async e=>{try{const t=await this._hass.connection.subscribeEvents((t=>{t.data.entity_id===e&&(this.logger.log("Card Lit",`Entity ${e} changed, triggering React update via hass prop.`),this._hass=Object.assign({},this._hass))}),"state_changed");this._entitySubscriptions.set(e,t),this.logger.log("Card Lit",`Subscribed to HASS entity: ${e}`)}catch(t){this.logger.error("Card Lit",`Error subscribing to HASS entity ${e}:`,t)}})(e)}))}_clearEntitySubscriptions(){this.logger.log("Card Lit","Clearing HASS entity subscriptions");for(const e of this._entitySubscriptions.values())"function"==typeof e&&e();this._entitySubscriptions.clear()}render(){return this.logger.log("InventreeCardLit","render() called, creating react-root-container div."),B`<div id="react-root-container"></div>`}firstUpdated(e){super.firstUpdated(e),this.logger.log("InventreeCardLit","firstUpdated() called."),this.shadowRoot?(this._reactMountPoint=this.shadowRoot.getElementById("react-root-container"),this._reactMountPoint?this.logger.log("InventreeCardLit","react-root-container found and cached in firstUpdated."):this.logger.error("InventreeCardLit","CRITICAL: react-root-container NOT FOUND in shadowRoot during firstUpdated.")):this.logger.error("InventreeCardLit","CRITICAL: shadowRoot NOT AVAILABLE during firstUpdated."),this._mountOrUpdateReactApp()}updated(e){super.updated(e),(e.has("_hass")||e.has("config"))&&(this.logger.log("InventreeCard","Hass or Config changed in Lit, triggering React update.",{changed:Array.from(e.keys())}),this._mountOrUpdateReactApp()),(e.has("config")||e.has("_hass"))&&this._setupEntitySubscriptions()}_mountOrUpdateReactApp(){if(!this._reactMountPoint){if(this.logger.error("InventreeCardLit","Cannot mount React app: _reactMountPoint is not set. Attempting to find it again."),!this.shadowRoot)return void this.logger.error("InventreeCardLit","shadowRoot not available in _mountOrUpdateReactApp for re-check.");if(this._reactMountPoint=this.shadowRoot.getElementById("react-root-container"),!this._reactMountPoint)return void this.logger.error("InventreeCardLit","Still cannot find react-root-container on re-check.");this.logger.warn("InventreeCardLit","Found react-root-container on re-check within _mountOrUpdateReactApp.")}if(!this._reactRoot){if(!this._reactMountPoint)return void this.logger.error("InventreeCardLit","Cannot create React root: _reactMountPoint is null just before createRoot.");this._reactRoot=Be.createRoot(this._reactMountPoint),this.logger.log("InventreeCardLit","Mounting React app for the first time.",{hass:!!this._hass,config:!!this.config})}this._hass&&this.config?(this.logger.log("InventreeCardLit","Rendering ReactApp with HASS and Config."),this._reactRoot.render(De.createElement(Fi,{hass:this._hass,config:this.config}))):(this.logger.warn("InventreeCardLit","HASS or Config object is null/undefined, not rendering ReactApp.",{hass:!!this._hass,config:!!this.config}),!this._reactRoot||this._hass&&this.config||this.logger.log("InventreeCardLit","Skipping render call as HASS or Config is missing."))}_unmountReactApp(){this._reactRoot&&(this._reactRoot.unmount(),this._reactRoot=null,this.logger.log("InventreeCard","React app unmounted successfully.")),this._reactMountPoint=null}getCardSize(){return 3}static getConfigForm(){}_setupDebugMode(e){this.logger.setDebugConfig(e),this.logger.log("Card","Debug mode configuration set (Lit wrapper)")}_cleanupEventListeners(){this._clearEntitySubscriptions(),this._websocketSubscriptions.forEach((e=>e())),this._websocketSubscriptions=[],this.logger.log("Card","Cleaned up Lit event listeners/subscriptions",{category:"card",subsystem:"lifecycle"})}connectedCallback(){super.connectedCallback();try{this.logger.log("InventreeCard","Lit wrapper connected to DOM",{category:"card",subsystem:"lifecycle"}),this._setupEntitySubscriptions()}catch(e){this.logger.error("InventreeCard","Error in connectedCallback (Lit wrapper):",{category:"card",subsystem:"lifecycle",data:e})}}get hass(){return this._hass?this._hass:void 0}set hass(e){e&&e!==this._hass&&(this.logger.log("Card Lit","HASS object received."),this._hass=e)}requestUpdate(e,t){try{super.requestUpdate(e,t)}catch(e){this.logger.error("InventreeCard",`Critical error in requestUpdate: ${e}`,{category:"card",subsystem:"lifecycle",data:e})}}disconnectedCallback(){super.disconnectedCallback(),this.logger.log("InventreeCard","Lit wrapper disconnectedCallback - cleaning up",{category:"card",subsystem:"lifecycle"}),this._isDestroyed=!0,this._unmountReactApp(),this._cleanupEventListeners(),this._cleanupFunctions.forEach((e=>e())),this._cleanupFunctions=[],be("lit","cardDisconnected")}};t.styles=[p`
                :host { /* Style the host element itself */
                    display: block; /* Ensure it takes up space */
                    width: 100%;
                    height: 100%;
                }
                #react-root-container {
                    width: 100%;
                    height: 100%;
                }
            `],o([he({attribute:!1})],t.prototype,"config",void 0),o([me()],t.prototype,"_hass",void 0),o([me()],t.prototype,"_reactRoot",void 0),t=o([pe("inventree-card")],t)}catch(ge){if(e.getInstance().error("InventreeCardGlobal","Error defining InventreeCard (Lit Wrapper):",{data:ge}),!customElements.get(r)){e.getInstance().log("InventreeCardGlobal","Attempting fallback definition for InventreeCard",{category:"card",subsystem:"lifecycle"});try{class t extends ue{setConfig(t){e.getInstance().error("FallbackInventreeCard","setConfig called. Card failed to load properly.",{data:t}),this.shadowRoot&&(this.shadowRoot.innerHTML='<div style="color: red; padding: 16px;">Error: InvenTree Card failed to load. Check console.</div>')}getCardSize(){return 1}}customElements.define(r,t)}catch(t){e.getInstance().error("FallbackInventreeCard","Even fallback InventreeCard failed to register:",{data:t})}}}let Wi;window.customCards=window.customCards||[],window.customCards.some((e=>"inventree-card"===e.type))||window.customCards.push({type:"inventree-card",name:"InvenTree Card",description:"A card for displaying InvenTree inventory data",preview:!0});try{Wi=customElements.get(r)}catch(ge){}const Ui=p`
  ha-form {
    display: block;
    padding: 16px;
  }

  .parts-settings {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .part-entry {
    display: grid;
    grid-template-columns: 1fr 1fr auto;
    gap: 8px;
    align-items: center;
  }

  .add-part,
  .remove-part {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 8px;
    border: none;
    border-radius: 4px;
    background: var(--primary-color);
    color: var(--text-primary-color);
    cursor: pointer;
  }

  .remove-part {
    background: var(--error-color);
  }

  .add-part:hover,
  .remove-part:hover {
    opacity: 0.9;
  }
`;let Bi=class extends ue{constructor(){super(),this.logger=e.getInstance(),this._showConditionDialog=!1,this._editingConditionIndex=null,this._conditionParameter="",this._conditionOperator="equals",this._conditionValue="",this._conditionAction="highlight",this._conditionActionValue="",this._conditionTargetPartIds="",this._showActionDialog=!1,this._editingActionIndex=null,this._actionLabel="",this._actionIcon="",this._actionParameter="",this._actionValue="",this._actionConfirmation=!1,this._actionConfirmationText="",this._conditionParameterType="entity",this._conditionPartId="",this._conditionParamName="",this._filterAttribute=null,this._filterOperator="eq",this._filterValue="",this._parameterName="",this._parameterValue="",this.logger=e.getInstance(),this.logger.log("Editor","Editor constructor called")}disconnectedCallback(){super.disconnectedCallback()}setConfig(e){this._config=Object.assign(Object.assign({},e),{view_type:e.view_type||"detail"})}_updateConfig(e){const t=JSON.parse(JSON.stringify(this._config||{}));for(const[n,r]of Object.entries(e))Array.isArray(r)?t[n]=[...r]:t[n]="object"==typeof r&&null!==r?Object.assign(Object.assign({},t[n]||{}),r):r;this.logger.log("Editor","Updated config",{category:"editor"},t),Jn(this,"config-changed",{config:t})}render(){var e,t,n,r,a,i,o,s,l,c,u,d,p,f,g,h,m,v,y,b,_,w,S,k,C,x,$,E,I,P,A,T,N,D,R,j,L,O,z,M,F,V,W,U,q,G,K,Q,J,Y,X,Z,ee,te,ne,re,ae,ie,oe,se,le,ce;if(!this.hass||!this._config)return B``;const ue="variants"===this._config.view_type;return B`
            <div class="editor">
                <!-- Basic Settings -->
                <div class="section">
                    <div class="section-header">Basic Settings</div>
                    <div class="basic-settings">
                        <ha-entity-picker
                            .hass=${this.hass}
                            .value=${this._config.entity}
                            .label=${"Entity"}
                            .includeDomains=${["sensor"]}
                            @value-changed=${this._valueChanged("entity")}
                        ></ha-entity-picker>
                        <div class="checkbox-container">
                            <input
                                type="checkbox"
                                id="show_header"
                                .checked=${null===(t=null===(e=this._config.display)||void 0===e?void 0:e.show_header)||void 0===t||t}
                                @change=${this._valueChanged("display.show_header")}
                            />
                            <label for="show_header">Show Header</label>
                        </div>
                    </div>
                    <input
                        type="text"
                        label="Title"
                        .value=${this._config.name||""}
                        @input=${this._valueChanged("name")}
                    />
                </div>

                <!-- Layout -->
                <div class="section">
                    <div class="section-header">Layout</div>
                    <div class="grid-2">
                        <div class="input-group">
                            <label for="view-type">View Type</label>
                            <select
                                id="view-type"
                                .value=${this._config.view_type||"detail"}
                                @change=${this._valueChanged("view_type")}
                            >
                                <option value="detail" ?selected=${"detail"===(null===(n=this._config)||void 0===n?void 0:n.view_type)}>Detail</option>
                                <option value="grid" ?selected=${"grid"===(null===(r=this._config)||void 0===r?void 0:r.view_type)}>Grid</option>
                                <option value="list" ?selected=${"list"===(null===(a=this._config)||void 0===a?void 0:a.view_type)}>List</option>
                                <option value="parts" ?selected=${"parts"===(null===(i=this._config)||void 0===i?void 0:i.view_type)}>Parts</option>
                                <option value="variants" ?selected=${"variants"===(null===(o=this._config)||void 0===o?void 0:o.view_type)}>Variants</option>
                                <option value="base" ?selected=${"base"===(null===(s=this._config)||void 0===s?void 0:s.view_type)}>Base Layout</option>
                                <option value="debug" ?selected=${"debug"===(null===(l=this._config)||void 0===l?void 0:l.view_type)}>Debug View</option>
                                <option value="custom" ?selected=${"custom"===(null===(c=this._config)||void 0===c?void 0:c.view_type)}>Custom</option>
                            </select>
                        </div>

                        ${"grid"===(null===(u=this._config)||void 0===u?void 0:u.view_type)?B`
                            <div class="grid-settings">
                            <ha-textfield
                                type="number"
                                label="Columns"
                                min="1"
                                max="6"
                                    .value=${null!==(p=null===(d=this._config)||void 0===d?void 0:d.columns)&&void 0!==p?p:3}
                                    @change=${e=>{this.logger.log("Editor","Columns changing",{category:"editor"}),this._valueChanged("columns")(e)}}
                            ></ha-textfield>
                                
                                <ha-textfield
                                    type="number"
                                    label="Grid Spacing"
                                    min="0"
                                    max="24"
                                    .value=${null!==(g=null===(f=this._config)||void 0===f?void 0:f.grid_spacing)&&void 0!==g?g:8}
                                    @change=${e=>{this.logger.log("Editor","Grid spacing changing",{category:"editor"}),this._valueChanged("grid_spacing")(e)}}
                                ></ha-textfield>
                                
                                <ha-textfield
                                    type="number"
                                    label="Item Height"
                                    min="40"
                                    max="500"
                                    .value=${null!==(m=null===(h=this._config)||void 0===h?void 0:h.item_height)&&void 0!==m?m:170}
                                    @change=${e=>{this.logger.log("Editor","Item height changing",{category:"editor"}),this._valueChanged("item_height")(e)}}
                                ></ha-textfield>
                                
                                <ha-textfield
                                    type="number"
                                    label="Thumbnail Width"
                                    min="50"
                                    max="300"
                                    .value=${null!==(b=null===(y=null===(v=this._config)||void 0===v?void 0:v.style)||void 0===y?void 0:y.image_size)&&void 0!==b?b:50}
                                    @change=${e=>{this.logger.log("Editor","Thumbnail width changing",{category:"editor"}),this._valueChanged("style.image_size")(e)}}
                            ></ha-textfield>
                            </div>
                        `:H}
                    </div>
                </div>

                <!-- Display Settings -->
                <div class="section">
                    <div class="section-header">Display</div>
                    <div class="grid-2">
                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!1!==(null===(_=this._config.display)||void 0===_?void 0:_.show_image)}
                                @change=${this._valueChanged("display.show_image")}
                                />
                                Show Images
                            </label>
                        </div>
                        
                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!1!==(null===(w=this._config.display)||void 0===w?void 0:w.show_name)}
                                @change=${this._valueChanged("display.show_name")}
                                />
                                Show Names
                            </label>
                        </div>
                        
                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!1!==(null===(S=this._config.display)||void 0===S?void 0:S.show_stock)}
                                @change=${this._valueChanged("display.show_stock")}
                                />
                                Show Stock
                            </label>
                        </div>
                        
                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!0===(null===(k=this._config.display)||void 0===k?void 0:k.show_description)}
                                @change=${this._valueChanged("display.show_description")}
                                />
                                Show Description
                            </label>
                    </div>

                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!0===(null===(C=this._config.display)||void 0===C?void 0:C.show_category)}
                                    @change=${this._valueChanged("display.show_category")}
                                />
                                Show Category
                            </label>
                </div>

                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!1!==(null===(x=this._config.display)||void 0===x?void 0:x.show_stock_status_border)}
                                    @change=${this._valueChanged("display.show_stock_status_border")}
                                />
                                Show Stock Status Border
                            </label>
                        </div>

                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!1!==(null===($=this._config.display)||void 0===$?void 0:$.show_stock_status_colors)}
                                    @change=${this._valueChanged("display.show_stock_status_colors")}
                                />
                                Show Stock Status Colors
                            </label>
                        </div>

                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!1!==(null===(E=this._config.display)||void 0===E?void 0:E.show_buttons)}
                                    @change=${this._valueChanged("display.show_buttons")}
                                />
                                Show Buttons
                            </label>
                        </div>

                        <div>
                            <label>
                                <input 
                                    type="checkbox" 
                                    ?checked=${!0===(null===(I=this._config.display)||void 0===I?void 0:I.show_parameters)}
                                    @change=${this._valueChanged("display.show_parameters")}
                                />
                                Show Parameters
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Parameters Tab -->
                <div class="section">
                    <div class="section-header">Parameters</div>
                    
                    <div class="checkbox-container">
                        <input
                            type="checkbox"
                            id="enable_parameters"
                            .checked=${null!==(A=null===(P=this._config.parameters)||void 0===P?void 0:P.enabled)&&void 0!==A&&A}
                            @change=${this._valueChanged("parameters.enabled")}
                        />
                        <label for="enable_parameters">Enable Parameter Features</label>
                    </div>
                    
                    ${(null===(T=this._config.parameters)||void 0===T?void 0:T.enabled)?B`
                        <div class="subsection">
                            <div class="subsection-header">Parameter Display</div>
                            <div class="grid-2">
                                <div>
                                    <label>
                                        <input 
                                            type="checkbox" 
                                            ?checked=${!1!==(null===(N=this._config.parameters)||void 0===N?void 0:N.show_section)}
                                            @change=${this._valueChanged("parameters.show_section")}
                                        />
                                        Show Parameters Section
                                    </label>
                                </div>
                                
                                <div>
                                    <label>
                                        <input 
                                            type="checkbox" 
                                            ?checked=${!0===(null===(D=this._config.parameters)||void 0===D?void 0:D.collapsed_by_default)}
                                            @change=${this._valueChanged("parameters.collapsed_by_default")}
                                        />
                                        Collapsed by Default
                                    </label>
                                </div>
                                
                                <div>
                                    <label>
                                        <input 
                                            type="checkbox" 
                                            ?checked=${!0===(null===(R=this._config.parameters)||void 0===R?void 0:R.group_parameters)}
                                            @change=${this._valueChanged("parameters.group_parameters")}
                                        />
                                        Group Parameters
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="subsection">
                            <div class="subsection-header">Parameter Conditions</div>
                            <p>Create rules that change how parts are displayed based on parameter values.</p>
                            
                            <button @click=${this._addCondition} class="add-button">
                                + Add Condition
                            </button>
                            
                            <div class="conditions-list">
                                ${(null===(L=null===(j=this._config.parameters)||void 0===j?void 0:j.conditions)||void 0===L?void 0:L.map(((e,t)=>B`
                                    <div class="condition-row">
                                        <div class="condition-summary">
                                            If <strong>${e.parameter}</strong> 
                                            ${this._getOperatorLabel(e.operator)} 
                                            <strong>${e.value}</strong> then
                                            ${this._getActionLabel(e.action,e.action_value)}
                                        </div>
                                        <div class="condition-actions">
                                            <button @click=${()=>this._editCondition(t)} class="edit-button">Edit</button>
                                            <button @click=${()=>this._removeCondition(t)} class="delete-button">Delete</button>
                                        </div>
                                    </div>
                                `)))||""}
                            </div>
                        </div>
                        
                        <div class="subsection">
                            <div class="subsection-header">Parameter Actions</div>
                            <p>Create custom buttons that update parameter values.</p>
                            
                            <button @click=${this._addAction} class="add-button">
                                + Add Action Button
                            </button>
                            
                            <div class="actions-list">
                                ${(null===(z=null===(O=this._config.parameters)||void 0===O?void 0:O.actions)||void 0===z?void 0:z.map(((e,t)=>B`
                                    <div class="action-row">
                                        <div class="action-summary">
                                            <strong>${e.label}</strong>: Set <strong>${e.parameter}</strong> to <strong>${e.value}</strong>
                                        </div>
                                        <div class="action-buttons">
                                            <button @click=${()=>this._editAction(t)} class="edit-button">Edit</button>
                                            <button @click=${()=>this._removeAction(t)} class="delete-button">Delete</button>
                                        </div>
                                    </div>
                                `)))||""}
                            </div>
                        </div>
                    `:""}
                </div>

                <!-- Buttons Configuration -->
                <div class="section">
                    <div class="section-header">Buttons</div>
                    <div class="grid-2">
                        <div class="select-container">
                            <label>Button Preset</label>
                            <select
                                .value=${null!==(F=null===(M=this._config.buttons)||void 0===M?void 0:M.preset)&&void 0!==F?F:"default"}
                                @change=${this._valueChanged("buttons.preset")}
                            >
                                <option value="default">Default (+1/-1)</option>
                                <option value="precise">Precise (+0.1/-0.1)</option>
                                <option value="bulk">Bulk (+10/-10)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Services -->
                <div class="section">
                    <div class="section-header">Services</div>
                    <div class="services-settings">
                        <div class="checkbox-container">
                            <input
                                type="checkbox"
                                id="enable_wled"
                                .checked=${null!==(U=null===(W=null===(V=this._config.services)||void 0===V?void 0:V.wled)||void 0===W?void 0:W.enabled)&&void 0!==U&&U}
                                @change=${this._valueChanged("services.wled.enabled")}
                            />
                            <label for="enable_wled">Enable WLED Location</label>
                        </div>
                        
                        ${(null===(G=null===(q=this._config.services)||void 0===q?void 0:q.wled)||void 0===G?void 0:G.enabled)?B`
                            <div class="grid-2">
                                <div class="input-container">
                                    <label>WLED Entity</label>
                                    <input
                                        type="text"
                                        .value=${(null===(Q=null===(K=this._config.services)||void 0===K?void 0:K.wled)||void 0===Q?void 0:Q.entity_id)||""}
                                        @input=${this._valueChanged("services.wled.entity_id")}
                                    />
                                </div>
                                
                                <div class="input-container">
                                    <label>Parameter Name</label>
                                    <input
                                        type="text"
                                        .value=${(null===(Y=null===(J=this._config.services)||void 0===J?void 0:J.wled)||void 0===Y?void 0:Y.parameter_name)||"led_xaxis"}
                                        @input=${this._valueChanged("services.wled.parameter_name")}
                                    />
                                </div>
                            </div>
                        `:""}
                        
                        <div class="checkbox-container">
                            <input
                                type="checkbox"
                                id="enable_print"
                                .checked=${null!==(ee=null===(Z=null===(X=this._config.services)||void 0===X?void 0:X.print)||void 0===Z?void 0:Z.enabled)&&void 0!==ee&&ee}
                                @change=${this._valueChanged("services.print.enabled")}
                            />
                            <label for="enable_print">Enable Print Labels</label>
                        </div>
                        
                        ${(null===(ne=null===(te=this._config.services)||void 0===te?void 0:te.print)||void 0===ne?void 0:ne.enabled)?B`
                            <div class="grid-2">
                                <div class="input-container">
                                    <label>Template ID</label>
                                    <input
                                        type="number"
                                        .value=${(null===(ae=null===(re=this._config.services)||void 0===re?void 0:re.print)||void 0===ae?void 0:ae.template_id)||2}
                                        @input=${this._valueChanged("services.print.template_id")}
                                    />
                                </div>
                                
                                <div class="input-container">
                                    <label>Print Plugin</label>
                                    <input
                                        type="text"
                                        .value=${(null===(oe=null===(ie=this._config.services)||void 0===ie?void 0:ie.print)||void 0===oe?void 0:oe.plugin)||"zebra"}
                                        @input=${this._valueChanged("services.print.plugin")}
                                    />
                                </div>
                            </div>
                        `:""}
                    </div>
                </div>

                <!-- Direct API Configuration -->
                ${this._renderDirectApiConfig()}

                <!-- Debugging Section -->
                ${this._renderDebuggingSection()}

                <!-- Variant Settings - ONLY SHOW ONCE when view_type is variants -->
                ${ue?B`
                    <div class="section">
                        <div class="section-header">Variant Settings</div>
                        <div class="input-group">
                            <label for="variant-view-type">Variant View Type</label>
                            <select
                                id="variant-view-type"
                                .value=${this._config.variant_view_type||"grid"}
                                @change=${this._valueChanged("variant_view_type")}
                            >
                                <option value="grid">Grid</option>
                                <option value="list">List</option>
                                <option value="tree">Tree</option>
                            </select>
                        </div>
                        <div class="checkbox-container">
                            <input
                                type="checkbox"
                                id="auto-detect-variants"
                                .checked=${!1!==this._config.auto_detect_variants}
                                @change=${this._valueChanged("auto_detect_variants")}
                            />
                            <label for="auto-detect-variants">Auto-detect Variants</label>
                        </div>
                    </div>
                `:""}

                ${this._renderPartsConfig()}

                <!-- Condition Dialog -->
                ${this._renderConditionDialog()}
                
                <!-- Action Dialog -->
                ${this._renderActionDialog()}

                <!-- Performance Settings Section -->
                ${this._renderPerformanceSettings()}

                ${"custom"===(null===(se=this._config)||void 0===se?void 0:se.view_type)?B`
                    <div class="subsection">
                        <div class="grid-2">
                            <ha-textfield
                                label="Custom Tag"
                                .value=${(null===(ce=null===(le=this._config)||void 0===le?void 0:le.custom_view)||void 0===ce?void 0:ce.tag)||""}
                                @change=${this._valueChanged("custom_view.tag")}
                            ></ha-textfield>
                        </div>
                        <div class="note">
                            Enter a custom HTML tag name for your view component
                        </div>
                    </div>
                `:H}
            </div>
        `}_renderPartsConfig(){var e,t,n;if(!(null===(e=this._config)||void 0===e?void 0:e.view_type))return B``;if("parts"!==this._config.view_type)return B``;const r=this.hass?Object.keys(this.hass.states).filter((e=>{var t,n,r,a,i;return e.startsWith("sensor.")&&void 0!==(null===(r=null===(n=null===(t=this.hass)||void 0===t?void 0:t.states[e])||void 0===n?void 0:n.attributes)||void 0===r?void 0:r.items)&&!(null===(i=null===(a=this._config)||void 0===a?void 0:a.selected_entities)||void 0===i?void 0:i.includes(e))})):[];return B`
            <div class="section">
                <div class="section-header">Parts Configuration</div>
                
                <div class="values">
                    <div class="row">
                        <div class="input-container">
                            <label for="entity-select">Add InvenTree Entity:</label>
                            <select 
                                id="entity-select"
                                @change=${this._entitySelected}
                                .value=${""}
                            >
                                <option value="" disabled selected>Select an entity</option>
                                ${r.map((e=>{var t,n,r;return B`
                                    <option value=${e}>
                                        ${(null===(r=null===(n=null===(t=this.hass)||void 0===t?void 0:t.states[e])||void 0===n?void 0:n.attributes)||void 0===r?void 0:r.friendly_name)||e}
                                    </option>
                                `}))}
                            </select>
                        </div>
                    </div>
    
                    <div class="selected-entities">
                        ${null===(t=this._config.selected_entities)||void 0===t?void 0:t.map(((e,t)=>{var n,r,a,i;return B`
                            <div class="entity-row">
                                <span class="entity-name">
                                    ${null!==(i=null===(a=null===(r=null===(n=this.hass)||void 0===n?void 0:n.states[e])||void 0===r?void 0:r.attributes)||void 0===a?void 0:a.friendly_name)&&void 0!==i?i:e}
                                </span>
                                <button
                                    @click=${()=>this._removeEntity(t)}
                                    class="delete-button"
                                >
                                    Delete
                                </button>
                            </div>
                        `}))}
                    </div>
                    
                    <div class="section-subheader">Filters</div>
                    <div class="row">
                        <div class="filter-controls">
                            <select id="filter-attribute" .value=${this._filterAttribute||""} @change=${e=>this._filterAttribute=e.target.value}>
                                <option value="" disabled selected>Select attribute</option>
                                <option value="pk">Part ID (pk)</option>
                                <option value="name">Name</option>
                                <option value="in_stock">In Stock</option>
                                <option value="category_name">Category</option>
                                <option value="parameter">Parameter</option>
                            </select>
                            
                            ${"parameter"!==this._filterAttribute?B`
                                <select id="filter-operator" .value=${this._filterOperator||"eq"} @change=${e=>this._filterOperator=e.target.value}>
                                    <option value="eq">Equals</option>
                                    <option value="contains">Contains</option>
                                    <option value="gt">Greater than</option>
                                    <option value="lt">Less than</option>
                                </select>
                                
                                <input 
                                    type="text" 
                                    id="filter-value" 
                                    placeholder="Filter value"
                                    .value=${this._filterValue||""}
                                    @input=${e=>this._filterValue=e.target.value}
                                >
                                
                                <button @click=${this._addFilter} class="add-button">Add Filter</button>
                            `:B`
                                <button @click=${this._showParameterFilterDialog} class="add-button">Configure Parameter Filter</button>
                            `}
                        </div>
                    </div>
                    
                    ${"parameter"===this._filterAttribute?B`
                        <div class="subsection parameter-filter-config">
                            <div class="subsection-header">Parameter Filter</div>
                            <div class="parameter-filter-form">
                                <div class="input-container">
                                    <label for="parameter-name">Parameter Name:</label>
                                    <input 
                                        type="text" 
                                        id="parameter-name" 
                                        placeholder="e.g. color, size, material"
                                        .value=${this._parameterName||""}
                                        @input=${e=>this._parameterName=e.target.value}
                                    >
                                </div>
                                
                                <div class="input-container">
                                    <label for="parameter-value">Parameter Value:</label>
                                    <input 
                                        type="text" 
                                        id="parameter-value" 
                                        placeholder="e.g. red, large, cotton"
                                        .value=${this._parameterValue||""}
                                        @input=${e=>this._parameterValue=e.target.value}
                                    >
                                </div>
                                
                                <div class="input-container">
                                    <label for="parameter-operator">Operator:</label>
                                    <select 
                                        id="parameter-operator" 
                                        .value=${this._filterOperator||"eq"} 
                                        @change=${e=>this._filterOperator=e.target.value}
                                    >
                                        <option value="eq">Equals</option>
                                        <option value="contains">Contains</option>
                                    </select>
                                </div>
                                
                                <button @click=${this._addParameterFilter} class="add-button">Add Parameter Filter</button>
                            </div>
                        </div>
                `:""}
                    
                    <div class="active-filters">
                        ${null===(n=this._config.filters)||void 0===n?void 0:n.map(((e,t)=>B`
                            <div class="filter-row">
                                <span>
                                    ${"parameter"===e.attribute?`Parameter: ${e.parameter_id||"any"} ${this._getOperatorLabel(e.operator)} ${e.value}`:`${e.attribute} ${this._getOperatorLabel(e.operator)} ${e.value}`}
                                </span>
                                <button @click=${()=>this._removeFilter(t)} class="delete-button">Delete</button>
                            </div>
                        `))}
                    </div>
                </div>
            </div>
        `}_entitySelected(e){const t=e.target,n=t.value;if(!this._config||!n)return;const r=this._config.selected_entities||[];r.includes(n)||this._updateConfig({selected_entities:[...r,n]}),t.value=""}_removeEntity(e){if(!this._config||!this._config.selected_entities)return;const t=[...this._config.selected_entities];t.splice(e,1),this._updateConfig({selected_entities:t})}_valueChanged(e){return t=>{var n;if(!this._config)return;const r=t.target;let a;if("detail"in t&&void 0!==(null===(n=t.detail)||void 0===n?void 0:n.value))a=t.detail.value;else{if(!r)return;a="checkbox"===r.type?r.checked:r.value}const i=JSON.parse(JSON.stringify(this._config));if("services.wled.enabled"===e)!0===a?(i.services||(i.services={}),i.services.wled?i.services.wled.enabled=!0:i.wled?i.services.wled=Object.assign(Object.assign({},i.wled),{enabled:!0}):i.services.wled={enabled:!0,entity_id:"light.wled_inventory",parameter_name:"led_xaxis"},i.wled=Object.assign({},i.services.wled)):(i.services||(i.services={}),i.services.wled||(i.services.wled={}),i.services.wled.enabled=!1,i.wled&&(i.wled.enabled=!1));else if(e.startsWith("services.wled.")){const t=e.split(".")[2];i.services||(i.services={}),i.services.wled||(i.services.wled={enabled:!0}),i.services.wled[t]=a,i.wled||(i.wled={}),i.wled[t]=a}else if(e.includes(".")){const t=e.split(".");let n=i;for(let e=0;e<t.length-1;e++)n[t[e]]&&"object"==typeof n[t[e]]||(n[t[e]]={}),n=n[t[e]];n[t[t.length-1]]=a}else i[e]=a;this.logger.log("Editor","Updated config",{category:"editor"},i),Jn(this,"config-changed",{config:i})}}static async getConfigForm(){return{schema:[{name:"entities",selector:{entity:{domain:["sensor"],multiple:!0,filter:{attributes:{items:{}}}}}}]}}static getStubConfig(e){return{type:"custom:inventree-card",entity:Object.keys(e.states).find((t=>{var n;return t.startsWith("sensor.")&&void 0!==(null===(n=e.states[t].attributes)||void 0===n?void 0:n.items)}))||"",view_type:"detail",selected_entities:[],display:{show_header:!0,show_image:!0,show_name:!0,show_stock:!0,show_description:!1,show_category:!1,show_stock_status_border:!0,show_stock_status_colors:!0,show_buttons:!0,show_parameters:!0}}}_getOperatorLabel(e){switch(e){case"eq":case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"gt":case"greater_than":return"is greater than";case"lt":case"less_than":return"is less than";case"exists":return"exists";case"is_empty":return"is empty";default:return e}}_addFilter(){if(!this._config||!this._filterAttribute||!this._filterValue)return;const e=this._config.filters||[],t={attribute:this._filterAttribute,operator:this._filterOperator,value:this._filterValue};this.logger.log("Editor","Adding regular filter:",{category:"editor"},t);const n=[...e,t];this._updateConfig({filters:n}),this._filterAttribute=null,this._filterValue=""}_removeFilter(e){if(!this._config||!this._config.filters)return;const t=[...this._config.filters];t.splice(e,1),this._updateConfig({filters:t})}_showParameterFilterDialog(){}_addParameterFilter(){if(!this._config||!this._parameterName||!this._parameterValue)return void this.logger.log("Editor","Cannot add parameter filter: missing config, name, or value",{category:"editor"});const e=this._config.filters||[],t={attribute:"parameter",operator:this._filterOperator,value:this._parameterValue,parameter_id:this._parameterName};this.logger.log("Editor","Adding parameter filter:",{category:"editor"},t),this.logger.log("Editor","Existing filters:",{category:"editor"},e);const n=[...e,t];this.logger.log("Editor","Updated filters array:",{category:"editor"},n),this._updateConfig({filters:n}),this._parameterName="",this._parameterValue=""}_getActionLabel(e,t){switch(e){case"highlight":return`highlight with color ${t}`;case"text_color":return`change text color to ${t}`;case"border":return`add ${t} border`;case"icon":return`show ${t} icon`;case"badge":return`add "${t}" badge`;case"sort":return`sort to ${t}`;case"filter":return"show"===t?"show item":"hide item";case"show_section":return("show"===t?"show":"hide")+" section";case"priority":return`set priority to ${t}`;default:return`${e}: ${t}`}}_addCondition(){this._conditionParameter="",this._conditionOperator="equals",this._conditionValue="",this._conditionAction="highlight",this._conditionActionValue="#ff0000",this._editingConditionIndex=null,this._showConditionDialog=!0}_editCondition(e){var t;if(!this._config||!(null===(t=this._config.parameters)||void 0===t?void 0:t.conditions))return;const n=this._config.parameters.conditions[e];this._editingConditionIndex=e,this._conditionParameter=n.parameter,this._conditionOperator=n.operator,this._conditionValue=n.value||"",this._conditionAction=n.action,this._conditionActionValue=n.action_value,"string"==typeof n.targetPartIds?this._conditionTargetPartIds=n.targetPartIds:Array.isArray(n.targetPartIds)?this._conditionTargetPartIds=n.targetPartIds.join(", "):this._conditionTargetPartIds="",this._showConditionDialog=!0,this.requestUpdate()}_closeConditionDialog(){this._showConditionDialog=!1,this._editingConditionIndex=null,this._conditionParameter="",this._conditionOperator="equals",this._conditionValue="",this._conditionAction="highlight",this._conditionActionValue="",this._conditionTargetPartIds="",this.requestUpdate()}_saveCondition(){if(!this._conditionParameter)return void alert("Parameter is required");if("exists"!==this._conditionOperator&&"is_empty"!==this._conditionOperator&&!this._conditionValue)return void alert("Value is required for this operator");const e={parameter:this._conditionParameter,operator:this._conditionOperator,action:this._conditionAction,action_value:this._conditionActionValue};"exists"!==this._conditionOperator&&"is_empty"!==this._conditionOperator&&(e.value=this._conditionValue);const t=this._conditionTargetPartIds.trim();if("*"===t?e.targetPartIds="*":t?(e.targetPartIds=t.split(",").map((e=>parseInt(e.trim(),10))).filter((e=>!isNaN(e))),0===e.targetPartIds.length&&delete e.targetPartIds):delete e.targetPartIds,!this._config)return;const n=JSON.parse(JSON.stringify(this._config));n.parameters||(n.parameters={enabled:!0,conditions:[],actions:[]}),n.parameters.conditions||(n.parameters.conditions=[]),null!==this._editingConditionIndex?n.parameters.conditions[this._editingConditionIndex]=e:n.parameters.conditions.push(e),this._updateConfig(n),this._closeConditionDialog()}_removeCondition(e){var t;if(!this._config||!(null===(t=this._config.parameters)||void 0===t?void 0:t.conditions))return;const n=[...this._config.parameters.conditions];n.splice(e,1);const r=this._config.parameters||{};this._updateConfig({parameters:Object.assign(Object.assign({},r),{conditions:n})})}_addAction(){this._actionLabel="",this._actionIcon="",this._actionParameter="",this._actionValue="",this._actionConfirmation=!1,this._actionConfirmationText="",this._editingActionIndex=null,this._showActionDialog=!0}_editAction(e){var t;if(!this._config||!(null===(t=this._config.parameters)||void 0===t?void 0:t.actions))return;const n=this._config.parameters.actions[e];this._editingActionIndex=e,this._actionLabel=n.label,this._actionIcon=n.icon||"",this._actionParameter=n.parameter,this._actionValue=n.value,this._actionConfirmation=n.confirmation||!1,this._actionConfirmationText=n.confirmation_text||"",this._showActionDialog=!0,this.requestUpdate()}_closeActionDialog(){this._showActionDialog=!1,this._editingActionIndex=null,this.requestUpdate()}_saveAction(){var e;if(!this._config)return;const t=[...(null===(e=this._config.parameters)||void 0===e?void 0:e.actions)||[]];null!==this._editingActionIndex?t[this._editingActionIndex]={label:this._actionLabel,icon:this._actionIcon,parameter:this._actionParameter,value:this._actionValue,confirmation:this._actionConfirmation,confirmation_text:this._actionConfirmationText}:t.push({label:this._actionLabel,icon:this._actionIcon,parameter:this._actionParameter,value:this._actionValue,confirmation:this._actionConfirmation,confirmation_text:this._actionConfirmationText}),this._config.parameters||(this._config.parameters={enabled:!0,actions:[]}),this._updateConfig({parameters:Object.assign(Object.assign({},this._config.parameters),{actions:t})}),this._closeActionDialog()}_removeAction(e){var t;if(!this._config||!(null===(t=this._config.parameters)||void 0===t?void 0:t.actions))return;const n=[...this._config.parameters.actions];n.splice(e,1);const r=this._config.parameters||{};this._updateConfig({parameters:Object.assign(Object.assign({},r),{actions:n})})}_renderConditionDialog(){return this._showConditionDialog?B`
            <div class="dialog-overlay">
                <div class="dialog">
                    <div class="dialog-header">
                        <h3>${null!==this._editingConditionIndex?"Edit Condition":"Add Condition"}</h3>
                        <button class="close-button" @click=${this._closeConditionDialog}>√ó</button>
                    </div>
                    <div class="dialog-content">
                        <div class="input-group">
                            <label for="condition-parameter">Parameter</label>
                            <input
                                type="text"
                                id="condition-parameter"
                                .value=${this._conditionParameter}
                                @input=${e=>this._conditionParameter=e.target.value}
                                placeholder="e.g. order_status or part:145:microwavables"
                            />
                            <div class="helper-text">
                                Enter parameter name or direct reference (part:id:parameter)
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="condition-operator">Operator</label>
                            <select
                                id="condition-operator"
                                .value=${this._conditionOperator}
                                @change=${e=>this._conditionOperator=e.target.value}
                            >
                                <option value="equals">Equals</option>
                                <option value="not_equals">Not Equals</option>
                                <option value="contains">Contains</option>
                                <option value="greater_than">Greater Than</option>
                                <option value="less_than">Less Than</option>
                                <option value="exists">Exists</option>
                                <option value="is_empty">Is Empty</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="condition-value">Value</label>
                            <input
                                type="text"
                                id="condition-value"
                                .value=${this._conditionValue}
                                @input=${e=>this._conditionValue=e.target.value}
                                placeholder="e.g. True, 42, red"
                                ?disabled=${"exists"===this._conditionOperator||"is_empty"===this._conditionOperator}
                            />
                        </div>
                        
                        <div class="input-group">
                            <label for="condition-action">Action</label>
                            <select
                                id="condition-action"
                                .value=${this._conditionAction}
                                @change=${e=>this._conditionAction=e.target.value}
                            >
                                <option value="highlight">Highlight</option>
                                <option value="text_color">Text Color</option>
                                <option value="border">Border</option>
                                <option value="icon">Icon</option>
                                <option value="badge">Badge</option>
                                <option value="sort">Sort</option>
                                <option value="filter">Filter</option>
                                <option value="show_section">Show/Hide Section</option>
                                <option value="priority">Set Priority</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            ${this._renderActionValueInput()}
                        </div>
                        <div class="input-group">
                            <label for="condition-target-part-ids">Target Part IDs (optional)</label>
                            <input
                                type="text"
                                id="condition-target-part-ids"
                                .value=${this._conditionTargetPartIds}
                                @input=${e=>this._conditionTargetPartIds=e.target.value}
                                placeholder="e.g., 101, 102, 103 or * for all"
                            />
                            <div class="helper-text">
                                Comma-separated part IDs this action applies to, or '*' for all loaded parts.
                            </div>
                        </div>
                    </div>
                    <div class="dialog-actions">
                        <button @click=${this._closeConditionDialog}>Cancel</button>
                        <button @click=${this._saveCondition} class="primary">Save</button>
                    </div>
                </div>
            </div>
        `:B``}_renderActionValueInput(){switch(this._conditionActionValue||(["highlight","text_color"].includes(this._conditionAction)?this._conditionActionValue="#ff0000":"border"===this._conditionAction?this._conditionActionValue="2px solid #ff0000":"sort"===this._conditionAction?this._conditionActionValue="top":"filter"===this._conditionAction||"show_section"===this._conditionAction?this._conditionActionValue="show":"priority"===this._conditionAction&&(this._conditionActionValue="medium")),this._conditionAction){case"highlight":case"text_color":return B`
                    <label for="action-value">Color</label>
                    <input
                        type="color"
                        id="action-value"
                        .value=${this._conditionActionValue||"#ff0000"}
                        @input=${e=>this._conditionActionValue=e.target.value}
                    />
                `;case"border":return B`
                    <label for="action-value">Border CSS</label>
                    <input
                        type="text"
                        id="action-value"
                        .value=${this._conditionActionValue||"2px solid #ff0000"}
                        @input=${e=>this._conditionActionValue=e.target.value}
                        placeholder="e.g., 2px dashed blue"
                    />
                    <div class="helper-text">Enter a full CSS border string (e.g., "1px solid red").</div>
                `;case"sort":return B`
                    <label for="action-value">Sort Position</label>
                    <select
                        id="action-value"
                        .value=${this._conditionActionValue||"top"}
                        @change=${e=>this._conditionActionValue=e.target.value}
                    >
                        <option value="top">Top</option>
                        <option value="bottom">Bottom</option>
                    </select>
                `;case"filter":return B`
                    <label for="action-value">Filter Action</label>
                    <select
                        id="action-value"
                        .value=${this._conditionActionValue||"show"}
                        @change=${e=>this._conditionActionValue=e.target.value}
                    >
                        <option value="show">Show Item</option>
                        <option value="hide">Hide Item</option>
                    </select>
                `;case"show_section":return B`
                    <label for="action-value">Section Visibility</label>
                    <select
                        id="action-value"
                        .value=${this._conditionActionValue||"show"}
                        @change=${e=>this._conditionActionValue=e.target.value}
                    >
                        <option value="show">Show Section</option>
                        <option value="hide">Hide Section</option>
                    </select>
                `;case"priority":return B`
                    <label for="action-value">Priority Level</label>
                    <select
                        id="action-value"
                        .value=${this._conditionActionValue||"medium"}
                        @change=${e=>this._conditionActionValue=e.target.value}
                    >
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                `;default:return B`
                    <label for="action-value">Value</label>
                    <input
                        type="text"
                        id="action-value"
                        .value=${this._conditionActionValue||""}
                        @input=${e=>this._conditionActionValue=e.target.value}
                        placeholder="Enter action value"
                    />
                `}}_renderActionDialog(){return this._showActionDialog?B`
            <div class="dialog-overlay" @click=${e=>e.stopPropagation()}>
                <div class="dialog-container">
                    <div class="dialog-header">
                        <h2>${null!==this._editingActionIndex?"Edit Action":"Add Action"}</h2>
                        <button class="close-button" @click=${this._closeActionDialog}>√ó</button>
                    </div>
                    
                    <div class="dialog-content">
                        <div class="form-field">
                            <label for="action-label">Label</label>
                            <input 
                                type="text" 
                                id="action-label" 
                                .value=${this._actionLabel}
                                @input=${e=>this._actionLabel=e.target.value}
                                placeholder="e.g. Turn On, Set Color"
                            />
                        </div>
                        
                        <div class="form-field">
                            <label for="action-icon">Icon (optional)</label>
                            <input 
                                type="text" 
                                id="action-icon" 
                                .value=${this._actionIcon}
                                @input=${e=>this._actionIcon=e.target.value}
                                placeholder="e.g. mdi:power, mdi:lightbulb"
                            />
                            <div class="helper-text">MDI icon name, e.g. 'mdi:check'</div>
                        </div>
                        
                        <div class="form-field">
                            <label for="action-parameter">Parameter</label>
                            <input 
                                type="text" 
                                id="action-parameter" 
                                .value=${this._actionParameter}
                                @input=${e=>this._actionParameter=e.target.value}
                                placeholder="e.g. color or sensor.inventree_microwaves_stock:mw_power_state"
                            />
                            <div class="helper-text">Parameter name or cross-entity reference (entity_id:parameter_name)</div>
                        </div>
                        
                        <div class="form-field">
                            <label for="action-value">Value</label>
                            <input 
                                type="text" 
                                id="action-value" 
                                .value=${this._actionValue}
                                @input=${e=>this._actionValue=e.target.value}
                                placeholder="e.g. True, 42, red"
                            />
                        </div>
                        
                        <div class="form-field checkbox-field">
                            <label for="action-confirmation">Require confirmation</label>
                            <input 
                                type="checkbox" 
                                id="action-confirmation" 
                                .checked=${this._actionConfirmation}
                                @change=${e=>{this._actionConfirmation=e.target.checked,this.requestUpdate()}}
                            />
                        </div>
                        
                        ${this._actionConfirmation?B`
                            <div class="form-field">
                                <label for="action-confirmation-text">Confirmation Text</label>
                                <input 
                                    type="text" 
                                    id="action-confirmation-text" 
                                    .value=${this._actionConfirmationText}
                                    @input=${e=>this._actionConfirmationText=e.target.value}
                                    placeholder="e.g. Are you sure you want to turn on the microwave?"
                                />
                                <div class="helper-text">Text to show in confirmation dialog</div>
                            </div>
                        `:""}
                    </div>
                    
                    <div class="dialog-buttons">
                        <button 
                            class="cancel-button" 
                            @click=${this._closeActionDialog}
                        >
                            Cancel
                        </button>
                        <button 
                            class="save-button" 
                            @click=${this._saveAction}
                            .disabled=${!this._actionLabel||!this._actionParameter||!this._actionValue}
                        >
                            Save
                        </button>
                    </div>
                </div>
            </div>
        `:B``}_renderDirectApiConfig(){var e,t,n,r,a,i,o;return this._config?B`
            <div class="section">
                <div class="section-header">InvenTree API Settings</div>
                
                <div class="checkbox-container">
                    <input
                        type="checkbox"
                        id="enable_direct_api"
                        .checked=${(null===(e=this._config.direct_api)||void 0===e?void 0:e.enabled)||!1}
                        @change=${this._valueChanged("direct_api.enabled")}
                    />
                    <label for="enable_direct_api">Enable Direct API</label>
                </div>
                
                ${(null===(t=this._config.direct_api)||void 0===t?void 0:t.enabled)?B`
                    <div class="input-group">
                        <label for="api-url">InvenTree API URL</label>
                        <input
                            type="text"
                            id="api-url"
                            .value=${(null===(n=this._config.direct_api)||void 0===n?void 0:n.url)||""}
                            @input=${this._valueChanged("direct_api.url")}
                            placeholder="http://your-inventree-server.com"
                        />
                    </div>
                    
                    <div class="input-group">
                        <label for="api-key">API Key</label>
                        <input
                            type="text"
                            id="api-key"
                            .value=${(null===(r=this._config.direct_api)||void 0===r?void 0:r.api_key)||""}
                            @input=${this._valueChanged("direct_api.api_key")}
                            placeholder="Your InvenTree API key"
                        />
                    </div>
                    
                    <!-- Remove Data Sources subsection -->
                    
                    <!-- Show WebSocket settings ONLY if direct API is enabled -->
                    <div class="input-group">
                        <label for="websocket-url">WebSocket URL (Optional)</label>
                        <input
                            type="text"
                            id="websocket-url"
                            .value=${(null===(a=this._config.direct_api)||void 0===a?void 0:a.websocket_url)||""}
                            @input=${this._valueChanged("direct_api.websocket_url")}
                            placeholder="ws://your-inventree-server.com/api/ws/"
                        />
                        <div class="helper-text">
                            Leave blank to auto-derive from API URL (e.g., ws://.../api/ws/). Needed if using a reverse proxy or different port.
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="idle-render-time">Idle Render Time (seconds)</label>
                        <input
                            type="number"
                            id="idle-render-time"
                            .value=${(null===(o=null===(i=this._config.direct_api)||void 0===i?void 0:i.idle_render_time)||void 0===o?void 0:o.toString())||"60"}
                            @input=${this._valueChanged("direct_api.idle_render_time")}
                            min="10"
                            max="600"
                            placeholder="60"
                        />
                        <div class="helper-text">
                            How often to refresh when no changes are detected (10-600 seconds)
                        </div>
                    </div>
                `:""}
            </div>
        `:B``}_renderDebuggingSection(){var e,t;const n=this.logger.getSystemsStatus();return B`
          <div class="row">
            <div class="col">
              <div class="card-header">
                <h3>Debugging</h3>
              </div>
              <div class="card-content">
                <div class="row">
                  <div class="col">
                    <input 
                      type="checkbox"
                      id="debug-checkbox"
                      ?checked=${(null===(e=this._config)||void 0===e?void 0:e.debug)||!1}
                      @change=${this._valueChangedDebug("debug")}
                    />
                    <label for="debug-checkbox">Enable Debug</label>
                  </div>
                </div>
                <div class="row">
                  <div class="col">
                    <input 
                      type="checkbox"
                      id="debug-verbose-checkbox"
                      ?checked=${(null===(t=this._config)||void 0===t?void 0:t.debug_verbose)||!1}
                      @change=${this._valueChangedDebug("debug_verbose")}
                    />
                    <label for="debug-verbose-checkbox">Verbose Logging</label>
                  </div>
                </div>
                <div class="row">
                  <h4>Debug Categories</h4>
                </div>
                ${Object.entries(n).map((([e,t],n)=>B`
                    <div class="row">
                      <div class="col">
                        <input 
                          type="checkbox"
                          id="debug-system-${n}"
                          ?checked=${!0===this._config[`debug_${e}`]}
                          @change=${this._valueChangedDebug(`debug_${e}`)}
                        />
                        <label for="debug-system-${n}">${e}</label>
                      </div>
                    </div>
                    ${Object.keys(t.subsystems||{}).map(((t,r)=>{var a,i,o,s;return B`
                        <div class="row">
                          <div class="col" style="padding-left: 2em">
                            <input 
                              type="checkbox"
                              id="debug-subsystem-${n}-${r}"
                              ?checked=${!0===(null===(s=null===(o=null===(i=null===(a=this._config)||void 0===a?void 0:a.debug_hierarchical)||void 0===i?void 0:i[e])||void 0===o?void 0:o.subsystems)||void 0===s?void 0:s[t])}
                              @change=${this._valueChangedDebug("debug_hierarchical",e,t)}
                            />
                            <label for="debug-subsystem-${n}-${r}">${t}</label>
                          </div>
                        </div>
                      `}))}
                  `))}
              </div>
            </div>
          </div>
        `}_getSubsystem(e,t){var n;const r=null===(n=this._config)||void 0===n?void 0:n.debug_hierarchical;return r&&r[e]&&r[e].subsystems&&r[e].subsystems[t]||!1}_updateSubsystem(t,n){return r=>{if(!this._config)return;const a=r.target.checked,i=JSON.parse(JSON.stringify(this._config));i.debug_hierarchical||(i.debug_hierarchical={}),i.debug_hierarchical[t]||(i.debug_hierarchical[t]={enabled:!0,subsystems:{}});const o=i.debug_hierarchical[t];o.subsystems||(o.subsystems={}),o.subsystems[n]=a;let s=!0;for(const e in o.subsystems)if(o.subsystems[e]){s=!1;break}o.enabled=!s;const l=e.getInstance();l.setSubsystemDebug(t,n,a),s?l.setCategoryDebug(t,!1):l.setCategoryDebug(t,!0),this._updateConfig(i)}}_formatSubsystemName(e){return e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}_getMethodDescription(e){switch(e){case"websocket":return"Uses WebSocket plugin for real-time updates from InvenTree. Fastest and most efficient method.";case"polling":return"Periodically polls the InvenTree API for updates. Reliable but less efficient.";case"hass":return"Uses Home Assistant sensors for updates. Slowest method, requires InvenTree integration.";default:return""}}_renderScheduledJobs(){return B`
            <div class="no-jobs-message">
                No scheduled jobs configured yet. Click "Add Scheduled Job" to create one.
            </div>
        `}_showAddJobDialog(){alert("Scheduled jobs configuration interface is coming soon! This feature allows you to configure regular data refresh, cache clearing, and other maintenance tasks on a schedule.")}_getPerformanceSetting(e,t,n){if(!this._config)return n;let r=this._config;const a=e.split(".");let i=[...a];"direct_api"===a[0]&&a.length>1&&"performance"!==a[1]?i.splice(1,0,"performance"):"direct_api"!==a[0]&&"performance"!==a[0]&&i.unshift("performance");for(const e of i){if(!r||"object"!=typeof r||!(e in r))return n;r=r[e]}if(r&&"object"==typeof r&&t in r){const e=r[t];return"number"==typeof e?e:n}return n}_updatePerformanceSetting(e,t,n=!1){return n=>{if(!this._config)return;const r=n.target;let a=parseFloat(r.value);if(isNaN(a))return this.logger.warn("Editor",`Invalid numeric input for performance setting ${e}.${t}: ${r.value}`),void this.requestUpdate();const i=JSON.parse(JSON.stringify(this._config));let o=i;const s=e.split(".");let l=[],c=[];"direct_api"===s[0]?(l=["direct_api","performance"],c=s.slice(1)):(l=["performance"],c=s);let u=o;for(const e of l)u[e]&&"object"==typeof u[e]||(u[e]={}),u=u[e];for(const e of c)u[e]&&"object"==typeof u[e]||(u[e]={}),u=u[e];u[t]=a,this._updateConfig(i),this.requestUpdate()}}_parameterTypeChanged(e){if(e.stopPropagation(),this._conditionParameterType=e.target.value,"direct"===this._conditionParameterType&&this._conditionParameter){const e=this._conditionParameter.split(":");2===e.length&&(this._conditionParamName=e[1])}else"entity"===this._conditionParameterType&&this._conditionPartId&&this._conditionParamName&&(this._conditionParameter=`part:${this._conditionPartId}:${this._conditionParamName}`);this.requestUpdate()}_valueChangedDebug(e,t,n){return r=>{if(!this._config)return;const a=!0===r.target.checked,i=JSON.parse(JSON.stringify(this._config));if("debug"===e)i.debug=a,this.logger.setDebug(a);else if("debug_verbose"===e)i.debug_verbose=a,this.logger.setVerboseMode(a);else if(e.startsWith("debug_")){const t=e.substring(6);i[e]=a,this.logger.setCategoryDebug(t,a)}else if("debug_hierarchical"===e&&t&&n){i.debug_hierarchical||(i.debug_hierarchical={}),i.debug_hierarchical[t]||(i.debug_hierarchical[t]={enabled:!0,subsystems:{}}),i.debug_hierarchical[t].subsystems||(i.debug_hierarchical[t].subsystems={}),i.debug_hierarchical[t].subsystems[n]=a,this.logger.setSubsystemDebug(t,n,a);let e=!0;for(const n in i.debug_hierarchical[t].subsystems)if(i.debug_hierarchical[t].subsystems[n]){e=!1;break}i.debug_hierarchical[t].enabled=!e,i[`debug_${t}`]=!e,this.logger.setCategoryDebug(t,!e)}this._updateConfig(i)}}_renderPerformanceSettings(){var e;if(!this._config)return B``;const t=(null===(e=this._config.direct_api)||void 0===e?void 0:e.enabled)||!1;return B`
            <div class="section">
                <div class="section-header">Performance Settings</div>
                <div class="helper-text">Fine-tune throttling and update frequencies. Lower values mean more responsive but potentially higher load. (Times in milliseconds unless specified).</div>

                <div class="subsection">
                    <div class="subsection-header">Direct API Performance</div>
                    <div class="performance-group" ?disabled=${!t}>
                         <div class="helper-text" ?hidden=${t}>Enable Direct API to configure these settings.</div>
                        <div class="slider-group">
                            <span>API Call Throttle (s)</span>
                            <input 
                                type="number" 
                                min="0" 
                                step="0.1"
                                .value=${this._getPerformanceSetting("direct_api.api","throttle",.2).toString()}
                                @input=${this._updatePerformanceSetting("direct_api.api","throttle",!0)}
                                ?disabled=${!t}
                            />
                            <span>${this._getPerformanceSetting("direct_api.api","throttle",.2)} s</span>
                        </div>
                        <div class="slider-group">
                            <span>API Cache Lifetime (s)</span>
                            <input 
                                type="number" 
                                min="0" 
                                step="1"
                                .value=${this._getPerformanceSetting("direct_api.api","cacheLifetime",60).toString()}
                                @input=${this._updatePerformanceSetting("direct_api.api","cacheLifetime",!0)}
                                ?disabled=${!t}
                            />
                            <span>${this._getPerformanceSetting("direct_api.api","cacheLifetime",60)} s</span>
                        </div>
                        <div class="slider-group">
                            <span>API Failed Retry Delay (s)</span>
                            <input 
                                type="number" 
                                min="0" 
                                step="1"
                                .value=${this._getPerformanceSetting("direct_api.api","failedRequestRetryDelaySeconds",30).toString()}
                                @input=${this._updatePerformanceSetting("direct_api.api","failedRequestRetryDelaySeconds",!0)}
                                ?disabled=${!t}
                            />
                            <span>${this._getPerformanceSetting("direct_api.api","failedRequestRetryDelaySeconds",30)} s</span>
                        </div>
                        <div class="slider-group">
                            <span>WS Reconnect (ms)</span>
                            <input 
                                type="number" 
                                min="1000" 
                                step="1000"
                                .value=${this._getPerformanceSetting("direct_api.websocket","reconnectInterval",5e3).toString()}
                                @input=${this._updatePerformanceSetting("direct_api.websocket","reconnectInterval")}
                                ?disabled=${!t}
                            />
                            <span>${this._getPerformanceSetting("direct_api.websocket","reconnectInterval",5e3)} ms</span>
                        </div>
                        <div class="slider-group">
                            <span>WS Msg Debounce (ms)</span>
                            <input 
                                type="number" 
                                min="0" 
                                step="10"
                                .value=${this._getPerformanceSetting("direct_api.websocket","messageDebounce",50).toString()}
                                @input=${this._updatePerformanceSetting("direct_api.websocket","messageDebounce")}
                                ?disabled=${!t}
                            />
                            <span>${this._getPerformanceSetting("direct_api.websocket","messageDebounce",50)} ms</span>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <div class="subsection-header">General Card Performance</div>
                    <div class="performance-group">
                        <div class="slider-group">
                            <span>Render Debounce (ms)</span>
                            <input 
                                type="number" 
                                min="0" 
                                step="10"
                                .value=${this._getPerformanceSetting("rendering","debounceTime",50).toString()}
                                @input=${this._updatePerformanceSetting("rendering","debounceTime")}
                            />
                            <span>${this._getPerformanceSetting("rendering","debounceTime",50)} ms</span>
                        </div>
                        <div class="slider-group">
                            <span>Idle Render Interval (ms)</span>
                            <input 
                                type="number" 
                                min="500" 
                                step="500"
                                .value=${this._getPerformanceSetting("rendering","idleRenderInterval",5e3).toString()}
                                @input=${this._updatePerformanceSetting("rendering","idleRenderInterval")}
                            />
                            <span>${this._getPerformanceSetting("rendering","idleRenderInterval",5e3)} ms</span>
                        </div>
                        <div class="slider-group">
                            <span>Max Render Freq (Hz)</span>
                            <input 
                                type="number" 
                                min="1" 
                                max="60" 
                                step="1"
                                .value=${this._getPerformanceSetting("rendering","maxRenderFrequency",10).toString()}
                                @input=${this._updatePerformanceSetting("rendering","maxRenderFrequency")}
                            />
                            <span>${this._getPerformanceSetting("rendering","maxRenderFrequency",10)} Hz</span>
                        </div>
                        <div class="slider-group">
                            <span>Param Update Freq (ms)</span>
                            <input 
                                type="number" 
                                min="100" 
                                step="100"
                                .value=${this._getPerformanceSetting("parameters","updateFrequency",1e3).toString()}
                                @input=${this._updatePerformanceSetting("parameters","updateFrequency")}
                            />
                            <span>${this._getPerformanceSetting("parameters","updateFrequency",1e3)} ms</span>
                        </div>
                        <div class="slider-group">
                            <span>Cond. Eval Freq (ms)</span>
                            <input 
                                type="number" 
                                min="100" 
                                step="100"
                                .value=${this._getPerformanceSetting("parameters","conditionEvalFrequency",1e3).toString()}
                                @input=${this._updatePerformanceSetting("parameters","conditionEvalFrequency")}
                            />
                            <span>${this._getPerformanceSetting("parameters","conditionEvalFrequency",1e3)} ms</span>
                        </div>
                    </div>
                </div>
            </div>
        `}};Bi.styles=[Ui,p`
            :host {
                --primary-color: var(--primary-text-color);
                --secondary-color: var(--secondary-text-color);
                --primary-background-color: var(--card-background-color);
                --secondary-background-color: var(--secondary-background-color);
                --border-color: var(--divider-color, rgba(0, 0, 0, 0.12));
                --mdc-dialog-heading-ink-color: var(--primary-text-color);
                --mdc-dialog-content-ink-color: var(--primary-text-color);
                --dialog-background-color: var(--card-background-color);
                --dialog-text-color: var(--primary-text-color);
                --dialog-border-color: var(--divider-color);
                --button-primary-color: var(--primary-color);
                --button-primary-text-color: var(--text-primary-color);
                --button-secondary-color: var(--secondary-background-color);
                --button-secondary-text-color: var(--primary-text-color);
            }
            
            /* Feature flag styles */
            .feature-flag-row {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .feature-flag-row input[type="checkbox"] {
                margin-right: 8px;
                width: auto;
                margin-bottom: 0;
            }
            
            .feature-flag-row label {
                margin-bottom: 0;
                cursor: pointer;
            }
            
            /* Redux migration section styles */
            .card-config-panel {
                margin-top: 16px;
                padding: 16px;
                border-radius: 8px;
                background-color: var(--secondary-background-color, rgba(0,0,0,0.05));
            }
            
            .category {
                font-size: 18px;
                font-weight: 500;
                margin-bottom: 16px;
                color: var(--primary-text-color);
                border-bottom: 1px solid var(--divider-color);
                padding-bottom: 8px;
            }
            
            .sub-category {
                margin-bottom: 16px;
            }
            
            .sub-category-title {
                font-size: 14px;
                font-weight: 500;
                margin-bottom: 8px;
                color: var(--secondary-text-color);
            }
            
            .sub-category-content {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                padding: 8px;
                background-color: var(--card-background-color);
                border-radius: 4px;
            }
            
            .sub-category-content button {
                padding: 6px 12px;
                border-radius: 4px;
                background-color: var(--secondary-background-color);
                color: var(--primary-text-color);
                border: 1px solid var(--divider-color);
                cursor: pointer;
                font-size: 12px;
                margin-right: 8px;
                margin-bottom: 8px;
                transition: all 0.2s ease-in-out;
            }
            
            .sub-category-content button:hover {
                background-color: var(--primary-color);
                color: var(--text-primary-color);
            }
            
            .phase-buttons {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .phase-buttons button {
                width: 100%;
                text-align: left;
                position: relative;
                padding-left: 16px;
            }
            
            .phase-buttons button.active {
                background-color: var(--primary-color);
                color: var(--text-primary-color);
                font-weight: bold;
            }
            
            .phase-buttons button.active::before {
                content: '‚úì';
                position: absolute;
                left: 5px;
                top: 50%;
                transform: translateY(-50%);
            }
            /* End Redux migration section styles */
            
            .grid-2 {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .section {
                padding: 16px;
                border-bottom: 1px solid var(--divider-color);
            }
            
            .section-header {
                font-size: 16px;
                font-weight: 500;
                margin-bottom: 16px;
                color: var(--primary-text-color);
            }

            .basic-settings {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 8px;
                align-items: center;
            }

            .select-container {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            
            select {
                padding: 8px;
                border-radius: 4px;
                border: 1px solid var(--divider-color);
                background: var(--card-background-color);
                color: var(--primary-text-color);
                margin-bottom: 8px;
            }
            
            label {
                color: var(--primary-text-color);
                font-size: 0.9rem;
            }

            .grid-settings {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                margin-top: 8px;
            }

            .subsection {
                margin-top: 16px;
                padding: 12px;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                background: var(--card-background-color);
            }
            
            .subsection-header {
                font-size: 14px;
                font-weight: 500;
                margin-bottom: 8px;
                color: var(--secondary-text-color);
            }

            .input-container {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            
            input {
                padding: 8px;
                border-radius: 4px;
                border: 1px solid var(--divider-color);
                background: var(--card-background-color);
                color: var(--primary-text-color);
            }

            paper-dropdown-menu {
                width: 100%;
            }
            
            paper-listbox {
                padding: 0;
                background: var(--paper-card-background-color);
            }
            
            paper-item {
                cursor: pointer;
                min-height: 35px;
            }
            
            paper-item:hover::before,
            .iron-selected:before {
                position: var(--layout-fit_-_position);
                top: var(--layout-fit_-_top);
                right: var(--layout-fit_-_right);
                bottom: var(--layout-fit_-_bottom);
                left: var(--layout-fit_-_left);
                background: currentColor;
                content: '';
                opacity: var(--dark-divider-opacity);
                pointer-events: none;
            }

            .entity-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 8px;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                margin: 4px 0;
            }
            
            .entity-name {
                flex-grow: 1;
                margin-right: 8px;
            }

            .delete-button {
                padding: 4px 8px;
                border-radius: 4px;
                background-color: var(--error-color);
                color: white;
                border: none;
                cursor: pointer;
            }

            .add-button {
                padding: 6px 12px;
                border-radius: 4px;
                background-color: var(--primary-color);
                color: white;
                border: none;
                cursor: pointer;
                margin-bottom: 12px;
            }

            .edit-button {
                padding: 4px 8px;
                border-radius: 4px;
                background-color: var(--info-color);
                color: white;
                border: none;
                cursor: pointer;
                margin-right: 4px;
            }

            select, input {
                width: 100%;
                padding: 8px;
                border-radius: 4px;
                border: 1px solid var(--divider-color);
                background: var(--card-background-color);
                color: var(--primary-text-color);
                margin-bottom: 8px;
            }
            
            .filter-controls {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr auto;
                gap: 8px;
                width: 100%;
            }
            
            .section-subheader {
                font-size: 16px;
                font-weight: 500;
                margin-top: 16px;
                margin-bottom: 8px;
            }

            .parameter-filter-config {
                background: var(--secondary-background-color, rgba(0,0,0,0.05));
                padding: 16px;
                border-radius: 4px;
                margin-top: 8px;
                margin-bottom: 16px;
            }
            
            .parameter-filter-form {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin-top: 8px;
            }
            
            .parameter-filter-form .input-container:last-of-type {
                grid-column: 1 / -1;
                display: flex;
                justify-content: flex-end;
            }
            
            .filter-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 8px;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                margin: 4px 0;
                background: var(--card-background-color);
            }
            
            .active-filters {
                margin-top: 16px;
            }

            .condition-row, .action-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 10px;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                margin: 8px 0;
                background: var(--card-background-color);
            }

            .condition-summary, .action-summary {
                flex-grow: 1;
                margin-right: 8px;
            }

            .conditions-list, .actions-list {
                margin-top: 12px;
            }

            .dialog-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 9999;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .dialog-container {
                background-color: var(--dialog-background-color);
                color: var(--dialog-text-color);
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                width: 90%;
                max-width: 500px;
                max-height: 90vh;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
            }

            .dialog-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 16px;
                border-bottom: 1px solid var(--dialog-border-color);
            }

            .dialog-header h2 {
                margin: 0;
                font-size: 18px;
                font-weight: 500;
            }

            .close-button {
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: var(--dialog-text-color);
                padding: 0;
                margin: 0;
                line-height: 1;
            }

            .dialog-content {
                padding: 16px;
                overflow-y: auto;
                flex: 1;
            }

            .dialog-buttons {
                display: flex;
                justify-content: flex-end;
                padding: 16px;
                border-top: 1px solid var(--dialog-border-color);
                gap: 8px;
            }

            .form-field {
                margin-bottom: 16px;
            }

            .form-field label {
                display: block;
                margin-bottom: 4px;
                font-weight: 500;
            }

            .form-field input[type="text"],
            .form-field select {
                width: 100%;
                padding: 8px;
                border: 1px solid var(--dialog-border-color);
                border-radius: 4px;
                background-color: var(--primary-background-color);
                color: var(--dialog-text-color);
            }

            .form-field input[type="color"] {
                width: 100%;
                height: 40px;
                border: 1px solid var(--dialog-border-color);
                border-radius: 4px;
                padding: 0;
                cursor: pointer;
            }

            .checkbox-field {
                display: flex;
                align-items: center;
            }
            
            .checkbox-field label {
                margin-right: 8px;
                margin-bottom: 0;
            }
            
            .helper-text {
                font-size: 12px;
                color: var(--secondary-color);
                margin-top: 4px;
            }
            
            .save-button,
            .cancel-button {
                padding: 8px 16px;
                border-radius: 4px;
                border: none;
                cursor: pointer;
                font-weight: 500;
            }
            
            .save-button {
                background-color: var(--button-primary-color);
                color: var(--button-primary-text-color);
            }
            
            .save-button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }
            
            .cancel-button {
                background-color: var(--button-secondary-color);
                color: var(--button-secondary-text-color);
            }
            
            .conditions-list,
            .actions-list {
                margin-top: 16px;
            }
            
            .condition-item,
            .action-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 8px;
                margin-bottom: 8px;
                background-color: var(--secondary-background-color);
                border-radius: 4px;
            }
            
            .condition-details,
            .action-details {
                flex: 1;
            }
            
            .condition-actions,
            .action-actions {
                display: flex;
                gap: 8px;
            }
            
            .edit-button,
            .delete-button {
                background: none;
                border: none;
                cursor: pointer;
                padding: 4px 8px;
                border-radius: 4px;
            }
            
            .edit-button {
                color: var(--primary-color);
            }
            
            .delete-button {
                color: var(--error-color);
            }
            
            /* Fix for dropdown issues */
            ha-select::part(listbox) {
                z-index: 10000;
            }
            
            ha-select::part(combobox) {
                z-index: 10000;
            }
            
            ha-list-item {
                z-index: 10000;
            }

            .section {
                border: 1px solid var(--divider-color, #e0e0e0);
                border-radius: 8px;
                margin-bottom: 16px;
                overflow: hidden;
            }

            .section-header {
                background-color: var(--secondary-background-color, #f7f7f7);
                padding: 8px 16px;
                font-weight: 500;
                border-bottom: 1px solid var(--divider-color, #e0e0e0);
            }

            .subsection {
                border-top: 1px solid var(--divider-color, #e0e0e0);
                margin-top: 8px;
                padding-top: 8px;
            }

            .subsection-header {
                font-weight: 500;
                margin: 8px 16px;
            }

            .helper-text {
                font-size: 0.9em;
                margin: 4px 16px 8px;
                color: var(--secondary-text-color, #9e9e9e);
            }

            .grid-2 {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
                gap: 8px;
                padding: 8px 16px;
            }

            label {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            /* Hierarchical debugging styles */
            .debug-category {
                margin-bottom: 8px;
                padding: 8px;
                border-radius: 4px;
                background-color: var(--secondary-background-color, #f7f7f7);
            }

            .main-category {
                font-weight: 500;
            }

            .subsystem-checkboxes {
                margin-left: 24px;
                margin-top: 4px;
                padding-top: 4px;
                padding-left: 8px;
                border-left: 1px dashed var(--divider-color, #e0e0e0);
            }

            .subsystem {
                font-size: 0.9em;
                margin-bottom: 4px;
            }

            /* Performance settings styles */
            .performance-group {
                padding: 0 16px 16px;
            }

            .performance-category {
                margin-bottom: 16px;
                padding: 8px;
                border-radius: 4px;
                background-color: var(--secondary-background-color, #f7f7f7);
            }

            .category-header {
                font-weight: 500;
                margin-bottom: 8px;
            }

            .slider-group {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 8px;
            }

            .slider-group input[type="range"] {
                flex: 1;
            }

            .slider-group span:first-child {
                width: 150px;
            }

            .slider-group span:last-child {
                width: 60px;
                text-align: right;
            }
        `],o([he({attribute:!1})],Bi.prototype,"hass",void 0),o([me()],Bi.prototype,"_config",void 0),o([me()],Bi.prototype,"_showConditionDialog",void 0),o([me()],Bi.prototype,"_editingConditionIndex",void 0),o([me()],Bi.prototype,"_conditionParameter",void 0),o([me()],Bi.prototype,"_conditionOperator",void 0),o([me()],Bi.prototype,"_conditionValue",void 0),o([me()],Bi.prototype,"_conditionAction",void 0),o([me()],Bi.prototype,"_conditionActionValue",void 0),o([me()],Bi.prototype,"_conditionTargetPartIds",void 0),o([me()],Bi.prototype,"_showActionDialog",void 0),o([me()],Bi.prototype,"_editingActionIndex",void 0),o([me()],Bi.prototype,"_actionLabel",void 0),o([me()],Bi.prototype,"_actionIcon",void 0),o([me()],Bi.prototype,"_actionParameter",void 0),o([me()],Bi.prototype,"_actionValue",void 0),o([me()],Bi.prototype,"_actionConfirmation",void 0),o([me()],Bi.prototype,"_actionConfirmationText",void 0),o([me()],Bi.prototype,"_conditionParameterType",void 0),o([me()],Bi.prototype,"_conditionPartId",void 0),o([me()],Bi.prototype,"_conditionParamName",void 0),Bi=o([pe("inventree-card-editor")],Bi);var qi=Object.freeze({__proto__:null,get InventreeCardEditor(){return Bi}});"undefined"==typeof window||window.process||(window.process={env:{NODE_ENV:"production"}});const Hi=e.getInstance();Hi.info("Index","Starting React module initialization",{category:"initialization",subsystem:"index"});try{n(i,Bi),Hi.info("Index",`Registering editor component: ${i}`,{category:"initialization",subsystem:"components"})}catch(e){Hi.error("Index",`Error registering editor component: ${e}`,{category:"initialization",subsystem:"components"})}Hi.info("Index","Redux store initialized",{category:"initialization",subsystem:"redux"});try{n(a,Wi),Hi.info("Index",`Registering main wrapper component: ${a}`,{category:"initialization",subsystem:"components"})}catch(e){Hi.error("Index",`Error registering main wrapper component: ${e}`,{category:"initialization",subsystem:"components"})}window.customCards=window.customCards||[],window.customCards.push({type:a,name:"InvenTree Card (React)",description:"Display and manage InvenTree inventory (React Version)",preview:!0}),Hi.info("Index","Card registration complete",{category:"initialization",subsystem:"card"}),Hi.info("Index","React Module initialization complete",{category:"initialization",subsystem:"index"});
//# sourceMappingURL=inventree-card.js.map
