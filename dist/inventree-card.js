class e{constructor(){this.debugMode=!1,this.verboseMode=!1,this.logLevel="error",this.debugCategories={api:{enabled:!1,subsystems:{calls:!1,responses:!1,errors:!1,fallbacks:!1,throttling:!1}},parameters:{enabled:!1,subsystems:{updates:!1,conditions:!1,filtering:!1,actions:!1}},websocket:{enabled:!1,subsystems:{connection:!1,messages:!1,events:!1,plugin:!1,subscriptions:!1,authentication:!1}},redux:{enabled:!1,subsystems:{actions:!1,state:!1,components:!1,middleware:!1,dispatch:!1,sync:!1,parameters:!1,migration:!1}},layouts:{enabled:!1,subsystems:{rendering:!1,filtering:!1,updates:!1}},rendering:{enabled:!1,subsystems:{updates:!1,performance:!1,cycle:!1,debounce:!1}},cache:{enabled:!1,subsystems:{hits:!1,misses:!1,pruning:!1,performance:!1}},card:{enabled:!1,subsystems:{initialization:!1,lifecycle:!1,rendering:!1,updates:!1}},diagnostics:{enabled:!1,subsystems:{performance:!1,memory:!1,errors:!1}}},this._logSequence=0,this._recentLogs=new Map,this._dedupeTimeWindow=2e3,this._maxDuplicatesPerWindow=1,setTimeout((()=>{try{Promise.resolve().then((function(){return Gl})).then((e=>{this._cache=e.CacheService.getInstance(),console.info("Logger: Successfully initialized CacheService after delay")}))}catch(e){console.warn("Logger: Could not initialize CacheService, using built-in deduplication")}}),100)}static getInstance(){return e.instance||(e.instance=new e),e.instance}isEnabled(e,t){var n;return!(!this.verboseMode&&!this.anyCategoryEnabled())&&(!!this.debugCategories[e]&&(!!this.verboseMode||!!this.debugCategories[e].enabled&&(!t||!0===(null===(n=this.debugCategories[e].subsystems)||void 0===n?void 0:n[t]))))}anyCategoryEnabled(){return Object.keys(this.debugCategories).some((e=>this.debugCategories[e].enabled))}getNextSequence(){return++this._logSequence}setDebug(e){this.debugMode=e,e?this.logLevel="debug":(this.logLevel="error",this.verboseMode=!1),console.info("Logger debug mode "+(e?"ENABLED":"DISABLED"))}setVerboseMode(e){e&&!this.debugMode&&this.setDebug(!0),this.verboseMode=e,console.info("Logger verbose mode "+(e?"ENABLED - ALL categories will log":"DISABLED - only selected categories will log"))}setDebugConfig(e){var t,n,r,a,o,i,l,s;e&&(this.setDebug(e.debug||!1),this.setVerboseMode(e.debug_verbose||!1),e.debug_hierarchical?this.processHierarchicalConfig(e.debug_hierarchical):(this.setCategoryDebug("api",null!==(t=e.debug_api)&&void 0!==t&&t),this.setCategoryDebug("parameters",null!==(n=e.debug_parameters)&&void 0!==n&&n),this.setCategoryDebug("websocket",null!==(r=e.debug_websocket)&&void 0!==r&&r),this.setCategoryDebug("layouts",null!==(a=e.debug_layouts)&&void 0!==a&&a),this.setCategoryDebug("rendering",null!==(o=e.debug_rendering)&&void 0!==o&&o),this.setCategoryDebug("cache",null!==(i=e.debug_cache)&&void 0!==i&&i),this.setCategoryDebug("card",null!==(l=e.debug_card)&&void 0!==l&&l),this.setCategoryDebug("diagnostics",null!==(s=e.debug_diagnostics)&&void 0!==s&&s)),this.logConfigStatus())}processHierarchicalConfig(e){var t,n;for(const r in this.debugCategories){const a=e[r];if(a){if(this.setCategoryDebug(r,null!==(t=a.enabled)&&void 0!==t&&t),a.subsystems)for(const e in a.subsystems)this.setSubsystemDebug(r,e,null!==(n=a.subsystems[e])&&void 0!==n&&n)}else this.setCategoryDebug(r,!1)}}formatSystemStatus(e){if(!this.debugCategories[e])return"Not configured";if(!this.debugCategories[e].enabled)return"Disabled";const t=this.debugCategories[e].subsystems,n=Object.keys(t).filter((e=>t[e])).join(", ");return n?`Enabled with subsystems: ${n}`:"Enabled (no subsystems)"}setLogLevel(e){this.logLevel=e}setCategoryDebug(e,t){this.debugCategories[e]?this.debugCategories[e].enabled=t:console.warn(`Logger: Unknown debug category '${e}'`)}setSubsystemDebug(e,t,n){this.debugCategories[e]&&this.debugCategories[e].subsystems.hasOwnProperty(t)?this.debugCategories[e].subsystems[t]=n:console.warn(`Logger: Unknown debug subsystem '${t}' for system '${e}'`)}isDuplicate(e){const t=Date.now(),n=this._recentLogs.get(e);return!!(n&&t-n<this._dedupeTimeWindow)||(this._recentLogs.set(e,t),this._logSequence%10==0&&this.pruneRecentLogs(),!1)}pruneRecentLogs(){const e=Date.now();for(const[t,n]of this._recentLogs.entries())e-n>this._dedupeTimeWindow&&this._recentLogs.delete(t)}log(e,t,n,...r){n&&(n instanceof Error||"object"!=typeof n||Array.isArray(n))&&(r=[n,...r],n={});const a=n&&"object"==typeof n?n.category:void 0,o=n&&"object"==typeof n?n.subsystem:void 0,i=n&&"object"==typeof n&&n.level||"debug",l=n&&"object"==typeof n?n.performance:void 0;if(a&&!this.isEnabled(a,o))return;if(!a&&!this.debugMode)return;if("none"===this.logLevel)return;if("error"===this.logLevel&&"error"!==i)return;if("warn"===this.logLevel&&"error"!==i&&"warn"!==i)return;const s=`${e}:${a||"main"}:${o||""}:${t}`;if(this.isDuplicate(s))return;const c=this.getNextSequence(),u=Date.now().toString(),d=a?o?`${e}:${a}:${o}`:`${e}:${a}`:e;if("trace"===i){if(console.groupCollapsed(`[${u}][${c}][${d}] ${t}`),r.length>0&&console.log(...r),l){const{startTime:e,duration:t}=l;t?console.log(`‚è±Ô∏è Duration: ${t.toFixed(2)}ms`):e&&console.log(`‚è±Ô∏è Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}console.groupEnd()}else if(console.log(`üîç [${u}][${c}][${d}] ${t}`,...r),l){const{startTime:e,duration:t}=l;t?console.log(`‚è±Ô∏è [${u}][${c}][${d}] Duration: ${t.toFixed(2)}ms`):e&&console.log(`‚è±Ô∏è [${u}][${c}][${d}] Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}}info(e,t,...n){const r=n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])?n.shift():{};if("none"===this.logLevel||"error"===this.logLevel||"warn"===this.logLevel)return;const a=null==r?void 0:r.category,o=null==r?void 0:r.subsystem;if(a&&!this.isEnabled(a,o))return;const i=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),l=this.getNextSequence(),s=a?o?`${e}:${a}:${o}`:`${e}:${a}`:e;if(console.info(`‚ÑπÔ∏è [${i}][${l}][${s}] ${t}`,...n),null==r?void 0:r.performance){const{startTime:e,duration:t}=r.performance;t?console.info(`‚è±Ô∏è [${i}][${l}][${s}] Duration: ${t.toFixed(2)}ms`):e&&console.info(`‚è±Ô∏è [${i}][${l}][${s}] Elapsed: ${(Date.now()-e).toFixed(2)}ms`)}}warn(e,t,...n){const r=n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])?n.shift():{};if("none"===this.logLevel||"error"===this.logLevel)return;const a=null==r?void 0:r.category,o=null==r?void 0:r.subsystem,i=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),l=this.getNextSequence(),s=a?o?`${e}:${a}:${o}`:`${e}:${a}`:e;console.warn(`‚ö†Ô∏è [${i}][${l}][${s}] ${t}`,...n)}error(e,t,...n){const r=n.length>0?n[0]:void 0,a=r instanceof Error||r&&"object"==typeof r&&"stack"in r||"string"==typeof r||!r||"object"!=typeof r||Array.isArray(r)?{}:n.shift();if("none"===this.logLevel)return;const o=null==a?void 0:a.category,i=null==a?void 0:a.subsystem,l=(null===performance||void 0===performance?void 0:performance.now().toFixed(2))||Date.now(),s=this.getNextSequence(),c=o?i?`${e}:${o}:${i}`:`${e}:${o}`:e;console.error(`‚ùå [${l}][${s}][${c}] ${t}`,...n)}startPerformance(e){return Date.now()}endPerformance(e,t,n,r){const a=Date.now()-n;this.log(e,t,Object.assign(Object.assign({},r),{performance:{duration:a}}))}resetDebugConfig(){console.log("Resetting logger config to defaults"),this.debugMode=!1,this.verboseMode=!1,this.logLevel="error";for(const e in this.debugCategories){this.debugCategories[e].enabled=!1;for(const t in this.debugCategories[e].subsystems)this.debugCategories[e].subsystems[t]=!1}this._recentLogs.clear(),console.info("Logger debug settings reset - all logging disabled")}setEnabled(e,t){this.setCategoryDebug(e,t)}getSystemsStatus(){const e={};for(const t in this.debugCategories){const n=this.debugCategories[t];e[t]={enabled:n.enabled,subsystems:Object.assign({},n.subsystems)}}return e}getSubsystems(e){return this.debugCategories[e]?Object.keys(this.debugCategories[e].subsystems):[]}isCategoryEnabled(e){return this.isEnabled(e)}logConfigStatus(){console.log("Logger configuration:"),console.log(`      Debug mode: ${this.debugMode} (controls debug UI view)`),console.log(`      Verbose mode: ${this.verboseMode} (logs everything when true)`);for(const e in this.debugCategories){const t=this.debugCategories[e].enabled;if(console.log(`      ${e.charAt(0).toUpperCase()+e.slice(1)}: ${t?"Enabled":"Disabled"}`),t&&!this.verboseMode)for(const t in this.debugCategories[e].subsystems){const n=this.debugCategories[e].subsystems[t];console.log(`        - ${t}: ${n?"Enabled":"Disabled"}`)}}}}const t=new WeakSet;const n="inventree-card",r="inventree-card";function a(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const o=window,i=o.ShadowRoot&&(void 0===o.ShadyCSS||o.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,l=Symbol(),s=new WeakMap;let c=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==l)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=s.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&s.set(t,e))}return e}toString(){return this.cssText}};const u=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1]),e[0]);return new c(n,e,l)},d=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new c("string"==typeof e?e:e+"",void 0,l))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var p;const f=window,h=f.trustedTypes,g=h?h.emptyScript:"",m=f.reactiveElementPolyfillSupport,v={toAttribute(e,t){switch(t){case Boolean:e=e?g:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},y=(e,t)=>t!==e&&(t==t||e==e),b={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:y},S="finalized";let k=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const r=this._$Ep(n,t);void 0!==r&&(this._$Ev.set(r,n),e.push(r))})),e}static createProperty(e,t=b){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const a=this[e];this[t]=r,this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||b}static finalize(){if(this.hasOwnProperty(S))return!1;this[S]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(d(e))}else void 0!==e&&t.push(d(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{i?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),r=o.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=b){var r;const a=this.constructor._$Ep(e,n);if(void 0!==a&&!0===n.reflect){const o=(void 0!==(null===(r=n.converter)||void 0===r?void 0:r.toAttribute)?n.converter:v).toAttribute(t,n.type);this._$El=e,null==o?this.removeAttribute(a):this.setAttribute(a,o),this._$El=null}}_$AK(e,t){var n;const r=this.constructor,a=r._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=r.getPropertyOptions(a),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:v;this._$El=a,this[a]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||y)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var w;k[S]=!0,k.elementProperties=new Map,k.elementStyles=[],k.shadowRootOptions={mode:"open"},null==m||m({ReactiveElement:k}),(null!==(p=f.reactiveElementVersions)&&void 0!==p?p:f.reactiveElementVersions=[]).push("1.6.3");const _=window,C=_.trustedTypes,x=C?C.createPolicy("lit-html",{createHTML:e=>e}):void 0,E="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,R="?"+A,I=`<${R}>`,N=document,P=()=>N.createComment(""),T=e=>null===e||"object"!=typeof e&&"function"!=typeof e,D=Array.isArray,j="[ \t\n\f\r]",$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,O=/-->/g,L=/>/g,M=RegExp(`>|${j}(?:([^\\s"'>=/]+)(${j}*=${j}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),z=/'/g,F=/"/g,G=/^(?:script|style|textarea|title)$/i,U=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),B=Symbol.for("lit-noChange"),H=Symbol.for("lit-nothing"),V=new WeakMap,W=N.createTreeWalker(N,129,null,!1);function q(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==x?x.createHTML(t):t}const Q=(e,t)=>{const n=e.length-1,r=[];let a,o=2===t?"<svg>":"",i=$;for(let t=0;t<n;t++){const n=e[t];let l,s,c=-1,u=0;for(;u<n.length&&(i.lastIndex=u,s=i.exec(n),null!==s);)u=i.lastIndex,i===$?"!--"===s[1]?i=O:void 0!==s[1]?i=L:void 0!==s[2]?(G.test(s[2])&&(a=RegExp("</"+s[2],"g")),i=M):void 0!==s[3]&&(i=M):i===M?">"===s[0]?(i=null!=a?a:$,c=-1):void 0===s[1]?c=-2:(c=i.lastIndex-s[2].length,l=s[1],i=void 0===s[3]?M:'"'===s[3]?F:z):i===F||i===z?i=M:i===O||i===L?i=$:(i=M,a=void 0);const d=i===M&&e[t+1].startsWith("/>")?" ":"";o+=i===$?n+I:c>=0?(r.push(l),n.slice(0,c)+E+n.slice(c)+A+d):n+A+(-2===c?(r.push(void 0),t):d)}return[q(e,o+(e[n]||"<?>")+(2===t?"</svg>":"")),r]};class K{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let a=0,o=0;const i=e.length-1,l=this.parts,[s,c]=Q(e,t);if(this.el=K.createElement(s,n),W.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(r=W.nextNode())&&l.length<i;){if(1===r.nodeType){if(r.hasAttributes()){const e=[];for(const t of r.getAttributeNames())if(t.endsWith(E)||t.startsWith(A)){const n=c[o++];if(e.push(t),void 0!==n){const e=r.getAttribute(n.toLowerCase()+E).split(A),t=/([.?@])?(.*)/.exec(n);l.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?ee:"?"===t[1]?ne:"@"===t[1]?re:Z})}else l.push({type:6,index:a})}for(const t of e)r.removeAttribute(t)}if(G.test(r.tagName)){const e=r.textContent.split(A),t=e.length-1;if(t>0){r.textContent=C?C.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],P()),W.nextNode(),l.push({type:2,index:++a});r.append(e[t],P())}}}else if(8===r.nodeType)if(r.data===R)l.push({type:2,index:a});else{let e=-1;for(;-1!==(e=r.data.indexOf(A,e+1));)l.push({type:7,index:a}),e+=A.length-1}a++}}static createElement(e,t){const n=N.createElement("template");return n.innerHTML=e,n}}function X(e,t,n=e,r){var a,o,i,l;if(t===B)return t;let s=void 0!==r?null===(a=n._$Co)||void 0===a?void 0:a[r]:n._$Cl;const c=T(t)?void 0:t._$litDirective$;return(null==s?void 0:s.constructor)!==c&&(null===(o=null==s?void 0:s._$AO)||void 0===o||o.call(s,!1),void 0===c?s=void 0:(s=new c(e),s._$AT(e,n,r)),void 0!==r?(null!==(i=(l=n)._$Co)&&void 0!==i?i:l._$Co=[])[r]=s:n._$Cl=s),void 0!==s&&(t=X(e,s._$AS(e,t.values),s,r)),t}class J{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:n},parts:r}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:N).importNode(n,!0);W.currentNode=a;let o=W.nextNode(),i=0,l=0,s=r[0];for(;void 0!==s;){if(i===s.index){let t;2===s.type?t=new Y(o,o.nextSibling,this,e):1===s.type?t=new s.ctor(o,s.name,s.strings,this,e):6===s.type&&(t=new ae(o,this,e)),this._$AV.push(t),s=r[++l]}i!==(null==s?void 0:s.index)&&(o=W.nextNode(),i++)}return W.currentNode=N,a}v(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class Y{constructor(e,t,n,r){var a;this.type=2,this._$AH=H,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cp=null===(a=null==r?void 0:r.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=X(this,e,t),T(e)?e===H||null==e||""===e?(this._$AH!==H&&this._$AR(),this._$AH=H):e!==this._$AH&&e!==B&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>D(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==H&&T(this._$AH)?this._$AA.nextSibling.data=e:this.$(N.createTextNode(e)),this._$AH=e}g(e){var t;const{values:n,_$litType$:r}=e,a="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=K.createElement(q(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.v(n);else{const e=new J(a,this),t=e.u(this.options);e.v(n),this.$(t),this._$AH=e}}_$AC(e){let t=V.get(e.strings);return void 0===t&&V.set(e.strings,t=new K(e)),t}T(e){D(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const a of e)r===t.length?t.push(n=new Y(this.k(P()),this.k(P()),this,this.options)):n=t[r],n._$AI(a),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class Z{constructor(e,t,n,r,a){this.type=1,this._$AH=H,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=H}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){const a=this.strings;let o=!1;if(void 0===a)e=X(this,e,t,0),o=!T(e)||e!==this._$AH&&e!==B,o&&(this._$AH=e);else{const r=e;let i,l;for(e=a[0],i=0;i<a.length-1;i++)l=X(this,r[n+i],t,i),l===B&&(l=this._$AH[i]),o||(o=!T(l)||l!==this._$AH[i]),l===H?e=H:e!==H&&(e+=(null!=l?l:"")+a[i+1]),this._$AH[i]=l}o&&!r&&this.j(e)}j(e){e===H?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ee extends Z{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===H?void 0:e}}const te=C?C.emptyScript:"";class ne extends Z{constructor(){super(...arguments),this.type=4}j(e){e&&e!==H?this.element.setAttribute(this.name,te):this.element.removeAttribute(this.name)}}class re extends Z{constructor(e,t,n,r,a){super(e,t,n,r,a),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=X(this,e,t,0))&&void 0!==n?n:H)===B)return;const r=this._$AH,a=e===H&&r!==H||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==H&&(r===H||a);a&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class ae{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const oe=_.litHtmlPolyfillSupport;null==oe||oe(K,Y),(null!==(w=_.litHtmlVersions)&&void 0!==w?w:_.litHtmlVersions=[]).push("2.8.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var ie,le;class se extends k{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var r,a;const o=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t;let i=o._$litPart$;if(void 0===i){const e=null!==(a=null==n?void 0:n.renderBefore)&&void 0!==a?a:null;o._$litPart$=i=new Y(t.insertBefore(P(),e),e,void 0,null!=n?n:{})}return i._$AI(e),i})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return B}}se.finalized=!0,se._$litElement$=!0,null===(ie=globalThis.litElementHydrateSupport)||void 0===ie||ie.call(globalThis,{LitElement:se});const ce=globalThis.litElementPolyfillSupport;null==ce||ce({LitElement:se}),(null!==(le=globalThis.litElementVersions)&&void 0!==le?le:globalThis.litElementVersions=[]).push("3.3.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ue=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:n,elements:r}=t;return{kind:n,elements:r,finisher(t){customElements.define(e,t)}}})(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,de=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},pe=(e,t,n)=>{t.constructor.createProperty(n,e)};function fe(e){return(t,n)=>void 0!==n?((e,t,n)=>{t.constructor.createProperty(n,e)})(e,t,n):de(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function he(e){return fe({...e,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ge;null===(ge=window.HTMLSlotElement)||void 0===ge||ge.prototype.assignedElements;const me={view_type:"detail",data_sources:{inventree_hass_sensors:[],ha_entities:[],inventree_pks:[],inventree_parameters:[]},layout_options:{columns:3,grid_spacing:8,item_height:170},display:{show_header:!0,show_image:!0,show_name:!0,show_stock:!0,show_description:!1,show_category:!1,show_ipn:!1,show_location:!1,show_supplier:!1,show_manufacturer:!1,show_notes:!1,show_buttons:!0,show_stock_status_border:!0,show_stock_status_colors:!0,show_related_parts:!1,show_parameters:!0,show_part_details_component:!0,show_stock_status_border_for_templates:!1,show_buttons_for_variants:!0,show_part_details_component_for_variants:!0,show_image_for_variants:!0,show_stock_for_variants:!0,show_name_for_variants:!0},direct_api:{enabled:!1,url:"",api_key:"",method:"websocket",websocket_url:"",idle_render_time:60,performance:{api:{throttle:.2,cacheLifetime:60,batchSize:20,failedRequestRetryDelaySeconds:30},websocket:{reconnectInterval:5e3,messageDebounce:50}}},parameters:{enabled:!0,show_section:!0,collapsed_by_default:!1,group_parameters:!1,filter_fallback_mode:"all"},conditional_logic:{definedLogics:[]},style:{background:"var(--ha-card-background, var(--card-background-color, white))",spacing:8,image_size:50},interactions:{buttons:[]},performance:{rendering:{debounceTime:50,idleRenderInterval:5e3,maxRenderFrequency:10},api:{throttle:.2,cacheLifetime:60,batchSize:20,failedRequestRetryDelaySeconds:30},websocket:{reconnectInterval:5e3,messageDebounce:50},parameters:{updateFrequency:1e3,conditionEvalFrequency:1e3}},debug:!1,debug_verbose:!1,show_debug:!1},ve=e.getInstance();function ye(e,t,n={}){try{n.source,ve.log("MetricsTracker",`${e}/${t} [${n.source||"unknown"}]`,Object.assign({category:"metrics",subsystem:"tracking"},n))}catch(e){ve.error("MetricsTracker",`Error tracking metrics: ${e}`,{category:"metrics",subsystem:"error"})}}function be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Se,ke={exports:{}},we={};ke.exports=function(){if(Se)return we;Se=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,h={};function g(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||p}function m(){}function v(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var y=v.prototype=new m;y.constructor=v,f(y,g.prototype),y.isPureReactComponent=!0;var b=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function w(t,n,r,a,o,i){return r=i.ref,{$$typeof:e,type:t,key:n,ref:void 0!==r?r:null,props:i}}function _(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var C=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function E(){}function A(n,r,a,o,i){var l=typeof n;"undefined"!==l&&"boolean"!==l||(n=null);var s,c,p=!1;if(null===n)p=!0;else switch(l){case"bigint":case"string":case"number":p=!0;break;case"object":switch(n.$$typeof){case e:case t:p=!0;break;case u:return A((p=n._init)(n._payload),r,a,o,i)}}if(p)return i=i(n),p=""===o?"."+x(n,0):o,b(i)?(a="",null!=p&&(a=p.replace(C,"$&/")+"/"),A(i,r,a,"",(function(e){return e}))):null!=i&&(_(i)&&(s=i,c=a+(null==i.key||n&&n.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+p,i=w(s.type,c,void 0,0,0,s.props)),r.push(i)),1;p=0;var f,h=""===o?".":o+":";if(b(n))for(var g=0;g<n.length;g++)p+=A(o=n[g],r,a,l=h+x(o,g),i);else if("function"==typeof(g=null===(f=n)||"object"!=typeof f?null:"function"==typeof(f=d&&f[d]||f["@@iterator"])?f:null))for(n=g.call(n),g=0;!(o=n.next()).done;)p+=A(o=o.value,r,a,l=h+x(o,g++),i);else if("object"===l){if("function"==typeof n.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,a,o,i);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return p}function R(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}return we.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},we.Component=g,we.Fragment=n,we.Profiler=a,we.PureComponent=v,we.StrictMode=r,we.Suspense=s,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,we.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},we.cache=function(e){return function(){return e.apply(null,arguments)}},we.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key;if(null!=t)for(o in t.ref,void 0!==t.key&&(a=""+t.key),t)!k.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),l=0;l<o;l++)i[l]=arguments[l+2];r.children=i}return w(e.type,a,void 0,0,0,r)},we.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},we.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var l=Array(i),s=0;s<i;s++)l[s]=arguments[s+2];a.children=l}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return w(e,o,void 0,0,0,a)},we.createRef=function(){return{current:null}},we.forwardRef=function(e){return{$$typeof:l,render:e}},we.isValidElement=_,we.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:I}},we.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},we.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),a=S.S;null!==a&&a(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(P,N)}catch(e){N(e)}finally{S.T=t}},we.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},we.use=function(e){return S.H.use(e)},we.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},we.useCallback=function(e,t){return S.H.useCallback(e,t)},we.useContext=function(e){return S.H.useContext(e)},we.useDebugValue=function(){},we.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},we.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},we.useId=function(){return S.H.useId()},we.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},we.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},we.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},we.useMemo=function(e,t){return S.H.useMemo(e,t)},we.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},we.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},we.useRef=function(e){return S.H.useRef(e)},we.useState=function(e){return S.H.useState(e)},we.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},we.useTransition=function(){return S.H.useTransition()},we.version="19.1.0",we}();var _e,Ce,xe=ke.exports,Ee=be(xe),Ae={exports:{}},Re={},Ie={exports:{}},Ne={};function Pe(){return Ce||(Ce=1,Ie.exports=(_e||(_e=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],c=l+1,u=e[c];if(0>a(s,n))c<o&&0>a(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var s=[],c=[],u=1,d=null,p=3,f=!1,h=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(s,a)}a=n(c)}}function k(e){if(g=!1,S(e),!h)if(null!==n(s))h=!0,_||(_=!0,w());else{var t=n(c);null!==t&&P(k,t.startTime-e)}}var w,_=!1,C=-1,x=5,E=-1;function A(){return!(!m&&e.unstable_now()-E<x)}function R(){if(m=!1,_){var t=e.unstable_now();E=t;var a=!0;try{e:{h=!1,g&&(g=!1,y(C),C=-1),f=!0;var o=p;try{t:{for(S(t),d=n(s);null!==d&&!(d.expirationTime>t&&A());){var i=d.callback;if("function"==typeof i){d.callback=null,p=d.priorityLevel;var l=i(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof l){d.callback=l,S(t),a=!0;break t}d===n(s)&&r(s),S(t)}else r(s);d=n(s)}if(null!==d)a=!0;else{var u=n(c);null!==u&&P(k,u.startTime-t),a=!1}}break e}finally{d=null,p=o,f=!1}a=void 0}}finally{a?w():_=!1}}}if("function"==typeof b)w=function(){b(R)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,N=I.port2;I.port1.onmessage=R,w=function(){N.postMessage(null)}}else w=function(){v(R,0)};function P(t,n){C=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_requestPaint=function(){m=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,a,o){var i=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?i+o:i,r){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>i?(r.sortIndex=o,t(c,r),null===n(s)&&r===n(c)&&(g?(y(C),C=-1):g=!0,P(k,o-i))):(r.sortIndex=l,t(s,r),h||f||(h=!0,_||(_=!0,w()))),r},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(Ne)),Ne)),Ie.exports}var Te,De,je,$e={exports:{}},Oe={};function Le(){if(Te)return Oe;Te=1;var e=xe;function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return Oe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Oe.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},Oe.flushSync=function(e){var t=o.T,n=r.p;try{if(o.T=null,r.p=2,e)return e()}finally{o.T=t,r.p=n,r.d.f()}},Oe.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},Oe.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},Oe.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,a=i(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,l="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:o,fetchPriority:l}):"script"===n&&r.d.X(e,{crossOrigin:a,integrity:o,fetchPriority:l,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},Oe.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=i(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},Oe.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,a=i(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:a,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},Oe.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=i(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},Oe.requestFormReset=function(e){r.d.r(e)},Oe.unstable_batchedUpdates=function(e,t){return e(t)},Oe.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},Oe.useFormStatus=function(){return o.H.useHostTransitionStatus()},Oe.version="19.1.0",Oe}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Ae.exports=function(){if(je)return Re;je=1;var e=Pe(),t=xe,n=(De||(De=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),$e.exports=Le()),$e.exports);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(r(188))}function s(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=s(e)))return t;e=e.sibling}return null}var c=Object.assign,u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case g:return"Profiler";case h:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case y:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return I(e(t))}catch(e){}}return null}var N=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},j=[],$=-1;function O(e){return{current:e}}function L(e){0>$||(e.current=j[$],j[$]=null,$--)}function M(e,t){$++,j[$]=e.current,e.current=t}var z=O(null),F=O(null),G=O(null),U=O(null);function B(e,t){switch(M(G,t),M(F,e),M(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=cd(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(z),M(z,e)}function H(){L(z),L(F),L(G)}function V(e){null!==e.memoizedState&&M(U,e);var t=z.current,n=cd(t,e.type);t!==n&&(M(F,e),M(z,n))}function W(e){F.current===e&&(L(z),L(F)),U.current===e&&(L(U),Yd._currentValue=D)}var q=Object.prototype.hasOwnProperty,Q=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,X=e.unstable_shouldYield,J=e.unstable_requestPaint,Y=e.unstable_now,Z=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,te=e.unstable_UserBlockingPriority,ne=e.unstable_NormalPriority,re=e.unstable_LowPriority,ae=e.unstable_IdlePriority,oe=e.log,ie=e.unstable_setDisableYieldValue,le=null,se=null;function ce(e){if("function"==typeof oe&&ie(e),se&&"function"==typeof se.setStrictMode)try{se.setStrictMode(le,e)}catch(e){}}var ue=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(de(e)/pe|0)|0},de=Math.log,pe=Math.LN2,fe=256,he=4194304;function ge(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function me(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&r;return 0!==l?0!=(r=l&~o)?a=ge(r):0!=(i&=l)?a=ge(i):n||0!=(n=l&~e)&&(a=ge(n)):0!=(l=r&~o)?a=ge(l):0!==i?a=ge(i):n||0!=(n=r&~e)&&(a=ge(n)),0===a?0:0===t||t===a||t&o||!((o=a&-a)>=(n=t&-t)||32===o&&4194048&n)?a:t}function ve(e,t){return!(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ye(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function be(){var e=fe;return!(4194048&(fe<<=1))&&(fe=256),e}function Se(){var e=he;return!(62914560&(he<<=1))&&(he=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function we(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _e(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ue(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ue(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ie(){var e=T.p;return 0!==e?e:void 0===(e=window.event)?32:fp(e.type)}var Ne=Math.random().toString(36).slice(2),Te="__reactFiber$"+Ne,Oe="__reactProps$"+Ne,Me="__reactContainer$"+Ne,ze="__reactEvents$"+Ne,Fe="__reactListeners$"+Ne,Ge="__reactHandles$"+Ne,Ue="__reactResources$"+Ne,Be="__reactMarker$"+Ne;function He(e){delete e[Te],delete e[Oe],delete e[ze],delete e[Fe],delete e[Ge]}function Ve(e){var t=e[Te];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Me]||n[Te]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_d(e);null!==e;){if(n=e[Te])return n;e=_d(e)}return t}n=(e=n).parentNode}return null}function We(e){if(e=e[Te]||e[Me]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Qe(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Be]=!0}var Xe=new Set,Je={};function Ye(e,t){Ze(e,t),Ze(e+"Capture",t)}function Ze(e,t){for(Je[e]=t,e=0;e<t.length;e++)Xe.add(t[e])}var et,tt,nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rt={},at={};function ot(e,t,n){if(a=t,q.call(at,a)||!q.call(rt,a)&&(nt.test(a)?at[a]=!0:(rt[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function it(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===et)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||"",tt=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+et+e+tt}var ct=!1;function ut(e,t){if(!e||ct)return"";ct=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var s=i.split("\n"),c=l.split("\n");for(a=r=0;r<s.length&&!s[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===s.length||a===c.length)for(r=s.length-1,a=c.length-1;1<=r&&0<=a&&s[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||s[r]!==c[a]){var u="\n"+s[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{ct=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function dt(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return ut(e.type,!1);case 11:return ut(e.type.render,!1);case 1:return ut(e.type,!0);case 31:return st("Activity");default:return""}}function pt(e){try{var t="";do{t+=dt(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function gt(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function vt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var yt=/[\n"\\]/g;function bt(e){return e.replace(yt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function St(e,t,n,r,a,o,i,l){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ft(t)):e.value!==""+ft(t)&&(e.value=""+ft(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?wt(e,i,ft(t)):null!=n?wt(e,i,ft(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=o&&(e.defaultChecked=!!o),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.name=""+ft(l):e.removeAttribute("name")}function kt(e,t,n,r,a,o,i,l){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+ft(n):"",t=null!=t?""+ft(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function wt(e,t,n){"number"===t&&vt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ft(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+ft(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ft(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(r(92));if(N(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ft(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function It(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var o in t)a=t[o],t.hasOwnProperty(o)&&n[o]!==a&&Rt(e,o,a)}else for(var i in t)t.hasOwnProperty(i)&&Rt(e,i,t[i])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jt=null;function $t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Lt=null;function Mt(e){var t=We(e);if(t&&(e=t.stateNode)){var n=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(St(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var o=a[Oe]||null;if(!o)throw Error(r(90));St(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&mt(a)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var zt=!1;function Ft(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Ot||null!==Lt)&&(Vc(),Ot&&(t=Ot,e=Lt,Lt=Ot=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Gt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Oe]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Ut=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Bt=!1;if(Ut)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(e){Bt=!1}var Vt=null,Wt=null,qt=null;function Qt(){if(qt)return qt;var e,t,n=Wt,r=n.length,a="value"in Vt?Vt.value:Vt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return qt=a.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Jt(){return!1}function Yt(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Xt:Jt,this.isPropagationStopped=Jt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Zt,en,tn,nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rn=Yt(nn),an=c({},nn,{view:0,detail:0}),on=Yt(an),ln=c({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tn&&(tn&&"mousemove"===e.type?(Zt=e.screenX-tn.screenX,en=e.screenY-tn.screenY):en=Zt=0,tn=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:en}}),sn=Yt(ln),cn=Yt(c({},ln,{dataTransfer:0})),un=Yt(c({},an,{relatedTarget:0})),dn=Yt(c({},nn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=Yt(c({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fn=Yt(c({},nn,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return vn}var bn=Yt(c({},an,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sn=Yt(c({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=Yt(c({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=Yt(c({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Yt(c({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=Yt(c({},nn,{newState:0,oldState:0})),xn=[9,13,27,32],En=Ut&&"CompositionEvent"in window,An=null;Ut&&"documentMode"in document&&(An=document.documentMode);var Rn=Ut&&"TextEvent"in window&&!An,In=Ut&&(!En||An&&8<An&&11>=An),Nn=String.fromCharCode(32),Pn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1,$n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Ln(e,t,n,r){Ot?Lt?Lt.push(r):Lt=[r]:Ot=r,0<(t=Qu(t,"onChange")).length&&(n=new rn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,zn=null;function Fn(e){Fu(e,0)}function Gn(e){if(mt(qe(e)))return e}function Un(e,t){if("change"===e)return t}var Bn=!1;if(Ut){var Hn;if(Ut){var Vn="oninput"in document;if(!Vn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Vn="function"==typeof Wn.oninput}Hn=Vn}else Hn=!1;Bn=Hn&&(!document.documentMode||9<document.documentMode)}function qn(){Mn&&(Mn.detachEvent("onpropertychange",Qn),zn=Mn=null)}function Qn(e){if("value"===e.propertyName&&Gn(zn)){var t=[];Ln(t,zn,e,$t(e)),Ft(Fn,t)}}function Kn(e,t,n){"focusin"===e?(qn(),zn=n,(Mn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&qn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(zn)}function Jn(e,t){if("click"===e)return Gn(t)}function Yn(e,t){if("input"===e||"change"===e)return Gn(t)}var Zn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function er(e,t){if(Zn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!q.call(t,a)||!Zn(e[a],t[a]))return!1}return!0}function tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nr(e,t){var n,r=tr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tr(r)}}function rr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?rr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ar(e){for(var t=vt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=vt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Ut&&"documentMode"in document&&11>=document.documentMode,lr=null,sr=null,cr=null,ur=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==lr||lr!==vt(r)||(r="selectionStart"in(r=lr)&&or(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&er(cr,r)||(cr=r,0<(r=Qu(sr,"onSelect")).length&&(t=new rn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=lr)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},hr={},gr={};function mr(e){if(hr[e])return hr[e];if(!fr[e])return e;var t,n=fr[e];for(t in n)if(n.hasOwnProperty(t)&&t in gr)return hr[e]=n[t];return e}Ut&&(gr=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);var vr=mr("animationend"),yr=mr("animationiteration"),br=mr("animationstart"),Sr=mr("transitionrun"),kr=mr("transitionstart"),wr=mr("transitioncancel"),_r=mr("transitionend"),Cr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Cr.set(e,t),Ye(t,[e])}xr.push("scrollEnd");var Ar=new WeakMap;function Rr(e,t){if("object"==typeof e&&null!==e){var n=Ar.get(e);return void 0!==n?n:(t={value:e,source:t,stack:pt(t)},Ar.set(e,t),t)}return{value:e,source:t,stack:pt(t)}}var Ir=[],Nr=0,Pr=0;function Tr(){for(var e=Nr,t=Pr=Nr=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var a=Ir[t];Ir[t++]=null;var o=Ir[t];if(Ir[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==o&&Or(n,a,o)}}function Dr(e,t,n,r){Ir[Nr++]=e,Ir[Nr++]=t,Ir[Nr++]=n,Ir[Nr++]=r,Pr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function jr(e,t,n,r){return Dr(e,t,n,r),Lr(e)}function $r(e,t){return Dr(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(a=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,a&&null!==t&&(a=31-ue(n),null===(r=(e=o.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),o):null}function Lr(e){if(50<Oc)throw Oc=0,Lc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function zr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new zr(e,t,n,r)}function Gr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,a,o,i){var l=0;if(a=e,"function"==typeof e)Gr(e)&&(l=1);else if("string"==typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fr(31,n,t,o)).elementType=C,e.lanes=i,e;case f:return Vr(n.children,o,i,t);case h:l=8,o|=24;break;case g:return(e=Fr(12,n,t,2|o)).elementType=g,e.lanes=i,e;case S:return(e=Fr(13,n,t,o)).elementType=S,e.lanes=i,e;case k:return(e=Fr(19,n,t,o)).elementType=k,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case m:case y:l=10;break e;case v:l=9;break e;case b:l=11;break e;case w:l=14;break e;case _:l=16,a=null;break e}l=29,n=Error(r(130,null===e?"null":typeof e,"")),a=null}return(t=Fr(l,n,t,o)).elementType=e,t.type=a,t.lanes=i,t}function Vr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qr=[],Kr=0,Xr=null,Jr=0,Yr=[],Zr=0,ea=null,ta=1,na="";function ra(e,t){Qr[Kr++]=Jr,Qr[Kr++]=Xr,Xr=e,Jr=t}function aa(e,t,n){Yr[Zr++]=ta,Yr[Zr++]=na,Yr[Zr++]=ea,ea=e;var r=ta;e=na;var a=32-ue(r)-1;r&=~(1<<a),n+=1;var o=32-ue(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,ta=1<<32-ue(t)+a|n<<a|r,na=o+e}else ta=1<<o|n<<a|r,na=e}function oa(e){null!==e.return&&(ra(e,1),aa(e,1,0))}function ia(e){for(;e===Xr;)Xr=Qr[--Kr],Qr[Kr]=null,Jr=Qr[--Kr],Qr[Kr]=null;for(;e===ea;)ea=Yr[--Zr],Yr[Zr]=null,na=Yr[--Zr],Yr[Zr]=null,ta=Yr[--Zr],Yr[Zr]=null}var la=null,sa=null,ca=!1,ua=null,da=!1,pa=Error(r(519));function fa(e){throw ba(Rr(Error(r(418,"")),e)),pa}function ha(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Te]=e,t[Oe]=r,n){case"dialog":Gu("cancel",t),Gu("close",t);break;case"iframe":case"object":case"embed":Gu("load",t);break;case"video":case"audio":for(n=0;n<Mu.length;n++)Gu(Mu[n],t);break;case"source":Gu("error",t);break;case"img":case"image":case"link":Gu("error",t),Gu("load",t);break;case"details":Gu("toggle",t);break;case"input":Gu("invalid",t),kt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),gt(t);break;case"select":Gu("invalid",t);break;case"textarea":Gu("invalid",t),xt(t,r.value,r.defaultValue,r.children),gt(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ed(t.textContent,n)?(null!=r.popover&&(Gu("beforetoggle",t),Gu("toggle",t)),null!=r.onScroll&&Gu("scroll",t),null!=r.onScrollEnd&&Gu("scrollend",t),null!=r.onClick&&(t.onclick=td),t=!0):t=!1,t||fa(e)}function ga(e){for(la=e.return;la;)switch(la.tag){case 5:case 13:return void(da=!1);case 27:case 3:return void(da=!0);default:la=la.return}}function ma(e){if(e!==la)return!1;if(!ca)return ga(e),ca=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ud(e.type,e.memoizedProps)),t=!t),t&&sa&&fa(e),ga(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){sa=kd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}sa=null}}else 27===n?(n=sa,vd(e.type)?(e=wd,wd=null,sa=e):sa=n):sa=la?kd(e.stateNode.nextSibling):null;return!0}function va(){sa=la=null,ca=!1}function ya(){var e=ua;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),ua=null),e}function ba(e){null===ua?ua=[e]:ua.push(e)}var Sa=O(null),ka=null,wa=null;function _a(e,t,n){M(Sa,t._currentValue),t._currentValue=n}function Ca(e){e._currentValue=Sa.current,L(Sa)}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t,n,a){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var l=o.child;i=i.firstContext;e:for(;null!==i;){var s=i;i=o;for(var c=0;c<t.length;c++)if(s.context===t[c]){i.lanes|=n,null!==(s=i.alternate)&&(s.lanes|=n),xa(i.return,n,e),a||(l=null);break e}i=s.next}}else if(18===o.tag){if(null===(l=o.return))throw Error(r(341));l.lanes|=n,null!==(i=l.alternate)&&(i.lanes|=n),xa(l,n,e),l=null}else l=o.child;if(null!==l)l.return=o;else for(l=o;null!==l;){if(l===e){l=null;break}if(null!==(o=l.sibling)){o.return=l.return,l=o;break}l=l.return}o=l}}function Aa(e,t,n,a){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(524288&o.flags)i=!0;else if(262144&o.flags)break;if(10===o.tag){var l=o.alternate;if(null===l)throw Error(r(387));if(null!==(l=l.memoizedProps)){var s=o.type;Zn(o.pendingProps.value,l.value)||(null!==e?e.push(s):e=[s])}}else if(o===U.current){if(null===(l=o.alternate))throw Error(r(387));l.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}o=o.return}null!==e&&Ea(t,e,n,a),t.flags|=262144}function Ra(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ia(e){ka=e,wa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Na(e){return Ta(ka,e)}function Pa(e,t){return null===ka&&Ia(e),Ta(e,t)}function Ta(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===wa){if(null===e)throw Error(r(308));wa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wa=wa.next=t;return n}var Da="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},ja=e.unstable_scheduleCallback,$a=e.unstable_NormalPriority,Oa={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function La(){return{controller:new Da,data:new Map,refCount:0}}function Ma(e){e.refCount--,0===e.refCount&&ja($a,(function(){e.controller.abort()}))}var za=null,Fa=0,Ga=0,Ua=null;function Ba(){if(0==--Fa&&null!==za){null!==Ua&&(Ua.status="fulfilled");var e=za;za=null,Ga=0,Ua=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ha=P.S;P.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===za){var n=za=[];Fa=0,Ga=Du(),Ua={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fa++,t.then(Ba,Ba)}(0,t),null!==Ha&&Ha(e,t)};var Va=O(null);function Wa(){var e=Va.current;return null!==e?e:lc.pooledCache}function qa(e,t){M(Va,null===t?Va.current:t.pool)}function Qa(){var e=Wa();return null===e?null:{parent:Oa._currentValue,pool:e}}var Ka=Error(r(460)),Xa=Error(r(474)),Ja=Error(r(542)),Ya={then:function(){}};function Za(e){return"fulfilled"===(e=e.status)||"rejected"===e}function eo(){}function to(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(eo,eo),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ao(e=t.reason),e;default:if("string"==typeof t.status)t.then(eo,eo);else{if(null!==(e=lc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ao(e=t.reason),e}throw no=t,Ka}}var no=null;function ro(){if(null===no)throw Error(r(459));var e=no;return no=null,e}function ao(e){if(e===Ka||e===Ja)throw Error(r(483))}var oo=!1;function io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function so(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function co(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&ic){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Dr(e,r,t,n),Lr(e)}function uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var fo=!1;function ho(){if(fo&&null!==Ua)throw Ua}function go(e,t,n,r){fo=!1;var a=e.updateQueue;oo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var s=l,u=s.next;s.next=null,null===i?o=u:i.next=u,i=s;var d=e.alternate;null!==d&&(l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=s)}if(null!==o){var p=a.baseState;for(i=0,d=u=s=null,l=o;;){var f=-536870913&l.lane,h=f!==l.lane;if(h?(cc&f)===f:(r&f)===f){0!==f&&f===Ga&&(fo=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var g=e,m=l;f=t;var v=n;switch(m.tag){case 1:if("function"==typeof(g=m.payload)){p=g.call(v,p,f);break e}p=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(v,p,f):g))break e;p=c({},p,f);break e;case 2:oo=!0}}null!==(f=l.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=a.callbacks)?a.callbacks=[f]:h.push(f))}else h={lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(u=d=h,s=p):d=d.next=h,i|=f;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(h=l).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}null===d&&(s=p),a.baseState=s,a.firstBaseUpdate=u,a.lastBaseUpdate=d,null===o&&(a.shared.lanes=0),vc|=i,e.lanes=i,e.memoizedState=p}}function mo(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function vo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)mo(n[e],t)}var yo=O(null),bo=O(0);function So(e,t){M(bo,e=gc),M(yo,t),gc=e|t.baseLanes}function ko(){M(bo,gc),M(yo,yo.current)}function wo(){gc=bo.current,L(yo),L(bo)}var _o=0,Co=null,xo=null,Eo=null,Ao=!1,Ro=!1,Io=!1,No=0,Po=0,To=null,Do=0;function jo(){throw Error(r(321))}function $o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function Oo(e,t,n,r,a,o){return _o=o,Co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Xi:Ji,Io=!1,o=n(r,a),Io=!1,Ro&&(o=Mo(t,n,r,a)),Lo(e),o}function Lo(e){P.H=Ki;var t=null!==xo&&null!==xo.next;if(_o=0,Eo=xo=Co=null,Ao=!1,Po=0,To=null,t)throw Error(r(300));null===e||Pl||null!==(e=e.dependencies)&&Ra(e)&&(Pl=!0)}function Mo(e,t,n,a){Co=e;var o=0;do{if(Ro&&(To=null),Po=0,Ro=!1,25<=o)throw Error(r(301));if(o+=1,Eo=xo=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}P.H=Yi,i=t(n,a)}while(Ro);return i}function zo(){var e=P.H,t=e.useState()[0];return t="function"==typeof t.then?Vo(t):t,e=e.useState()[0],(null!==xo?xo.memoizedState:null)!==e&&(Co.flags|=1024),t}function Fo(){var e=0!==No;return No=0,e}function Go(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Uo(e){if(Ao){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ao=!1}_o=0,Eo=xo=Co=null,Ro=!1,Po=No=0,To=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Eo?Co.memoizedState=Eo=e:Eo=Eo.next=e,Eo}function Ho(){if(null===xo){var e=Co.alternate;e=null!==e?e.memoizedState:null}else e=xo.next;var t=null===Eo?Co.memoizedState:Eo.next;if(null!==t)Eo=t,xo=e;else{if(null===e){if(null===Co.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(xo=e).memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},null===Eo?Co.memoizedState=Eo=e:Eo=Eo.next=e}return Eo}function Vo(e){var t=Po;return Po+=1,null===To&&(To=[]),e=to(To,e,t),t=Co,null===(null===Eo?t.memoizedState:Eo.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Xi:Ji),e}function Wo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Vo(e);if(e.$$typeof===y)return Na(e)}throw Error(r(438,String(e)))}function qo(e){var t=null,n=Co.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Co.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Co.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=x;return t.index++,n}function Qo(e,t){return"function"==typeof t?t(e):t}function Ko(e){return Xo(Ho(),xo,e)}function Xo(e,t,n){var a=e.queue;if(null===a)throw Error(r(311));a.lastRenderedReducer=n;var o=e.baseQueue,i=a.pending;if(null!==i){if(null!==o){var l=o.next;o.next=i.next,i.next=l}t.baseQueue=o=i,a.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var s=l=null,c=null,u=t=o.next,d=!1;do{var p=-536870913&u.lane;if(p!==u.lane?(cc&p)===p:(_o&p)===p){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===Ga&&(d=!0);else{if((_o&f)===f){u=u.next,f===Ga&&(d=!0);continue}p={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=p,l=i):c=c.next=p,Co.lanes|=f,vc|=f}p=u.action,Io&&n(i,p),i=u.hasEagerState?u.eagerState:n(i,p)}else f={lane:p,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=f,l=i):c=c.next=f,Co.lanes|=p,vc|=p;u=u.next}while(null!==u&&u!==t);if(null===c?l=i:c.next=s,!Zn(i,e.memoizedState)&&(Pl=!0,d&&null!==(n=Ua)))throw n;e.memoizedState=i,e.baseState=l,e.baseQueue=c,a.lastRenderedState=i}return null===o&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Jo(e){var t=Ho(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{i=e(i,l.action),l=l.next}while(l!==o);Zn(i,t.memoizedState)||(Pl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Yo(e,t,n){var a=Co,o=Ho(),i=ca;if(i){if(void 0===n)throw Error(r(407));n=n()}else n=t();var l=!Zn((xo||o).memoizedState,n);if(l&&(o.memoizedState=n,Pl=!0),o=o.queue,ki(2048,8,ti.bind(null,a,o,e),[e]),o.getSnapshot!==t||l||null!==Eo&&1&Eo.memoizedState.tag){if(a.flags|=2048,yi(9,{destroy:void 0,resource:void 0},ei.bind(null,a,o,n,t),null),null===lc)throw Error(r(349));i||124&_o||Zo(a,t,n)}return n}function Zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Co.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ei(e,t,n,r){t.value=n,t.getSnapshot=r,ni(t)&&ri(e)}function ti(e,t,n){return n((function(){ni(t)&&ri(e)}))}function ni(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(e){return!0}}function ri(e){var t=$r(e,2);null!==t&&Fc(t,e,2)}function ai(e){var t=Bo();if("function"==typeof e){var n=e;if(e=n(),Io){ce(!0);try{n()}finally{ce(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:e},t}function oi(e,t,n,r){return e.baseState=n,Xo(e,xo,"function"==typeof r?r:Qo)}function ii(e,t,n,a,o){if(Wi(e))throw Error(r(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==P.T?n(!0):i.isTransition=!1,a(i),null===(n=t.pending)?(i.next=t.pending=i,li(t,i)):(i.next=n.next,t.pending=n.next=i)}}function li(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var o=P.T,i={};P.T=i;try{var l=n(a,r),s=P.S;null!==s&&s(i,l),si(e,t,l)}catch(n){ui(e,t,n)}finally{P.T=o}}else try{si(e,t,o=n(a,r))}catch(n){ui(e,t,n)}}function si(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){ci(e,t,n)}),(function(n){return ui(e,t,n)})):ci(e,t,n)}function ci(e,t,n){t.status="fulfilled",t.value=n,di(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,li(e,n)))}function ui(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,di(t),t=t.next}while(t!==r)}e.action=null}function di(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function pi(e,t){return t}function fi(e,t){if(ca){var n=lc.formState;if(null!==n){e:{var r=Co;if(ca){if(sa){t:{for(var a=sa,o=da;8!==a.nodeType;){if(!o){a=null;break t}if(null===(a=kd(a.nextSibling))){a=null;break t}}a="F!"===(o=a.data)||"F"===o?a:null}if(a){sa=kd(a.nextSibling),r="F!"===a.data;break e}}fa(r)}r=!1}r&&(t=n[0])}}return(n=Bo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:t},n.queue=r,n=Bi.bind(null,Co,r),r.dispatch=n,r=ai(!1),o=Vi.bind(null,Co,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Bo()).queue=a,n=ii.bind(null,Co,a,o,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function hi(e){return gi(Ho(),xo,e)}function gi(e,t,n){if(t=Xo(e,t,pi)[0],e=Ko(Qo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Vo(t)}catch(e){if(e===Ka)throw Ja;throw e}else r=t;var a=(t=Ho()).queue,o=a.dispatch;return n!==t.memoizedState&&(Co.flags|=2048,yi(9,{destroy:void 0,resource:void 0},mi.bind(null,a,n),null)),[r,o,e]}function mi(e,t){e.action=t}function vi(e){var t=Ho(),n=xo;if(null!==n)return gi(t,n,e);Ho(),t=t.memoizedState;var r=(n=Ho()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function yi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Co.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Co.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function bi(){return Ho().memoizedState}function Si(e,t,n,r){var a=Bo();r=void 0===r?null:r,Co.flags|=e,a.memoizedState=yi(1|t,{destroy:void 0,resource:void 0},n,r)}function ki(e,t,n,r){var a=Ho();r=void 0===r?null:r;var o=a.memoizedState.inst;null!==xo&&null!==r&&$o(r,xo.memoizedState.deps)?a.memoizedState=yi(t,o,n,r):(Co.flags|=e,a.memoizedState=yi(1|t,o,n,r))}function wi(e,t){Si(8390656,8,e,t)}function _i(e,t){ki(2048,8,e,t)}function Ci(e,t){return ki(4,2,e,t)}function xi(e,t){return ki(4,4,e,t)}function Ei(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ai(e,t,n){n=null!=n?n.concat([e]):null,ki(4,4,Ei.bind(null,t,e),n)}function Ri(){}function Ii(e,t){var n=Ho();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ni(e,t){var n=Ho();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$o(t,r[1]))return r[0];if(r=e(),Io){ce(!0);try{e()}finally{ce(!1)}}return n.memoizedState=[r,t],r}function Pi(e,t,n){return void 0===n||1073741824&_o?e.memoizedState=t:(e.memoizedState=n,e=zc(),Co.lanes|=e,vc|=e,n)}function Ti(e,t,n,r){return Zn(n,t)?n:null!==yo.current?(e=Pi(e,n,r),Zn(e,t)||(Pl=!0),e):42&_o?(e=zc(),Co.lanes|=e,vc|=e,t):(Pl=!0,e.memoizedState=n)}function Di(e,t,n,r,a){var o=T.p;T.p=0!==o&&8>o?o:8;var i,l,s,c=P.T,u={};P.T=u,Vi(e,!1,t,n);try{var d=a(),p=P.S;if(null!==p&&p(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var f=(i=r,l=[],s={status:"pending",value:null,reason:null,then:function(e){l.push(e)}},d.then((function(){s.status="fulfilled",s.value=i;for(var e=0;e<l.length;e++)(0,l[e])(i)}),(function(e){for(s.status="rejected",s.reason=e,e=0;e<l.length;e++)(0,l[e])(void 0)})),s);Hi(e,t,f,Mc())}else Hi(e,t,r,Mc())}catch(n){Hi(e,t,{then:function(){},status:"rejected",reason:n},Mc())}finally{T.p=o,P.T=c}}function ji(){}function $i(e,t,n,a){if(5!==e.tag)throw Error(r(476));var o=Oi(e).queue;Di(e,o,t,D,null===n?ji:function(){return Li(e),n(a)})}function Oi(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Li(e){Hi(e,Oi(e).next.queue,{},Mc())}function Mi(){return Na(Yd)}function zi(){return Ho().memoizedState}function Fi(){return Ho().memoizedState}function Gi(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mc(),r=co(t,e=so(n),n);return null!==r&&(Fc(r,t,n),uo(r,t,n)),t={cache:La()},void(e.payload=t)}t=t.return}}function Ui(e,t,n){var r=Mc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wi(e)?qi(t,n):null!==(n=jr(e,t,n,r))&&(Fc(n,e,r),Qi(n,t,r))}function Bi(e,t,n){Hi(e,t,n,Mc())}function Hi(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wi(e))qi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,Zn(l,i))return Dr(e,t,a,0),null===lc&&Tr(),!1}catch(e){}if(null!==(n=jr(e,t,a,r)))return Fc(n,e,r),Qi(n,t,r),!0}return!1}function Vi(e,t,n,a){if(a={lane:2,revertLane:Du(),action:a,hasEagerState:!1,eagerState:null,next:null},Wi(e)){if(t)throw Error(r(479))}else null!==(t=jr(e,n,a,2))&&Fc(t,e,2)}function Wi(e){var t=e.alternate;return e===Co||null!==t&&t===Co}function qi(e,t){Ro=Ao=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Ki={readContext:Na,use:Wo,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useLayoutEffect:jo,useInsertionEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useSyncExternalStore:jo,useId:jo,useHostTransitionStatus:jo,useFormState:jo,useActionState:jo,useOptimistic:jo,useMemoCache:jo,useCacheRefresh:jo},Xi={readContext:Na,use:Wo,useCallback:function(e,t){return Bo().memoizedState=[e,void 0===t?null:t],e},useContext:Na,useEffect:wi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Si(4194308,4,Ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Si(4194308,4,e,t)},useInsertionEffect:function(e,t){Si(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=void 0===t?null:t;var r=e();if(Io){ce(!0);try{e()}finally{ce(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(void 0!==n){var a=n(t);if(Io){ce(!0);try{n(t)}finally{ce(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Ui.bind(null,Co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Bo().memoizedState=e},useState:function(e){var t=(e=ai(e)).queue,n=Bi.bind(null,Co,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ri,useDeferredValue:function(e,t){return Pi(Bo(),e,t)},useTransition:function(){var e=ai(!1);return e=Di.bind(null,Co,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Co,o=Bo();if(ca){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===lc)throw Error(r(349));124&cc||Zo(a,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,wi(ti.bind(null,a,i,e),[e]),a.flags|=2048,yi(9,{destroy:void 0,resource:void 0},ei.bind(null,a,i,n,t),null),n},useId:function(){var e=Bo(),t=lc.identifierPrefix;if(ca){var n=na;t="¬´"+t+"R"+(n=(ta&~(1<<32-ue(ta)-1)).toString(32)+n),0<(n=No++)&&(t+="H"+n.toString(32)),t+="¬ª"}else t="¬´"+t+"r"+(n=Do++).toString(32)+"¬ª";return e.memoizedState=t},useHostTransitionStatus:Mi,useFormState:fi,useActionState:fi,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vi.bind(null,Co,!0,n),n.dispatch=t,[e,t]},useMemoCache:qo,useCacheRefresh:function(){return Bo().memoizedState=Gi.bind(null,Co)}},Ji={readContext:Na,use:Wo,useCallback:Ii,useContext:Na,useEffect:_i,useImperativeHandle:Ai,useInsertionEffect:Ci,useLayoutEffect:xi,useMemo:Ni,useReducer:Ko,useRef:bi,useState:function(){return Ko(Qo)},useDebugValue:Ri,useDeferredValue:function(e,t){return Ti(Ho(),xo.memoizedState,e,t)},useTransition:function(){var e=Ko(Qo)[0],t=Ho().memoizedState;return["boolean"==typeof e?e:Vo(e),t]},useSyncExternalStore:Yo,useId:zi,useHostTransitionStatus:Mi,useFormState:hi,useActionState:hi,useOptimistic:function(e,t){return oi(Ho(),0,e,t)},useMemoCache:qo,useCacheRefresh:Fi},Yi={readContext:Na,use:Wo,useCallback:Ii,useContext:Na,useEffect:_i,useImperativeHandle:Ai,useInsertionEffect:Ci,useLayoutEffect:xi,useMemo:Ni,useReducer:Jo,useRef:bi,useState:function(){return Jo(Qo)},useDebugValue:Ri,useDeferredValue:function(e,t){var n=Ho();return null===xo?Pi(n,e,t):Ti(n,xo.memoizedState,e,t)},useTransition:function(){var e=Jo(Qo)[0],t=Ho().memoizedState;return["boolean"==typeof e?e:Vo(e),t]},useSyncExternalStore:Yo,useId:zi,useHostTransitionStatus:Mi,useFormState:vi,useActionState:vi,useOptimistic:function(e,t){var n=Ho();return null!==xo?oi(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qo,useCacheRefresh:Fi},Zi=null,el=0;function tl(e){var t=el;return el+=1,null===Zi&&(Zi=[]),to(Zi,e,t)}function nl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function rl(e,t){if(t.$$typeof===u)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function al(e){return(0,e._init)(e._payload)}function ol(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===f?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===_&&al(a)===t.type)?(nl(t=o(t,n.props),n),t.return=e,t):(nl(t=Hr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function g(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return nl(n=Hr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=qr(t,e.mode,n)).return=e,t;case _:return g(e,t=(0,t._init)(t._payload),n)}if(N(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return g(e,tl(t),n);if(t.$$typeof===y)return g(e,Pa(e,t),n);rl(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===a?c(e,t,n,r):null;case p:return n.key===a?u(e,t,n,r):null;case _:return m(e,t,n=(a=n._init)(n._payload),r)}if(N(n)||A(n))return null!==a?null:h(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,tl(n),r);if(n.$$typeof===y)return m(e,t,Pa(e,n),r);rl(e,n)}return null}function v(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case _:return v(e,t,n,r=(0,r._init)(r._payload),a)}if(N(r)||A(r))return h(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return v(e,t,n,tl(r),a);if(r.$$typeof===y)return v(e,t,n,Pa(t,r),a);rl(t,r)}return null}function b(s,c,u,h){if("object"==typeof u&&null!==u&&u.type===f&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case d:e:{for(var S=u.key;null!==c;){if(c.key===S){if((S=u.type)===f){if(7===c.tag){n(s,c.sibling),(h=o(c,u.props.children)).return=s,s=h;break e}}else if(c.elementType===S||"object"==typeof S&&null!==S&&S.$$typeof===_&&al(S)===c.type){n(s,c.sibling),nl(h=o(c,u.props),u),h.return=s,s=h;break e}n(s,c);break}t(s,c),c=c.sibling}u.type===f?((h=Vr(u.props.children,s.mode,h,u.key)).return=s,s=h):(nl(h=Hr(u.type,u.key,u.props,null,s.mode,h),u),h.return=s,s=h)}return l(s);case p:e:{for(S=u.key;null!==c;){if(c.key===S){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(s,c.sibling),(h=o(c,u.children||[])).return=s,s=h;break e}n(s,c);break}t(s,c),c=c.sibling}(h=qr(u,s.mode,h)).return=s,s=h}return l(s);case _:return b(s,c,u=(S=u._init)(u._payload),h)}if(N(u))return function(r,o,l,s){for(var c=null,u=null,d=o,p=o=0,f=null;null!==d&&p<l.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var h=m(r,d,l[p],s);if(null===h){null===d&&(d=f);break}e&&d&&null===h.alternate&&t(r,d),o=i(h,o,p),null===u?c=h:u.sibling=h,u=h,d=f}if(p===l.length)return n(r,d),ca&&ra(r,p),c;if(null===d){for(;p<l.length;p++)null!==(d=g(r,l[p],s))&&(o=i(d,o,p),null===u?c=d:u.sibling=d,u=d);return ca&&ra(r,p),c}for(d=a(d);p<l.length;p++)null!==(f=v(d,r,p,l[p],s))&&(e&&null!==f.alternate&&d.delete(null===f.key?p:f.key),o=i(f,o,p),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(r,e)})),ca&&ra(r,p),c}(s,c,u,h);if(A(u)){if("function"!=typeof(S=A(u)))throw Error(r(150));return function(o,l,s,c){if(null==s)throw Error(r(151));for(var u=null,d=null,p=l,f=l=0,h=null,y=s.next();null!==p&&!y.done;f++,y=s.next()){p.index>f?(h=p,p=null):h=p.sibling;var b=m(o,p,y.value,c);if(null===b){null===p&&(p=h);break}e&&p&&null===b.alternate&&t(o,p),l=i(b,l,f),null===d?u=b:d.sibling=b,d=b,p=h}if(y.done)return n(o,p),ca&&ra(o,f),u;if(null===p){for(;!y.done;f++,y=s.next())null!==(y=g(o,y.value,c))&&(l=i(y,l,f),null===d?u=y:d.sibling=y,d=y);return ca&&ra(o,f),u}for(p=a(p);!y.done;f++,y=s.next())null!==(y=v(p,o,f,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),l=i(y,l,f),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach((function(e){return t(o,e)})),ca&&ra(o,f),u}(s,c,u=S.call(u),h)}if("function"==typeof u.then)return b(s,c,tl(u),h);if(u.$$typeof===y)return b(s,c,Pa(s,u),h);rl(s,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(s,c.sibling),(h=o(c,u)).return=s,s=h):(n(s,c),(h=Wr(u,s.mode,h)).return=s,s=h),l(s)):n(s,c)}return function(e,t,n,r){try{el=0;var a=b(e,t,n,r);return Zi=null,a}catch(t){if(t===Ka||t===Ja)throw t;var o=Fr(29,t,null,e.mode);return o.lanes=r,o.return=e,o}}}var il=ol(!0),ll=ol(!1),sl=O(null),cl=null;function ul(e){var t=e.alternate;M(hl,1&hl.current),M(sl,e),null===cl&&(null===t||null!==yo.current||null!==t.memoizedState)&&(cl=e)}function dl(e){if(22===e.tag){if(M(hl,hl.current),M(sl,e),null===cl){var t=e.alternate;null!==t&&null!==t.memoizedState&&(cl=e)}}else pl()}function pl(){M(hl,hl.current),M(sl,sl.current)}function fl(e){L(sl),cl===e&&(cl=null),L(hl)}var hl=O(0);function gl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||Sd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ml(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vl={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mc(),a=so(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=co(e,a,r))&&(Fc(t,e,r),uo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mc(),a=so(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=co(e,a,r))&&(Fc(t,e,r),uo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mc(),r=so(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=co(e,r,n))&&(Fc(t,e,n),uo(t,e,n))}};function yl(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!(t.prototype&&t.prototype.isPureReactComponent&&er(n,r)&&er(a,o))}function bl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vl.enqueueReplaceState(t,t.state,null)}function Sl(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=c({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var kl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function wl(e){kl(e)}function _l(e){console.error(e)}function Cl(e){kl(e)}function xl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout((function(){throw e}))}}function El(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout((function(){throw e}))}}function Al(e,t,n){return(n=so(n)).tag=3,n.payload={element:null},n.callback=function(){xl(e,t)},n}function Rl(e){return(e=so(e)).tag=3,e}function Il(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var o=r.value;e.payload=function(){return a(o)},e.callback=function(){El(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){El(t,n,r),"function"!=typeof a&&(null===Rc?Rc=new Set([this]):Rc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Nl=Error(r(461)),Pl=!1;function Tl(e,t,n,r){t.child=null===e?ll(t,null,n,r):il(t,e.child,n,r)}function Dl(e,t,n,r,a){n=n.render;var o=t.ref;if("ref"in r){var i={};for(var l in r)"ref"!==l&&(i[l]=r[l])}else i=r;return Ia(t),r=Oo(e,t,n,i,o,a),l=Fo(),null===e||Pl?(ca&&l&&oa(t),t.flags|=1,Tl(e,t,r,a),t.child):(Go(e,t,a),Zl(e,t,a))}function jl(e,t,n,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Gr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,$l(e,t,o,r,a))}if(o=e.child,!es(e,a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:er)(i,r)&&e.ref===t.ref)return Zl(e,t,a)}return t.flags|=1,(e=Ur(o,r)).ref=t.ref,e.return=t,t.child=e}function $l(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(er(o,r)&&e.ref===t.ref){if(Pl=!1,t.pendingProps=r=o,!es(e,a))return t.lanes=e.lanes,Zl(e,t,a);131072&e.flags&&(Pl=!0)}}return zl(e,t,n,r,a)}function Ol(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=t.child=e.child,o=0;null!==a;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ll(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Ll(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qa(0,null!==o?o.cachePool:null),null!==o?So(t,o):ko(),dl(t)}else null!==o?(qa(0,o.cachePool),So(t,o),pl(),t.memoizedState=null):(null!==e&&qa(0,null),ko(),pl());return Tl(e,t,a,n),t.child}function Ll(e,t,n,r){var a=Wa();return a=null===a?null:{parent:Oa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&qa(0,null),ko(),dl(t),null!==e&&Aa(e,t,r,!0),null}function Ml(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function zl(e,t,n,r,a){return Ia(t),n=Oo(e,t,n,r,void 0,a),r=Fo(),null===e||Pl?(ca&&r&&oa(t),t.flags|=1,Tl(e,t,n,a),t.child):(Go(e,t,a),Zl(e,t,a))}function Fl(e,t,n,r,a,o){return Ia(t),t.updateQueue=null,n=Mo(t,r,n,a),Lo(e),r=Fo(),null===e||Pl?(ca&&r&&oa(t),t.flags|=1,Tl(e,t,n,o),t.child):(Go(e,t,o),Zl(e,t,o))}function Gl(e,t,n,r,a){if(Ia(t),null===t.stateNode){var o=Mr,i=n.contextType;"object"==typeof i&&null!==i&&(o=Na(i)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=vl,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},io(t),i=n.contextType,o.context="object"==typeof i&&null!==i?Na(i):Mr,o.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(ml(t,n,i,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(i=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),i!==o.state&&vl.enqueueReplaceState(o,o.state,null),go(t,r,o,a),ho(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var l=t.memoizedProps,s=Sl(n,l);o.props=s;var c=o.context,u=n.contextType;i=Mr,"object"==typeof u&&null!==u&&(i=Na(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,l=t.pendingProps!==l,u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l||c!==i)&&bl(t,o,r,i),oo=!1;var p=t.memoizedState;o.state=p,go(t,r,o,a),ho(),c=t.memoizedState,l||p!==c||oo?("function"==typeof d&&(ml(t,n,d,r),c=t.memoizedState),(s=oo||yl(t,n,s,r,p,c,i))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=i,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,lo(e,t),u=Sl(n,i=t.memoizedProps),o.props=u,d=t.pendingProps,p=o.context,c=n.contextType,s=Mr,"object"==typeof c&&null!==c&&(s=Na(c)),(c="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(i!==d||p!==s)&&bl(t,o,r,s),oo=!1,p=t.memoizedState,o.state=p,go(t,r,o,a),ho();var f=t.memoizedState;i!==d||p!==f||oo||null!==e&&null!==e.dependencies&&Ra(e.dependencies)?("function"==typeof l&&(ml(t,n,l,r),f=t.memoizedState),(u=oo||yl(t,n,u,r,p,f,s)||null!==e&&null!==e.dependencies&&Ra(e.dependencies))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,s),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,s)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=s,r=u):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ml(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=il(t,e.child,null,a),t.child=il(t,null,n,a)):Tl(e,t,n,a),t.memoizedState=o.state,e=t.child):e=Zl(e,t,a),e}function Ul(e,t,n,r){return va(),t.flags|=256,Tl(e,t,n,r),t.child}var Bl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hl(e){return{baseLanes:e,cachePool:Qa()}}function Vl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Sc),e}function Wl(e,t,n){var a,o=t.pendingProps,i=!1,l=!!(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&!!(2&hl.current)),a&&(i=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(ca){if(i?ul(t):pl(),ca){var s,c=sa;if(s=c){e:{for(s=c,c=da;8!==s.nodeType;){if(!c){c=null;break e}if(null===(s=kd(s.nextSibling))){c=null;break e}}c=s}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==ea?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},(s=Fr(18,null,null,0)).stateNode=c,s.return=t,t.child=s,la=t,sa=null,s=!0):s=!1}s||fa(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return Sd(c)?t.lanes=32:t.lanes=536870912,null;fl(t)}return c=o.children,o=o.fallback,i?(pl(),c=Ql({mode:"hidden",children:c},i=t.mode),o=Vr(o,i,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(i=t.child).memoizedState=Hl(n),i.childLanes=Vl(e,a,n),t.memoizedState=Bl,o):(ul(t),ql(t,c))}if(null!==(s=e.memoizedState)&&null!==(c=s.dehydrated)){if(l)256&t.flags?(ul(t),t.flags&=-257,t=Kl(e,t,n)):null!==t.memoizedState?(pl(),t.child=e.child,t.flags|=128,t=null):(pl(),i=o.fallback,c=t.mode,o=Ql({mode:"visible",children:o.children},c),(i=Vr(i,c,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,il(t,e.child,null,n),(o=t.child).memoizedState=Hl(n),o.childLanes=Vl(e,a,n),t.memoizedState=Bl,t=i);else if(ul(t),Sd(c)){if(a=c.nextSibling&&c.nextSibling.dataset)var u=a.dgst;a=u,(o=Error(r(419))).stack="",o.digest=a,ba({value:o,source:null,stack:null}),t=Kl(e,t,n)}else if(Pl||Aa(e,t,n,!1),a=!!(n&e.childLanes),Pl||a){if(null!==(a=lc)&&0!==(o=(o=42&(o=n&-n)?1:Ee(o))&(a.suspendedLanes|n)?0:o)&&o!==s.retryLane)throw s.retryLane=o,$r(e,o),Fc(a,e,o),Nl;"$?"===c.data||Jc(),t=Kl(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=s.treeContext,sa=kd(c.nextSibling),la=t,ca=!0,ua=null,da=!1,null!==e&&(Yr[Zr++]=ta,Yr[Zr++]=na,Yr[Zr++]=ea,ta=e.id,na=e.overflow,ea=t),(t=ql(t,o.children)).flags|=4096);return t}return i?(pl(),i=o.fallback,c=t.mode,u=(s=e.child).sibling,(o=Ur(s,{mode:"hidden",children:o.children})).subtreeFlags=65011712&s.subtreeFlags,null!==u?i=Ur(u,i):(i=Vr(i,c,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(c=e.child.memoizedState)?c=Hl(n):(null!==(s=c.cachePool)?(u=Oa._currentValue,s=s.parent!==u?{parent:u,pool:u}:s):s=Qa(),c={baseLanes:c.baseLanes|n,cachePool:s}),i.memoizedState=c,i.childLanes=Vl(e,a,n),t.memoizedState=Bl,o):(ul(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function ql(e,t){return(t=Ql({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ql(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Kl(e,t,n){return il(t,e.child,null,n),(e=ql(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Xl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Jl(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Yl(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Tl(e,t,r.children,n),2&(r=hl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xl(e,n,t);else if(19===e.tag)Xl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(M(hl,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===gl(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Jl(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===gl(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Jl(t,!0,n,null,o);break;case"together":Jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),vc|=t.lanes,!(n&t.childLanes)){if(null===e)return null;if(Aa(e,t,n,!1),!(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function es(e,t){return!!(e.lanes&t)||!(null===(e=e.dependencies)||!Ra(e))}function ts(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Pl=!0;else{if(!(es(e,n)||128&t.flags))return Pl=!1,function(e,t,n){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),_a(0,Oa,e.memoizedState.cache),va();break;case 27:case 5:V(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:_a(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ul(t),t.flags|=128,null):n&t.child.childLanes?Wl(e,t,n):(ul(t),null!==(e=Zl(e,t,n))?e.sibling:null);ul(t);break;case 19:var a=!!(128&e.flags);if((r=!!(n&t.childLanes))||(Aa(e,t,n,!1),r=!!(n&t.childLanes)),a){if(r)return Yl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),M(hl,hl.current),r)break;return null;case 22:case 23:return t.lanes=0,Ol(e,t,n);case 24:_a(0,Oa,e.memoizedState.cache)}return Zl(e,t,n)}(e,t,n);Pl=!!(131072&e.flags)}else Pl=!1,ca&&1048576&t.flags&&aa(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,o=a._init;if(a=o(a._payload),t.type=a,"function"!=typeof a){if(null!=a){if((o=a.$$typeof)===b){t.tag=11,t=Dl(null,t,a,e,n);break e}if(o===w){t.tag=14,t=jl(null,t,a,e,n);break e}}throw t=I(a)||a,Error(r(306,t,""))}Gr(a)?(e=Sl(a,e),t.tag=1,t=Gl(null,t,a,e,n)):(t.tag=0,t=zl(null,t,a,e,n))}return t;case 0:return zl(e,t,t.type,t.pendingProps,n);case 1:return Gl(e,t,a=t.type,o=Sl(a,t.pendingProps),n);case 3:e:{if(B(t,t.stateNode.containerInfo),null===e)throw Error(r(387));a=t.pendingProps;var i=t.memoizedState;o=i.element,lo(e,t),go(t,a,null,n);var l=t.memoizedState;if(a=l.cache,_a(0,Oa,a),a!==i.cache&&Ea(t,[Oa],n,!0),ho(),a=l.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ul(e,t,a,n);break e}if(a!==o){ba(o=Rr(Error(r(424)),t)),t=Ul(e,t,a,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,sa=kd(e.firstChild),la=t,ca=!0,ua=null,da=!0,n=ll(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(va(),a===o){t=Zl(e,t,n);break e}Tl(e,t,a,n)}t=t.child}return t;case 26:return Ml(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:ca||(n=t.type,e=t.pendingProps,(a=ld(G.current).createElement(n))[Te]=t,a[Oe]=e,ad(a,n,e),Ke(a),t.stateNode=a):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return V(t),null===e&&ca&&(a=t.stateNode=Cd(t.type,t.pendingProps,G.current),la=t,da=!0,o=sa,vd(t.type)?(wd=o,sa=kd(a.firstChild)):sa=o),Tl(e,t,t.pendingProps.children,n),Ml(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ca&&((o=a=sa)&&(null!==(a=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===o)return e}if(null===(e=kd(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,da))?(t.stateNode=a,la=t,sa=kd(a.firstChild),da=!1,o=!0):o=!1),o||fa(t)),V(t),o=t.type,i=t.pendingProps,l=null!==e?e.memoizedProps:null,a=i.children,ud(o,i)?a=null:null!==l&&ud(o,l)&&(t.flags|=32),null!==t.memoizedState&&(o=Oo(e,t,zo,null,null,n),Yd._currentValue=o),Ml(e,t),Tl(e,t,a,n),t.child;case 6:return null===e&&ca&&((e=n=sa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=kd(e.nextSibling)))return null}return e}(n,t.pendingProps,da))?(t.stateNode=n,la=t,sa=null,e=!0):e=!1),e||fa(t)),null;case 13:return Wl(e,t,n);case 4:return B(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=il(t,null,a,n):Tl(e,t,a,n),t.child;case 11:return Dl(e,t,t.type,t.pendingProps,n);case 7:return Tl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Tl(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,_a(0,t.type,a.value),Tl(e,t,a.children,n),t.child;case 9:return o=t.type._context,a=t.pendingProps.children,Ia(t),a=a(o=Na(o)),t.flags|=1,Tl(e,t,a,n),t.child;case 14:return jl(e,t,t.type,t.pendingProps,n);case 15:return $l(e,t,t.type,t.pendingProps,n);case 19:return Yl(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},null===e?((n=Ql(a,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,a)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ol(e,t,n);case 24:return Ia(t),a=Na(Oa),null===e?(null===(o=Wa())&&(o=lc,i=La(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:a,cache:o},io(t),_a(0,Oa,o)):(!!(e.lanes&n)&&(lo(e,t),go(t,null,null,n),ho()),o=e.memoizedState,i=t.memoizedState,o.parent!==a?(o={parent:a,cache:a},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),_a(0,Oa,a)):(a=i.cache,_a(0,Oa,a),a!==o.cache&&Ea(t,[Oa],n,!0))),Tl(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ns(e){e.flags|=4}function rs(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Vd(t)){if(null!==(t=sl.current)&&((4194048&cc)===cc?null!==cl:(62914560&cc)!==cc&&!(536870912&cc)||t!==cl))throw no=Ya,Xa;e.flags|=8192}}function as(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,kc|=t)}function os(e,t){if(!ca)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ls(e,t,n){var a=t.pendingProps;switch(ia(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return is(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ca(Oa),H(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ma(t)?ns(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,ya())),is(t),null;case 26:return n=t.memoizedState,null===e?(ns(t),null!==n?(is(t),rs(t,n)):(is(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ns(t),is(t),rs(t,n)):(is(t),t.flags&=-16777217):(e.memoizedProps!==a&&ns(t),is(t),t.flags&=-16777217),null;case 27:W(t),n=G.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==a&&ns(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return is(t),null}e=z.current,ma(t)?ha(t):(e=Cd(o,a,n),t.stateNode=e,ns(t))}return is(t),null;case 5:if(W(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&ns(t);else{if(!a){if(null===t.stateNode)throw Error(r(166));return is(t),null}if(e=z.current,ma(t))ha(t);else{switch(o=ld(G.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof a.is?o.createElement("select",{is:a.is}):o.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e="string"==typeof a.is?o.createElement(n,{is:a.is}):o.createElement(n)}}e[Te]=t,e[Oe]=a;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(ad(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ns(t)}}return is(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&ns(t);else{if("string"!=typeof a&&null===t.stateNode)throw Error(r(166));if(e=G.current,ma(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(o=la))switch(o.tag){case 27:case 5:a=o.memoizedProps}e[Te]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||ed(e.nodeValue,n)))||fa(t)}else(e=ld(e).createTextNode(a))[Te]=t,t.stateNode=e}return is(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ma(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[Te]=t}else va(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;is(t),o=!1}else o=ya(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(fl(t),t):(fl(t),null)}if(fl(t),128&t.flags)return t.lanes=n,t;if(n=null!==a,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(o=a.alternate.memoizedState.cachePool.pool);var i=null;null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(i=a.memoizedState.cachePool.pool),i!==o&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),as(t,t.updateQueue),is(t),null;case 4:return H(),null===e&&Hu(t.stateNode.containerInfo),is(t),null;case 10:return Ca(t.type),is(t),null;case 19:if(L(hl),null===(o=t.memoizedState))return is(t),null;if(a=!!(128&t.flags),null===(i=o.rendering))if(a)os(o,!1);else{if(0!==mc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=gl(e))){for(t.flags|=128,os(o,!1),e=i.updateQueue,t.updateQueue=e,as(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return M(hl,1&hl.current|2),t.child}e=e.sibling}null!==o.tail&&Y()>Ec&&(t.flags|=128,a=!0,os(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=gl(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,as(t,e),os(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!ca)return is(t),null}else 2*Y()-o.renderingStartTime>Ec&&536870912!==n&&(t.flags|=128,a=!0,os(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Y(),t.sibling=null,e=hl.current,M(hl,a?1&e|2:1&e),t):(is(t),null);case 22:case 23:return fl(t),wo(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(is(t),6&t.subtreeFlags&&(t.flags|=8192)):is(t),null!==(n=t.updateQueue)&&as(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&L(Va),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ca(Oa),is(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function ss(e,t){switch(ia(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ca(Oa),H(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return W(t),null;case 13:if(fl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return L(hl),null;case 4:return H(),null;case 10:return Ca(t.type),null;case 22:case 23:return fl(t),wo(),null!==e&&L(Va),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ca(Oa),null;default:return null}}function cs(e,t){switch(ia(t),t.tag){case 3:Ca(Oa),H();break;case 26:case 27:case 5:W(t);break;case 4:H();break;case 13:fl(t);break;case 19:L(hl);break;case 10:Ca(t.type);break;case 22:case 23:fl(t),wo(),null!==e&&L(Va);break;case 24:Ca(Oa)}}function us(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var o=n.create,i=n.inst;r=o(),i.destroy=r}n=n.next}while(n!==a)}}catch(e){hu(t,t.return,e)}}function ds(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var o=a.next;r=o;do{if((r.tag&e)===e){var i=r.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,a=t;var s=n,c=l;try{c()}catch(e){hu(a,s,e)}}}r=r.next}while(r!==o)}}catch(e){hu(t,t.return,e)}}function ps(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{vo(t,n)}catch(t){hu(e,e.return,t)}}}function fs(e,t,n){n.props=Sl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){hu(e,t,n)}}function hs(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){hu(e,t,n)}}function gs(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){hu(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){hu(e,t,n)}else n.current=null}function ms(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){hu(e,e.return,t)}}function vs(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,l=null,s=null,c=null,u=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&null!=p)switch(h){case"checked":case"value":break;case"defaultValue":c=p;default:a.hasOwnProperty(h)||nd(e,t,h,null,a,p)}}for(var f in a){var h=a[f];if(p=n[f],a.hasOwnProperty(f)&&(null!=h||null!=p))switch(f){case"type":i=h;break;case"name":o=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":l=h;break;case"defaultValue":s=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:h!==p&&nd(e,t,f,h,a,p)}}return void St(e,l,s,c,u,d,i,o);case"select":for(i in h=l=s=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":h=c;default:a.hasOwnProperty(i)||nd(e,t,i,null,a,c)}for(o in a)if(i=a[o],c=n[o],a.hasOwnProperty(o)&&(null!=i||null!=c))switch(o){case"value":f=i;break;case"defaultValue":s=i;break;case"multiple":l=i;default:i!==c&&nd(e,t,o,i,a,c)}return t=s,n=l,a=h,void(null!=f?_t(e,!!n,f,!1):!!a!=!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(s in h=f=null,n)if(o=n[s],n.hasOwnProperty(s)&&null!=o&&!a.hasOwnProperty(s))switch(s){case"value":case"children":break;default:nd(e,t,s,null,a,o)}for(l in a)if(o=a[l],i=n[l],a.hasOwnProperty(l)&&(null!=o||null!=i))switch(l){case"value":f=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==i&&nd(e,t,l,o,a,i)}return void Ct(e,f,h);case"option":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!a.hasOwnProperty(g)&&("selected"===g?e.selected=!1:nd(e,t,g,null,a,f));for(c in a)f=a[c],h=n[c],!a.hasOwnProperty(c)||f===h||null==f&&null==h||("selected"===c?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:nd(e,t,c,f,a,h));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!a.hasOwnProperty(m)&&nd(e,t,m,null,a,f);for(u in a)if(f=a[u],h=n[u],a.hasOwnProperty(u)&&f!==h&&(null!=f||null!=h))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:nd(e,t,u,f,a,h)}return;default:if(Nt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!a.hasOwnProperty(v)&&rd(e,t,v,void 0,a,f);for(d in a)f=a[d],h=n[d],!a.hasOwnProperty(d)||f===h||void 0===f&&void 0===h||rd(e,t,d,f,a,h);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!a.hasOwnProperty(y)&&nd(e,t,y,null,a,f);for(p in a)f=a[p],h=n[p],!a.hasOwnProperty(p)||f===h||null==f&&null==h||nd(e,t,p,f,a,h)}(a,e.type,n,t),a[Oe]=t}catch(t){hu(e,e.return,t)}}function ys(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&vd(e.type)||4===e.tag}function bs(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ys(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&vd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=td));else if(4!==r&&(27===r&&vd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function ks(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&vd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(ks(e,t,n),e=e.sibling;null!==e;)ks(e,t,n),e=e.sibling}function ws(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ad(t,r,n),t[Te]=e,t[Oe]=n}catch(t){hu(e,e.return,t)}}var _s=!1,Cs=!1,xs=!1,Es="function"==typeof WeakSet?WeakSet:Set,As=null;function Rs(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Gs(e,n),4&r&&us(5,n);break;case 1:if(Gs(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){hu(n,n.return,e)}else{var a=Sl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){hu(n,n.return,e)}}64&r&&ps(n),512&r&&hs(n,n.return);break;case 3:if(Gs(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{vo(e,t)}catch(e){hu(n,n.return,e)}}break;case 27:null===t&&4&r&&ws(n);case 26:case 5:Gs(e,n),null===t&&4&r&&ms(n),512&r&&hs(n,n.return);break;case 12:Gs(e,n);break;case 13:Gs(e,n),4&r&&js(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=yu.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||_s)){t=null!==t&&null!==t.memoizedState||Cs,a=_s;var o=Cs;_s=r,(Cs=t)&&!o?Bs(e,n,!!(8772&n.subtreeFlags)):Gs(e,n),_s=a,Cs=o}break;case 30:break;default:Gs(e,n)}}function Is(e){var t=e.alternate;null!==t&&(e.alternate=null,Is(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&He(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ns=null,Ps=!1;function Ts(e,t,n){for(n=n.child;null!==n;)Ds(e,t,n),n=n.sibling}function Ds(e,t,n){if(se&&"function"==typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(le,n)}catch(e){}switch(n.tag){case 26:Cs||gs(n,t),Ts(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Cs||gs(n,t);var r=Ns,a=Ps;vd(n.type)&&(Ns=n.stateNode,Ps=!1),Ts(e,t,n),xd(n.stateNode),Ns=r,Ps=a;break;case 5:Cs||gs(n,t);case 6:if(r=Ns,a=Ps,Ns=null,Ts(e,t,n),Ps=a,null!==(Ns=r))if(Ps)try{(9===Ns.nodeType?Ns.body:"HTML"===Ns.nodeName?Ns.ownerDocument.body:Ns).removeChild(n.stateNode)}catch(e){hu(n,t,e)}else try{Ns.removeChild(n.stateNode)}catch(e){hu(n,t,e)}break;case 18:null!==Ns&&(Ps?(yd(9===(e=Ns).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Pp(e)):yd(Ns,n.stateNode));break;case 4:r=Ns,a=Ps,Ns=n.stateNode.containerInfo,Ps=!0,Ts(e,t,n),Ns=r,Ps=a;break;case 0:case 11:case 14:case 15:Cs||ds(2,n,t),Cs||ds(4,n,t),Ts(e,t,n);break;case 1:Cs||(gs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&fs(n,t,r)),Ts(e,t,n);break;case 21:Ts(e,t,n);break;case 22:Cs=(r=Cs)||null!==n.memoizedState,Ts(e,t,n),Cs=r;break;default:Ts(e,t,n)}}function js(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Pp(e)}catch(e){hu(t,t.return,e)}}function $s(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Es),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Es),t;default:throw Error(r(435,e.tag))}}(e);t.forEach((function(t){var r=bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Os(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var o=n[a],i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 27:if(vd(s.type)){Ns=s.stateNode,Ps=!1;break e}break;case 5:Ns=s.stateNode,Ps=!1;break e;case 3:case 4:Ns=s.stateNode.containerInfo,Ps=!0;break e}s=s.return}if(null===Ns)throw Error(r(160));Ds(i,l,o),Ns=null,Ps=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ms(t,e),t=t.sibling}var Ls=null;function Ms(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Os(t,e),zs(e),4&a&&(ds(3,e,e.return),us(3,e),ds(5,e,e.return));break;case 1:Os(t,e),zs(e),512&a&&(Cs||null===n||gs(n,n.return)),64&a&&_s&&null!==(e=e.updateQueue)&&null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a));break;case 26:var o=Ls;if(Os(t,e),zs(e),512&a&&(Cs||null===n||gs(n,n.return)),4&a){var i=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(a){case"title":(!(i=o.getElementsByTagName("title")[0])||i[Be]||i[Te]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(a),o.head.insertBefore(i,o.querySelector("head > title"))),ad(i,a,n),i[Te]=e,Ke(i),a=i;break e;case"link":var l=Bd("link","href",o).get(a+(n.href||""));if(l)for(var s=0;s<l.length;s++)if((i=l[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(s,1);break t}ad(i=o.createElement(a),a,n),o.head.appendChild(i);break;case"meta":if(l=Bd("meta","content",o).get(a+(n.content||"")))for(s=0;s<l.length;s++)if((i=l[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(s,1);break t}ad(i=o.createElement(a),a,n),o.head.appendChild(i);break;default:throw Error(r(468,a))}i[Te]=e,Ke(i),a=i}e.stateNode=a}else Hd(o,e.type,e.stateNode);else e.stateNode=Md(o,a,e.memoizedProps);else i!==a?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===a?Hd(o,e.type,e.stateNode):Md(o,a,e.memoizedProps)):null===a&&null!==e.stateNode&&vs(e,e.memoizedProps,n.memoizedProps)}break;case 27:Os(t,e),zs(e),512&a&&(Cs||null===n||gs(n,n.return)),null!==n&&4&a&&vs(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Os(t,e),zs(e),512&a&&(Cs||null===n||gs(n,n.return)),32&e.flags){o=e.stateNode;try{Et(o,"")}catch(t){hu(e,e.return,t)}}4&a&&null!=e.stateNode&&vs(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&a&&(xs=!0);break;case 6:if(Os(t,e),zs(e),4&a){if(null===e.stateNode)throw Error(r(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(t){hu(e,e.return,t)}}break;case 3:if(Ud=null,o=Ls,Ls=Rd(t.containerInfo),Os(t,e),Ls=o,zs(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Pp(t.containerInfo)}catch(t){hu(e,e.return,t)}xs&&(xs=!1,Fs(e));break;case 4:a=Ls,Ls=Rd(e.stateNode.containerInfo),Os(t,e),zs(e),Ls=a;break;case 12:default:Os(t,e),zs(e);break;case 13:Os(t,e),zs(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(xc=Y()),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,$s(e,a));break;case 22:o=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_s,d=Cs;if(_s=u||o,Cs=d||c,Os(t,e),Cs=d,_s=u,zs(e),8192&a)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||c||_s||Cs||Us(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,o)"function"==typeof(l=i.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{s=c.stateNode;var p=c.memoizedProps.style,f=null!=p&&p.hasOwnProperty("display")?p.display:null;s.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(e){hu(c,c.return,e)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(e){hu(c,c.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&null!==(a=e.updateQueue)&&null!==(n=a.retryQueue)&&(a.retryQueue=null,$s(e,n));break;case 19:Os(t,e),zs(e),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,$s(e,a));case 30:case 21:}}function zs(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(ys(a)){n=a;break}a=a.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var o=n.stateNode;ks(e,bs(e),o);break;case 5:var i=n.stateNode;32&n.flags&&(Et(i,""),n.flags&=-33),ks(e,bs(e),i);break;case 3:case 4:var l=n.stateNode.containerInfo;Ss(e,bs(e),l);break;default:throw Error(r(161))}}catch(t){hu(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fs(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fs(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Gs(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Rs(e,t.alternate,t),t=t.sibling}function Us(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ds(4,t,t.return),Us(t);break;case 1:gs(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&fs(t,t.return,n),Us(t);break;case 27:xd(t.stateNode);case 26:case 5:gs(t,t.return),Us(t);break;case 22:null===t.memoizedState&&Us(t);break;default:Us(t)}e=e.sibling}}function Bs(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Bs(a,o,n),us(4,o);break;case 1:if(Bs(a,o,n),"function"==typeof(a=(r=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){hu(r,r.return,e)}if(null!==(a=(r=o).updateQueue)){var l=r.stateNode;try{var s=a.shared.hiddenCallbacks;if(null!==s)for(a.shared.hiddenCallbacks=null,a=0;a<s.length;a++)mo(s[a],l)}catch(e){hu(r,r.return,e)}}n&&64&i&&ps(o),hs(o,o.return);break;case 27:ws(o);case 26:case 5:Bs(a,o,n),n&&null===r&&4&i&&ms(o),hs(o,o.return);break;case 12:Bs(a,o,n);break;case 13:Bs(a,o,n),n&&4&i&&js(a,o);break;case 22:null===o.memoizedState&&Bs(a,o,n),hs(o,o.return);break;case 30:break;default:Bs(a,o,n)}t=t.sibling}}function Hs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ma(n))}function Vs(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ma(e))}function Ws(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)qs(e,t,n,r),t=t.sibling}function qs(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Ws(e,t,n,r),2048&a&&us(9,t);break;case 1:case 13:default:Ws(e,t,n,r);break;case 3:Ws(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ma(e)));break;case 12:if(2048&a){Ws(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;"function"==typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){hu(t,t.return,e)}}else Ws(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,null!==t.memoizedState?2&o._visibility?Ws(e,t,n,r):Ks(e,t):2&o._visibility?Ws(e,t,n,r):(o._visibility|=2,Qs(e,t,n,r,!!(10256&t.subtreeFlags))),2048&a&&Hs(i,t);break;case 24:Ws(e,t,n,r),2048&a&&Vs(t.alternate,t)}}function Qs(e,t,n,r,a){for(a=a&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,i=t,l=n,s=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:Qs(o,i,l,s,a),us(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?Qs(o,i,l,s,a):Ks(o,i):(u._visibility|=2,Qs(o,i,l,s,a)),a&&2048&c&&Hs(i.alternate,i);break;case 24:Qs(o,i,l,s,a),a&&2048&c&&Vs(i.alternate,i);break;default:Qs(o,i,l,s,a)}t=t.sibling}}function Ks(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Ks(n,r),2048&a&&Hs(r.alternate,r);break;case 24:Ks(n,r),2048&a&&Vs(r.alternate,r);break;default:Ks(n,r)}t=t.sibling}}var Xs=8192;function Js(e){if(e.subtreeFlags&Xs)for(e=e.child;null!==e;)Ys(e),e=e.sibling}function Ys(e){switch(e.tag){case 26:Js(e),e.flags&Xs&&null!==e.memoizedState&&function(e,t,n){if(null===Wd)throw Error(r(475));var a=Wd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=Dd(n.href),i=e.querySelector(jd(o));if(i)return null!==(e=i._p)&&"object"==typeof e&&"function"==typeof e.then&&(a.count++,a=Qd.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=i,void Ke(i);i=e.ownerDocument||e,n=$d(n),(o=Ed.get(o))&&Fd(n,o),Ke(i=i.createElement("link"));var l=i;l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),ad(i,"link",n),t.instance=i}null===a.stylesheets&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(a.count++,t=Qd.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ls,e.memoizedState,e.memoizedProps);break;case 5:default:Js(e);break;case 3:case 4:var t=Ls;Ls=Rd(e.stateNode.containerInfo),Js(e),Ls=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Xs,Xs=16777216,Js(e),Xs=t):Js(e))}}function Zs(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];As=r,rc(r,e)}Zs(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)tc(e),e=e.sibling}function tc(e){switch(e.tag){case 0:case 11:case 15:ec(e),2048&e.flags&&ds(9,e,e.return);break;case 3:case 12:default:ec(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,nc(e)):ec(e)}}function nc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];As=r,rc(r,e)}Zs(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ds(8,t,t.return),nc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,nc(t));break;default:nc(t)}e=e.sibling}}function rc(e,t){for(;null!==As;){var n=As;switch(n.tag){case 0:case 11:case 15:ds(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ma(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,As=r;else e:for(n=e;null!==As;){var a=(r=As).sibling,o=r.return;if(Is(r),r===n){As=null;break e}if(null!==a){a.return=o,As=a;break e}As=o}}}var ac={getCacheForType:function(e){var t=Na(Oa),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},oc="function"==typeof WeakMap?WeakMap:Map,ic=0,lc=null,sc=null,cc=0,uc=0,dc=null,pc=!1,fc=!1,hc=!1,gc=0,mc=0,vc=0,yc=0,bc=0,Sc=0,kc=0,wc=null,_c=null,Cc=!1,xc=0,Ec=1/0,Ac=null,Rc=null,Ic=0,Nc=null,Pc=null,Tc=0,Dc=0,jc=null,$c=null,Oc=0,Lc=null;function Mc(){return 2&ic&&0!==cc?cc&-cc:null!==P.T?0!==Ga?Ga:Du():Ie()}function zc(){0===Sc&&(Sc=536870912&cc&&!ca?536870912:be());var e=sl.current;return null!==e&&(e.flags|=32),Sc}function Fc(e,t,n){(e!==lc||2!==uc&&9!==uc)&&null===e.cancelPendingCommit||(qc(e,0),Hc(e,cc,Sc,!1)),we(e,n),2&ic&&e===lc||(e===lc&&(!(2&ic)&&(yc|=n),4===mc&&Hc(e,cc,Sc,!1)),Eu(e))}function Gc(e,t,n){if(6&ic)throw Error(r(327));for(var a=!n&&!(124&t)&&!(t&e.expiredLanes)||ve(e,t),o=a?function(e,t){var n=ic;ic|=2;var a=Kc(),o=Xc();lc!==e||cc!==t?(Ac=null,Ec=Y()+500,qc(e,t)):fc=ve(e,t);e:for(;;)try{if(0!==uc&&null!==sc){t=sc;var i=dc;t:switch(uc){case 1:uc=0,dc=null,ru(e,t,i,1);break;case 2:case 9:if(Za(i)){uc=0,dc=null,nu(t);break}t=function(){2!==uc&&9!==uc||lc!==e||(uc=7),Eu(e)},i.then(t,t);break e;case 3:uc=7;break e;case 4:uc=5;break e;case 7:Za(i)?(uc=0,dc=null,nu(t)):(uc=0,dc=null,ru(e,t,i,7));break;case 5:var l=null;switch(sc.tag){case 26:l=sc.memoizedState;case 5:case 27:var s=sc;if(!l||Vd(l)){uc=0,dc=null;var c=s.sibling;if(null!==c)sc=c;else{var u=s.return;null!==u?(sc=u,au(u)):sc=null}break t}}uc=0,dc=null,ru(e,t,i,5);break;case 6:uc=0,dc=null,ru(e,t,i,6);break;case 8:Wc(),mc=6;break e;default:throw Error(r(462))}}eu();break}catch(t){Qc(e,t)}return wa=ka=null,P.H=a,P.A=o,ic=n,null!==sc?0:(lc=null,cc=0,Tr(),mc)}(e,t):Yc(e,t,!0),i=a;;){if(0===o){fc&&!a&&Hc(e,t,0,!1);break}if(n=e.current.alternate,!i||Bc(n)){if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var l=0;else l=0!=(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var s=e;o=wc;var c=s.current.memoizedState.isDehydrated;if(c&&(qc(s,l).flags|=256),2!==(l=Yc(s,l,!1))){if(hc&&!c){s.errorRecoveryDisabledLanes|=i,yc|=i,o=4;break e}i=_c,_c=o,null!==i&&(null===_c?_c=i:_c.push.apply(_c,i))}o=l}if(i=!1,2!==o)continue}}if(1===o){qc(e,0),Hc(e,t,0,!0);break}e:{switch(a=e,i=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Hc(a,t,Sc,!pc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=xc+300-Y())){if(Hc(a,t,Sc,!pc),0!==me(a,0,!0))break e;a.timeoutHandle=pd(Uc.bind(null,a,n,_c,Ac,Cc,t,Sc,yc,kc,pc,i,2,-0,0),o)}else Uc(a,n,_c,Ac,Cc,t,Sc,yc,kc,pc,i,0,-0,0)}break}o=Yc(e,t,!1),i=!1}Eu(e)}function Uc(e,t,n,a,o,i,l,s,c,u,d,p,f,h){if(e.timeoutHandle=-1,(8192&(p=t.subtreeFlags)||!(16785408&~p))&&(Wd={stylesheets:null,count:0,unsuspend:qd},Ys(t),null!==(p=function(){if(null===Wd)throw Error(r(475));var e=Wd;return e.stylesheets&&0===e.count&&Xd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Xd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=p(iu.bind(null,e,t,i,n,a,o,l,s,c,d,1,f,h)),void Hc(e,i,l,!u);iu(e,t,i,n,a,o,l,s,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Zn(o(),a))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hc(e,t,n,r){t&=~bc,t&=~yc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var o=31-ue(a),i=1<<o;r[o]=-1,a&=~i}0!==n&&_e(e,n,t)}function Vc(){return!!(6&ic)||(Au(0,!1),!1)}function Wc(){if(null!==sc){if(0===uc)var e=sc.return;else wa=ka=null,Uo(e=sc),Zi=null,el=0,e=sc;for(;null!==e;)cs(e.alternate,e),e=e.return;sc=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,fd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Wc(),lc=e,sc=n=Ur(e.current,null),cc=t,uc=0,dc=null,pc=!1,fc=ve(e,t),hc=!1,kc=Sc=bc=yc=vc=mc=0,_c=wc=null,Cc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-ue(r),o=1<<a;t|=e[a],r&=~o}return gc=t,Tr(),n}function Qc(e,t){Co=null,P.H=Ki,t===Ka||t===Ja?(t=ro(),uc=3):t===Xa?(t=ro(),uc=4):uc=t===Nl?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,dc=t,null===sc&&(mc=1,xl(e,Rr(t,e.current)))}function Kc(){var e=P.H;return P.H=Ki,null===e?Ki:e}function Xc(){var e=P.A;return P.A=ac,e}function Jc(){mc=4,pc||(4194048&cc)!==cc&&null!==sl.current||(fc=!0),!(134217727&vc)&&!(134217727&yc)||null===lc||Hc(lc,cc,Sc,!1)}function Yc(e,t,n){var r=ic;ic|=2;var a=Kc(),o=Xc();lc===e&&cc===t||(Ac=null,qc(e,t)),t=!1;var i=mc;e:for(;;)try{if(0!==uc&&null!==sc){var l=sc,s=dc;switch(uc){case 8:Wc(),i=6;break e;case 3:case 2:case 9:case 6:null===sl.current&&(t=!0);var c=uc;if(uc=0,dc=null,ru(e,l,s,c),n&&fc){i=0;break e}break;default:c=uc,uc=0,dc=null,ru(e,l,s,c)}}Zc(),i=mc;break}catch(t){Qc(e,t)}return t&&e.shellSuspendCounter++,wa=ka=null,ic=r,P.H=a,P.A=o,null===sc&&(lc=null,cc=0,Tr()),i}function Zc(){for(;null!==sc;)tu(sc)}function eu(){for(;null!==sc&&!X();)tu(sc)}function tu(e){var t=ts(e.alternate,e,gc);e.memoizedProps=e.pendingProps,null===t?au(e):sc=t}function nu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fl(n,t,t.pendingProps,t.type,void 0,cc);break;case 11:t=Fl(n,t,t.pendingProps,t.type.render,t.ref,cc);break;case 5:Uo(t);default:cs(n,t),t=ts(n,t=sc=Br(t,gc),gc)}e.memoizedProps=e.pendingProps,null===t?au(e):sc=t}function ru(e,t,n,a){wa=ka=null,Uo(t),Zi=null,el=0;var o=t.return;try{if(function(e,t,n,a,o){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&Aa(t,n,o,!0),null!==(n=sl.current)){switch(n.tag){case 13:return null===cl?Jc():null===n.alternate&&0===mc&&(mc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,a===Ya?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),gu(e,a,o)),!1;case 22:return n.flags|=65536,a===Ya?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),gu(e,a,o)),!1}throw Error(r(435,n.tag))}return gu(e,a,o),Jc(),!1}if(ca)return null!==(t=sl.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,a!==pa&&ba(Rr(e=Error(r(422),{cause:a}),n))):(a!==pa&&ba(Rr(t=Error(r(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,a=Rr(a,n),po(e,o=Al(e.stateNode,a,o)),4!==mc&&(mc=2)),!1;var i=Error(r(520),{cause:a});if(i=Rr(i,n),null===wc?wc=[i]:wc.push(i),4!==mc&&(mc=2),null===t)return!0;a=Rr(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,po(n,e=Al(n.stateNode,a,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Rc&&Rc.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Il(o=Rl(o),e,n,a),po(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,cc))return mc=1,xl(e,Rr(n,e.current)),void(sc=null)}catch(t){if(null!==o)throw sc=o,t;return mc=1,xl(e,Rr(n,e.current)),void(sc=null)}32768&t.flags?(ca||1===a?e=!0:fc||536870912&cc?e=!1:(pc=e=!0,(2===a||9===a||3===a||6===a)&&null!==(a=sl.current)&&13===a.tag&&(a.flags|=16384)),ou(t,e)):au(t)}function au(e){var t=e;do{if(32768&t.flags)return void ou(t,pc);e=t.return;var n=ls(t.alternate,t,gc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===mc&&(mc=5)}function ou(e,t){do{var n=ss(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);mc=6,sc=null}function iu(e,t,n,a,o,i,l,s,c){e.cancelPendingCommit=null;do{du()}while(0!==Ic);if(6&ic)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,s=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-ue(n),d=1<<u;l[u]=0,s[u]=-1;var p=c[u];if(null!==p)for(c[u]=null,u=0;u<p.length;u++){var f=p[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&_e(e,r,0),0!==o&&0===a&&0!==e.tag&&(e.suspendedLanes|=o&~(i&~t))}(e,n,i|=Pr,l,s,c),e===lc&&(sc=lc=null,cc=0),Pc=t,Nc=e,Tc=n,Dc=i,jc=o,$c=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,Q(ne,(function(){return pu(),null}))):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=P.T,P.T=null,o=T.p,T.p=2,l=ic,ic|=4;try{!function(e,t){if(e=e.containerInfo,od=ip,or(e=ar(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var o=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(e){n=null;break e}var l=0,s=-1,c=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||0!==o&&3!==p.nodeType||(s=l+o),p!==i||0!==a&&3!==p.nodeType||(c=l+a),3===p.nodeType&&(l+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++u===o&&(s=l),f===i&&++d===a&&(c=l),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},ip=!1,As=t;null!==As;)if(e=(t=As).child,1024&t.subtreeFlags&&null!==e)e.return=t,As=e;else for(;null!==As;){switch(i=(t=As).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var g=Sl(n.type,o,(n.elementType,n.type));e=a.getSnapshotBeforeUpdate(g,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(e){hu(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))bd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,As=e;break}As=t.return}}(e,t)}finally{ic=l,T.p=o,P.T=a}}Ic=1,lu(),su(),cu()}}function lu(){if(1===Ic){Ic=0;var e=Nc,t=Pc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=P.T,P.T=null;var r=T.p;T.p=2;var a=ic;ic|=4;try{Ms(t,e);var o=id,i=ar(e.containerInfo),l=o.focusedElem,s=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&rr(l.ownerDocument.documentElement,l)){if(null!==s&&or(l)){var c=s.start,u=s.end;if(void 0===u&&(u=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(u,l.value.length);else{var d=l.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var f=p.getSelection(),h=l.textContent.length,g=Math.min(s.start,h),m=void 0===s.end?g:Math.min(s.end,h);!f.extend&&g>m&&(i=m,m=g,g=i);var v=nr(l,g),y=nr(l,m);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=l;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof l.focus&&l.focus(),l=0;l<d.length;l++){var S=d[l];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}ip=!!od,id=od=null}finally{ic=a,T.p=r,P.T=n}}e.current=t,Ic=2}}function su(){if(2===Ic){Ic=0;var e=Nc,t=Pc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=P.T,P.T=null;var r=T.p;T.p=2;var a=ic;ic|=4;try{Rs(e,t.alternate,t)}finally{ic=a,T.p=r,P.T=n}}Ic=3}}function cu(){if(4===Ic||3===Ic){Ic=0,J();var e=Nc,t=Pc,n=Tc,r=$c;10256&t.subtreeFlags||10256&t.flags?Ic=5:(Ic=0,Pc=Nc=null,uu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Rc=null),Ae(n),t=t.stateNode,se&&"function"==typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(le,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=P.T,a=T.p,T.p=2,P.T=null;try{for(var o=e.onRecoverableError,i=0;i<r.length;i++){var l=r[i];o(l.value,{componentStack:l.stack})}}finally{P.T=t,T.p=a}}3&Tc&&du(),Eu(e),a=e.pendingLanes,4194090&n&&42&a?e===Lc?Oc++:(Oc=0,Lc=e):Oc=0,Au(0,!1)}}function uu(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Ma(t))}function du(e){return lu(),su(),cu(),pu()}function pu(){if(5!==Ic)return!1;var e=Nc,t=Dc;Dc=0;var n=Ae(Tc),a=P.T,o=T.p;try{T.p=32>n?32:n,P.T=null,n=jc,jc=null;var i=Nc,l=Tc;if(Ic=0,Pc=Nc=null,Tc=0,6&ic)throw Error(r(331));var s=ic;if(ic|=4,tc(i.current),qs(i,i.current,l,n),ic=s,Au(0,!1),se&&"function"==typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(le,i)}catch(e){}return!0}finally{T.p=o,P.T=a,uu(e,t)}}function fu(e,t,n){t=Rr(n,t),null!==(e=co(e,t=Al(e.stateNode,t,2),2))&&(we(e,2),Eu(e))}function hu(e,t,n){if(3===e.tag)fu(e,e,n);else for(;null!==t;){if(3===t.tag){fu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Rc||!Rc.has(r))){e=Rr(n,e),null!==(r=co(t,n=Rl(2),2))&&(Il(n,r,t,e),we(r,2),Eu(r));break}}t=t.return}}function gu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new oc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(hc=!0,a.add(n),e=mu.bind(null,e,t,n),t.then(e,e))}function mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,lc===e&&(cc&n)===n&&(4===mc||3===mc&&(62914560&cc)===cc&&300>Y()-xc?!(2&ic)&&qc(e,0):bc|=n,kc===cc&&(kc=0)),Eu(e)}function vu(e,t){0===t&&(t=Se()),null!==(e=$r(e,t))&&(we(e,t),Eu(e))}function yu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vu(e,n)}function bu(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==a&&a.delete(t),vu(e,n)}var Su=null,ku=null,wu=!1,_u=!1,Cu=!1,xu=0;function Eu(e){e!==ku&&null===e.next&&(null===ku?Su=ku=e:ku=ku.next=e),_u=!0,wu||(wu=!0,gd((function(){6&ic?Q(ee,Ru):Iu()})))}function Au(e,t){if(!Cu&&_u){Cu=!0;do{for(var n=!1,r=Su;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var o=0;else{var i=r.suspendedLanes,l=r.pingedLanes;o=(1<<31-ue(42|e)+1)-1,o=201326741&(o&=a&~(i&~l))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Tu(r,o))}else o=cc,!(3&(o=me(r,r===lc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ve(r,o)||(n=!0,Tu(r,o));r=r.next}}while(n);Cu=!1}}function Ru(){Iu()}function Iu(){_u=wu=!1;var e,t=0;0!==xu&&(((e=window.event)&&"popstate"===e.type?e!==dd&&(dd=e,!0):(dd=null,!1))&&(t=xu),xu=0);for(var n=Y(),r=null,a=Su;null!==a;){var o=a.next,i=Nu(a,n);0===i?(a.next=null,null===r?Su=o:r.next=o,null===o&&(ku=r)):(r=a,(0!==t||3&i)&&(_u=!0)),a=o}Au(t,!1)}function Nu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var i=31-ue(o),l=1<<i,s=a[i];-1===s?l&n&&!(l&r)||(a[i]=ye(l,t)):s<=t&&(e.expiredLanes|=l),o&=~l}if(n=cc,n=me(e,e===(t=lc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===uc||9===uc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&K(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||ve(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&K(r),Ae(n)){case 2:case 8:n=te;break;case 32:default:n=ne;break;case 268435456:n=ae}return r=Pu.bind(null,e),n=Q(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&K(r),e.callbackPriority=2,e.callbackNode=null,2}function Pu(e,t){if(0!==Ic&&5!==Ic)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(du()&&e.callbackNode!==n)return null;var r=cc;return 0===(r=me(e,e===lc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Gc(e,r,t),Nu(e,Y()),null!=e.callbackNode&&e.callbackNode===n?Pu.bind(null,e):null)}function Tu(e,t){if(du())return null;Gc(e,t,!0)}function Du(){return 0===xu&&(xu=be()),xu}function ju(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Dt(""+e)}function $u(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ou=0;Ou<xr.length;Ou++){var Lu=xr[Ou];Er(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}Er(vr,"onAnimationEnd"),Er(yr,"onAnimationIteration"),Er(br,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Sr,"onTransitionRun"),Er(kr,"onTransitionStart"),Er(wr,"onTransitionCancel"),Er(_r,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Fu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=c;try{o(a)}catch(e){kl(e)}a.currentTarget=null,o=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,c=l.currentTarget,l=l.listener,s!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=c;try{o(a)}catch(e){kl(e)}a.currentTarget=null,o=s}}}}function Gu(e,t){var n=t[ze];void 0===n&&(n=t[ze]=new Set);var r=e+"__bubble";n.has(r)||(Vu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),Vu(n,e,r,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Hu(e){if(!e[Bu]){e[Bu]=!0,Xe.forEach((function(t){"selectionchange"!==t&&(zu.has(t)||Uu(t,!1,e),Uu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Uu("selectionchange",!1,t))}}function Vu(e,t,n,r){switch(fp(t)){case 2:var a=lp;break;case 8:a=sp;break;default:a=cp}n=a.bind(null,t,n,e),a=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wu(e,t,n,r,a){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var l=r.tag;if(3===l||4===l){var s=r.stateNode.containerInfo;if(s===a)break;if(4===l)for(l=r.return;null!==l;){var c=l.tag;if((3===c||4===c)&&l.stateNode.containerInfo===a)return;l=l.return}for(;null!==s;){if(null===(l=Ve(s)))return;if(5===(c=l.tag)||6===c||26===c||27===c){r=i=l;continue e}s=s.parentNode}}r=r.return}Ft((function(){var r=i,a=$t(n),l=[];e:{var s=Cr.get(e);if(void 0!==s){var c=rn,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=bn;break;case"focusin":u="focus",c=un;break;case"focusout":u="blur",c=un;break;case"beforeblur":case"afterblur":c=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kn;break;case vr:case yr:case br:c=dn;break;case _r:c=wn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=pn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Sn;break;case"toggle":case"beforetoggle":c=Cn}var d=!!(4&t),p=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var h,g=r;null!==g;){var m=g;if(h=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===h||null===f||null!=(m=Gt(g,f))&&d.push(qu(g,m,h)),p)break;g=g.return}0<d.length&&(s=new c(s,u,null,n,a),l.push({event:s,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===jt||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Me])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(p=o(u),d=u.tag,u!==p||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=Sn,m="onPointerLeave",f="onPointerEnter",g="pointer"),p=null==c?s:qe(c),h=null==u?s:qe(u),(s=new d(m,g+"leave",c,n,a)).target=p,s.relatedTarget=h,m=null,Ve(a)===r&&((d=new d(f,g+"enter",u,n,a)).target=h,d.relatedTarget=p,m=d),p=m,c&&u)e:{for(f=u,g=0,h=d=c;h;h=Ku(h))g++;for(h=0,m=f;m;m=Ku(m))h++;for(;0<g-h;)d=Ku(d),g--;for(;0<h-g;)f=Ku(f),h--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Ku(d),f=Ku(f)}d=null}else d=null;null!==c&&Xu(l,s,c,d,!1),null!==u&&null!==p&&Xu(l,p,u,d,!0)}if("select"===(c=(s=r?qe(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var v=Un;else if(On(s))if(Bn)v=Yn;else{v=Xn;var y=Kn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Nt(r.elementType)&&(v=Un):v=Jn;switch(v&&(v=v(e,r))?Ln(l,v,n,a):(y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&wt(s,"number",s.value)),y=r?qe(r):window,e){case"focusin":(On(y)||"true"===y.contentEditable)&&(lr=y,sr=r,cr=null);break;case"focusout":cr=sr=lr=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,dr(l,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":dr(l,n,a)}var b;if(En)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else jn?Tn(e,n)&&(S="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(S="onCompositionStart");S&&(In&&"ko"!==n.locale&&(jn||"onCompositionStart"!==S?"onCompositionEnd"===S&&jn&&(b=Qt()):(Wt="value"in(Vt=a)?Vt.value:Vt.textContent,jn=!0)),0<(y=Qu(r,S)).length&&(S=new fn(S,e,null,n,a),l.push({event:S,listeners:y}),(b||null!==(b=Dn(n)))&&(S.data=b))),(b=Rn?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Pn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!En&&Tn(e,t)?(e=Qt(),qt=Wt=Vt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(S=Qu(r,"onBeforeInput")).length&&(y=new fn("onBeforeInput","beforeinput",null,n,a),l.push({event:y,listeners:S}),y.data=b),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var o=ju((a[Oe]||null).action),i=r.submitter;i&&null!==(t=(t=i[Oe]||null)?ju(t.formAction):i.getAttribute("formAction"))&&(o=t,i=null);var l=new rn("action","action",null,r,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=i?$u(a,i):new FormData(a);$i(n,{pending:!0,data:e,method:a.method,action:o},null,e)}}else"function"==typeof o&&(l.preventDefault(),e=i?$u(a,i):new FormData(a),$i(n,{pending:!0,data:e,method:a.method,action:o},o,e))},currentTarget:a}]})}}(l,e,r,n,a)}Fu(l,t)}))}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qu(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===o||(null!=(a=Gt(e,n))&&r.unshift(qu(e,a,o)),null!=(a=Gt(e,t))&&r.push(qu(e,a,o))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Xu(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(l=l.tag,null!==s&&s===r)break;5!==l&&26!==l&&27!==l||null===c||(s=c,a?null!=(c=Gt(n,o))&&i.unshift(qu(n,c,s)):a||null!=(c=Gt(n,o))&&i.push(qu(n,c,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Ju=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Zu(e){return("string"==typeof e?e:""+e).replace(Ju,"\n").replace(Yu,"")}function ed(e,t){return t=Zu(t),Zu(e)===t}function td(){}function nd(e,t,n,a,o,i){switch(n){case"children":"string"==typeof a?"body"===t||"textarea"===t&&""===a||Et(e,a):("number"==typeof a||"bigint"==typeof a)&&"body"!==t&&Et(e,""+a);break;case"className":it(e,"class",a);break;case"tabIndex":it(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":it(e,n,a);break;case"style":It(e,a,i);break;case"data":if("object"!==t){it(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"==typeof a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Dt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"==typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&nd(e,t,"name",o.name,o,null),nd(e,t,"formEncType",o.formEncType,o,null),nd(e,t,"formMethod",o.formMethod,o,null),nd(e,t,"formTarget",o.formTarget,o,null)):(nd(e,t,"encType",o.encType,o,null),nd(e,t,"method",o.method,o,null),nd(e,t,"target",o.target,o,null))),null==a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Dt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=td);break;case"onScroll":null!=a&&Gu("scroll",e);break;case"onScrollEnd":null!=a&&Gu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"muted":e.muted=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"==typeof a||"boolean"==typeof a||"symbol"==typeof a){e.removeAttribute("xlink:href");break}n=Dt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"==typeof a||"symbol"==typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Gu("beforetoggle",e),Gu("toggle",e),ot(e,"popover",a);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ot(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ot(e,n=Pt.get(n)||n,a)}}function rd(e,t,n,a,o,i){switch(n){case"style":It(e,a,i);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(r(61));if(null!=(n=a.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof a?Et(e,a):("number"==typeof a||"bigint"==typeof a)&&Et(e,""+a);break;case"onScroll":null!=a&&Gu("scroll",e);break;case"onScrollEnd":null!=a&&Gu("scrollend",e);break;case"onClick":null!=a&&(e.onclick=td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(i=null!=(i=e[Oe]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!=typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):ot(e,n,a):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,o)))}}function ad(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gu("error",e),Gu("load",e);var a,o=!1,i=!1;for(a in n)if(n.hasOwnProperty(a)){var l=n[a];if(null!=l)switch(a){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:nd(e,t,a,l,n,null)}}return i&&nd(e,t,"srcSet",n.srcSet,n,null),void(o&&nd(e,t,"src",n.src,n,null));case"input":Gu("invalid",e);var s=a=l=i=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":l=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:nd(e,t,o,d,n,null)}}return kt(e,a,s,c,u,l,i,!1),void gt(e);case"select":for(i in Gu("invalid",e),o=l=a=null,n)if(n.hasOwnProperty(i)&&null!=(s=n[i]))switch(i){case"value":a=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:nd(e,t,i,s,n,null)}return t=a,n=l,e.multiple=!!o,void(null!=t?_t(e,!!o,t,!1):null!=n&&_t(e,!!o,n,!0));case"textarea":for(l in Gu("invalid",e),a=i=o=null,n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))switch(l){case"value":o=s;break;case"defaultValue":i=s;break;case"children":a=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:nd(e,t,l,s,n,null)}return xt(e,o,i,a),void gt(e);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(o=n[c])&&("selected"===c?e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o:nd(e,t,c,o,n,null));return;case"dialog":Gu("beforetoggle",e),Gu("toggle",e),Gu("cancel",e),Gu("close",e);break;case"iframe":case"object":Gu("load",e);break;case"video":case"audio":for(o=0;o<Mu.length;o++)Gu(Mu[o],e);break;case"image":Gu("error",e),Gu("load",e);break;case"details":Gu("toggle",e);break;case"embed":case"source":case"link":Gu("error",e),Gu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:nd(e,t,u,o,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(o=n[d])&&rd(e,t,d,o,n,void 0);return}}for(s in n)n.hasOwnProperty(s)&&null!=(o=n[s])&&nd(e,t,s,o,n,null)}var od=null,id=null;function ld(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ud(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var dd=null,pd="function"==typeof setTimeout?setTimeout:void 0,fd="function"==typeof clearTimeout?clearTimeout:void 0,hd="function"==typeof Promise?Promise:void 0,gd="function"==typeof queueMicrotask?queueMicrotask:void 0!==hd?function(e){return hd.resolve(null).then(e).catch(md)}:pd;function md(e){setTimeout((function(){throw e}))}function vd(e){return"head"===e}function yd(e,t){var n=t,r=0,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&xd(i.documentElement),2&n&&xd(i.body),4&n)for(xd(n=i.head),i=n.firstChild;i;){var l=i.nextSibling,s=i.nodeName;i[Be]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=l}}if(0===a)return e.removeChild(o),void Pp(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Pp(t)}function bd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":bd(n),He(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Sd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function kd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var wd=null;function _d(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Cd(e,t,n){switch(t=ld(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);He(e)}var Ed=new Map,Ad=new Set;function Rd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Id=T.d;T.d={f:function(){var e=Id.f(),t=Vc();return e||t},r:function(e){var t=We(e);null!==t&&5===t.tag&&"form"===t.type?Li(t):Id.r(e)},D:function(e){Id.D(e),Pd("dns-prefetch",e,null)},C:function(e,t){Id.C(e,t),Pd("preconnect",e,t)},L:function(e,t,n){Id.L(e,t,n);var r=Nd;if(r&&e&&t){var a='link[rel="preload"][as="'+bt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+bt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+bt(n.imageSizes)+'"]')):a+='[href="'+bt(e)+'"]';var o=a;switch(t){case"style":o=Dd(e);break;case"script":o=Od(e)}Ed.has(o)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ed.set(o,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(jd(o))||"script"===t&&r.querySelector(Ld(o))||(ad(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Id.m(e,t);var n=Nd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+bt(r)+'"][href="'+bt(e)+'"]',o=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Od(e)}if(!Ed.has(o)&&(e=c({rel:"modulepreload",href:e},t),Ed.set(o,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(o)))return}ad(r=n.createElement("link"),"link",e),Ke(r),n.head.appendChild(r)}}},X:function(e,t){Id.X(e,t);var n=Nd;if(n&&e){var r=Qe(n).hoistableScripts,a=Od(e),o=r.get(a);o||((o=n.querySelector(Ld(a)))||(e=c({src:e,async:!0},t),(t=Ed.get(a))&&Gd(e,t),Ke(o=n.createElement("script")),ad(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}},S:function(e,t,n){Id.S(e,t,n);var r=Nd;if(r&&e){var a=Qe(r).hoistableStyles,o=Dd(e);t=t||"default";var i=a.get(o);if(!i){var l={loading:0,preload:null};if(i=r.querySelector(jd(o)))l.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ed.get(o))&&Fd(e,n);var s=i=r.createElement("link");Ke(s),ad(s,"link",e),s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),s.addEventListener("load",(function(){l.loading|=1})),s.addEventListener("error",(function(){l.loading|=2})),l.loading|=4,zd(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:l},a.set(o,i)}}},M:function(e,t){Id.M(e,t);var n=Nd;if(n&&e){var r=Qe(n).hoistableScripts,a=Od(e),o=r.get(a);o||((o=n.querySelector(Ld(a)))||(e=c({src:e,async:!0,type:"module"},t),(t=Ed.get(a))&&Gd(e,t),Ke(o=n.createElement("script")),ad(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}}};var Nd="undefined"==typeof document?null:document;function Pd(e,t,n){var r=Nd;if(r&&"string"==typeof t&&t){var a=bt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Ad.has(a)||(Ad.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ad(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function Td(e,t,n,a){var o,i,l,s,c=(c=G.current)?Rd(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Dd(n.href),(a=(n=Qe(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Dd(n.href);var u=Qe(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(jd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ed.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ed.set(e,n),u||(o=c,i=e,l=n,s=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=o.createElement("link"),s.preload=i,i.addEventListener("load",(function(){return s.loading|=1})),i.addEventListener("error",(function(){return s.loading|=2})),ad(i,"link",l),Ke(i),o.head.appendChild(i))))),t&&null===a)throw Error(r(528,""));return d}if(t&&null!==a)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Od(n),(a=(n=Qe(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Dd(e){return'href="'+bt(e)+'"'}function jd(e){return'link[rel="stylesheet"]['+e+"]"}function $d(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Od(e){return'[src="'+bt(e)+'"]'}function Ld(e){return"script[async]"+e}function Md(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+bt(n.href)+'"]');if(a)return t.instance=a,Ke(a),a;var o=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ke(a=(e.ownerDocument||e).createElement("style")),ad(a,"style",o),zd(a,n.precedence,e),t.instance=a;case"stylesheet":o=Dd(n.href);var i=e.querySelector(jd(o));if(i)return t.state.loading|=4,t.instance=i,Ke(i),i;a=$d(n),(o=Ed.get(o))&&Fd(a,o),Ke(i=(e.ownerDocument||e).createElement("link"));var l=i;return l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),ad(i,"link",a),t.state.loading|=4,zd(i,n.precedence,e),t.instance=i;case"script":return i=Od(n.src),(o=e.querySelector(Ld(i)))?(t.instance=o,Ke(o),o):(a=n,(o=Ed.get(i))&&Gd(a=c({},n),o),Ke(o=(e=e.ownerDocument||e).createElement("script")),ad(o,"link",a),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,zd(a,n.precedence,e));return t.instance}function zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,o=a,i=0;i<r.length;i++){var l=r[i];if(l.dataset.precedence===t)o=l;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Gd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Bd(e,t,n){if(null===Ud){var r=new Map,a=Ud=new Map;a.set(n,r)}else(r=(a=Ud).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[Be]||o[Te]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var i=o.getAttribute(t)||"";i=e+i;var l=r.get(i);l?l.push(o):r.set(i,[o])}}return r}function Hd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Wd=null;function qd(){}function Qd(){if(this.count--,0===this.count)if(this.stylesheets)Xd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Xd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(Jd,e),Kd=null,Qd.call(e))}function Jd(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var r=n.get(null);else{n=new Map,Kd.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(o=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=Qd.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),o?o.parentNode.insertBefore(a,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:y,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Zd(e,t,n,r,a,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ep(e,t,n,r,a,o,i,l,s,c,u,d){return e=new Zd(e,t,n,i,l,s,c,d),t=1,!0===o&&(t|=24),o=Fr(3,null,null,t),e.current=o,o.stateNode=e,(t=La()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},io(o),e}function tp(e){return e?e=Mr:Mr}function np(e,t,n,r,a,o){a=tp(a),null===r.context?r.context=a:r.pendingContext=a,(r=so(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=co(e,r,t))&&(Fc(n,0,t),uo(n,e,t))}function rp(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ap(e,t){rp(e,t),(e=e.alternate)&&rp(e,t)}function op(e){if(13===e.tag){var t=$r(e,67108864);null!==t&&Fc(t,0,67108864),ap(e,67108864)}}var ip=!0;function lp(e,t,n,r){var a=P.T;P.T=null;var o=T.p;try{T.p=2,cp(e,t,n,r)}finally{T.p=o,P.T=a}}function sp(e,t,n,r){var a=P.T;P.T=null;var o=T.p;try{T.p=8,cp(e,t,n,r)}finally{T.p=o,P.T=a}}function cp(e,t,n,r){if(ip){var a=up(r);if(null===a)Wu(e,t,r,dp,n),wp(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return gp=_p(gp,e,t,n,r,a),!0;case"dragenter":return mp=_p(mp,e,t,n,r,a),!0;case"mouseover":return vp=_p(vp,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return yp.set(o,_p(yp.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,bp.set(o,_p(bp.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(wp(e,r),4&t&&-1<kp.indexOf(e)){for(;null!==a;){var o=We(a);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var i=ge(o.pendingLanes);if(0!==i){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var s=1<<31-ue(i);l.entanglements[1]|=s,i&=~s}Eu(o),!(6&ic)&&(Ec=Y()+500,Au(0,!1))}}break;case 13:null!==(l=$r(o,2))&&Fc(l,0,2),Vc(),ap(o,2)}if(null===(o=up(r))&&Wu(e,t,r,dp,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Wu(e,t,r,null,n)}}function up(e){return pp(e=$t(e))}var dp=null;function pp(e){if(dp=null,null!==(e=Ve(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=i(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dp=e,null}function fp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case ee:return 2;case te:return 8;case ne:case re:return 32;case ae:return 268435456;default:return 32}default:return 32}}var hp=!1,gp=null,mp=null,vp=null,yp=new Map,bp=new Map,Sp=[],kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wp(e,t){switch(e){case"focusin":case"focusout":gp=null;break;case"dragenter":case"dragleave":mp=null;break;case"mouseover":case"mouseout":vp=null;break;case"pointerover":case"pointerout":yp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bp.delete(t.pointerId)}}function _p(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&null!==(t=We(t))&&op(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Cp(e){var t=Ve(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=i(n)))return e.blockedOn=t,void function(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}(e.priority,(function(){if(13===n.tag){var e=Mc();e=Ee(e);var t=$r(n,e);null!==t&&Fc(t,0,e),ap(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xp(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=up(e.nativeEvent);if(null!==n)return null!==(t=We(n))&&op(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);jt=r,n.target.dispatchEvent(r),jt=null,t.shift()}return!0}function Ep(e,t,n){xp(e)&&n.delete(t)}function Ap(){hp=!1,null!==gp&&xp(gp)&&(gp=null),null!==mp&&xp(mp)&&(mp=null),null!==vp&&xp(vp)&&(vp=null),yp.forEach(Ep),bp.forEach(Ep)}function Rp(t,n){t.blockedOn===n&&(t.blockedOn=null,hp||(hp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ap)))}var Ip=null;function Np(t){Ip!==t&&(Ip=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,(function(){Ip===t&&(Ip=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],a=t[e+2];if("function"!=typeof r){if(null===pp(r||n))continue;break}var o=We(n);null!==o&&(t.splice(e,3),e-=3,$i(o,{pending:!0,data:a,method:n.method,action:r},r,a))}})))}function Pp(e){function t(t){return Rp(t,e)}null!==gp&&Rp(gp,e),null!==mp&&Rp(mp,e),null!==vp&&Rp(vp,e),yp.forEach(t),bp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&null===(n=Sp[0]).blockedOn;)Cp(n),null===n.blockedOn&&Sp.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],o=n[r+1],i=a[Oe]||null;if("function"==typeof o)i||Np(n);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[Oe]||null)l=i.formAction;else if(null!==pp(a))continue}else l=i.action;"function"==typeof l?n[r+1]=l:(n.splice(r,3),r-=3),Np(n)}}}function Tp(e){this._internalRoot=e}function Dp(e){this._internalRoot=e}Dp.prototype.render=Tp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));np(t.current,Mc(),e,t,null,null)},Dp.prototype.unmount=Tp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;np(e.current,2,null,e,null,null),Vc(),t[Me]=null}},Dp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&0!==t&&t<Sp[n].priority;n++);Sp.splice(n,0,e),0===n&&Cp(e)}};var jp=t.version;if("19.1.0"!==jp)throw Error(r(527,jp,"19.1.0"));T.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(a=i.return)){n=a;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return l(i),e;if(s===a)return l(i),t;s=s.sibling}throw Error(r(188))}if(n.return!==a.return)n=i,a=s;else{for(var c=!1,u=i.child;u;){if(u===n){c=!0,n=i,a=s;break}if(u===a){c=!0,a=i,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,a=i;break}if(u===a){c=!0,a=s,n=i;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),null===(e=null!==e?s(e):null)?null:e.stateNode};var $p={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Op=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Op.isDisabled&&Op.supportsFiber)try{le=Op.inject($p),se=Op}catch(e){}}return Re.createRoot=function(e,t){if(!a(e))throw Error(r(299));var n=!1,o="",i=wl,l=_l,s=Cl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(l=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=ep(e,1,!1,null,0,n,o,i,l,s,0,null),e[Me]=t.current,Hu(e),new Tp(t)},Re.hydrateRoot=function(e,t,n){if(!a(e))throw Error(r(299));var o=!1,i="",l=wl,s=_l,c=Cl,u=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(l=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=ep(e,1,!0,t,0,o,i,l,s,c,0,u)).context=tp(null),n=t.current,(i=so(o=Ee(o=Mc()))).callback=null,co(n,i,o),n=o,t.current.lanes=n,we(t,n),Eu(t),e[Me]=t.current,Hu(e),new Dp(t)},Re.version="19.1.0",Re}();var Me,ze=be(Ae.exports),Fe={exports:{}},Ge={};Fe.exports=function(){if(Me)return Ge;Me=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==n.key&&(a=""+n.key),"key"in n)for(var o in r={},n)"key"!==o&&(r[o]=n[o]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:a,ref:void 0!==n?n:null,props:r}}return Ge.Fragment=t,Ge.jsx=n,Ge.jsxs=n,Ge}();var Ue,Be=Fe.exports,He={exports:{}},Ve={};He.exports=function(){if(Ue)return Ve;Ue=1;var e=xe,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=e.useRef,a=e.useEffect,o=e.useMemo,i=e.useDebugValue;return Ve.useSyncExternalStoreWithSelector=function(e,l,s,c,u){var d=r(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=o((function(){function e(e){if(!a){if(a=!0,n=e,e=c(e),void 0!==u&&p.hasValue){var o=p.value;if(u(o,e))return r=o}return r=e}if(o=r,t(n,e))return o;var i=c(e);return void 0!==u&&u(o,i)?(n=e,o):(n=e,r=i)}var n,r,a=!1,o=void 0===s?null:s;return[function(){return e(l())},null===o?void 0:function(){return e(o())}]}),[l,s,c,u]);var f=n(e,d[0],d[1]);return a((function(){p.hasValue=!0,p.value=f}),[f]),i(f),f},Ve}();var We=He.exports;var qe={notify(){},get:()=>[]};var Qe=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Ke=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Xe=(()=>Qe||Ke?xe.useLayoutEffect:xe.useEffect)(),Je=Symbol.for("react-redux-context"),Ye="undefined"!=typeof globalThis?globalThis:{};function Ze(){if(!xe.createContext)return{};const e=Ye[Je]??=new Map;let t=e.get(xe.createContext);return t||(t=xe.createContext(null),e.set(xe.createContext,t)),t}var et=Ze();var tt=function(e){const{children:t,context:n,serverState:r,store:a}=e,o=xe.useMemo((()=>{const e=function(e,t){let n,r=qe,a=0,o=!1;function i(){c.onStateChange&&c.onStateChange()}function l(){a++,n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function s(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=qe)}const c={addNestedSub:function(e){l();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),s())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,l())},tryUnsubscribe:function(){o&&(o=!1,s())},getListeners:()=>r};return c}(a);return{store:a,subscription:e,getServerState:r?()=>r:void 0}}),[a,r]),i=xe.useMemo((()=>a.getState()),[a]);Xe((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,i]);const l=n||et;return xe.createElement(l.Provider,{value:o},t)};function nt(e=et){return function(){return xe.useContext(e)}}var rt=nt();function at(e=et){const t=e===et?rt:nt(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var ot=at();function it(e=et){const t=e===et?ot:at(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var lt=it(),st=(e,t)=>e===t;function ct(e=et){const t=e===et?rt:nt(e),n=(e,n={})=>{const{equalityFn:r=st}="function"==typeof n?{equalityFn:n}:n,a=t(),{store:o,subscription:i,getServerState:l}=a;xe.useRef(!0);const s=xe.useCallback({[e.name]:t=>e(t)}[e.name],[e]),c=We.useSyncExternalStoreWithSelector(i.addNestedSub,o.getState,l||o.getState,s,r);return xe.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var ut=ct();function dt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var pt=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),ft=()=>Math.random().toString(36).substring(7).split("").join("."),ht={INIT:`@@redux/INIT${ft()}`,REPLACE:`@@redux/REPLACE${ft()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ft()}`};function gt(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function mt(e,t,n){if("function"!=typeof e)throw new Error(dt(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(dt(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(dt(1));return n(mt)(e,t)}let r=e,a=t,o=new Map,i=o,l=0,s=!1;function c(){i===o&&(i=new Map,o.forEach(((e,t)=>{i.set(t,e)})))}function u(){if(s)throw new Error(dt(3));return a}function d(e){if("function"!=typeof e)throw new Error(dt(4));if(s)throw new Error(dt(5));let t=!0;c();const n=l++;return i.set(n,e),function(){if(t){if(s)throw new Error(dt(6));t=!1,c(),i.delete(n),o=null}}}function p(e){if(!gt(e))throw new Error(dt(7));if(void 0===e.type)throw new Error(dt(8));if("string"!=typeof e.type)throw new Error(dt(17));if(s)throw new Error(dt(9));try{s=!0,a=r(a,e)}finally{s=!1}return(o=i).forEach((e=>{e()})),e}p({type:ht.INIT});return{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(dt(10));r=e,p({type:ht.REPLACE})},[pt]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(dt(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[pt](){return this}}}}}function vt(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:ht.INIT}))throw new Error(dt(12));if(void 0===n(void 0,{type:ht.PROBE_UNKNOWN_ACTION()}))throw new Error(dt(13))}))}(n)}catch(e){a=e}return function(e={},t){if(a)throw a;let o=!1;const i={};for(let a=0;a<r.length;a++){const l=r[a],s=n[l],c=e[l],u=s(c,t);if(void 0===u)throw t&&t.type,new Error(dt(14));i[l]=u,o=o||u!==c}return o=o||r.length!==Object.keys(e).length,o?i:e}}function yt(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}var bt=Symbol.for("immer-nothing"),St=Symbol.for("immer-draftable"),kt=Symbol.for("immer-state");function wt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var _t=Object.getPrototypeOf;function Ct(e){return!!e&&!!e[kt]}function xt(e){return!!e&&(At(e)||Array.isArray(e)||!!e[St]||!!e.constructor?.[St]||Tt(e)||Dt(e))}var Et=Object.prototype.constructor.toString();function At(e){if(!e||"object"!=typeof e)return!1;const t=_t(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Et}function Rt(e,t){0===It(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function It(e){const t=e[kt];return t?t.type_:Array.isArray(e)?1:Tt(e)?2:Dt(e)?3:0}function Nt(e,t){return 2===It(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Pt(e,t,n){const r=It(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Tt(e){return e instanceof Map}function Dt(e){return e instanceof Set}function jt(e){return e.copy_||e.base_}function $t(e,t){if(Tt(e))return new Map(e);if(Dt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=At(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[kt];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(_t(e),t)}{const t=_t(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function Ot(e,t=!1){return Mt(e)||Ct(e)||!xt(e)||(It(e)>1&&(e.set=e.add=e.clear=e.delete=Lt),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>Ot(t,!0)))),e}function Lt(){wt(2)}function Mt(e){return Object.isFrozen(e)}var zt,Ft={};function Gt(e){const t=Ft[e];return t||wt(0),t}function Ut(){return zt}function Bt(e,t){t&&(Gt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ht(e){Vt(e),e.drafts_.forEach(qt),e.drafts_=null}function Vt(e){e===zt&&(zt=e.parent_)}function Wt(e){return zt={drafts_:[],parent_:zt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qt(e){const t=e[kt];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Qt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[kt].modified_&&(Ht(t),wt(4)),xt(e)&&(e=Kt(t,e),t.parent_||Jt(t,e)),t.patches_&&Gt("Patches").generateReplacementPatches_(n[kt].base_,e,t.patches_,t.inversePatches_)):e=Kt(t,n,[]),Ht(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bt?e:void 0}function Kt(e,t,n){if(Mt(t))return t;const r=t[kt];if(!r)return Rt(t,((a,o)=>Xt(e,r,t,a,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Jt(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,o=!1;3===r.type_&&(a=new Set(t),t.clear(),o=!0),Rt(a,((a,i)=>Xt(e,r,t,a,i,n,o))),Jt(e,t,!1),n&&e.patches_&&Gt("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Xt(e,t,n,r,a,o,i){if(Ct(a)){const i=Kt(e,a,o&&t&&3!==t.type_&&!Nt(t.assigned_,r)?o.concat(r):void 0);if(Pt(n,r,i),!Ct(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(xt(a)&&!Mt(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Kt(e,a),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||Jt(e,a)}}function Jt(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ot(t,n)}var Yt={get(e,t){if(t===kt)return e;const n=jt(e);if(!Nt(n,t))return function(e,t,n){const r=tn(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!xt(r)?r:r===en(e.base_,t)?(rn(e),e.copy_[t]=an(r,e)):r},has:(e,t)=>t in jt(e),ownKeys:e=>Reflect.ownKeys(jt(e)),set(e,t,n){const r=tn(jt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=en(jt(e),t),a=r?.[kt];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||Nt(e.base_,t)))return!0;rn(e),nn(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==en(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,rn(e),nn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=jt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){wt(11)},getPrototypeOf:e=>_t(e.base_),setPrototypeOf(){wt(12)}},Zt={};function en(e,t){const n=e[kt];return(n?jt(n):e)[t]}function tn(e,t){if(!(t in e))return;let n=_t(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=_t(n)}}function nn(e){e.modified_||(e.modified_=!0,e.parent_&&nn(e.parent_))}function rn(e){e.copy_||(e.copy_=$t(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Rt(Yt,((e,t)=>{Zt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Zt.deleteProperty=function(e,t){return Zt.set.call(this,e,t,void 0)},Zt.set=function(e,t,n){return Yt.set.call(this,e[0],t,n,e[0])};function an(e,t){const n=Tt(e)?Gt("MapSet").proxyMap_(e,t):Dt(e)?Gt("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ut(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=Yt;n&&(a=[r],o=Zt);const{revoke:i,proxy:l}=Proxy.revocable(a,o);return r.draft_=l,r.revoke_=i,l}(e,t);return(t?t.scope_:Ut()).drafts_.push(n),n}function on(e){return Ct(e)||wt(10),ln(e)}function ln(e){if(!xt(e)||Mt(e))return e;const t=e[kt];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$t(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$t(e,!0);return Rt(n,((e,t)=>{Pt(n,e,ln(t))})),t&&(t.finalized_=!1),n}var sn=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...a){return r.produce(e,(e=>t.call(this,e,...a)))}}let r;if("function"!=typeof t&&wt(6),void 0!==n&&"function"!=typeof n&&wt(7),xt(e)){const a=Wt(this),o=an(e,void 0);let i=!0;try{r=t(o),i=!1}finally{i?Ht(a):Vt(a)}return Bt(a,n),Qt(r,a)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===bt&&(r=void 0),this.autoFreeze_&&Ot(r,!0),n){const t=[],a=[];Gt("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}wt(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;const a=this.produce(e,t,((e,t)=>{n=e,r=t}));return[a,n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xt(e)||wt(8),Ct(e)&&(e=on(e));const t=Wt(this),n=an(e,void 0);return n[kt].isManual_=!0,Vt(t),n}finishDraft(e,t){const n=e&&e[kt];n&&n.isManual_||wt(9);const{scope_:r}=n;return Bt(r,t),Qt(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Gt("Patches").applyPatches_;return Ct(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},cn=sn.produce;sn.produceWithPatches.bind(sn),sn.setAutoFreeze.bind(sn),sn.setUseStrictShallowCopy.bind(sn),sn.applyPatches.bind(sn),sn.createDraft.bind(sn),sn.finishDraft.bind(sn);var un=e=>Array.isArray(e)?e:[e];function dn(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var pn="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function fn(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,o=0;function i(){let t=n;const{length:i}=arguments;for(let e=0,n=i;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const l=t;let s;if(1===t.s)s=t.v;else if(s=e.apply(null,arguments),o++,r){const e=a?.deref?.()??a;null!=e&&r(e,s)&&(s=e,0!==o&&o--);a="object"==typeof s&&null!==s||"function"==typeof s?new pn(s):s}return l.s=1,l.v=s,s}return i.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>o,i.resetResultsCount=()=>{o=0},i}function hn(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,a=0,o={},i=e.pop();"object"==typeof i&&(o=i,i=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(i,`createSelector expects an output function after the inputs, but received: [${typeof i}]`);const l={...n,...o},{memoize:s,memoizeOptions:c=[],argsMemoize:u=fn,argsMemoizeOptions:d=[],devModeChecks:p={}}=l,f=un(c),h=un(d),g=dn(e),m=s((function(){return r++,i.apply(null,arguments)}),...f),v=u((function(){a++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(g,arguments);return t=m.apply(null,e),t}),...h);return Object.assign(v,{resultFunc:i,memoizedResultFunc:m,dependencies:g,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:s,argsMemoize:u})};return Object.assign(r,{withTypes:()=>r}),r}var gn=hn(fn),mn=Object.assign(((e,t=gn)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>mn});function vn(e){return({dispatch:t,getState:n})=>r=>a=>"function"==typeof a?a(t,n,e):r(a)}var yn=vn(),bn=vn,Sn="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?yt:yt.apply(null,arguments)};function kn(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(Bn(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return gt(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var wn=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function _n(e){return xt(e)?cn(e,(()=>{})):e}function Cn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var xn=e=>t=>{setTimeout(t,e)},En=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new wn(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,o=!1,i=!1;const l=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:xn(10):"callback"===e.type?e.queueNotification:xn(e.timeout),c=()=>{i=!1,o&&(o=!1,l.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>a&&e()));return l.add(e),()=>{t(),l.delete(e)}},dispatch(e){try{return a=!e?.meta?.RTK_autoBatch,o=!a,o&&(i||(i=!0,s(c))),r.dispatch(e)}finally{a=!0}}})})("object"==typeof n?n:void 0)),r};function An(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let o=new wn;return t&&(function(e){return"boolean"==typeof e}(t)?o.push(yn):o.push(bn(t.extraArgument))),o},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:o=!0,preloadedState:i,enhancers:l}=e||{};let s,c;if("function"==typeof n)s=n;else{if(!gt(n))throw new Error(Bn(1));s=vt(n)}c="function"==typeof r?r(t):t();let u=yt;a&&(u=Sn({trace:!1,..."object"==typeof a&&a}));const d=function(...e){return t=>(n,r)=>{const a=t(n,r);let o=()=>{throw new Error(dt(15))};const i={getState:a.getState,dispatch:(e,...t)=>o(e,...t)},l=e.map((e=>e(i)));return o=yt(...l)(a.dispatch),{...a,dispatch:o}}}(...c),p=En(d);return mt(s,i,u(..."function"==typeof l?l(p):p()))}function Rn(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(Bn(28));if(r in t)throw new Error(Bn(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}function In(...e){return t=>e.some((e=>((e,t)=>(e=>e&&"function"==typeof e.match)(e)?e.match(t):e(t))(e,t)))}var Nn=["name","message","stack","code"],Pn=class{constructor(e,t){this.payload=e,this.meta=t}_type},Tn=class{constructor(e,t){this.payload=e,this.meta=t}_type},Dn=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Nn)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},jn="External signal was aborted",$n=(()=>{function e(e,t,n){const r=kn(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),a=kn(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=kn(e+"/rejected",((e,t,r,a,o)=>({payload:a,error:(n&&n.serializeError||Dn)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e,{signal:i}={}){return(l,s,c)=>{const u=n?.idGenerator?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),d=new AbortController;let p,f;function h(e){f=e,d.abort()}i&&(i.aborted?h(jn):i.addEventListener("abort",(()=>h(jn)),{once:!0}));const g=async function(){let i;try{let o=n?.condition?.(e,{getState:s,extra:c});if(null!==(g=o)&&"object"==typeof g&&"function"==typeof g.then&&(o=await o),!1===o||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const m=new Promise(((e,t)=>{p=()=>{t({name:"AbortError",message:f||"Aborted"})},d.signal.addEventListener("abort",p)}));l(a(u,e,n?.getPendingMeta?.({requestId:u,arg:e},{getState:s,extra:c}))),i=await Promise.race([m,Promise.resolve(t(e,{dispatch:l,getState:s,extra:c,requestId:u,signal:d.signal,abort:h,rejectWithValue:(e,t)=>new Pn(e,t),fulfillWithValue:(e,t)=>new Tn(e,t)})).then((t=>{if(t instanceof Pn)throw t;return t instanceof Tn?r(t.payload,u,e,t.meta):r(t,u,e)}))])}catch(t){i=t instanceof Pn?o(null,u,e,t.payload,t.meta):o(t,u,e)}finally{p&&d.signal.removeEventListener("abort",p)}var g;return n&&!n.dispatchConditionRejection&&o.match(i)&&i.meta.condition||l(i),i}();return Object.assign(g,{abort:h,requestId:u,arg:e,unwrap:()=>g.then(On)})}}),{pending:a,rejected:o,fulfilled:r,settled:In(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function On(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Ln=Symbol.for("rtk-slice-createasyncthunk");function Mn(e,t){return`${e}/${t}`}function zn({creators:e}={}){const t=e?.asyncThunk?.[Ln];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(Bn(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(Bn(12));if(n in i.sliceCaseReducersByType)throw new Error(Bn(13));return i.sliceCaseReducersByType[n]=t,l},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),l),exposeAction:(e,t)=>(i.actionCreators[e]=t,l),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,l)};function s(){const[t={},n=[],r]="function"==typeof e.extraReducers?Rn(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let n,[r,a,o]=Rn(t);if(function(e){return"function"==typeof e}(e))n=()=>_n(e());else{const t=_n(e);n=()=>t}function i(e=n(),t){let i=[r[t.type],...a.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===i.filter((e=>!!e)).length&&(i=[o]),i.reduce(((e,n)=>{if(n){if(Ct(e)){const r=n(e,t);return void 0===r?e:r}if(xt(e))return cn(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return i.getInitialState=n,i}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=a[r],i={reducerName:r,type:Mn(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},r,a){let o,i;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(Bn(17));o=r.reducer,i=r.prepare}else o=r;a.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,i?kn(e,i):kn(e))}(i,o,l):function({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Bn(18));const{payloadCreator:o,fulfilled:i,pending:l,rejected:s,settled:c,options:u}=n,d=a(e,o,u);r.exposeAction(t,d),i&&r.addCase(d.fulfilled,i);l&&r.addCase(d.pending,l);s&&r.addCase(d.rejected,s);c&&r.addMatcher(d.settled,c);r.exposeCaseReducer(t,{fulfilled:i||Un,pending:l||Un,rejected:s||Un,settled:c||Un})}(i,o,l,t)}));const c=e=>e,u=new Map,d=new WeakMap;let p;function f(e,t){return p||(p=s()),p(e,t)}function h(){return p||(p=s()),p.getInitialState()}function g(t,n=!1){function r(e){let a=e[t];return void 0===a&&n&&(a=Cn(d,r,h)),a}function a(t=c){const r=Cn(u,n,(()=>new WeakMap));return Cn(r,t,(()=>{const r={};for(const[a,o]of Object.entries(e.selectors??{}))r[a]=Fn(o,t,(()=>Cn(d,t,h)),n);return r}))}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const m={name:n,reducer:f,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:h,...g(r),injectInto(e,{reducerPath:t,...n}={}){const a=t??r;return e.inject({reducerPath:a,reducer:f},n),{...m,...g(a,!0)}}};return m}}function Fn(e,t,n,r){function a(a,...o){let i=t(a);return void 0===i&&r&&(i=n()),e(i,...o)}return a.unwrapped=e,a}var Gn=zn();function Un(){}function Bn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Hn=e.getInstance(),Vn={url:null,apiKey:null,initialized:!1,error:null,throttleDelayMs:200,cacheLifetimeMs:6e4,failedRequestRetryDelayMs:3e4},Wn=Gn({name:"api",initialState:Vn,reducers:{setApiConfig(e,t){e.url=t.payload.url,e.apiKey=t.payload.apiKey,"number"==typeof t.payload.throttleDelayMs&&t.payload.throttleDelayMs>=0&&(e.throttleDelayMs=t.payload.throttleDelayMs),"number"==typeof t.payload.cacheLifetime&&t.payload.cacheLifetime>=0?e.cacheLifetimeMs=1e3*t.payload.cacheLifetime:void 0===t.payload.cacheLifetime||(e.cacheLifetimeMs=Vn.cacheLifetimeMs,Hn.warn("apiSlice","Invalid cacheLifetime provided, reset to default.")),"number"==typeof t.payload.failedRequestRetryDelaySeconds&&t.payload.failedRequestRetryDelaySeconds>=0?e.failedRequestRetryDelayMs=1e3*t.payload.failedRequestRetryDelaySeconds:void 0===t.payload.failedRequestRetryDelaySeconds||(e.failedRequestRetryDelayMs=Vn.failedRequestRetryDelayMs,Hn.warn("apiSlice","Invalid failedRequestRetryDelaySeconds provided, reset to default.")),e.error=null,Hn.log("apiSlice","API config set.",{data:{url:e.url,throttle:e.throttleDelayMs,cacheLifetime:e.cacheLifetimeMs,failedRetryDelay:e.failedRequestRetryDelayMs}})},apiInitializationSuccess(e){e.url&&e.apiKey?(e.initialized=!0,e.error=null,Hn.log("apiSlice","API marked as initialized successfully.")):(Hn.warn("apiSlice","Tried to mark API as initialized, but URL or API Key is missing."),e.error="Initialization attempted without full config.")},apiInitializationError(e,t){e.initialized=!1,e.error=t.payload,Hn.error("apiSlice",`API initialization failed: ${t.payload}`)},clearApiConfig(e){e.url=null,e.apiKey=null,e.initialized=!1,e.error=null,e.throttleDelayMs=Vn.throttleDelayMs,e.cacheLifetimeMs=Vn.cacheLifetimeMs,e.failedRequestRetryDelayMs=Vn.failedRequestRetryDelayMs,Hn.log("apiSlice","API config cleared.")}}}),{setApiConfig:qn,apiInitializationSuccess:Qn,apiInitializationError:Kn,clearApiConfig:Xn}=Wn.actions,Jn=e=>e.api.initialized,Yn=e=>e.api.cacheLifetimeMs,Zn=e=>({url:e.api.url,apiKey:e.api.apiKey,initialized:e.api.initialized,error:e.api.error,throttleDelayMs:e.api.throttleDelayMs,cacheLifetimeMs:e.api.cacheLifetimeMs,failedRequestRetryDelayMs:e.api.failedRequestRetryDelayMs});var er=Wn.reducer;const tr=Gn({name:"components",initialState:{registeredComponents:{}},reducers:{registerComponent:(e,t)=>{const n=t.payload,r=Date.now();e.registeredComponents[n]={isActive:!0,registeredAt:r,lastActive:r}},disconnectComponent:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&(e.registeredComponents[n].isActive=!1)},reconnectComponent:(e,t)=>{const n=t.payload,r=Date.now();e.registeredComponents[n]?(e.registeredComponents[n].isActive=!0,e.registeredComponents[n].lastActive=r):e.registeredComponents[n]={isActive:!0,registeredAt:r,lastActive:r}},updateComponentActivity:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&(e.registeredComponents[n].lastActive=Date.now())},removeComponent:(e,t)=>{const n=t.payload;e.registeredComponents[n]&&delete e.registeredComponents[n]}}});tr.actions;var nr=tr.reducer;const rr=e.getInstance(),ar=Gn({name:"conditionalLogic",initialState:{rawRuleDefinitions:[],processedConditions:[]},reducers:{setRawRuleDefinitions(e,t){e.rawRuleDefinitions=t.payload,rr.log("conditionalLogicSlice",`Set ${t.payload.length} raw rule definitions.`)},setProcessedConditions(e,t){e.processedConditions=t.payload,rr.log("conditionalLogicSlice",`Set ${t.payload.length} processed conditions.`)},clearAllConditions(e){e.rawRuleDefinitions=[],e.processedConditions=[],rr.log("conditionalLogicSlice","Cleared all raw and processed conditions.")}}}),{setRawRuleDefinitions:or,setProcessedConditions:ir,clearAllConditions:lr}=ar.actions,sr=e=>e.conditionalLogic.processedConditions;var cr=ar.reducer;e.getInstance();const ur=(e,t)=>{const n=Object.assign({},e);return dr(e)&&dr(t)&&Object.keys(t).forEach((r=>{dr(t[r])?r in e?n[r]=ur(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n},dr=e=>e&&"object"==typeof e&&!Array.isArray(e),pr=Gn({name:"config",initialState:Object.assign(Object.assign({},me),{type:me.type||"custom:inventree-card",name:me.name||"InvenTree Card",view_type:me.view_type||"detail",data_sources:me.data_sources||{inventree_hass_sensors:[],ha_entities:[],inventree_pks:[],inventree_parameters:[],inventreeParametersToFetch:[]},layout_options:me.layout_options||{columns:3,grid_spacing:8,item_height:170},display:me.display||{show_header:!0,show_image:!0,show_name:!0,show_stock:!0,show_buttons:!0,show_parameters:!0},direct_api:me.direct_api||{enabled:!1,url:"",api_key:""},parameters:me.parameters||{enabled:!0,show_section:!0},conditional_logic:me.conditional_logic||{definedLogics:[]},style:me.style||{background:"var(--ha-card-background, var(--card-background-color, white))"},interactions:me.interactions||{buttons:[]},performance:me.performance||{rendering:{},api:{},websocket:{},parameters:{}},debug:me.debug||!1,debug_verbose:me.debug_verbose||!1,show_debug:me.show_debug||!1,_configLastUpdated:void 0}),reducers:{setConfigAction(e,t){const n=t.payload,r=ur(on(e),n);Object.assign(e,r),e._configLastUpdated=Date.now()}}}),{setConfigAction:fr}=pr.actions;var hr=pr.reducer;const gr=Gn({name:"counter",initialState:{value:0},reducers:{increment:e=>{e.value+=1},decrement:e=>{e.value-=1},incrementByAmount:(e,t)=>{e.value+=t.payload}}});gr.actions;var mr=gr.reducer;const vr=e.getInstance(),yr=Gn({name:"genericHaStates",initialState:{entities:{}},reducers:{setEntityState(e,t){const n=t.payload;n&&n.entity_id?(e.entities[n.entity_id]=n,vr.log("genericHaStateSlice",`Set state for entity: ${n.entity_id}`,{data:n,level:"debug"})):vr.warn("genericHaStateSlice","setEntityState called with invalid payload",{data:t.payload})},setEntityStatesBatch(e,t){const n=t.payload;if(n&&Array.isArray(n)){let t=0;n.forEach((n=>{n&&n.entity_id&&(e.entities[n.entity_id]=n,t++)})),vr.log("genericHaStateSlice",`Set batch of ${t} entity states.`,{level:"debug"})}else vr.warn("genericHaStateSlice","setEntityStatesBatch called with invalid payload",{data:t.payload})},removeEntityState(e,t){const n=t.payload;n&&e.entities[n]&&(delete e.entities[n],vr.log("genericHaStateSlice",`Removed state for entity: ${n}`,{level:"debug"}))},clearAllGenericHaStates(e){e.entities={},vr.log("genericHaStateSlice","Cleared all generic HA entity states.")}}}),{setEntityState:br,setEntityStatesBatch:Sr,removeEntityState:kr,clearAllGenericHaStates:wr}=yr.actions,_r=(e,t)=>{var n;return null===(n=e.genericHaStates.entities[t])||void 0===n?void 0:n.state},Cr=(e,t,n)=>{var r,a;return null===(a=null===(r=e.genericHaStates.entities[t])||void 0===r?void 0:r.attributes)||void 0===a?void 0:a[n]};var xr=yr.reducer;const Er=Gn({name:"metrics",initialState:{usage:{redux:{},legacy:{}},events:[],performance:{timerOperations:{redux:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0},legacy:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0}},renderTiming:{lastRender:0,history:[],maxHistory:20}}},reducers:{trackUsage:(e,t)=>{const{system:n,operation:r}=t.payload;e.usage[n][r]||(e.usage[n][r]=0),e.usage[n][r]++},trackEvent:(e,t)=>{e.events.push(Object.assign(Object.assign({},t.payload),{timestamp:Date.now()})),e.events.length>100&&(e.events=e.events.slice(-100))},trackTimerOperation:(e,t)=>{const{system:n,operation:r}=t.payload;e.performance.timerOperations[n][r]++},trackRenderTiming:(e,t)=>{e.performance.renderTiming.lastRender=Date.now(),e.performance.renderTiming.history.push({component:t.payload.component,duration:t.payload.duration,timestamp:Date.now()}),e.performance.renderTiming.history.length>e.performance.renderTiming.maxHistory&&(e.performance.renderTiming.history=e.performance.renderTiming.history.slice(-e.performance.renderTiming.maxHistory))},clearMetrics:e=>{e.usage={redux:{},legacy:{}},e.events=[],e.performance.timerOperations={redux:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0},legacy:{setTimeout:0,clearTimeout:0,setInterval:0,clearInterval:0}}}}});Er.actions;var Ar=Er.reducer;function Rr(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ir}=Object.prototype,{getPrototypeOf:Nr}=Object,{iterator:Pr,toStringTag:Tr}=Symbol,Dr=(e=>t=>{const n=Ir.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jr=e=>(e=e.toLowerCase(),t=>Dr(t)===e),$r=e=>t=>typeof t===e,{isArray:Or}=Array,Lr=$r("undefined");const Mr=jr("ArrayBuffer");const zr=$r("string"),Fr=$r("function"),Gr=$r("number"),Ur=e=>null!==e&&"object"==typeof e,Br=e=>{if("object"!==Dr(e))return!1;const t=Nr(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Tr in e||Pr in e)},Hr=jr("Date"),Vr=jr("File"),Wr=jr("Blob"),qr=jr("FileList"),Qr=jr("URLSearchParams"),[Kr,Xr,Jr,Yr]=["ReadableStream","Request","Response","Headers"].map(jr);function Zr(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,a;if("object"!=typeof e&&(e=[e]),Or(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let i;for(r=0;r<o;r++)i=a[r],t.call(null,e[i],i,e)}}function ea(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const ta="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,na=e=>!Lr(e)&&e!==ta;const ra=(aa="undefined"!=typeof Uint8Array&&Nr(Uint8Array),e=>aa&&e instanceof aa);var aa;const oa=jr("HTMLFormElement"),ia=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),la=jr("RegExp"),sa=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Zr(n,((n,a)=>{let o;!1!==(o=t(n,a,e))&&(r[a]=o||n)})),Object.defineProperties(e,r)};const ca=jr("AsyncFunction"),ua=(da="function"==typeof setImmediate,pa=Fr(ta.postMessage),da?setImmediate:pa?(fa=`axios@${Math.random()}`,ha=[],ta.addEventListener("message",(({source:e,data:t})=>{e===ta&&t===fa&&ha.length&&ha.shift()()}),!1),e=>{ha.push(e),ta.postMessage(fa,"*")}):e=>setTimeout(e));var da,pa,fa,ha;const ga="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ta):"undefined"!=typeof process&&process.nextTick||ua;var ma={isArray:Or,isArrayBuffer:Mr,isBuffer:function(e){return null!==e&&!Lr(e)&&null!==e.constructor&&!Lr(e.constructor)&&Fr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Fr(e.append)&&("formdata"===(t=Dr(e))||"object"===t&&Fr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Mr(e.buffer),t},isString:zr,isNumber:Gr,isBoolean:e=>!0===e||!1===e,isObject:Ur,isPlainObject:Br,isReadableStream:Kr,isRequest:Xr,isResponse:Jr,isHeaders:Yr,isUndefined:Lr,isDate:Hr,isFile:Vr,isBlob:Wr,isRegExp:la,isFunction:Fr,isStream:e=>Ur(e)&&Fr(e.pipe),isURLSearchParams:Qr,isTypedArray:ra,isFileList:qr,forEach:Zr,merge:function e(){const{caseless:t}=na(this)&&this||{},n={},r=(r,a)=>{const o=t&&ea(n,a)||a;Br(n[o])&&Br(r)?n[o]=e(n[o],r):Br(r)?n[o]=e({},r):Or(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Zr(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(Zr(t,((t,r)=>{n&&Fr(t)?e[r]=Rr(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,o,i;const l={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],r&&!r(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==n&&Nr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Dr,kindOfTest:jr,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Or(e))return e;let t=e.length;if(!Gr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Pr]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:oa,hasOwnProperty:ia,hasOwnProp:ia,reduceDescriptors:sa,freezeMethods:e=>{sa(e,((t,n)=>{if(Fr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Fr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Or(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ea,global:ta,isContextDefined:na,isSpecCompliantForm:function(e){return!!(e&&Fr(e.append)&&"FormData"===e[Tr]&&e[Pr])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ur(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const a=Or(e)?[]:{};return Zr(e,((e,t)=>{const o=n(e,r+1);!Lr(o)&&(a[t]=o)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:ca,isThenable:e=>e&&(Ur(e)||Fr(e))&&Fr(e.then)&&Fr(e.catch),setImmediate:ua,asap:ga,isIterable:e=>null!=e&&Fr(e[Pr])};function va(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}ma.inherits(va,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ma.toJSONObject(this.config),code:this.code,status:this.status}}});const ya=va.prototype,ba={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ba[e]={value:e}})),Object.defineProperties(va,ba),Object.defineProperty(ya,"isAxiosError",{value:!0}),va.from=(e,t,n,r,a,o)=>{const i=Object.create(ya);return ma.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),va.call(i,e.message,t,n,r,a),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};function Sa(e){return ma.isPlainObject(e)||ma.isArray(e)}function ka(e){return ma.endsWith(e,"[]")?e.slice(0,-2):e}function wa(e,t,n){return e?e.concat(t).map((function(e,t){return e=ka(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const _a=ma.toFlatObject(ma,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Ca(e,t,n){if(!ma.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=ma.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ma.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,o=n.dots,i=n.indexes,l=(n.Blob||"undefined"!=typeof Blob&&Blob)&&ma.isSpecCompliantForm(t);if(!ma.isFunction(a))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(ma.isDate(e))return e.toISOString();if(!l&&ma.isBlob(e))throw new va("Blob is not supported. Use a Buffer instead.");return ma.isArrayBuffer(e)||ma.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let l=e;if(e&&!a&&"object"==typeof e)if(ma.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(ma.isArray(e)&&function(e){return ma.isArray(e)&&!e.some(Sa)}(e)||(ma.isFileList(e)||ma.endsWith(n,"[]"))&&(l=ma.toArray(e)))return n=ka(n),l.forEach((function(e,r){!ma.isUndefined(e)&&null!==e&&t.append(!0===i?wa([n],r,o):null===i?n:n+"[]",s(e))})),!1;return!!Sa(e)||(t.append(wa(a,n,o),s(e)),!1)}const u=[],d=Object.assign(_a,{defaultVisitor:c,convertValue:s,isVisitable:Sa});if(!ma.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!ma.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),ma.forEach(n,(function(n,o){!0===(!(ma.isUndefined(n)||null===n)&&a.call(t,n,ma.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t}function xa(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ea(e,t){this._pairs=[],e&&Ca(e,this,t)}const Aa=Ea.prototype;function Ra(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ia(e,t,n){if(!t)return e;const r=n&&n.encode||Ra;ma.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(o=a?a(t,n):ma.isURLSearchParams(t)?t.toString():new Ea(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}Aa.append=function(e,t){this._pairs.push([e,t])},Aa.toString=function(e){const t=e?function(t){return e.call(this,t,xa)}:xa;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Na=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ma.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Pa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ta={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ea,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Da="undefined"!=typeof window&&"undefined"!=typeof document,ja="object"==typeof navigator&&navigator||void 0,$a=Da&&(!ja||["ReactNative","NativeScript","NS"].indexOf(ja.product)<0),Oa="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,La=Da&&window.location.href||"http://localhost";var Ma={...Object.freeze({__proto__:null,hasBrowserEnv:Da,hasStandardBrowserEnv:$a,hasStandardBrowserWebWorkerEnv:Oa,navigator:ja,origin:La}),...Ta};function za(e){function t(e,n,r,a){let o=e[a++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),l=a>=e.length;if(o=!o&&ma.isArray(r)?r.length:o,l)return ma.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!i;r[o]&&ma.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],a)&&ma.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}(r[o])),!i}if(ma.isFormData(e)&&ma.isFunction(e.entries)){const n={};return ma.forEachEntry(e,((e,r)=>{t(function(e){return ma.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Fa={transitional:Pa,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=ma.isObject(e);a&&ma.isHTMLForm(e)&&(e=new FormData(e));if(ma.isFormData(e))return r?JSON.stringify(za(e)):e;if(ma.isArrayBuffer(e)||ma.isBuffer(e)||ma.isStream(e)||ma.isFile(e)||ma.isBlob(e)||ma.isReadableStream(e))return e;if(ma.isArrayBufferView(e))return e.buffer;if(ma.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ca(e,new Ma.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Ma.isNode&&ma.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=ma.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ca(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(ma.isString(e))try{return(t||JSON.parse)(e),ma.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Fa.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(ma.isResponse(e)||ma.isReadableStream(e))return e;if(e&&ma.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw va.from(e,va.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ma.classes.FormData,Blob:Ma.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ma.forEach(["delete","get","head","post","put","patch"],(e=>{Fa.headers[e]={}}));var Ga=Fa;const Ua=ma.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Ba=Symbol("internals");function Ha(e){return e&&String(e).trim().toLowerCase()}function Va(e){return!1===e||null==e?e:ma.isArray(e)?e.map(Va):String(e)}function Wa(e,t,n,r,a){return ma.isFunction(r)?r.call(this,t,n):(a&&(t=n),ma.isString(t)?ma.isString(r)?-1!==t.indexOf(r):ma.isRegExp(r)?r.test(t):void 0:void 0)}let qa=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=Ha(t);if(!a)throw new Error("header name must be a non-empty string");const o=ma.findKey(r,a);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Va(e))}const o=(e,t)=>ma.forEach(e,((e,n)=>a(e,n,t)));if(ma.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ma.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&Ua[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(ma.isObject(e)&&ma.isIterable(e)){let n,r,a={};for(const t of e){if(!ma.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?ma.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=Ha(e)){const n=ma.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(ma.isFunction(t))return t.call(this,e,n);if(ma.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ha(e)){const n=ma.findKey(this,e);return!(!n||void 0===this[n]||t&&!Wa(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=Ha(e)){const a=ma.findKey(n,e);!a||t&&!Wa(0,n[a],a,t)||(delete n[a],r=!0)}}return ma.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!Wa(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return ma.forEach(this,((r,a)=>{const o=ma.findKey(n,a);if(o)return t[o]=Va(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();i!==a&&delete t[a],t[i]=Va(r),n[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ma.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&ma.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Ba]=this[Ba]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ha(e);t[r]||(!function(e,t){const n=ma.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return ma.isArray(e)?e.forEach(r):r(e),this}};qa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ma.reduceDescriptors(qa.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),ma.freezeMethods(qa);var Qa=qa;function Ka(e,t){const n=this||Ga,r=t||n,a=Qa.from(r.headers);let o=r.data;return ma.forEach(e,(function(e){o=e.call(n,o,a.normalize(),t?t.status:void 0)})),a.normalize(),o}function Xa(e){return!(!e||!e.__CANCEL__)}function Ja(e,t,n){va.call(this,null==e?"canceled":e,va.ERR_CANCELED,t,n),this.name="CanceledError"}function Ya(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new va("Request failed with status code "+n.status,[va.ERR_BAD_REQUEST,va.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}ma.inherits(Ja,va,{__CANCEL__:!0});const Za=(e,t,n=3)=>{let r=0;const a=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,o=0,i=0;return t=void 0!==t?t:1e3,function(l){const s=Date.now(),c=r[i];a||(a=s),n[o]=l,r[o]=s;let u=i,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),s-a<t)return;const p=c&&s-c;return p?Math.round(1e3*d/p):void 0}}(50,250);return function(e,t){let n,r,a=0,o=1e3/t;const i=(t,o=Date.now())=>{a=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),l=t-a;l>=o?i(e,t):(n=e,r||(r=setTimeout((()=>{r=null,i(n)}),o-l)))},()=>n&&i(n)]}((n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,l=o-r,s=a(l);r=o;e({loaded:o,total:i,progress:i?o/i:void 0,bytes:l,rate:s||void 0,estimated:s&&i&&o<=i?(i-o)/s:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},eo=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},to=e=>(...t)=>ma.asap((()=>e(...t)));var no=Ma.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ma.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ma.origin),Ma.navigator&&/(msie|trident)/i.test(Ma.navigator.userAgent)):()=>!0,ro=Ma.hasStandardBrowserEnv?{write(e,t,n,r,a,o){const i=[e+"="+encodeURIComponent(t)];ma.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ma.isString(r)&&i.push("path="+r),ma.isString(a)&&i.push("domain="+a),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ao(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const oo=e=>e instanceof Qa?{...e}:e;function io(e,t){t=t||{};const n={};function r(e,t,n,r){return ma.isPlainObject(e)&&ma.isPlainObject(t)?ma.merge.call({caseless:r},e,t):ma.isPlainObject(t)?ma.merge({},t):ma.isArray(t)?t.slice():t}function a(e,t,n,a){return ma.isUndefined(t)?ma.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function o(e,t){if(!ma.isUndefined(t))return r(void 0,t)}function i(e,t){return ma.isUndefined(t)?ma.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function l(n,a,o){return o in t?r(n,a):o in e?r(void 0,n):void 0}const s={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,n)=>a(oo(e),oo(t),0,!0)};return ma.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=s[r]||a,i=o(e[r],t[r],r);ma.isUndefined(i)&&o!==l||(n[r]=i)})),n}var lo=e=>{const t=io({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:i,headers:l,auth:s}=t;if(t.headers=l=Qa.from(l),t.url=Ia(ao(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&l.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),ma.isFormData(r))if(Ma.hasStandardBrowserEnv||Ma.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(n=l.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];l.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ma.hasStandardBrowserEnv&&(a&&ma.isFunction(a)&&(a=a(t)),a||!1!==a&&no(t.url))){const e=o&&i&&ro.read(i);e&&l.set(o,e)}return t};var so="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=lo(e);let a=r.data;const o=Qa.from(r.headers).normalize();let i,l,s,c,u,{responseType:d,onUploadProgress:p,onDownloadProgress:f}=r;function h(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let g=new XMLHttpRequest;function m(){if(!g)return;const r=Qa.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Ya((function(e){t(e),h()}),(function(e){n(e),h()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new va("Request aborted",va.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new va("Network Error",va.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||Pa;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new va(t,a.clarifyTimeoutError?va.ETIMEDOUT:va.ECONNABORTED,e,g)),g=null},void 0===a&&o.setContentType(null),"setRequestHeader"in g&&ma.forEach(o.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),ma.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),d&&"json"!==d&&(g.responseType=r.responseType),f&&([s,u]=Za(f,!0),g.addEventListener("progress",s)),p&&g.upload&&([l,c]=Za(p),g.upload.addEventListener("progress",l),g.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{g&&(n(!t||t.type?new Ja(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Ma.protocols.indexOf(v)?n(new va("Unsupported protocol "+v+":",va.ERR_BAD_REQUEST,e)):g.send(a||null)}))};var co=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof va?t:new Ja(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,a(new va(`timeout ${t} of ms exceeded`,va.ETIMEDOUT))}),t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:l}=r;return l.unsubscribe=()=>ma.asap(i),l}};const uo=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},po=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},fo=(e,t,n,r)=>{const a=async function*(e,t){for await(const n of po(e))yield*uo(n,t)}(e,t);let o,i=0,l=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return l(),void e.close();let o=r.byteLength;if(n){let e=i+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw l(e),e}},cancel:e=>(l(e),a.return())},{highWaterMark:2})},ho="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,go=ho&&"function"==typeof ReadableStream,mo=ho&&("function"==typeof TextEncoder?(vo=new TextEncoder,e=>vo.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var vo;const yo=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},bo=go&&yo((()=>{let e=!1;const t=new Request(Ma.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),So=go&&yo((()=>ma.isReadableStream(new Response("").body))),ko={stream:So&&(e=>e.body)};var wo;ho&&(wo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ko[e]&&(ko[e]=ma.isFunction(wo[e])?t=>t[e]():(t,n)=>{throw new va(`Response type '${e}' is not supported`,va.ERR_NOT_SUPPORT,n)})})));const _o=async(e,t)=>{const n=ma.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(ma.isBlob(e))return e.size;if(ma.isSpecCompliantForm(e)){const t=new Request(Ma.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ma.isArrayBufferView(e)||ma.isArrayBuffer(e)?e.byteLength:(ma.isURLSearchParams(e)&&(e+=""),ma.isString(e)?(await mo(e)).byteLength:void 0)})(t):n};const Co={http:null,xhr:so,fetch:ho&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:s,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:p}=lo(e);c=c?(c+"").toLowerCase():"text";let f,h=co([a,o&&o.toAbortSignal()],i);const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let m;try{if(s&&bo&&"get"!==n&&"head"!==n&&0!==(m=await _o(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(ma.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=eo(m,Za(to(s)));r=fo(n.body,65536,e,t)}}ma.isString(d)||(d=d?"include":"omit");const a="credentials"in Request.prototype;f=new Request(t,{...p,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:a?d:void 0});let o=await fetch(f);const i=So&&("stream"===c||"response"===c);if(So&&(l||i&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=ma.toFiniteNumber(o.headers.get("content-length")),[n,r]=l&&eo(t,Za(to(l),!0))||[];o=new Response(fo(o.body,65536,n,(()=>{r&&r(),g&&g()})),e)}c=c||"text";let v=await ko[ma.findKey(ko,c)||"text"](o,e);return!i&&g&&g(),await new Promise(((t,n)=>{Ya(t,n,{data:v,headers:Qa.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:f})}))}catch(t){if(g&&g(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new va("Network Error",va.ERR_NETWORK,e,f),{cause:t.cause||t});throw va.from(t,t&&t.code,e,f)}})};ma.forEach(Co,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const xo=e=>`- ${e}`,Eo=e=>ma.isFunction(e)||null===e||!1===e;var Ao=e=>{e=ma.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Eo(n)&&(r=Co[(t=String(n)).toLowerCase()],void 0===r))throw new va(`Unknown adapter '${t}'`);if(r)break;a[t||"#"+o]=r}if(!r){const e=Object.entries(a).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new va("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(xo).join("\n"):" "+xo(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Ro(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ja(null,e)}function Io(e){Ro(e),e.headers=Qa.from(e.headers),e.data=Ka.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ao(e.adapter||Ga.adapter)(e).then((function(t){return Ro(e),t.data=Ka.call(e,e.transformResponse,t),t.headers=Qa.from(t.headers),t}),(function(t){return Xa(t)||(Ro(e),t&&t.response&&(t.response.data=Ka.call(e,e.transformResponse,t.response),t.response.headers=Qa.from(t.response.headers))),Promise.reject(t)}))}const No="1.9.0",Po={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Po[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const To={};Po.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,o)=>{if(!1===e)throw new va(r(a," has been removed"+(t?" in "+t:"")),va.ERR_DEPRECATED);return t&&!To[a]&&(To[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,o)}},Po.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};var Do={assertOptions:function(e,t,n){if("object"!=typeof e)throw new va("options must be an object",va.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],i=t[o];if(i){const t=e[o],n=void 0===t||i(t,o,e);if(!0!==n)throw new va("option "+o+" must be "+n,va.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new va("Unknown option "+o,va.ERR_BAD_OPTION)}},validators:Po};const jo=Do.validators;let $o=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Na,response:new Na}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=io(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&Do.assertOptions(n,{silentJSONParsing:jo.transitional(jo.boolean),forcedJSONParsing:jo.transitional(jo.boolean),clarifyTimeoutError:jo.transitional(jo.boolean)},!1),null!=r&&(ma.isFunction(r)?t.paramsSerializer={serialize:r}:Do.assertOptions(r,{encode:jo.function,serialize:jo.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Do.assertOptions(t,{baseUrl:jo.spelling("baseURL"),withXsrfToken:jo.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&ma.merge(a.common,a[t.method]);a&&ma.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=Qa.concat(o,a);const i=[];let l=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const s=[];let c;this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)}));let u,d=0;if(!l){const e=[Io.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,s),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let p=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{c=Io.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,u=s.length;d<u;)c=c.then(s[d++],s[d++]);return c}getUri(e){return Ia(ao((e=io(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};ma.forEach(["delete","get","head","options"],(function(e){$o.prototype[e]=function(t,n){return this.request(io(n||{},{method:e,url:t,data:(n||{}).data}))}})),ma.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(io(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}$o.prototype[e]=t(),$o.prototype[e+"Form"]=t(!0)}));var Oo=$o;var Lo=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new Ja(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const n=new e((function(e){t=e}));return{token:n,cancel:t}}};const Mo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mo).forEach((([e,t])=>{Mo[t]=e}));var zo=Mo;const Fo=function e(t){const n=new Oo(t),r=Rr(Oo.prototype.request,n);return ma.extend(r,Oo.prototype,n,{allOwnKeys:!0}),ma.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(io(t,n))},r}(Ga);Fo.Axios=Oo,Fo.CanceledError=Ja,Fo.CancelToken=Lo,Fo.isCancel=Xa,Fo.VERSION=No,Fo.toFormData=Ca,Fo.AxiosError=va,Fo.Cancel=Fo.CanceledError,Fo.all=function(e){return Promise.all(e)},Fo.spread=function(e){return function(t){return e.apply(null,t)}},Fo.isAxiosError=function(e){return ma.isObject(e)&&!0===e.isAxiosError},Fo.mergeConfig=io,Fo.AxiosHeaders=Qa,Fo.formToJSON=e=>za(ma.isHTMLForm(e)?new FormData(e):e),Fo.getAdapter=Ao,Fo.HttpStatusCode=zo,Fo.default=Fo;var Go=Fo;const{Axios:Uo,AxiosError:Bo,CanceledError:Ho,isCancel:Vo,CancelToken:Wo,VERSION:qo,all:Qo,Cancel:Ko,isAxiosError:Xo,spread:Jo,toFormData:Yo,AxiosHeaders:Zo,HttpStatusCode:ei,formToJSON:ti,getAdapter:ni,mergeConfig:ri}=Go,ai=e.getInstance();const oi=new class{constructor(){this.lastApiCallTimestamp=0,this.lastApiFailureTimestamp=0,ai.log("InventreeApiService","Initializing with Axios."),this.axiosInstance=Go.create(),this.axiosInstance.interceptors.request.use((e=>{var t,n,r,a;const o=os.getState(),i=Zn(o).apiKey;return e.headers=e.headers||new Zo,i&&e.headers.set("Authorization",`Token ${i}`),"post"!==(null===(t=e.method)||void 0===t?void 0:t.toLowerCase())&&"patch"!==(null===(n=e.method)||void 0===n?void 0:n.toLowerCase())&&"put"!==(null===(r=e.method)||void 0===r?void 0:r.toLowerCase())||e.headers.set("Content-Type","application/json"),ai.log("InventreeApiService",`Axios Request: ${null===(a=e.method)||void 0===a?void 0:a.toUpperCase()} ${e.url}`,{data:e.data,level:"debug"}),e}),(e=>(ai.error("InventreeApiService","Axios Request Error Interceptor",{data:e}),Promise.reject(e)))),this.axiosInstance.interceptors.response.use((e=>(ai.log("InventreeApiService",`Axios Response: ${e.status} from ${e.config.url}`,{level:"debug"}),this.lastApiFailureTimestamp=0,e)),(e=>{var t,n,r;return ai.error("InventreeApiService",`Axios Response Error Interceptor: ${e.message}`,{data:{url:null===(t=e.config)||void 0===t?void 0:t.url,status:null===(n=e.response)||void 0===n?void 0:n.status,responseData:null===(r=e.response)||void 0===r?void 0:r.data}}),this.lastApiFailureTimestamp=Date.now(),Promise.reject(e)}))}async request(e,t={}){const n=os.getState(),r=Zn(n),a=r.url,o=r.throttleDelayMs,i=r.failedRequestRetryDelayMs;if(!a){const e="API base URL is not configured in Redux store (apiSlice).";throw ai.error("InventreeApiService",e),this.lastApiFailureTimestamp=Date.now(),new Error(e)}const l=`${a.endsWith("/")?a.slice(0,-1):a}/${e.startsWith("/")?e.substring(1):e}`;if(this.lastApiFailureTimestamp>0){const e=Date.now()-this.lastApiFailureTimestamp;if(e<i){const t=i-e;ai.warn("InventreeApiService",`Recent API Failure: Delaying next request by ${t}ms.`),await new Promise((e=>setTimeout(e,t)))}}if(o>0){const e=Date.now()-this.lastApiCallTimestamp;if(e<o){const t=o-e;ai.log("InventreeApiService",`General Throttling: Delaying by ${t}ms.`,{level:"debug"}),await new Promise((e=>setTimeout(e,t))),this.lastApiCallTimestamp=Date.now()}else this.lastApiCallTimestamp=Date.now()}else this.lastApiCallTimestamp=Date.now();try{const e=Object.assign({url:l,method:t.method||"GET",data:t.data,params:t.params,headers:t.headers,timeout:15e3},t);let n;try{n=await this.axiosInstance.request(e)}catch(e){throw e}return 204===n.status?null:n.data}catch(e){throw ai.error("InventreeApiService",`Axios request to ${l} failed in main try-catch.`,{data:e}),e}}async getPart(e){ai.log("InventreeApiService",`Fetching part ${e}...`);try{return await this.request(`part/${e}/`)}catch(t){return ai.error("InventreeApiService",`Failed to get part ${e}:`,{data:t}),null}}async getParts(e={}){ai.log("InventreeApiService","Fetching parts with params:",{data:e});try{return await this.request("part/",{params:e})}catch(t){return ai.error("InventreeApiService","Failed to get parts:",{data:{params:e,error:t}}),[]}}async adjustStock(e,t,n,r){var a;ai.log("InventreeApiService",`Adjusting stock for part ${e} by ${t}. Location: ${n}, Notes: "${r}"`);try{if(0===t)ai.log("InventreeApiService",`Relative amount is 0 for part ${e}, no stock change needed.`);else if(t>0){const a=await this.addStockItem(e,t,n,r);if(!a)throw new Error("Failed to add stock item during positive adjustment.");ai.log("InventreeApiService",`Added stock item PK: ${a.pk} for part ${e}.`)}else{const o=Math.abs(t);ai.log("InventreeApiService",`Attempting to remove ${o} for part ${e}.`),await this.consolidateStockForPart(e,n,r||"Consolidating before stock removal");const i=await this.getStockItemsForPart(e,n),l=null!==(a=null==i?void 0:i.reduce(((e,t)=>e+parseFloat(t.quantity||"0")),0))&&void 0!==a?a:0;if(!i||0===i.length||l<o)ai.warn("InventreeApiService",`Cannot remove ${o} for part ${e}: Insufficient stock (${l}) available after consolidation attempt.`);else{const t=i[0];if(!t)throw ai.error("InventreeApiService",`Logic error: Stock exists (${l}) but no stock item found after consolidation for part ${e}.`),new Error("Stock item not found after consolidation despite available quantity.");ai.log("InventreeApiService",`Removing ${o} from stock item PK ${t.pk} for part ${e}.`);await this.removeStockItems([{pk:t.pk,quantity:o}],r||"Stock removal")||ai.error("InventreeApiService",`Stock removal API call failed for part ${e}, item ${t.pk}.`)}}ai.log("InventreeApiService",`Fetching final part details for ${e} after stock adjustment.`);const o=await this.getPart(e);return o?(ai.log("InventreeApiService",`Stock adjustment process complete for part ${e}. Final stock: ${o.in_stock}.`),{pk:e,newTotalStock:o.in_stock}):(ai.error("InventreeApiService",`Failed to fetch updated part details for part ${e} after stock adjustment.`),null)}catch(t){ai.error("InventreeApiService",`Failed to adjust stock for part ${e}:`,{data:t});try{const t=await this.getPart(e);if(t)return ai.warn("InventreeApiService",`Returning last known stock (${t.in_stock}) for part ${e} after adjustment error.`),{pk:e,newTotalStock:t.in_stock}}catch(t){ai.error("InventreeApiService",`Failed to fetch final part details for ${e} even after catching primary error:`,{data:t})}return null}}async getPartParameters(e){ai.log("InventreeApiService",`Fetching parameters for part ${e}...`);try{return await this.request("part/parameter/",{params:{part:e}})}catch(t){return ai.error("InventreeApiService",`Failed to get parameters for part ${e}:`,{data:t}),null}}async updatePartParameter(e,t){ai.log("InventreeApiService",`Updating parameter ${e} to value: "${t}"...`);try{return await this.request(`part/parameter/${e}/`,{method:"PATCH",data:{data:t}})}catch(t){return ai.error("InventreeApiService",`Failed to update parameter ${e}:`,{data:t}),null}}async getStockItemsForPart(e,t){ai.log("InventreeApiService",`Fetching stock items for part ${e}${t?` at location ${t}`:""}...`);try{const n={part:String(e)};return void 0!==t&&(n.location=String(t)),await this.request("stock/",{params:n})}catch(t){return ai.error("InventreeApiService",`Failed to get stock items for part ${e}:`,{data:t}),null}}async addStockItem(e,t,n,r){ai.log("InventreeApiService",`Adding stock for part ${e}: quantity ${t}, location ${n}, notes: "${r}"`);try{const a={part:e,quantity:String(t),status:10};return void 0!==n&&(a.location=n),r&&(a.notes=r),await this.request("stock/",{method:"POST",data:a})}catch(t){return ai.error("InventreeApiService",`Failed to add stock for part ${e}:`,{data:t}),null}}async removeStockItems(e,t){if(ai.log("InventreeApiService",`Removing stock for items: ${e.map((e=>`PK: ${e.pk}, Qty: ${e.quantity}`)).join("; ")}. Notes: "${t}"`),0===e.length)return ai.warn("InventreeApiService","removeStockItems called with empty stockItems array."),{success:!0,message:"No items to remove."};try{const n={items:e.map((e=>({pk:e.pk,quantity:String(e.quantity)})))};return t&&(n.notes=t),await this.request("stock/remove/",{method:"POST",data:n})}catch(t){return ai.error("InventreeApiService","Failed to remove stock items:",{data:{stockItems:e,error:t}}),null}}async deleteStockItem(e){ai.log("InventreeApiService",`Deleting stock item PK ${e}...`);try{return void await this.request(`stock/${e}/`,{method:"DELETE"})}catch(t){return ai.error("InventreeApiService",`Failed to delete stock item ${e}:`,{data:t}),null}}async consolidateStockForPart(e,t,n){var r;ai.log("InventreeApiService",`Consolidating stock for part ${e}${void 0!==t?` to location ${t}`:""}...`);try{const a=await this.getStockItemsForPart(e);if(!a)return ai.error("InventreeApiService",`Failed to fetch existing stock items for part ${e} during consolidation.`),null;if(0===a.length)return ai.log("InventreeApiService",`No stock items found for part ${e} to consolidate.`),null;let o=0;a.forEach((e=>{const t=parseFloat(e.quantity);isNaN(t)?ai.warn("InventreeApiService",`Invalid quantity found for stock item ${e.pk}: ${e.quantity}. Skipping in total calculation.`):o+=t}));const i=n||`Consolidated from ${a.length} item(s).`,l=a.map((e=>e.pk));let s=t;void 0===s&&(s=null===(r=a[0])||void 0===r?void 0:r.location);const c=null===s?void 0:s;if(void 0===c&&o>0){const t=a.find((e=>null!==e.location&&void 0!==e.location));if(!t||null===t.location||void 0===t.location)return ai.error("InventreeApiService",`Cannot determine location for consolidated stock for part ${e}. Provide targetLocationId or ensure at least one existing item has a location.`),null;ai.warn("InventreeApiService",`No targetLocationId provided and first item had no location. Using location ${t.location} from item ${t.pk}.`),s=t.location}let u=null;if(o>0){if(u=await this.addStockItem(e,o,c,i),!u)return ai.error("InventreeApiService",`Failed to create new consolidated stock item for part ${e}. Aborting consolidation.`),null;ai.log("InventreeApiService",`Created new consolidated stock item PK: ${u.pk}`);const t=l.indexOf(u.pk);t>-1&&l.splice(t,1)}else ai.log("InventreeApiService",`Total quantity is 0 for part ${e}. Proceeding to delete old items.`);ai.log("InventreeApiService",`Deleting ${l.length} old stock items for part ${e}: [${l.join(", ")}]`);let d=0;for(const e of l){null===await this.deleteStockItem(e)&&(ai.warn("InventreeApiService",`Failed to delete old stock item ${e} during consolidation.`),d++)}return d>0&&ai.warn("InventreeApiService",`Consolidation completed for part ${e}, but ${d} old stock items failed to delete.`),ai.log("InventreeApiService",`Successfully consolidated stock for part ${e}. Returning ${u?`new item PK ${u.pk}`:"null (zero stock)"}.`),u}catch(t){return ai.error("InventreeApiService",`Failed to consolidate stock for part ${e}:`,{data:t}),null}}},ii=e.getInstance(),li=$n("parameters/fetchForPart",(async(e,t)=>{const n=t.getState(),r=Jn(n);if(ii.log("ParameterThunk",`Fetching parameters for part ID: ${e}`,{category:"parameters",subsystem:"thunk-fetch"}),!r){const e="Direct API is not initialized (checked via apiSlice).";return ii.error("ParameterThunk",e,{category:"parameters",subsystem:"thunk-fetch"}),t.rejectWithValue(e)}try{const t=await oi.getPartParameters(e);if(null===t)throw new Error("API call to getPartParameters returned null.");const n=t.length;return ii.log("ParameterThunk",`Successfully fetched ${n} parameters for part ID: ${e}`,{category:"parameters",subsystem:"thunk-fetch"}),{partId:e,parameters:t}}catch(n){const r=`Failed to fetch parameters for part ${e}: ${n.message||n}`;return ii.error("ParameterThunk",r,{error:n,category:"parameters",subsystem:"thunk-fetch"}),t.rejectWithValue(r)}})),si=$n("parameters/fetchForReferencedParts",(async(e,{getState:t,rejectWithValue:n,dispatch:r})=>{const a=t(),o=Jn(a);if(ii.log("fetchParametersForReferencedParts Thunk",`Thunk started. Original partIds received: ${e.join(", ")}`,{level:"debug"}),!o){const e="API not initialized. Cannot fetch referenced parameters.";return ii.error("fetchParametersForReferencedParts Thunk",e),n(e)}if(!e||0===e.length)return ii.log("fetchParametersForReferencedParts Thunk","No part IDs provided, skipping fetch."),{};const i=e.filter((e=>"failed"!==Ei(a,e)||(ii.warn("fetchParametersForReferencedParts Thunk",`Part ${e} previously failed. CONSIDER if this check is still needed or if fetchParametersForPart should always attempt.`),!1)));if(0===i.length)return ii.log("fetchParametersForReferencedParts Thunk","All provided part IDs are already loading, recently failed, or list was empty after filtering. Skipping API calls."),{};ii.log("fetchParametersForReferencedParts Thunk",`Attempting to fetch parameters for part IDs: ${i.join(", ")} (after filtering). Original IDs: ${e.join(", ")}`);const l={};try{for(let e=0;e<i.length;e+=5){const t=i.slice(e,e+5);ii.log("fetchParametersForReferencedParts Thunk",`Processing batch: [${t.join(", ")}]`,{level:"debug"});for(const e of t){try{const t=await r(li(e));if(li.fulfilled.match(t))l[e]={data:t.payload.parameters},ii.log("fetchParametersForReferencedParts Thunk",`Fetched ${t.payload.parameters.length} parameters for part ${e}.`,{level:"debug",partIdForContext:e});else if(li.rejected.match(t)){const n=`Nested fetch for part ${e} rejected: ${t.payload||t.error.message}`;l[e]={data:[],error:n},ii.error("fetchParametersForReferencedParts Thunk",n,{partIdForContext:e,errorDetail:t.payload||t.error})}else{const n=`Nested fetch for part ${e} had unexpected result.`;l[e]={data:[],error:n},ii.error("fetchParametersForReferencedParts Thunk",n,{partIdForContext:e,resultAction:t})}}catch(t){const n=`Critical error dispatching/handling fetch for part ${e}: ${(null==t?void 0:t.message)||String(t)}`;ii.error("fetchParametersForReferencedParts Thunk",n,{partIdForContext:e,errorDetail:t}),l[e]={data:[],error:n}}const n=i.indexOf(e)===i.length-1,a=t.indexOf(e)===t.length-1;n||a||(ii.log("fetchParametersForReferencedParts Thunk","Delaying 50ms before next call in batch.",{level:"silly"}),await new Promise((e=>setTimeout(e,50))))}}return ii.log("fetchParametersForReferencedParts Thunk",`Finished processing parameter fetches for ${i.length} parts.`),ii.log("fetchParametersForReferencedParts Thunk","Final results object being returned:",{data:l,level:"debug"}),l}catch(e){const t=`Critical error during batch processing in fetchParametersForReferencedParts: ${e.message||e}`;return ii.error("fetchParametersForReferencedParts Thunk",t,{batchIds:i}),i.forEach((e=>{l[e]||(l[e]={data:[],error:`Batch processing error: ${t}`})})),l}})),ci=$n("parameters/updateValue",(async({partId:e,paramName:t,value:n},{getState:r,rejectWithValue:a})=>{const o=r();if(!Jn(o)){const e="API not initialized. Cannot update parameter.";return ii.error("updateParameterValue Thunk",e),a(e)}try{const r=(o.parameters.parametersByPartId[e]||[]).find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t}));if(!r){const n=`Parameter '${t}' not found in state for part ${e}. Cannot get PK for update.`;return ii.error("updateParameterValue Thunk",n),a(n)}const i=r.pk;if(!await oi.updatePartParameter(i,n))throw new Error("API call to updatePartParameter returned null.");return ii.log("updateParameterValue Thunk",`Successfully updated param PK ${i} (${t}) for part ${e} to ${n}.`),{partId:e,parameterName:t,value:n}}catch(n){const r=`Failed to update parameter ${t} for part ${e}: ${n.message||n}`;return ii.error("updateParameterValue Thunk",r),a(r)}})),ui=$n("parameters/fetchConfigured",(async(e,{dispatch:t,getState:n,rejectWithValue:r})=>{ii.log("ParameterThunk","Fetching parameters based on config.dataSources.inventreeParametersToFetch...");const a=n();if(!Jn(a))return void ii.warn("ParameterThunk","API not initialized. Cannot fetch configured parameters.");const o=(e=>{var t;return(null===(t=e.config.data_sources)||void 0===t?void 0:t.inventreeParametersToFetch)||[]})(a),i=a.parts.partsById,l=Object.keys(i).map((e=>parseInt(e,10)));if(!o||0===o.length)return void ii.log("ParameterThunk","No inventreeParametersToFetch configured. Skipping proactive parameter fetch.");const s=new Set;o.forEach((e=>{"all_loaded"===e.targetPartIds?l.forEach((e=>s.add(e))):Array.isArray(e.targetPartIds)&&e.targetPartIds.forEach((e=>{"number"!=typeof e||isNaN(e)||s.add(e)}))}));const c=Array.from(s);if(c.length>0){ii.log("ParameterThunk",`Dispatching fetchParametersForReferencedParts for configured part IDs: ${c.join(", ")}`);try{await t(si(c)).unwrap(),ii.log("ParameterThunk",`Successfully initiated fetch for configured parameters. Parts: ${c.join(", ")}`)}catch(e){ii.error("ParameterThunk",`Failed to fetch some configured parameters. Parts: ${c.join(", ")}`,{error:e})}}else ii.log("ParameterThunk","No specific part IDs derived from inventreeParametersToFetch configuration.")})),di=e.getInstance(),pi=Gn({name:"parameters",initialState:{conditionalPartEffects:{},actions:{},parameterValues:{},parameterLoadingStatus:{},parameterError:{},config:null,strictWebSocketMode:!1,recentlyChanged:[],cache:{conditionResults:{},lastCleared:Date.now()},parametersByPartId:{}},reducers:{setConditionalPartEffectsBatch(e,t){e.conditionalPartEffects=t.payload,di.log("parametersSlice","Conditional part effects batch updated.",{count:Object.keys(t.payload).length,level:"debug"})},clearConditionalPartEffects(e){e.conditionalPartEffects={},di.log("parametersSlice","Conditional part effects cleared.",{level:"debug"})},setActions(e,t){const{entityId:n,actions:r}=t.payload;e.actions[n]=r},setConfig(e,t){e.config=t.payload},setStrictWebSocketMode(e,t){e.strictWebSocketMode=t.payload},clearConditionCache(e){e.cache.conditionResults={},e.cache.lastCleared=Date.now(),di.log("parametersSlice","Condition cache cleared.",{level:"debug"})},clearCache(e){e.cache.conditionResults={},e.cache.lastCleared=Date.now(),e.parameterValues={},e.parameterLoadingStatus={},e.parameterError={},e.recentlyChanged=[],di.info("parametersSlice","Full parameter cache cleared (values, status, errors, conditions, recent).")},checkCondition(e,t){},updateValue(e,t){const{partId:n,paramName:r,value:a,source:o}=t.payload;e.parameterValues[n]||(e.parameterValues[n]={},di.log("parametersSlice",`Created parameter entry for part ${n} during updateValue.`,{level:"debug"})),e.parameterValues[n][r]?e.parameterValues[n][r].data=a:(e.parameterValues[n][r]={pk:0,part:n,template:0,template_detail:{pk:0,name:r,units:"",description:"",checkbox:!1,choices:"",selectionlist:null},data:a,data_numeric:null},di.log("parametersSlice",`Created parameter entry for ${r} on part ${n} during updateValue.`,{level:"debug"})),"succeeded"!==e.parameterLoadingStatus[n]&&(e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null);const i=`${n}:${r}`;e.recentlyChanged.includes(i)||(e.recentlyChanged.push(i),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100))),di.log("parametersSlice",`Updated value for ${i} to '${a}' (Source: ${o||"Unknown"}). Status set to succeeded.`,{level:"debug"})},webSocketUpdateReceived(e,t){var n,r,a,o;const{partId:i,parameterName:l,value:s,source:c}=t.payload;di.log("parametersSlice","[Reducer START] webSocketUpdateReceived",{level:"info",partId:i,parameterName:l,receivedValue:s,valueType:typeof s,source:c}),e.parameterValues[i]||(e.parameterValues[i]={},di.log("parametersSlice",`Created parameter structure for part ${i} during WebSocket update.`,{level:"debug"}));const u=null===(r=null===(n=e.parameterValues[i])||void 0===n?void 0:n[l])||void 0===r?void 0:r.data;di.log("parametersSlice",`Value before update for ${i}:${l}: ${u}`,{level:"debug"}),e.parameterValues[i][l]?(e.parameterValues[i][l].data=String(s),di.log("parametersSlice",`Updated existing parameter ${l} for part ${i} via WebSocket. New data: ${String(s)}`,{level:"debug"})):(e.parameterValues[i][l]={pk:0,part:i,template:0,template_detail:{pk:0,name:l,units:"",description:"",checkbox:"boolean"==typeof s,choices:"",selectionlist:null},data:String(s),data_numeric:"number"==typeof s?s:null},di.log("parametersSlice",`Created new parameter entry for ${l} on part ${i} via WebSocket. New data: ${String(s)}`,{level:"debug"}));const d=null===(o=null===(a=e.parameterValues[i])||void 0===a?void 0:a[l])||void 0===o?void 0:o.data;di.log("parametersSlice",`Value AFTER update for ${i}:${l}: ${d}`,{level:"debug"}),e.parameterLoadingStatus[i]="succeeded",e.parameterError[i]=null;const p=`${i}:${l}`;e.recentlyChanged.includes(p)||(e.recentlyChanged.push(p),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100))),di.log("parametersSlice",`[Reducer END] Value for ${p} processed via WebSocket. Status set to succeeded. Final data in store: ${d}`,{level:"info"})},markChanged(e,t){const{parameterId:n}=t.payload;e.recentlyChanged.includes(n)||(e.recentlyChanged.push(n),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100)))},addParametersForPart(e,t){const{partId:n,parameters:r}=t.payload;e.parametersByPartId[n]||(e.parametersByPartId[n]=[]),e.parametersByPartId[n]=[...e.parametersByPartId[n],...r]},updateParameterForPart(e,t){const{partId:n,parameterName:r,value:a}=t.payload,o=e.parametersByPartId[n];if(o){const e=o.findIndex((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===r}));-1!==e?(o[e]=Object.assign(Object.assign({},o[e]),{data:a}),di.log("ParameterSlice",`Updated parameter '${r}' for part ${n} to value: ${a}`,{level:"debug"})):di.warn("ParameterSlice",`Parameter '${r}' not found for part ${n} during update.`)}else di.warn("ParameterSlice",`Part ${n} not found in parametersByPartId during update.`)}},extraReducers:e=>{e.addCase(li.pending,((e,t)=>{const n=t.meta.arg;e.parameterLoadingStatus[n]="loading",e.parameterError[n]=null,di.log("parametersSlice",`Fetching parameters for part ${n}...`,{level:"debug"})})).addCase(li.fulfilled,((e,t)=>{const{partId:n,parameters:r}=t.payload;e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null,e.parameterValues[n]||(e.parameterValues[n]={}),r.length>0?(r.forEach((t=>{var r;const a=null===(r=t.template_detail)||void 0===r?void 0:r.name;a?e.parameterValues[n][a]=t:di.warn("parametersSlice",`Fetched parameter for part ${n} is missing template_detail.name`,t)})),di.log("parametersSlice",`Successfully fetched ${r.length} parameters for part ${n}.`,{level:"debug"})):di.log("parametersSlice",`Fetched parameters for part ${n}, but received an empty array. Marking as succeeded.`,{level:"debug"})})).addCase(li.rejected,((e,t)=>{var n;const r=t.meta.arg;e.parameterLoadingStatus[r]="failed",e.parameterError[r]=null!==(n=t.payload)&&void 0!==n?n:"Failed to fetch parameters",di.error("parametersSlice",`Failed to fetch parameters for part ${r}: ${e.parameterError[r]}`)})).addCase(si.pending,((e,t)=>{di.log("parametersSlice","Handling fetchParametersForReferencedParts.pending",{level:"debug",subsystem:"thunkStatus"});const n=t.meta.arg;di.log("parametersSlice",`- Pending for partIds from thunk argument: ${n.join(", ")}`,{level:"debug",subsystem:"thunkStatus",data:n}),n.forEach((t=>{var n;const r=null!==(n=e.parameterLoadingStatus[t])&&void 0!==n?n:"idle";"idle"===r||"failed"===r?(e.parameterLoadingStatus[t]="loading",e.parameterError[t]=null,di.log("parametersSlice",`Set part ${t} to loading (was ${r})`,{level:"silly"})):di.log("parametersSlice",`Part ${t} already ${r}, not changing to loading in pending reducer.`,{level:"silly"})}))})).addCase(si.fulfilled,((e,t)=>{const n=t.payload;di.log("parametersSlice","Handling fetchParametersForReferencedParts.fulfilled",{level:"debug",subsystem:"thunkStatus",data:n}),Object.entries(n).forEach((([t,n])=>{const r=parseInt(t,10);if(n.error)e.parameterLoadingStatus[r]="failed",e.parameterError[r]=n.error,e.parameterValues[r]||(e.parameterValues[r]={}),di.warn("parametersSlice",`fetchParametersForReferencedParts fulfilled but part ${r} failed: ${n.error}`);else{e.parameterLoadingStatus[r]="succeeded",e.parameterError[r]=null,e.parameterValues[r]||(e.parameterValues[r]={});const t={};n.data.length>0&&n.data.forEach((e=>{var n;const a=null===(n=e.template_detail)||void 0===n?void 0:n.name;a?t[a]=e:di.warn("parametersSlice",`Fetched parameter for part ${r} is missing template_detail.name`,{paramData:e})})),e.parameterValues[r]=t,di.log("parametersSlice",`Updated parameters for part ${r}. Count: ${n.data.length}.`,{level:"debug"})}}))})).addCase(si.rejected,((e,t)=>{di.error("parametersSlice",`Handling fetchParametersForReferencedParts.rejected: ${t.payload||t.error.message}`,{subsystem:"thunkStatus",error:t.payload||t.error});const n=t.meta.arg;n&&Array.isArray(n)&&n.forEach((n=>{"loading"===e.parameterLoadingStatus[n]&&(e.parameterLoadingStatus[n]="failed",e.parameterError[n]=t.payload||t.error.message||"Thunk rejected")}))})).addCase(ci.pending,((e,t)=>{const{partId:n,paramName:r}=t.meta.arg;di.log("parametersSlice",`Updating parameter ${r} for part ${n}...`,{level:"debug"})})).addCase(ci.fulfilled,((e,t)=>{const{partId:n,paramName:r,value:a}=t.payload,o=`${n}:${r}`;e.parameterValues[n]&&e.parameterValues[n][r]?(e.parameterValues[n][r].data=a,di.log("parametersSlice",`Successfully updated parameter ${o} to '${a}' via API.`,{level:"debug"})):di.warn("parametersSlice",`Parameter ${o} not found in state during updateParameterValue.fulfilled. Value set by API might not be reflected unless fetched.`),e.parameterLoadingStatus[n]="succeeded",e.parameterError[n]=null,e.recentlyChanged.includes(o)||(e.recentlyChanged.push(o),e.recentlyChanged.length>100&&(e.recentlyChanged=e.recentlyChanged.slice(-100)))})).addCase(ci.rejected,((e,t)=>{const{partId:n,paramName:r}=t.meta.arg,a=`${n}:${r}`;di.error("parametersSlice",`Failed to update parameter ${a} via API: ${t.payload}`)}))}}),{setConditionalPartEffectsBatch:fi,clearConditionalPartEffects:hi,setActions:gi,setConfig:mi,setStrictWebSocketMode:vi,clearConditionCache:yi,clearCache:bi,checkCondition:Si,updateValue:ki,webSocketUpdateReceived:wi,markChanged:_i,addParametersForPart:Ci,updateParameterForPart:xi}=pi.actions,Ei=(e,t)=>{var n;return null!==(n=e.parameters.parameterLoadingStatus[t])&&void 0!==n?n:"idle"},Ai=(e,t)=>e.parameters.conditionalPartEffects[t];var Ri,Ii,Ni=pi.reducer;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(Ri||(Ri={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(Ii||(Ii={}));var Pi=function(e,t,n,r){r=r||{},n=null==n?{}:n;var a=new Event(t,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});return a.detail=n,e.dispatchEvent(a),a},Ti=function(e){Pi(window,"haptic",e)};class Di{constructor(e){this.hass=e,console.debug("üåà WLED Service: Initialized")}async toggleLED(e){try{if(!e)throw Ti("failure"),new Error("No entity_id provided");const t=this.hass.states[e];if(!t)throw Ti("failure"),new Error(`Entity ${e} not found`);await this.hass.callService("light","on"===t.state?"turn_off":"turn_on",{entity_id:e}),Ti("success")}catch(e){throw Ti("failure"),console.error("Failed to toggle LED:",e),e}}async locatePart(e,t){var n,r,a;try{if(console.debug("üåà WLED: Starting locate part process",{part:e,config:t}),!t.entity_id)throw Ti("failure"),new Error("No entity_id configured for WLED");const o=null===(r=null===(n=e.parameters)||void 0===n?void 0:n.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t.parameter_name})))||void 0===r?void 0:r.data;if(!o)throw new Error(`No ${t.parameter_name} parameter found for part`);const i=parseInt(o);console.debug("üåà WLED: Using LED position:",i);const l=this.hass.states[t.entity_id];if(!l)throw new Error(`Entity ${t.entity_id} not found`);const s=(null===(a=t.ip_address)||void 0===a?void 0:a.replace("http://",""))||"192.168.0.61";console.debug("üåà WLED IP:",s);const c="on"===l.state;await this.hass.callService("rest_command","wled_segment",{url:`http://${s}/json/state`,payload:JSON.stringify(c?{on:!1}:{on:!0,bri:t.intensity||128,seg:[{id:0,start:i-1,stop:i,col:[[255,0,0],[0,0,0],[0,0,0]],fx:0}]})}),Ti("success")}catch(e){throw Ti("failure"),console.error("Failed to locate part with WLED:",e),e}}}const ji=e.getInstance(),$i=$n("parts/fetchPartDetails",(async(e,{rejectWithValue:t,getState:n})=>{var r;ji.info("partsSlice",`Fetching details for part ${e}...`);try{const{api:a}=n();if(!(null===(r=a.directApiConfig)||void 0===r?void 0:r.url)||!a.directApiConfig.apiKey)return ji.warn("partsSlice","Direct API URL or API Key not configured. Cannot fetch part details."),t("Direct API not configured.");const o=await oi.getPart(e);return o?(ji.log("partsSlice",`Successfully fetched part details for ${e}`,o),o):(ji.warn("partsSlice",`No data returned for part ${e} from API.`),t(`Part ${e} not found or API error.`))}catch(n){return ji.error("partsSlice",`Error fetching part details for ${e}:`,n),t(n.message||`Failed to fetch part ${e}`)}})),Oi=$n("parts/locatePartById",(async(e,{getState:t,dispatch:n,rejectWithValue:r})=>{var a,o,i;const l=t(),s=l.parts.partsById[e],c=null===(o=null===(a=l.config.resolvedConfig)||void 0===a?void 0:a.services)||void 0===o?void 0:o.wled;if(!s)return ji.warn("partsSlice",`Part with ID ${e} not found for location.`),r(`Part with ID ${e} not found.`);if(!(c&&c.enabled&&c.entity_id&&c.parameter_name))return ji.warn("partsSlice",`WLED service not configured or enabled for part ${e}.`),r("WLED service not configured or enabled.");const u=new Di(l.hass.hass),d=null===(i=s.parameters)||void 0===i?void 0:i.find((e=>{var t;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===c.parameter_name}));if(!d||!d.data)return ji.warn("partsSlice",`Location parameter '${c.parameter_name}' not found or empty for part ${e}.`),r(`Location parameter not found for part ${e}.`);try{await u.locatePart(s,c),ji.log("partsSlice",`Successfully triggered WLED location for part ${e} at segment ${d.data}.`),setTimeout((()=>{n(Mi.actions.setLocatingPartId(null))}),5e3)}catch(t){return ji.error("partsSlice",`Error locating part ${e} via WLED:`,t),r(t.message||`Failed to locate part ${e}.`)}})),Li=$n("parts/adjustPartStock",(async({partId:e,amount:t,locationId:n,notes:r},{rejectWithValue:a})=>{ji.info("partsSlice",`Adjusting stock for part ${e} by ${t}. Location: ${n}, Notes: "${r}"`);try{const o=await oi.adjustStock(e,t,n,r);if(!o||"number"!=typeof o.newTotalStock){ji.error("partsSlice",`Stock adjustment for part ${e} failed or did not return expected result format.`,o);return a(`Stock adjustment failed: ${o?"API response missing newTotalStock":"API call failed"}.`)}return ji.log("partsSlice",`Stock for part ${e} adjusted successfully via API. New total stock: ${o.newTotalStock}.`),{partId:o.pk,newTotalStock:o.newTotalStock}}catch(t){return ji.error("partsSlice",`Error calling inventreeApiService.adjustStock for part ${e}:`,t),a(t.message||`Failed to adjust stock for part ${e}.`)}})),Mi=Gn({name:"parts",initialState:{partsById:{},partsByEntity:{},loading:!1,error:null,locatingPartId:null,adjustingStockPartId:null,adjustmentError:null},reducers:{setParts(e,t){console.log("[partsSlice] setParts PAYLOAD:",JSON.stringify(t.payload,null,2));const{entityId:n,parts:r}=t.payload,a=[];r.forEach((t=>{e.partsById[t.pk]=Object.assign(Object.assign({},e.partsById[t.pk]),t),a.push(t.pk)})),e.partsByEntity[n]=a,ji.log("partsSlice",`Set ${r.length} parts for entity '${n}'. Part IDs: [${a.join(", ")}]`,{level:"debug"})},addParts(e,t){t.payload.forEach((t=>{var n;t.pk?(e.partsById[t.pk]=Object.assign(Object.assign(Object.assign({},e.partsById[t.pk]),t),{source:(null===(n=e.partsById[t.pk])||void 0===n?void 0:n.source)||"api:direct_pk"}),ji.log("partsSlice",`Added/Updated part ${t.pk} from direct PK fetch.`,{level:"debug"})):ji.warn("partsSlice","Attempted to add a part without a PK.",{partData:t})}))},updatePart(e,t){const n=t.payload;e.partsById[n.pk]?(e.partsById[n.pk]=Object.assign(Object.assign({},e.partsById[n.pk]),n),ji.log("partsSlice",`Updated part ${n.pk} in partsById.`,{level:"debug"})):(e.partsById[n.pk]=n,ji.log("partsSlice",`Added new part ${n.pk} to partsById.`,{level:"debug"}))},updatePartStock(e,t){const{partId:n,newStock:r}=t.payload,a=e.partsById[n];a?(a.in_stock=r,ji.log("partsSlice",`Updated stock for part ${n} to ${r} in partsById.`,{level:"debug"})):ji.warn("partsSlice",`Attempted to update stock for non-existent partId: ${n}`)},clearParts(e,t){const n=t.payload;ji.log("partsSlice",`Clearing parts mapping for entity '${n}'.`,{level:"debug"}),delete e.partsByEntity[n]},registerEntity(e,t){const n=t.payload;n in e.partsByEntity||(e.partsByEntity[n]=[],ji.log("partsSlice",`Registered entity '${n}' in partsByEntity.`,{level:"debug"}))},partStockUpdateFromWebSocket(e,t){const n=t.payload,{partId:r,quantity:a}=n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["partId","quantity"]),i=e.partsById[r];i?(ji.log("partsSlice",`Processing WebSocket stock update for part ${r}. Current stock: ${i.in_stock}, New quantity from WS: ${a}`),void 0!==a&&(i.in_stock=parseFloat(a)),ji.log("partsSlice",`Part ${r} stock updated to ${i.in_stock} via WebSocket.`,{level:"debug",otherStockData:o})):ji.warn("partsSlice",`Received WebSocket stock update for unknown part ${r}. Triggering fetch.`)},setLocatingPartId(e,t){e.locatingPartId=t.payload}},extraReducers:e=>{e.addCase(Oi.pending,((e,t)=>{e.locatingPartId=t.meta.arg})).addCase(Oi.rejected,((e,t)=>{e.locatingPartId===t.meta.arg&&(e.locatingPartId=null)})).addCase(Oi.fulfilled,((e,t)=>{})).addCase(Li.pending,((e,t)=>{var n;const{partId:r,amount:a}=t.meta.arg;e.adjustingStockPartId=r,e.adjustmentError=null;const o=e.partsById[r];if(o){const e=o.in_stock;o.in_stock=(null!==(n=o.in_stock)&&void 0!==n?n:0)+a,ji.log("partsSlice",`Optimistically updated stock for part ${r} from ${e} to ${o.in_stock}`,{level:"debug"})}else ji.warn("partsSlice",`Cannot optimistically update stock for partId ${r}: Part not found.`)})).addCase(Li.fulfilled,((e,t)=>{const{partId:n,newTotalStock:r}=t.payload,a=e.partsById[n];a&&(a.in_stock=r),e.adjustingStockPartId===n&&(e.adjustingStockPartId=null),e.adjustmentError=null})).addCase(Li.rejected,((e,t)=>{var n;const r=t.meta.arg.partId,a=t.meta.arg;e.adjustmentError=t.payload||t.error.message||"Failed to adjust stock",ji.error("partsSlice",`Stock adjustment failed for part ${r}: ${e.adjustmentError}`);const o=e.partsById[r];o&&"number"==typeof a.amount&&(o.in_stock=(null!==(n=o.in_stock)&&void 0!==n?n:0)-a.amount,ji.warn("partsSlice",`Reverted optimistic stock update for part ${r}. New reverted stock: ${o.in_stock}`)),e.adjustingStockPartId===r&&(e.adjustingStockPartId=null)})).addCase($i.pending,((e,t)=>{const n=t.meta.arg;ji.info("partsSlice",`Fetching details for part ${n} (pending)...`),e.loading=!0})).addCase($i.fulfilled,((e,t)=>{const n=t.payload;ji.info("partsSlice",`Successfully fetched details for part ${n.pk}. Updating state.`),e.partsById[n.pk]=Object.assign(Object.assign({},e.partsById[n.pk]),n),e.loading=!1})).addCase($i.rejected,((e,t)=>{const n=t.meta.arg;ji.error("partsSlice",`Failed to fetch details for part ${n}: ${t.payload||t.error.message}`),e.loading=!1,e.error=t.payload||t.error.message||`Failed to fetch details for part ${n}`}))}}),{setParts:zi,addParts:Fi,updatePart:Gi,updatePartStock:Ui,clearParts:Bi,registerEntity:Hi,partStockUpdateFromWebSocket:Vi,setLocatingPartId:Wi}=Mi.actions;var qi=Mi.reducer;const Qi=e=>e.parts.partsByEntity,Ki=e=>e.parts.partsById;gn([Ki],(e=>Object.keys(e).map(Number)));const Xi=gn([Ki],(e=>Object.values(e))),Ji=gn([Qi,Ki,(e,t)=>t],((e,t,n)=>{const r=new Set;n.forEach((t=>{const n=e[t];n&&n.forEach((e=>r.add(e)))}));const a=[];return r.forEach((e=>{const n=t[e];n&&a.push(n)})),a}));gn([Ki,Qi,(e,t)=>t],((e,t,n)=>{var r;return(null!==(r=t[n])&&void 0!==r?r:[]).map((t=>e[t])).filter((e=>!!e))}));const Yi=gn([e=>e.parts.partsById,(e,t)=>t],((e,t)=>null!=t?e[t]:void 0)),Zi=e=>e.parts.loading,el=e=>e.parts.locatingPartId;gn([Xi],(e=>e)),gn([e=>e.parts.partsById,e=>e.parts.partsByEntity,(e,t)=>t],((e,t,n)=>{if(!n)return[];const r=t[n];return r?r.map((t=>e[t])).filter((e=>void 0!==e)):[]})),gn([e=>e.parts.partsById,e=>e.parts.partsByEntity,(e,t,n=[])=>({primaryEntityId:t,additionalEntityIds:n})],((e,t,{primaryEntityId:n,additionalEntityIds:r})=>{const a=new Set;if(n){const e=t[n];e&&e.forEach((e=>a.add(e)))}return r.forEach((e=>{const n=t[e];n&&n.forEach((e=>a.add(e)))})),Array.from(a).map((t=>e[t])).filter((e=>void 0!==e))}));const tl=gn([Ki,(e,t)=>t],((e,t)=>t&&0!==t.length?t.map((t=>e[t])).filter((e=>void 0!==e)):[])),nl=e.getInstance(),rl=$n("search/perform",(async(e,t)=>{try{nl.log("performSearch",`Searching for: "${e}"`,{level:"debug"});const t=(await oi.getParts({search:e})).map((e=>({pk:e.pk,name:e.name,thumbnail:e.thumbnail||void 0})));return nl.log("performSearch",`Search successful, found ${t.length} results.`),t}catch(e){const n=e.message||"Failed to perform search";return nl.error("performSearch",`Search failed: ${n}`,e),t.rejectWithValue("string"==typeof e?e:n)}}));$n("search/searchInventree",(async(e,{getState:t,rejectWithValue:n})=>{t(),nl.warn("searchInventree Thunk","Attempting to create API instance inside thunk - this should be refactored.");try{nl.warn("searchInventree Thunk","Using MOCKED API response"),await new Promise((e=>setTimeout(e,500)));const t=e.toLowerCase().includes("resistor")?[{pk:101,name:"Resistor 1k",in_stock:100,thumbnail:""},{pk:102,name:"Resistor 10k",in_stock:50,thumbnail:""}]:[];return nl.log("searchInventree Thunk",`Search for "${e}" returned ${t.length} results.`),t}catch(e){return nl.error("searchInventree Thunk",`Search failed: ${e.message||e}`),n(e.message||"Search failed")}}));const al=e.getInstance(),ol=Gn({name:"search",initialState:{query:"",results:[],loading:"idle",error:null},reducers:{setSearchQuery:(e,t)=>{e.query=t.payload,al.log("searchSlice",`Search query set to: "${t.payload}"`,{level:"debug"})},clearSearch:e=>{e.query="",e.results=[],e.loading="idle",e.error=null,al.log("searchSlice","Search state cleared.",{level:"debug"})}},extraReducers:e=>{e.addCase(rl.pending,(e=>{e.loading="pending",e.error=null,al.log("searchSlice","Search pending...",{level:"debug"})})).addCase(rl.fulfilled,((e,t)=>{e.loading="succeeded",e.results=t.payload,e.error=null,al.log("searchSlice",`Search succeeded with ${t.payload.length} results.`,{level:"debug"})})).addCase(rl.rejected,((e,t)=>{var n;e.loading="failed",e.error=null!==(n=t.payload)&&void 0!==n?n:"Search failed",e.results=[],al.error("searchSlice",`Search failed: ${e.error}`)}))}}),{setSearchQuery:il,clearSearch:ll}=ol.actions,sl=e=>e.search.query,cl=e=>e.search.results,ul=e=>e.search.loading,dl=e=>e.search.error;var pl=ol.reducer;const fl=new Map,hl=new Map;function gl(e,t,n){const r=window.setTimeout(e,t);return fl.set(r,n||"anonymous"),r}function ml(e){window.clearTimeout(e),fl.delete(e)}const vl=Gn({name:"timers",initialState:{timers:{},componentTimers:{},lastId:0},reducers:{addTimer:(e,t)=>{const{componentId:n,label:r,startTime:a,delay:o,type:i}=t.payload,l=++e.lastId;e.timers[l]={id:l,componentId:n,label:r,startTime:a,delay:o,type:i},e.componentTimers[n]||(e.componentTimers[n]=new Set),e.componentTimers[n].add(l)},removeTimer:(e,t)=>{const n=t.payload,r=e.timers[n];r&&(e.componentTimers[r.componentId]&&(e.componentTimers[r.componentId].delete(n),0===e.componentTimers[r.componentId].size&&delete e.componentTimers[r.componentId]),delete e.timers[n])},clearComponentTimers:(e,t)=>{const n=t.payload,r=e.componentTimers[n];r&&(r.forEach((t=>{delete e.timers[t]})),delete e.componentTimers[n])},clearAllTimers:e=>{e.timers={},e.componentTimers={}}}}),{addTimer:yl,removeTimer:bl,clearComponentTimers:Sl,clearAllTimers:kl}=vl.actions;function wl(e){return(t,n)=>{const r=((e,t)=>Object.values(e.timers.timers).filter((e=>null!==e&&"object"==typeof e&&"componentId"in e&&e.componentId===t)))(n(),e);r.forEach((e=>{var t;"timeout"===e.type?ml(e.id):(t=e.id,window.clearInterval(t),hl.delete(t))})),t(Sl(e))}}var _l=vl.reducer;const Cl=Gn({name:"ui",initialState:{activeView:"detail",selectedPartId:null,debug:{showDebugPanel:!1,activeTab:"data"},loading:!1},reducers:{setActiveView(e,t){e.activeView=t.payload},setSelectedPart(e,t){e.selectedPartId=t.payload},toggleDebugPanel(e){e.debug.showDebugPanel=!e.debug.showDebugPanel},setDebugTab(e,t){e.debug.activeTab=t.payload},setLoading(e,t){e.loading=t.payload}}});Cl.actions;var xl=Cl.reducer;const El=e.getInstance(),Al=Gn({name:"visualEffects",initialState:{effectsByPartId:{}},reducers:{setVisualEffect(e,t){const{partId:n,effect:r}=t.payload;e.effectsByPartId[n]||(e.effectsByPartId[n]={}),e.effectsByPartId[n]=Object.assign(Object.assign({},e.effectsByPartId[n]),r),El.log("visualEffectsSlice",`Visual effect set/merged for part ${n}.`,{partId:n,newEffect:r,level:"debug"})},setVisualEffectsBatch(e,t){e.effectsByPartId=t.payload,El.log("visualEffectsSlice","Visual effects batch updated.",{count:Object.keys(t.payload).length,level:"debug"})},clearVisualEffect(e,t){const n=t.payload;delete e.effectsByPartId[n],El.log("visualEffectsSlice",`Visual effects cleared for part ${n}.`,{partId:n,level:"debug"})},clearAllVisualEffects(e){e.effectsByPartId={},El.log("visualEffectsSlice","All visual effects cleared.",{level:"debug"})}}});Al.actions;var Rl=Al.reducer;const Il=e.getInstance(),Nl={status:"idle",lastMessage:null,lastError:null,messageCount:0},Pl=Gn({name:"websocket",initialState:Nl,reducers:{setWebSocketStatus:(e,t)=>{Il.log("WebSocketSlice",`Status changing from ${e.status} to ${t.payload}`),e.status=t.payload,"error"===t.payload?e.lastError="An error occurred":e.lastError=null},webSocketMessageReceived:(e,t)=>{e.lastMessage=t.payload,e.messageCount+=1,Il.log("WebSocketSlice",`Message received (Count: ${e.messageCount})`,t.payload)},resetWebSocketState:e=>{Il.log("WebSocketSlice","Resetting WebSocket state"),Object.assign(e,Nl)}}}),{setWebSocketStatus:Tl,webSocketMessageReceived:Dl,resetWebSocketState:jl}=Pl.actions;var $l=Pl.reducer;const Ol=e.getInstance(),Ll=e=>t=>n=>{const r=performance.now();Ol.log("Redux Middleware",`üöÄ Action Dispatched: ${n.type}`,{category:"redux",subsystem:"action",data:n.payload});const a=t(n),o=performance.now()-r;if(Ol.log("Redux Middleware",`‚è±Ô∏è Action Completed: ${n.type} (${o.toFixed(2)}ms)`,{category:"redux",subsystem:"performance"}),Ol.isEnabled("redux","state")){const t=e.getState();Ol.log("Redux Middleware",`üîÑ State After Action: ${n.type}`,{category:"redux",subsystem:"state",data:t})}return a},Ml={ENTITY_DATA:3e4,PARAMETER:6e4,RENDER_DEDUP:300,WS_DEDUP:500,CONDITION:2e3,FALLBACK:6e4};var zl;!function(e){e.ENTITY="entity",e.PARAMETER="parameter",e.RENDER="render",e.WEBSOCKET="websocket",e.CONDITION="condition",e.GENERAL="general"}(zl||(zl={}));class Fl{constructor(){this.cache=new Map,this._fallbackValues=new Map,this._missCallbacks=new Map,this._pruneIntervalId=null,this._isDestroyed=!1,this._useRedux=!0,this.logger=e.getInstance();try{this._useRedux=!0,this.logger.log("CacheService","CacheService instance created"),ye("cache","initialize",{source:this._useRedux?"redux":"legacy"})}catch(e){this._useRedux=!1,this.logger.error("Cache","Error during feature flag check, using fallback timer implementation",{category:"cache",subsystem:"errors",error:e})}this._startPruneInterval()}_startPruneInterval(){if(!this._isDestroyed&&null===this._pruneIntervalId)try{ye("cache","startPruneInterval",{source:this._useRedux?"redux":"legacy"}),this._pruneIntervalId=setInterval((()=>{this._isDestroyed||this.prune()}),6e4),this.logger.log("Cache","Prune interval started",{category:"cache",subsystem:this._useRedux?"redux":"legacy"})}catch(e){if(this.logger.error("Cache",`Failed to start prune interval: ${e}`,{category:"cache",subsystem:"errors"}),!this._pruneIntervalId)try{this._pruneIntervalId=setTimeout((()=>{this._isDestroyed||this.prune()}),6e4),this.logger.log("Cache","Prune interval started with fallback timer",{category:"cache"})}catch(e){this.logger.error("Cache",`Failed to start fallback prune interval: ${e}`,{category:"cache",subsystem:"errors"})}}}static getInstance(){return Fl.instance||(Fl.instance=new Fl),Fl.instance}set(e,t,n,r=zl.GENERAL){if(this._isDestroyed)return;ye("cache","set",{category:r,source:this._useRedux?"redux":"legacy"});let a=n;if(void 0===a)if(r===zl.ENTITY||r===zl.PARAMETER){const t=Yn(os.getState());t>0?(a=t,this.logger.log("Cache",`Using configured API cache lifetime for ${e}: ${a}ms`,{category:"cache",subsystem:r})):(a=r===zl.ENTITY?Ml.ENTITY_DATA:Ml.PARAMETER,this.logger.log("Cache",`Using default API cache lifetime for ${e}: ${a}ms (configured was ${t}ms)`,{category:"cache",subsystem:r}))}else a=e.startsWith("render:")?Ml.RENDER_DEDUP:e.startsWith("ws-")||e.startsWith("websocket:")?Ml.WS_DEDUP:e.startsWith("condition:")?Ml.CONDITION:Ml.FALLBACK;else if(n===Ml.FALLBACK&&(r===zl.ENTITY||r===zl.PARAMETER)){const e=Yn(os.getState());e>0&&(a=e)}("number"!=typeof a||a<=0)&&(this.logger.warn("Cache",`Invalid or zero TTL determined for key ${e}. Using fallback TTL: ${Ml.FALLBACK}ms`,{category:"cache",subsystem:r,determinedTtl:a}),a=Ml.FALLBACK),this.cache.set(e,{value:t,timestamp:Date.now(),ttl:a,category:r}),this.logger.log("Cache",`Set ${e}, expires in ${a}ms`,{category:"cache",subsystem:r})}get(e,t=!0){const n=this.cache.get(e);if(n){if(!(n.timestamp+n.ttl<Date.now()))return t&&this._fallbackValues.set(e,n.value),this.logger.log("Cache",`Hit: ${e}`,{category:"cache",subsystem:n.category}),n.value;if(this.cache.delete(e),this.logger.log("Cache",`Miss: ${e} (expired)`,{category:"cache",subsystem:n.category}),this._handleCacheMiss(e),t&&this._fallbackValues.has(e)){const t=this._fallbackValues.get(e);return this.logger.log("Cache",`Using fallback for ${e} (expired)`,{category:"cache"}),t}}else if(this.logger.log("Cache",`Miss: ${e} (not found)`,{category:"cache"}),this._handleCacheMiss(e),t&&this._fallbackValues.has(e)){const t=this._fallbackValues.get(e);return this.logger.log("Cache",`Using fallback for ${e}`,{category:"cache"}),t}}_handleCacheMiss(e){if(this._missCallbacks.has(e)){const t=this._missCallbacks.get(e);t&&(this.logger.log("Cache",`Executing miss callback for ${e}`,{category:"cache"}),t().then((t=>{if(void 0!==t){let n=Ml.FALLBACK;e.startsWith("entity-data:")&&(n=Ml.ENTITY_DATA),this.set(e,t,n),this.logger.log("Cache",`Miss callback successfully updated ${e}`,{category:"cache"})}})).catch((t=>{this.logger.error("Cache",`Error in miss callback for ${e}: ${t}`,{category:"cache"})})))}}registerMissCallback(e,t){this._missCallbacks.set(e,t),this.logger.log("Cache",`Registered miss callback for ${e}`,{category:"cache"})}setFallback(e,t){this._fallbackValues.set(e,t),this.logger.log("Cache",`Set fallback value for ${e}`,{category:"cache"})}has(e){const t=this.cache.get(e);return!!t&&(!(t.timestamp+t.ttl<Date.now())||(this.cache.delete(e),!1))}updateTTL(e,t){if(this._isDestroyed)return!1;const n=this.cache.get(e);return!!n&&(this.cache.set(e,Object.assign(Object.assign({},n),{ttl:t})),this.logger.log("Cache",`Updated TTL for ${e}, new expiry in ${t}ms`,{category:"cache"}),!0)}refreshEntityCache(e){const t=`entity-data:${e}`;return this.updateTTL(t,Ml.ENTITY_DATA)}delete(e){const t=this.cache.get(e);this.cache.delete(e),t?this.logger.log("Cache",`Deleted ${e}`,{category:"cache",subsystem:t.category}):this.logger.log("Cache",`Attempted to delete non-existent key: ${e}`,{category:"cache"})}prune(){const e=Date.now();let t=0;const n={};for(const[r,a]of this.cache.entries())if(a.timestamp+a.ttl<e){this.cache.delete(r),t++;const e=a.category||zl.GENERAL;n[e]=(n[e]||0)+1}if(t>0){const e=Object.entries(n).map((([e,t])=>`${e}: ${t}`)).join(", ");this.logger.log("Cache",`Pruned ${t} expired entries (${e})`,{category:"cache"})}}clear(){const e=this.cache.size;this.cache.clear(),this._fallbackValues.clear(),this.logger.log("Cache",`Cleared ${e} entries`,{category:"cache"})}getStats(){const e=Date.now();let t=0;const n={};for(const[r,a]of this.cache.entries()){const r=a.category||zl.GENERAL;n[r]=(n[r]||0)+1,a.timestamp+a.ttl<e&&t++}return{size:this.cache.size,expired:t,byCategory:n,fallbackCount:this._fallbackValues.size}}getKeys(){return Array.from(this.cache.keys())}clearPattern(e){let t=0;const n=[];for(const r of this.cache.keys())r.includes(e)&&(n.push(r),t++);for(const e of n){const t=this.cache.get(e);this.cache.delete(e),t&&this.logger.log("Cache",`Deleted ${e} by pattern match`,{category:"cache",subsystem:t.category})}return this.logger.log("Cache",`Cleared ${t} entries matching pattern: ${e}`,{category:"cache"}),t}clearEntityCache(){return this.clearPattern("entity-data:")}clearConditionCache(){return this.clearPattern("condition:")}clearRenderCache(){return this.clearPattern("render:")}clearWebSocketCache(){return this.clearPattern("ws-")+this.clearPattern("websocket:")}destroy(){if(this._isDestroyed=!0,ye("cache","destroy",{source:this._useRedux?"redux":"legacy"}),null!==this._pruneIntervalId){try{clearInterval(this._pruneIntervalId)}catch(e){this.logger.error("Cache",`Error clearing prune interval: ${e}`,{category:"cache",subsystem:"errors"})}this._pruneIntervalId=null}this.clear(),this.logger.log("Cache","Cache service destroyed and resources released",{category:"cache",subsystem:this._useRedux?"redux":"legacy"})}}var Gl=Object.freeze({__proto__:null,get CacheCategory(){return zl},CacheService:Fl,DEFAULT_TTL:Ml});const Ul=e.getInstance(),Bl=e=>e=>t=>{if(Ul.log("Redux",`Action dispatched: ${t.type}`,{category:"redux",subsystem:"middleware"}),"parts/fetchParts/fulfilled"===t.type){const{entityId:e,data:n}=t.payload,r=`entity-data:${e}`;Fl.getInstance().set(r,n),Ul.log("Redux",`Updated service data for entity ${e}`,{category:"redux",subsystem:"sync"})}if("parameters/updateValue"===t.type){const{partId:e,parameterName:n,value:r}=t.payload;os.dispatch(ci({partId:e,parameterName:n,value:r})),Ul.log("Redux",`Dispatched updateParameterValue thunk for ${n}`,{})}if("parameters/checkCondition"===t.type){const{part:e,condition:n}=t.payload;Ul.log("Redux",`Checking condition for part ${null==e?void 0:e.pk}`,{category:"redux",subsystem:"parameters",condition:n})}return"parameters/clearConditionCache"!==t.type&&"parameters/clearCache"!==t.type||Ul.log("Redux","Clearing parameter cache",{category:"redux",subsystem:"parameters"}),e(t)},Hl=e=>t=>n=>{if("components/disconnectComponent"===n.type){const t=n.payload;e.dispatch(wl(t))}return t(n)},Vl=e.getInstance(),Wl=e=>{if(e.startsWith("part:")){const t=e.split(":");if(3===t.length){const e=parseInt(t[1],10);if(!isNaN(e)){return["name","description","IPN","in_stock","on_order","category_name","status_label"].includes(t[2])?{sourceType:"inventree_attribute",partId:e,attributeName:t[2]}:{sourceType:"inventree_parameter",partId:e,parameterName:t[2]}}}}else if(e.startsWith("entity:")){const t=e.split(":");if(2===t.length)return{sourceType:"ha_entity_state",entityId:t[1]};if(3===t.length)return{sourceType:"ha_entity_attribute",entityId:t[1],haAttributeName:t[2]}}return Vl.warn("conditionalLogicThunks.parseSourceString",`Unknown or malformed source string: ${e}. Defaulting to 'unknown' sourceType.`),{sourceType:"unknown"}},ql=$n("conditionalLogic/initializeDefinitions",(async(e,{dispatch:t,getState:n,rejectWithValue:r})=>{if(Vl.log("conditionalLogicThunks",`Initializing rule definitions from ${e.length} ConditionRuleDefinition(s)...`),t(or(e)),!e||0===e.length)return Vl.log("conditionalLogicThunks","No ConditionRuleDefinitions provided. Clearing processed conditions in conditionalLogicSlice."),void t(ir([]));const a=[];for(let t=0;t<e.length;t++){const n=e[t],r=Wl(n.parameter);n.operator&&n.action&&void 0!==n.action_value&&void 0!==n.value?a.push(Object.assign({id:n.name||`pcond-${Date.now()}-${t}`,originalRule:n},r)):Vl.warn("conditionalLogicThunks","Skipping ConditionRuleDefinition for ProcessedConditions due to missing operator, action, action_value, or value in originalRule",{definition:n})}t(ir(a)),Vl.log("conditionalLogicThunks",`Processed ${a.length} rule definitions into ProcessedConditions and stored in conditionalLogicSlice.`)})),Ql=$n("conditionalLogic/evaluateAndApplyEffects",(async(e,t)=>{Vl.log("conditionalLogicThunks","evaluateAndApplyEffectsThunk invoked, delegating to ConditionalEffectsEngine...");const{ConditionalEffectsEngine:n}=await import("./ConditionalEffectsEngine-b87c8e6d.js");new n(t.dispatch,t.getState).evaluateAndApplyEffects(),Vl.log("conditionalLogicThunks","ConditionalEffectsEngine finished. evaluateAndApplyEffectsThunk complete.")})),Kl=e.getInstance();let Xl=0,Jl=null;const Yl=e=>t=>n=>{var r;const a=t(n);if(Dl.match(n)){const t=n.payload;if("object"==typeof t&&null!==t&&"event"===t.type&&"string"==typeof t.event&&"object"==typeof t.data&&null!==t.data){const n=t.event,a=t.data;if(Kl.log("WebSocketMiddleware",`Processing event: ${n}`,{eventData:a,level:"info"}),n.includes("part_partparameter.saved")||n.includes("part_partparameter.created")){const t=a;Kl.log("WebSocketMiddleware","Parameter event data:",{data:t,level:"debug"});const n=null!==(r=t.part_pk)&&void 0!==r?r:t.parent_id,o=t.parameter_name,i=t.parameter_value;void 0!==n&&void 0!==o&&void 0!==i?(Kl.log("WebSocketMiddleware",`Dispatching parameters/updateValue (direct action) for Part ${n}, Param ${o} to value ${i}`,{level:"info"}),e.dispatch(ki({partId:Number(n),paramName:String(o),value:String(i),source:"websocket"})),setTimeout((()=>{var t,n,r;const a=e.getState().parameters.config,o=null!==(r=null===(n=null===(t=null==a?void 0:a.performance)||void 0===t?void 0:t.parameters)||void 0===n?void 0:n.conditionEvalFrequency)&&void 0!==r?r:1e3,i=Date.now();if(Jl&&(clearTimeout(Jl),Jl=null,Kl.log("WebSocketMiddleware","Cleared pending (trailing) evaluateAndApplyEffectsThunk call due to new trigger.",{level:"silly"})),i-Xl>o)Kl.log("WebSocketMiddleware",`Dispatching evaluateAndApplyEffectsThunk (direct). Interval: ${o}ms. lastEval: ${Xl}, now: ${i}`,{level:"info"}),e.dispatch(Ql()),Xl=i;else{const t=Math.max(0,o-(i-Xl));Kl.log("WebSocketMiddleware",`Throttling evaluateAndApplyEffectsThunk. Scheduling trailing call. Delay: ${t}ms. lastEval: ${Xl}, now: ${i}`,{level:"info"}),Jl=setTimeout((()=>{Kl.log("WebSocketMiddleware",`Dispatching evaluateAndApplyEffectsThunk (trailing call). Interval: ${o}ms.`,{level:"info"}),e.dispatch(Ql()),Xl=Date.now(),Jl=null}),t)}}),0)):Kl.warn("WebSocketMiddleware","Received parameter update, but missing key data fields.",{paramData:t})}else if(n.includes("stock_stockitem.saved")||n.includes("stock_stockitem.created")){const t=a,n=t.part_id;void 0!==n?(Kl.log("WebSocketMiddleware",`Dispatching partStockUpdateFromWebSocket for Part ${n}`),e.dispatch(Vi({partId:Number(n),quantity:t.quantity,batch:t.batch,serial:t.serial,status_label:t.status_label,status_value:t.status_value,last_updated:t.last_updated,part_name:t.part_name,part_ipn:t.part_ipn,part_thumbnail:t.part_thumbnail,location_id:t.location_id,location_name:t.location_name,location_pathstring:t.location_pathstring,stockItemId:t.id})),Kl.log("WebSocketMiddleware",`Dispatching fetchPartDetails for Part ${n} due to stock event.`),e.dispatch($i(Number(n)))):Kl.warn("WebSocketMiddleware","Received stock update, but missing part_id.",{stockData:t})}else Kl.log("WebSocketMiddleware",`Received unhandled event type: ${n}`,{eventData:a})}else Kl.warn("WebSocketMiddleware","Received webSocketMessageReceived action, but payload was not a valid WebSocketEventMessage structure",{payload:n.payload})}return"websocket/connect"===n.type?Kl.log("WebSocket Middleware","Explicit connect action received (currently informational)"):"websocket/disconnect"===n.type&&Kl.log("WebSocket Middleware","Explicit disconnect action received (currently informational)"),a},Zl=e.getInstance(),es=new Map,ts={"parameters/webSocketUpdateReceived":250},ns=e=>e=>t=>{const n=t.type;if(!ts[n])return e(t);{const r=ts[n],a=`${n}:${JSON.stringify(t.payload||{})}`;Zl.log("DebounceMiddleware",`Debouncing action: ${n}, Key: ${a}, Time: ${r}ms`),es.has(a)&&clearTimeout(es.get(a));const o=setTimeout((()=>{Zl.log("DebounceMiddleware",`Executing debounced action: ${n}, Key: ${a}`),es.delete(a),e(t)}),r);es.set(a,o)}},rs=e.getInstance(),as=e=>e=>t=>{const n=e(t);if("metrics/trackEvent"===t.type){const{category:e,action:n,label:r,value:a}=t.payload;try{ye(e,n,{label:r,value:a,source:"redux"}),rs.log("MetricsMiddleware",`Tracked event: ${e}/${n}`,{category:"metrics",data:t.payload})}catch(e){rs.error("MetricsMiddleware",`Error tracking usage: ${e}`,{category:"metrics",error:e})}}return n},os=An({reducer:vt({api:er,components:nr,conditionalLogic:cr,config:hr,counter:mr,genericHaStates:xr,metrics:Ar,parameters:Ni,parts:qi,search:pl,timers:_l,ui:xl,visualEffects:Rl,websocket:$l}),middleware:e=>e({serializableCheck:!1}).concat(Ll,Bl,Hl,Yl,ns,as)});var is;!function(e){e.DISCONNECTED="disconnected",e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.FAILED="failed",e.CLOSING="closing"}(is||(is={}));class ls{static getInstance(){return ls.instance||(ls.instance=new ls),ls.instance}constructor(){this._config=null,this._connection=null,this._connectionId=null,this._isConnected=!1,this._messageCallbacks=[],this.cache=Fl.getInstance(),this._errorCount=0,this._url="",this._debug=!1,this._disconnecting=!1,this._autoReconnect=!0,this._reconnectInterval=5e3,this._timersInitialized=!1,this._connectionState=is.DISCONNECTED,this._lastConnectionAttempt=0,this._connectionAttempts=0,this._maxReconnectDelay=3e5,this._minReconnectDelay=1e3,this._cooldownPeriod=2e3,this._lastStateChangeTime=0,this._lastSuccessfulConnection=0,this._lastServerMessageTime=0,this._serverInactivityTimeoutDuration=9e4,this._serverInactivityTimerId=null,this._messageCount=0,this._lastMessageTime=0,this._processingMessages=new Set,this._messageDebounceTime=50,this._messageDebounceQueue=new Map,this._dispatch=null,this._logger=e.getInstance(),this._lastServerMessageTime=0,this._timersInitialized||(this._timersInitialized=!0),this._logger.log("WebSocketPlugin","Instance created.",{category:"websocket",subsystem:"plugin"})}configure(e){var t,n,r,a,o,i,l,s;if(this._config=e,e.websocket_url&&""!==e.websocket_url.trim())this._url=e.websocket_url.trim(),this._logger.log("WebSocket",`Using explicit WebSocket URL: ${this._url}`,{category:"websocket",subsystem:"plugin"});else if(e.url&&""!==e.url.trim()){const t=e.url.trim().replace(/\/+$/,"");t.startsWith("http")?this._url=t.replace(/^http/,"ws")+"/ws/":this._url=`ws://${t}/ws/`,this._logger.log("WebSocket",`Derived WebSocket URL from API URL: ${this._url} (Base: ${e.url})`,{category:"websocket",subsystem:"plugin"})}else this._url="",this._logger.warn("WebSocket","Could not determine WebSocket URL from configuration.",{category:"websocket",subsystem:"plugin"});this._autoReconnect=void 0!==(null===(n=null===(t=e.performance)||void 0===t?void 0:t.websocket)||void 0===n?void 0:n.reconnectInterval),void 0!==(null===(a=null===(r=e.performance)||void 0===r?void 0:r.websocket)||void 0===a?void 0:a.reconnectInterval)&&e.performance.websocket.reconnectInterval<=0&&(this._autoReconnect=!1),(null===(i=null===(o=e.performance)||void 0===o?void 0:o.websocket)||void 0===i?void 0:i.reconnectInterval)&&e.performance.websocket.reconnectInterval>0?this._reconnectInterval=e.performance.websocket.reconnectInterval:this._reconnectInterval=5e3,(null===(s=null===(l=e.performance)||void 0===l?void 0:l.websocket)||void 0===s?void 0:s.messageDebounce)&&e.performance.websocket.messageDebounce>=0?this._messageDebounceTime=e.performance.websocket.messageDebounce:this._messageDebounceTime=50,this._logger.log("WebSocket",`Configured WebSocket plugin. Target URL: ${this._url}, Auto-Reconnect: ${this._autoReconnect}, Reconnect Interval: ${this._reconnectInterval}ms, Debounce: ${this._messageDebounceTime}ms, Server Inactivity Timeout: ${this._serverInactivityTimeoutDuration}ms`,{category:"websocket",subsystem:"plugin"})}_setConnectionState(e){const t=this._connectionState;if(t===e)return;if({[is.DISCONNECTED]:[is.CONNECTING],[is.CONNECTING]:[is.CONNECTED,is.FAILED,is.DISCONNECTED],[is.CONNECTED]:[is.DISCONNECTED,is.CLOSING],[is.RECONNECTING]:[is.CONNECTING,is.DISCONNECTED,is.FAILED],[is.FAILED]:[is.RECONNECTING,is.DISCONNECTED],[is.CLOSING]:[is.DISCONNECTED]}[t].includes(e))switch(this._connectionState=e,this._lastStateChangeTime=Date.now(),this._logger.log("WebSocket",`Connection state changed: ${t} -> ${e}`,{category:"websocket",subsystem:"state"}),e){case is.CONNECTED:this._lastSuccessfulConnection=Date.now(),this._errorCount=0,this._connectionAttempts=0,this._startServerInactivityTimer(),window.dispatchEvent(new CustomEvent("inventree-websocket-connected"));break;case is.DISCONNECTED:this._clearAllTimers(),this._clearServerInactivityTimer();break;case is.FAILED:this._errorCount++,this._autoReconnect&&this._errorCount<20&&(this._setConnectionState(is.RECONNECTING),this._scheduleReconnect())}else this._logger.warn("WebSocket",`Invalid state transition from ${t} to ${e}`,{category:"websocket",subsystem:"state"})}_clearAllTimers(){this._logger.log("WebSocketPlugin","Clearing all timers",{category:"websocket",subsystem:"timers"}),this._serverInactivityTimerId&&(ml(this._serverInactivityTimerId),this._serverInactivityTimerId=null)}connect(){if(!this._timersInitialized||!this._url)return void this._logger.warn("WebSocket","Cannot connect - plugin not initialized or URL not provided",{category:"websocket",subsystem:"plugin"});if(this._connectionState===is.CONNECTING||this._connectionState===is.CONNECTED)return void this._logger.log("WebSocket",`Already ${this._connectionState}, not initiating new connection`,{category:"websocket",subsystem:"plugin"});const e=Date.now()-this._lastConnectionAttempt;if(e<this._cooldownPeriod)return this._logger.log("WebSocket",`Connection attempt too soon (${e}ms since last attempt), enforcing cooldown`,{category:"websocket",subsystem:"plugin"}),void gl((()=>{this.connect()}),this._cooldownPeriod-e,"connection-cooldown");this._lastConnectionAttempt=Date.now(),this._connectionAttempts++;try{this._setConnectionState(is.CONNECTING),this._logger.log("WebSocket",`Connecting to InvenTree WebSocket at ${this._url} (attempt #${this._connectionAttempts+1})`,{category:"websocket",subsystem:"plugin"}),this._connection=new WebSocket(this._url),gl((()=>{this._connectionState===is.CONNECTING&&(this._logger.warn("WebSocket","Connection attempt timed out after 10 seconds",{category:"websocket",subsystem:"plugin"}),this._closeConnection(),this._setConnectionState(is.FAILED))}),1e4,"connection-timeout"),this._connection.onopen=this._onConnectionOpen.bind(this),this._connection.onmessage=this._onConnectionMessage.bind(this),this._connection.onerror=this._onConnectionError.bind(this),this._connection.onclose=this._onConnectionClose.bind(this)}catch(e){this._logger.error("WebSocket",`Error creating WebSocket: ${e}`,{category:"websocket",subsystem:"plugin"}),this._setConnectionState(is.FAILED)}}_onConnectionOpen(e){this._setConnectionState(is.CONNECTED),this._isConnected=!0,this._connectionAttempts=0,this._lastSuccessfulConnection=Date.now(),this._errorCount=0,this._dispatch&&this._dispatch(Tl("connected")),this._logger.log("WebSocketPlugin","WebSocket connection established successfully.",{category:"websocket",subsystem:"connection",connectionId:this._connectionId}),this._lastServerMessageTime=Date.now(),this._startServerInactivityTimer()}_onConnectionMessage(e){let t;this._lastMessageTime=Date.now(),this._messageCount++,this._lastServerMessageTime=Date.now(),this._resetServerInactivityTimer();try{t=JSON.parse(e.data)}catch(t){return void this._logger.error("WebSocket","Failed to parse incoming JSON message",{category:"websocket",subsystem:"message",error:t,rawData:e.data})}const n=t.event||t.type||JSON.stringify(t);console.log("RAW WEBSOCKET MESSAGE (messageData):",JSON.stringify(t,null,2)),this._logger.log("WebSocket","Raw message received (stringified)",{category:"websocket",subsystem:"message",data:JSON.stringify(t,null,2),level:"info"}),this._debouncedProcessMessage(t,n)}_debouncedProcessMessage(e,t){if(this._messageDebounceQueue.has(t)){ml(this._messageDebounceQueue.get(t).timerId),this._logger.log("WebSocket",`Debounce: Cleared existing timer for messageId: ${t}`,{level:"silly"})}const n=gl((()=>{this._messageDebounceQueue.delete(t),this._logger.log("WebSocket",`Debounce: Executing for messageId: ${t}`,{data:e,level:"silly"}),this._processMessage(e)}),this._messageDebounceTime);this._messageDebounceQueue.set(t,{message:e,timerId:n}),this._logger.log("WebSocket",`Debounce: Set new timer for messageId: ${t}, delay: ${this._messageDebounceTime}ms`,{level:"silly"})}_notifyMessageCallbacks(e){for(const t of this._messageCallbacks)try{t(e)}catch(e){this._logger.error("WebSocket",`Error in message callback: ${e}`,{category:"websocket",subsystem:"callback"})}}_onConnectionError(e){this._errorCount++,this._logger.error("WebSocketPlugin",`WebSocket error event triggered - error count: ${this._errorCount}`,{category:"websocket",subsystem:"error",eventData:e}),this._connectionState!==is.CONNECTING&&this._connectionState!==is.RECONNECTING&&(this._setConnectionState(is.FAILED),this._autoReconnect&&this._scheduleReconnect())}_onConnectionClose(e){const t=this._connectionState;this._setConnectionState(is.DISCONNECTED),this._isConnected=!1,this._clearServerInactivityTimer(),this._logger.log("WebSocketPlugin",`WebSocket connection closed. Code: ${e.code}, Reason: "${e.reason||"Unknown reason"}", Was Clean: ${e.wasClean}`,{category:"websocket",subsystem:"connection",connectionId:this._connectionId,previousState:t}),this._dispatch&&this._dispatch(Tl("disconnected")),!this._disconnecting&&this._autoReconnect?(this._logger.log("WebSocketPlugin","Auto-reconnect is enabled, scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),this._scheduleReconnect()):(this._logger.log("WebSocketPlugin","Auto-reconnect disabled or intentionally disconnecting, not scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),t===is.CLOSING&&this._setConnectionState(is.DISCONNECTED)),this._connection=null}_closeConnection(){this._logger.log("WebSocketPlugin","Attempting to close WebSocket connection.",{category:"websocket",subsystem:"connection",currentState:this._connectionState}),this._connection?this._connection.readyState===WebSocket.OPEN||this._connection.readyState===WebSocket.CONNECTING?(this._setConnectionState(is.CLOSING),this._connection.close(1e3,"Client initiated disconnect")):(this._logger.log("WebSocketPlugin","Connection already closed or closing.",{readyState:this._connection.readyState}),this._clearAllTimers(),this._setConnectionState(is.DISCONNECTED)):(this._logger.log("WebSocketPlugin","No active connection to close."),this._setConnectionState(is.DISCONNECTED))}_startServerInactivityTimer(){this._clearServerInactivityTimer(),this._connectionState===is.CONNECTED&&(this._logger.log("WebSocketPlugin",`Starting server inactivity timer for ${this._serverInactivityTimeoutDuration}ms.`,{category:"websocket",subsystem:"heartbeat"}),this._serverInactivityTimerId=gl((()=>{this._handleServerInactivity()}),this._serverInactivityTimeoutDuration))}_clearServerInactivityTimer(){this._serverInactivityTimerId&&(ml(this._serverInactivityTimerId),this._serverInactivityTimerId=null)}_resetServerInactivityTimer(){this._startServerInactivityTimer()}_handleServerInactivity(){this._logger.warn("WebSocketPlugin","Server inactivity detected. Last message received more than timeout period ago.",{category:"websocket",subsystem:"heartbeat",lastMessageTime:new Date(this._lastServerMessageTime).toISOString(),timeoutDuration:this._serverInactivityTimeoutDuration}),this._errorCount++,this._logger.error("WebSocketPlugin","Max server inactivity reached, closing connection as potentially stale.",{category:"websocket",subsystem:"heartbeat"}),this._disconnecting=!1,this.disconnect()}onMessage(e){return this._messageCallbacks.push(e),()=>{const t=this._messageCallbacks.indexOf(e);-1!==t&&this._messageCallbacks.splice(t,1)}}_processMessage(e){e.data&&"PartParameter"===e.data.model&&this._handleParameterUpdate(e.data)}_handleParameterUpdate(e){this._logger.log("WebSocketPlugin",`Handling parameter update: ${JSON.stringify(e)}`,{category:"websocket",subsystem:"parameters",level:"info"});const t=e.part_pk,n=e.parameter_name,r=e.parameter_value;t&&n?(this._logger.log("WebSocketPlugin","Dispatching action from webSocketUpdateReceivedAction for parameter update.",{level:"info",subsystem:"dispatch",data:{partId:t,parameterName:n,value:r}}),os.dispatch(wi({partId:Number(t),parameterName:String(n),value:r,source:"websocket-plugin"}))):this._logger.warn("WebSocketPlugin","Missing partId or parameter name in update messageData",{data:e})}isConnected(){return this._connectionState===is.CONNECTED}getStats(){return{connectionState:this._connectionState,isConnected:this._isConnected,messageCount:this._messageCount,errorCount:this._errorCount,lastMessageTime:this._lastMessageTime,connectionAttempts:this._connectionAttempts,lastConnectionAttempt:this._lastConnectionAttempt,lastSuccessfulConnection:this._lastSuccessfulConnection,lastServerMessageTime:this._lastServerMessageTime}}reset(){this._logger.log("WebSocket","Resetting WebSocket connection",{category:"websocket",subsystem:"control"}),this.disconnect(),this._errorCount=0,this._connectionAttempts=0,gl((()=>{var e;(null===(e=this._config)||void 0===e?void 0:e.enabled)&&this.connect()}),1e3)}getTimerStats(){return{isInitialized:this._timersInitialized,messageQueueSize:this._messageDebounceQueue.size}}sendMessage(e){if(!this._connection||this._connection.readyState!==WebSocket.OPEN)return this._logger.warn("WebSocket","Cannot send message - WebSocket not connected",{category:"websocket",subsystem:"message"}),!1;try{return this._connection.send(JSON.stringify(e)),!0}catch(e){return this._logger.error("WebSocket",`Error sending message: ${e}`,{category:"websocket",subsystem:"message"}),!1}}registerMessageCallback(e){this._messageCallbacks.includes(e)||this._messageCallbacks.push(e)}unregisterMessageCallback(e){const t=this._messageCallbacks.indexOf(e);-1!==t&&this._messageCallbacks.splice(t,1)}getDiagnostics(){const e=Date.now();return{config:this._config?(e=>{try{return JSON.stringify(e)}catch(e){return`Error stringifying object: ${e instanceof Error?e.message:String(e)}`}})(this._config):"Not configured",url:this._url,connectionState:this._connectionState,isConnected:this._isConnected,isConfigured:this._timersInitialized,lastConnectionAttempt:this._lastConnectionAttempt?new Date(this._lastConnectionAttempt).toISOString():"N/A",connectionAttempts:this._connectionAttempts,lastSuccessfulConnection:this._lastSuccessfulConnection?new Date(this._lastSuccessfulConnection).toISOString():"N/A",lastStateChangeTime:this._lastStateChangeTime?new Date(this._lastStateChangeTime).toISOString():"N/A",timeSinceLastStateChangeMs:this._lastStateChangeTime?e-this._lastStateChangeTime:"N/A",disconnectingIntentional:this._disconnecting,autoReconnectEnabled:this._autoReconnect,reconnectIntervalMs:this._reconnectInterval,timersInitialized:this._timersInitialized,messageStats:{count:this._messageCount,lastReceivedTime:this._lastMessageTime?new Date(this._lastMessageTime).toISOString():"N/A",timeSinceLastMessageMs:this._lastMessageTime?e-this._lastMessageTime:"N/A",debounceQueueSize:this._messageDebounceQueue.size,processingMessagesCount:this._processingMessages.size},serverInactivity:{lastServerMessageTime:this._lastServerMessageTime?new Date(this._lastServerMessageTime).toISOString():"N/A",timeSinceLastServerMessageMs:this._lastServerMessageTime?e-this._lastServerMessageTime:"N/A",inactivityTimeoutMs:this._serverInactivityTimeoutDuration,inactivityTimerRunning:!!this._serverInactivityTimerId},timerManagerStats:this.getTimerStats()}}forceReconnect(){this._logger.log("WebSocket","Forcing reconnection...",{category:"websocket",subsystem:"plugin"}),this._closeConnection(),this._errorCount=0,this._setConnectionState(is.RECONNECTING),gl((()=>{this.connect()}),100,"force-reconnect")}disconnect(){this._disconnecting=!0,this._clearAllTimers(),this._closeConnection(),gl((()=>{this._disconnecting=!1,this._setConnectionState(is.DISCONNECTED)}),100,"disconnect-complete")}_scheduleReconnect(e=!1){if(!this._autoReconnect||this._disconnecting)return this._logger.log("WebSocket","Auto-reconnect disabled or intentionally disconnecting, not scheduling reconnect.",{category:"websocket",subsystem:"reconnect"}),void(this._connectionState===is.RECONNECTING&&this._setConnectionState(is.DISCONNECTED));if(this._connectionState===is.CONNECTING||this._connectionState===is.CONNECTED)return void this._logger.log("WebSocketPlugin","Already connecting or connected, skipping scheduled reconnect.",{category:"websocket",subsystem:"reconnect"});this._setConnectionState(is.RECONNECTING);const t=e?0:this._reconnectInterval;this._logger.log("WebSocket",`Scheduling reconnect in ${t}ms (attempt ${this._connectionAttempts+1})`,{category:"websocket",subsystem:"reconnect"}),gl((()=>{this._connectionState===is.RECONNECTING?this.connect():this._logger.log("WebSocketPlugin",`Reconnect was scheduled but current state is ${this._connectionState}, aborting connect attempt.`,{category:"websocket",subsystem:"reconnect"})}),t,`reconnect-${this._connectionId||"global"}`)}}const ss=e.getInstance(),cs=$n("genericHaStates/fetchStates",(async({hass:e,entityIds:t},{rejectWithValue:n,dispatch:r})=>{if(ss.log("fetchHaEntityStatesThunk",`Fetching states for entities: ${t.join(", ")}`,{level:"debug"}),!e||!e.states){const e="HASS object or hass.states is not available.";return ss.error("fetchHaEntityStatesThunk",e),n(e)}if(!t||0===t.length)return ss.log("fetchHaEntityStatesThunk","No entity IDs provided. Returning empty array.",{level:"debug"}),[];const a=[];for(const n of t){const t=e.states[n];if(t){const e={entity_id:n,state:t.state,attributes:t.attributes,last_changed:t.last_changed,last_updated:t.last_updated};a.push(e)}else ss.warn("fetchHaEntityStatesThunk",`State for entity ${n} not found in HASS object.`)}return a.length>0?(ss.log("fetchHaEntityStatesThunk",`Dispatching setEntityStatesBatch with ${a.length} states.`,{level:"debug"}),r(Sr(a))):ss.log("fetchHaEntityStatesThunk","No states were successfully fetched or processed.",{level:"debug"}),a})),us=$n("system/initializeDirectApi",(async(e,{dispatch:t,getState:n})=>{var r,a,o,i,l,s;const{directApiConfig:c,logger:u}=e;try{u.log("SystemThunks","Initializing Direct API...",c);const e=null===(a=null===(r=c.performance)||void 0===r?void 0:r.api)||void 0===a?void 0:a.throttle;let n=200;"number"==typeof e&&e>=0?n=1e3*e:void 0!==e&&u.warn("SystemThunks",`Invalid API throttle value: ${e}, using default ${n}ms`);const d=null===(i=null===(o=c.performance)||void 0===o?void 0:o.api)||void 0===i?void 0:i.cacheLifetime,p=null===(s=null===(l=c.performance)||void 0===l?void 0:l.api)||void 0===s?void 0:s.failedRequestRetryDelaySeconds;return c.url&&c.api_key?(t(qn({url:c.url,apiKey:c.api_key,throttleDelayMs:n,cacheLifetime:d,failedRequestRetryDelaySeconds:p})),t(Qn()),u.log("SystemThunks","Direct API Initialized"),ye("api","initialize",{success:!0,method:"direct"}),!0):(u.error("SystemThunks","Direct API Initialization Failed: Missing URL or API key"),t(Kn("Missing URL or API key")),!1)}catch(e){return u.error("SystemThunks","Direct API Initialization Failed:",e.message),t(Kn(e.message||"Unknown API initialization error")),!1}})),ds=$n("system/initializeWebSocketPlugin",(async(e,{dispatch:t,getState:n})=>{const{directApiConfig:r,cardDebugWebSocket:a,logger:o}=e;if(!r)return void o.warn("Thunk:initializeWebSocketPlugin","Direct API config not provided, skipping WebSocket plugin initialization.");const i=ls.getInstance();if(o.log("Thunk:initializeWebSocketPlugin","Configuring WebSocket Plugin with settings",{data:r}),i.configure(r),o.log("Thunk:initializeWebSocketPlugin","WebSocket Plugin configured."),r.enabled&&(r.url||r.websocket_url)){o.log("Thunk:initializeWebSocketPlugin","Attempting to connect WebSocket plugin...");try{await i.connect(),o.log("Thunk:initializeWebSocketPlugin","WebSocket plugin connected successfully.")}catch(e){o.error("Thunk:initializeWebSocketPlugin","WebSocket plugin connection failed:",{error:e}),t(Tl("disconnected"))}}else o.warn("Thunk:initializeWebSocketPlugin","WebSocket plugin not connected: Direct API not enabled or URL/WebSocket URL is missing in config."),t(Tl("disconnected"))})),ps=$n("system/processHassEntities",(async(e,{dispatch:t})=>{var n;const{hass:r,entityIds:a,logger:o}=e;let i=0;if(!a||0===a.length)return o.warn("Thunk:processHassEntities","No entities configured for HASS processing."),ye("redux","thunk:processHassEntities:noentities"),{processedCount:0,errors:0};o.log("Thunk:processHassEntities",`Processing HASS state for entities: ${a.join(", ")}`),ye("redux","thunk:processHassEntities:attempt",{count:a.length});let l=0;for(const e of a){const a=r.states[e];if(!a){o.warn("Thunk:processHassEntities",`Entity ${e} not found in HASS states.`),l++;continue}const s=null===(n=a.attributes)||void 0===n?void 0:n.items;if(s&&Array.isArray(s)){const n=s.map((t=>Object.assign(Object.assign({},t),{source:`hass:${e}`})));n.map((e=>e.pk)),n.length>0?(o.log("Thunk:processHassEntities",`Dispatching setParts for ${e} with ${n.length} items.`),t(zi({entityId:e,parts:n})),t(Hi(e)),i++):(o.log("Thunk:processHassEntities",`No items found for entity ${e} after processing.`),t(zi({entityId:e,parts:[]})),t(Hi(e)))}else o.warn("Thunk:processHassEntities",`No 'items' attribute or not an array for entity ${e}.`,{attributes:a.attributes}),t(zi({entityId:e,parts:[]})),t(Hi(e)),l++}return ye("redux","thunk:processHassEntities:"+(l>0?"partial_success":"success"),{processed:i,errors:l}),{processedCount:i,errors:l}})),fs=$n("system/initializeGenericHaStatesFromConfig",(async({hass:e,logger:t},{dispatch:n,getState:r,rejectWithValue:a})=>{var o;t.log("SystemThunks","Initializing generic HA states from config...");const i=(e=>e.config)(r());if(!i){const e="Card configuration not found in state.";return t.error("SystemThunks",e),a(e)}const l=null===(o=i.data_sources)||void 0===o?void 0:o.ha_entities;if(l&&Array.isArray(l)&&l.length>0){t.log("SystemThunks",`Found ${l.length} generic HA entity IDs in config. Dispatching fetchHaEntityStatesThunk.`);try{await n(cs({hass:e,entityIds:l})).unwrap(),t.log("SystemThunks","Successfully dispatched and processed fetchHaEntityStatesThunk for generic HA entities.")}catch(e){const n=`Error fetching generic HA entity states: ${e.message||e}`;t.error("SystemThunks",n,{errorData:e})}}else t.log("SystemThunks","No generic HA entity IDs found in config.data_sources.ha_entities.")})),hs=e.getInstance(),gs=$n("parts/fetchByPks",(async(e,{getState:t,dispatch:n,rejectWithValue:r})=>{const a=t();if(!Jn(a)){const e="API not initialized. Cannot fetch parts by PKs.";return hs.error("fetchPartsByPks Thunk",e),r(e)}if(!e||0===e.length)return hs.log("fetchPartsByPks Thunk","No part PKs provided, skipping fetch."),[];hs.log("fetchPartsByPks Thunk",`Fetching ${e.length} parts by PKs: ${e.join(", ")}`);try{const t=await Promise.allSettled(e.map((e=>oi.getPart(e)))),n=[];return t.forEach(((t,r)=>{const a=e[r];"fulfilled"===t.status&&t.value?n.push(Object.assign(Object.assign({},t.value),{source:"api:direct_pk"})):"rejected"===t.status&&hs.error("fetchPartsByPks Thunk",`Failed to fetch part PK ${a}:`,t.reason)})),n.length>0?hs.log("fetchPartsByPks Thunk",`Successfully fetched ${n.length}/${e.length} parts. Dispatching addParts.`):e.length>0&&hs.warn("fetchPartsByPks Thunk","No parts were successfully fetched."),n}catch(e){const t=`Generic error in fetchPartsByPks: ${e.message||e}`;return hs.error("fetchPartsByPks Thunk",t),r(t)}})),ms=e.getInstance(),vs=e=>e.parameters.config,ys=(e,t,n)=>{var r,a,o;const i=e.parameter;let l;const s=i.match(/^part:(\d+):(.+)$/);if(s){const e=parseInt(s[1],10),t=s[2];l=null===(a=null===(r=null==n?void 0:n[e])||void 0===r?void 0:r[t])||void 0===a?void 0:a.data}else{if(!t)return!1;l=null===(o=t[i])||void 0===o?void 0:o.data}const c=e.value;return"exists"===e.operator?null!=l&&""!==l:"is_empty"===e.operator?null==l||""===l:null!=l&&((e,t,n)=>{const r=String(t),a=String(e);switch(n){case"equals":case"eq":return a===r;case"not_equals":return a!==r;case"contains":return a.toLowerCase().includes(r.toLowerCase());case"greater_than":case"gt":{const e=parseFloat(a),t=parseFloat(r);return!isNaN(e)&&!isNaN(t)&&e>t}case"less_than":case"lt":{const e=parseFloat(a),t=parseFloat(r);return!isNaN(e)&&!isNaN(t)&&e<t}case"exists":return null!=e&&""!==e;case"is_empty":return null==e||""===e;default:return console.warn(`[parameterSelectors] Unknown compare operator: ${n}`),!1}})(l,c||"",e.operator)},bs=gn([e=>e.parameters.parametersByPartId,(e,t)=>t],((e,t)=>e[t])),Ss=gn([vs,e=>e.parameters.parameterValues,(e,t)=>t],((e,t,n)=>{const r={};if(!(null==e?void 0:e.enabled)||!e.conditions||0===e.conditions.length)return r;if(!t||!t[n])return r;const a=t[n];for(const o of e.conditions)try{if(ys(o,a,t))switch(o.action){case"highlight":r.highlight=o.action_value;break;case"text_color":r.textColor=o.action_value;break;case"border":r.border=o.action_value;break;case"icon":r.icon=o.action_value;break;case"badge":r.badge=o.action_value;break;case"sort":r.sort=o.action_value;break;case"filter":r.filter=o.action_value;break;case"show_section":r.showSection=o.action_value;break;case"priority":r.priority=o.action_value}}catch(e){ms.error("selectVisualModifiers",`Error evaluating condition for part ${n}:`,{condition:o,error:e})}return r})),ks=e=>{const t=e.parameters;return"loading"===t.configLoadingStatus||"loading"===t.valuesLoadingStatus};gn([e=>e.parameters.loadingStatus,(e,t)=>t],((e,t)=>e[t])),gn([e=>e.parameters.error,(e,t)=>t],((e,t)=>e?e[t]:null)),gn([(e,t)=>bs(e,t),(e,t,n)=>n],((e,t)=>{if(!e)return;const n=e.find((e=>{var n;return(null===(n=e.template_detail)||void 0===n?void 0:n.name)===t}));return null==n?void 0:n.data}));const ws=(e,t,n,r)=>((null==t?void 0:t.enabled)&&t.conditions,!0),_s=({partData:e,config:t,layout:n,icon:r,badge:a})=>{if(!e)return null;const o=n||(null==t?void 0:t.view_type)||"grid";let i={};switch(o){case"grid":i={aspectRatio:"1 / 1",maxHeight:"150px"};break;case"list":i={width:"60px",height:"60px"};break;case"detail":i={maxHeight:"200px"}}const l=Object.assign(Object.assign({},{width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#f5f5f5",borderRadius:"8px"}),i),[s,c]=xe.useState(!1),u=Object.assign(Object.assign({},{width:"100%",height:"100%",objectFit:"contain",transition:"transform 0.2s ease-in-out"}),{transform:s?"scale(1.05)":"scale(1)"}),d={position:"absolute",top:"4px",left:"4px",fontSize:"list"===o?"16px":"20px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",padding:"2px",zIndex:1},p={position:"absolute",top:"4px",right:"4px",backgroundColor:"var(--primary-color, #3498db)",color:"white",borderRadius:"50%",padding:"list"===o?"1px 4px":"2px 6px",fontSize:"list"===o?"0.7em":"0.8em",fontWeight:"bold",minWidth:"list"===o?"12px":"16px",textAlign:"center",boxShadow:"0px 0px 3px rgba(0,0,0,0.3)",zIndex:1};return Be.jsxs("div",{style:l,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[r&&Be.jsx("span",{className:"thumbnail-icon",style:d,children:r.startsWith("mdi:")?Be.jsx("ha-icon",{icon:r}):Be.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}),a&&Be.jsx("span",{className:"thumbnail-badge",style:p,children:a}),e.thumbnail?Be.jsx("img",{style:u,src:e.thumbnail,alt:e.name}):Be.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"1.5em",fontWeight:"bold"},children:Be.jsx("span",{children:e.name.substring(0,2).toUpperCase()})})]})},Cs={partDetails:{flex:1,display:"flex",flexDirection:"column",gap:"4px",overflow:"hidden"},partName:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},partDescription:{fontSize:"0.9em",opacity:.8,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},partStock:{fontSize:"0.9em",fontWeight:"500"},partParameters:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"4px",fontSize:"0.8em"},partParameter:{display:"flex",justifyContent:"space-between"},paramName:{fontWeight:"500",marginRight:"4px"},paramValue:{}},xs=({partId:e,config:t})=>{const n=ut((t=>e?Yi(t,e):void 0));if(!n)return null;const r=(null==t?void 0:t.display)||{};return Be.jsxs("div",{style:Cs.partDetails,children:[!1!==r.show_name&&Be.jsx("div",{style:Cs.partName,children:n.name}),r.show_description&&n.description&&Be.jsx("div",{style:Cs.partDescription,children:n.description}),!1!==r.show_stock&&Be.jsxs("div",{style:Cs.partStock,children:["Stock: ",n.in_stock,n.minimum_stock&&n.minimum_stock>0?` / Min: ${n.minimum_stock}`:"",n.units?` ${n.units}`:""]}),!1!==r.show_parameters&&n.parameters&&n.parameters.length>0&&Be.jsx("div",{style:Cs.partParameters,children:n.parameters.map((e=>{var t,n,r;return Be.jsxs("div",{style:Cs.partParameter,children:[Be.jsxs("span",{style:Cs.paramName,children:[(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Param",":"]}),Be.jsxs("span",{style:Cs.paramValue,children:[e.data,(null===(n=e.template_detail)||void 0===n?void 0:n.units)?` ${e.template_detail.units}`:""]})]},e.pk||(null===(r=e.template_detail)||void 0===r?void 0:r.name)||Math.random())}))})]})},Es=({path:e,style:t})=>Be.jsxs("span",{style:Object.assign(Object.assign({},t),{fontFamily:"monospace"}),children:["(Icon: ",e,")"]}),As=({partItem:t,config:n,hass:r})=>{var a;const o=xe.useMemo((()=>e.getInstance()),[]),i=lt(),l=xe.useCallback(((e,t=!1)=>{if("locate"===e&&t)return"orange";switch(e){case"increment":return"green";case"decrement":return"red";case"locate":return"blue";case"print":return"purple";default:return"ha-service"===e?"teal":"gray"}}),[]),s=xe.useCallback((e=>{var t;if(e.label)return e.label;if("internal-function"===e.type)switch(e.function_name){case"adjustStock":const n=null===(t=e.function_args)||void 0===t?void 0:t.amount;return n&&Number(n)>0?`Increase stock by ${n}`:`Decrease stock by ${Math.abs(Number(n))}`;case"locatePart":return"Locate part";case"printLabel":return"Print label";default:return e.function_name||"Internal Action"}return e.type}),[]),c=xe.useCallback((e=>{var t;if(e.label)return e.label;if("internal-function"===e.type)switch(e.function_name){case"adjustStock":const n=null===(t=e.function_args)||void 0===t?void 0:t.amount;return n&&Number(n)>0?`+${n}`:`-${Math.abs(Number(n))}`;case"locatePart":return"Locate";case"printLabel":return"Print";default:return e.icon?"":e.function_name||"Func"}return e.icon?"":e.type}),[]),u=xe.useCallback((()=>{var e,a,o,i,l,s;if(!(r&&n&&(null===(a=null===(e=n.services)||void 0===e?void 0:e.wled)||void 0===a?void 0:a.entity_id)&&t))return!1;const c=r.states[n.services.wled.entity_id];if(!c||"on"!==c.state)return!1;const u=null===(i=null===(o=t.parameters)||void 0===o?void 0:o.find((e=>{var t,r,a;return(null===(t=e.template_detail)||void 0===t?void 0:t.name)===(null===(a=null===(r=n.services)||void 0===r?void 0:r.wled)||void 0===a?void 0:a.parameter_name)})))||void 0===i?void 0:i.data;if(!u)return!1;const d=null===(s=null===(l=c.attributes)||void 0===l?void 0:l.seg)||void 0===s?void 0:s[0];if(!d)return!1;const p=parseInt(u,10);return d.start+1===p}),[r,n,t]),d=xe.useCallback((()=>{if(!n||!n.interactions||!n.interactions.buttons)return o.log("PartButtons React","No interactions or buttons defined in config."),[];const e=n.interactions.buttons;return o.log("PartButtons React",`Processed ${e.length} buttons from config.interactions.buttons`,e),e}),[n,o]),p=xe.useCallback((async e=>{var n;if(t)if(r||!("ha-service"===e.type||"internal-function"===e.type&&["adjustStock","printLabel"].includes(e.function_name||""))){if(o.log("PartButtons React",`Button clicked: ${e.label} (Type: ${e.type}, Func: ${e.function_name})`,{buttonAction:e,partId:t.pk}),e.confirmation){const t=e.confirmation_text||`Are you sure you want to perform action: ${e.label||e.function_name||e.type}?`;if(!window.confirm(t))return void o.log("PartButtons React","Action cancelled by user.")}switch(e.type){case"ha-service":if(!e.service||!r)return void o.warn("PartButtons React","HA Service action: service definition or HASS missing.",{button:e});try{const[n,a]=e.service.split(".");if(!n||!a)return void o.error("PartButtons React",`Invalid service format: ${e.service}. Expected 'domain.service_name'.`);let i=Object.assign({},e.service_data||{});"part_id"in i||"entity_id"in i&&e.target_entity_id||(i.part_id=t.pk),e.target_entity_id&&!i.entity_id&&(i.entity_id=e.target_entity_id),o.log("PartButtons React",`Calling HA service: ${n}.${a}`,{serviceData:i}),await r.callService(n,a,i),o.log("PartButtons React",`HA service call ${e.service} successful.`)}catch(t){const n=(null==t?void 0:t.message)||String(t);o.error("PartButtons React",`Failed HA service call ${e.service}: ${n}`,{error:t})}break;case"navigate":e.navigation_path?(o.log("PartButtons React",`Navigating to: ${e.navigation_path}`),window.history.pushState(null,"",e.navigation_path)):o.warn("PartButtons React","Navigate action clicked, but navigation_path is missing.",{button:e});break;case"internal-function":switch(o.log("PartButtons React",`Internal function: ${e.function_name}`,{args:e.function_args}),e.function_name){case"adjustStock":const a=Number(null===(n=e.function_args)||void 0===n?void 0:n.amount);!isNaN(a)&&t.pk&&r?i(Li({partId:t.pk,amount:a,hass:r})):o.warn("PartButtons React","Invalid args or HASS missing for adjustStock.",{args:e.function_args,partId:t.pk,hasHass:!!r});break;case"locatePart":t.pk?i(Oi(t.pk)):o.warn("PartButtons React","Missing partId for locatePart.",{partId:t.pk});break;case"printLabel":o.warn("PartButtons React",'Internal function "printLabel" triggered.');break;default:o.warn("PartButtons React",`Unknown internal function name: ${e.function_name}`)}break;default:o.warn("PartButtons React",`Unknown button action type: ${e.type}`,{button:e})}}else o.warn("PartButtons React","Button clicked, but HASS object is not available for HASS-dependent action.");else o.warn("PartButtons React","Button clicked, but no partItem is selected.")}),[t,i,r,n,o]);if(!t||!d().length||!(null===(a=null==n?void 0:n.display)||void 0===a?void 0:a.show_buttons))return null;const f={padding:"4px 8px",margin:"0 2px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",minWidth:"30px",textAlign:"center"};return Be.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",padding:"4px 0"},children:d().map(((e,t)=>{var n;const a="internal-function"===e.type&&"locatePart"===e.function_name&&u();let o=e.type;"internal-function"===e.type&&("adjustStock"===e.function_name?o=Number(null===(n=e.function_args)||void 0===n?void 0:n.amount)>0?"increment":"decrement":"locatePart"===e.function_name?o="locate":"printLabel"===e.function_name&&(o="print"));const i=e.color||l(o,a),d=c(e),h=s(e);return Be.jsxs("button",{style:Object.assign(Object.assign({},f),{backgroundColor:a?i:"transparent",color:a?"white":i,borderColor:i}),title:h,onClick:()=>p(e),disabled:!r&&("ha-service"===e.type||"internal-function"===e.type&&["adjustStock","printLabel"].includes(e.function_name||"")),children:[e.icon&&Be.jsx(Es,{path:e.icon,style:{marginRight:d?"4px":"0"}}),d]},e.id||`action-button-${t}`)}))})},Rs=({partId:t,config:n,hass:r})=>{var a,o;const i=xe.useMemo((()=>e.getInstance()),[]),l=ut((e=>t?Yi(e,t):void 0));xe.useEffect((()=>{l&&i.log("PartView React","Received part data from Redux:",{partId:null==l?void 0:l.pk,partName:null==l?void 0:l.name,hasPartData:!!l})}),[l,i]);const s=xe.useCallback((()=>l&&"number"==typeof l.in_stock?l.in_stock<=0?"none":l.minimum_stock&&l.in_stock<=l.minimum_stock?"low":"good":"none"),[l]),c=xe.useCallback((e=>{switch(e){case"none":return"#f44336";case"low":return"#ff9800";case"good":return"#4caf50";default:return"transparent"}}),[]);if(!l||!n)return null;const u=n.display||{},d=c(s()),p={position:"relative",display:"flex",flexDirection:"column",gap:"0.5rem",padding:"1rem",borderRadius:"4px",background:"white",borderTop:u.show_stock_status_border?`3px solid ${d}`:void 0},f={display:"inline-block",padding:"2px 8px",borderRadius:"12px",fontSize:"0.9em",backgroundColor:(null===(a=n.display)||void 0===a?void 0:a.show_stock_status_colors)?d:"transparent",color:(null===(o=n.display)||void 0===o?void 0:o.show_stock_status_colors)?"white":"inherit"};return Be.jsxs("div",{style:p,children:[!1!==u.show_header&&Be.jsxs("div",{className:"part-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[!1!==u.show_name&&Be.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:l.name}),!1!==u.show_stock&&Be.jsxs("span",{style:f,children:[l.in_stock," ",l.units||""]})]}),Be.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[!1!==u.show_image&&l.thumbnail&&Be.jsx("div",{className:"part-thumbnail-wrapper",style:{width:"100px",height:"100px"},children:Be.jsx(_s,{partData:l,config:n,layout:"detail"})}),Be.jsx("div",{style:{flexGrow:1},children:Be.jsx(xs,{partId:l.pk,config:n})})]}),!1!==u.show_buttons&&Be.jsx("div",{className:"part-buttons-wrapper",style:{marginTop:"0.5rem"},children:Be.jsx(As,{partItem:l,config:n,hass:r})})]})},Is=({hass:t,config:n,selectedPartId:r})=>{const a=xe.useMemo((()=>e.getInstance()),[]),o=ut(Zi),i=ut(ks);if(xe.useEffect((()=>{a.log("DetailLayout","Props update",{hasHass:!!t,hasConfig:!!n,selectedPartId:r})}),[t,n,r,a]),!n)return a.log("DetailLayout","Warn - No config provided",{config:n}),Be.jsx("div",{children:"Error: Configuration is missing."});return Be.jsx("div",{style:{padding:"1rem",background:"var(--ha-card-background, var(--card-background-color, white))",borderRadius:"var(--ha-card-border-radius, 4px)"},children:r?Be.jsx(Rs,{partId:r,config:n,hass:t}):Be.jsx("div",{children:o||i?"Loading initial data...":Be.jsxs(Be.Fragment,{children:[Be.jsx("div",{children:"No part selected or available for the configured entities."}),Be.jsx("div",{children:"Please check your card configuration and ensure entities have associated parts."})]})})})},Ns=({part:e,config:t,hass:n,isCurrentlyLocating:r,parameterActions:a,handleLocateGridItem:o,handleParameterActionClick:i})=>{const l=e.pk,s=ut((e=>Ai(e,l))),c=t.display||{},u=s||{},d=((e,t)=>{const n={border:"1px solid #eee",padding:"8px",textAlign:"center",cursor:"pointer",height:(null==t?void 0:t.item_height)?`${t.item_height}px`:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between"};return(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=e.border),n})(u,t),p=(f=u)&&f.textColor?{color:f.textColor}:{};var f;const h=["part-container",r?"locating":"",(null==u?void 0:u.priority)?`priority-${u.priority}`:""].filter(Boolean).join(" ");return!1===u.isVisible?null:Be.jsxs("div",{className:h,style:d,onClick:()=>o(l),children:[c.show_image&&Be.jsx("div",{className:"part-thumbnail",style:{marginBottom:"8px"},children:Be.jsx(_s,{partData:e,config:t,layout:"grid",icon:null==u?void 0:u.icon,badge:null==u?void 0:u.badge})}),Be.jsxs("div",{className:"part-info",style:Object.assign(Object.assign({},p),{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}),children:[c.show_name&&Be.jsx("div",{className:"part-name",style:{fontWeight:"bold"},children:e.name}),c.show_stock&&Be.jsxs("div",{className:"part-stock",children:["Stock: ",e.in_stock," ",e.units||""]}),c.show_description&&e.description&&Be.jsx("p",{className:"part-description",style:{fontSize:"0.8em",margin:"4px 0"},children:e.description})]}),Be.jsxs("div",{className:"part-actions-footer",style:{marginTop:"auto"},children:[c.show_buttons&&n&&t&&Be.jsx("div",{style:{fontSize:"small",color:"gray",padding:"4px 0"},children:Be.jsx(As,{partItem:e,config:t,hass:n})}),a.length>0&&Be.jsx("div",{className:"action-buttons",style:{display:"flex",justifyContent:"center",gap:"4px",marginTop:"4px"},children:a.map((e=>Be.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),i(l,e)},title:e.label,style:{fontSize:"0.75em",padding:"2px 5px"},children:e.icon?Be.jsxs("span",{children:["(",e.icon,")"]}):e.label},`${l}-${e.label}`)))})]}),r&&Be.jsx("div",{className:"locating-indicator",children:"Locating..."})]},l)},Ps=({hass:t,config:n,parts:r})=>{var a,o,i,l,s;const c=e.getInstance(),u=lt(),d=ut((e=>e.parameters.parameterValues));xe.useEffect((()=>{}),[d]);const p=xe.useMemo((()=>{var e,t,r,a,o;const i=null!==(t=null===(e=null==n?void 0:n.presentation)||void 0===e?void 0:e.display)&&void 0!==t?t:{},l=null!==(r=null==n?void 0:n.parameters)&&void 0!==r?r:{};return null!==(o=null!==(a=i.show_parameters)&&void 0!==a?a:l.show_section)&&void 0!==o&&o}),[null===(a=null==n?void 0:n.presentation)||void 0===a?void 0:a.display,null==n?void 0:n.parameters]),f=ut((e=>el(e))),h=ut((e=>e.parameters.parameterLoadingStatus||{})),g=xe.useMemo((()=>{var e;const t=[];return(null===(e=null==n?void 0:n.interactions)||void 0===e?void 0:e.buttons)&&Array.isArray(n.interactions.buttons)&&n.interactions.buttons.forEach((e=>{var n,r;"internal-function"===e.type&&"update_parameter"===e.function_name&&t.push({id:e.id||e.label,label:e.label,icon:e.icon,parameter:(null===(n=e.function_args)||void 0===n?void 0:n.parameterName)||"unknown_param",value:(null===(r=e.function_args)||void 0===r?void 0:r.value)||""})})),t}),[null===(o=null==n?void 0:n.interactions)||void 0===o?void 0:o.buttons]),[m,v]=xe.useState(new Set),[y,b]=xe.useState(!1);xe.useEffect((()=>{if(p&&r&&r.length>0){const e=new Set(r.map((e=>e.pk)).filter((e=>"number"==typeof e&&!isNaN(e))));v(e)}else p||v(new Set)}),[r,p]),xe.useEffect((()=>{var e;if(!p||0===m.size)return void(y&&b(!1));let t=!1;for(const n of m){if("loading"===(null!==(e=h[n])&&void 0!==e?e:"idle")){t=!0;break}}y!==t&&b(t)}),[m,h,p,y]);const S=xe.useCallback((()=>{var e;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===m.size)return[];const t=[];return m.forEach((e=>{const n=h[e]||"idle";"idle"!==n&&"failed"!==n||t.push(e)})),t.sort(((e,t)=>e-t)),t}),[null===(i=null==n?void 0:n.direct_api)||void 0===i?void 0:i.enabled,m,h]),k=xe.useMemo(S,[S]),[w,_]=xe.useState("");xe.useEffect((()=>{const e=k.sort(((e,t)=>e-t)).join(",");k.length>0&&e!==w?(u(si(k)),_(e)):k.length}),[k,u,w]);const C=xe.useMemo((()=>{if(!r)return[];let e=[...r];return e.sort(((e,t)=>e.pk-t.pk)),e}),[r]),x=xe.useCallback((e=>{u(Oi(e))}),[u]),E=xe.useCallback(((e,t)=>{c.log("GridLayout","handleParameterActionClick",{partId:e,action:t,level:"debug"}),u(ci({partId:e,paramName:t.parameter,value:t.value}))}),[u,c]);if(!n)return Be.jsx("div",{className:"grid-layout loading",children:Be.jsx("p",{children:"Loading config..."})});if(!r||0===r.length)return Be.jsx("div",{className:"grid-layout no-parts",children:Be.jsx("p",{children:"No parts to display."})});if(0===C.length&&r.length>0)return c.log("GridLayout","All parts were filtered out by conditional logic or other filters.",{originalCount:r.length,level:"debug"}),Be.jsx("div",{className:"grid-layout no-parts",children:Be.jsx("p",{children:"All parts filtered out."})});if(0===C.length)return c.log("GridLayout","No parts to display (filtered or initial empty). ",{level:"debug"}),Be.jsx("div",{className:"grid-layout no-parts",children:Be.jsx("p",{children:"No parts to display."})});null===(l=n.presentation)||void 0===l||l.display;const A=(null===(s=n.presentation)||void 0===s?void 0:s.layout)||{},R={display:"grid",gridTemplateColumns:`repeat(${A.columns||3}, 1fr)`,gap:`${A.grid_spacing||8}px`,padding:"8px"};return Be.jsx("div",{className:"grid-layout",style:R,children:C.map((e=>{if(!e||void 0===e.pk)return c.warn("GridLayout","Skipping render for invalid part object:",{partData:e,level:"debug"}),null;const r=e.pk,a=f===r;return Be.jsx(Ns,{part:e,config:n,hass:t,isCurrentlyLocating:a,parameterActions:g,handleLocateGridItem:x,handleParameterActionClick:E},r)}))})},Ts=e.getInstance(),Ds=({part:e,config:t,hass:n,onLocate:r,onParameterAction:a,parameterActions:o=[]})=>{var i;const l=e.pk,s=ut((e=>Ai(e,l))),c=ut((e=>e.parts.locatingPartId)),u=t.display||{},d=c===l;if(!1===(null==s?void 0:s.isVisible))return Ts.log("ListItem",`Part ${l} is not visible due to conditional effect.`,{level:"debug",partId:l,conditionalEffect:s}),null;const p=((e,t)=>{const n={display:"flex",alignItems:"center",padding:"8px",border:"1px solid var(--divider-color, #e0e0e0)",borderRadius:"4px",marginBottom:"8px",cursor:"pointer",backgroundColor:"var(--card-background-color, white)",transition:"background-color 0.3s ease"};return t&&(n.boxShadow="0 0 10px var(--primary-color)",n.borderColor="var(--primary-color)"),(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=e.border),n})(s,d),f=(e=>{const t={color:"var(--primary-text-color, black)"};return(null==e?void 0:e.textColor)&&(t.color=e.textColor),t})(s),h=["list-item",d?"locating":"",(null==s?void 0:s.priority)?`priority-${s.priority}`:""].filter(Boolean).join(" ");return Be.jsxs("div",{className:h,style:p,onClick:()=>{r&&r(l)},title:`Click to locate Part ID: ${l}`,children:[u.show_image&&Be.jsx("div",{className:"list-item-thumbnail",style:{marginRight:"12px",flexShrink:0},children:Be.jsx(_s,{partData:e,config:t,layout:"list",icon:null==s?void 0:s.icon,badge:null==s?void 0:s.badge})}),Be.jsxs("div",{className:"list-item-info",style:Object.assign(Object.assign({},f),{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}),children:[u.show_name&&Be.jsx("div",{className:"part-name",style:{fontWeight:"bold",fontSize:"1.1em"},children:e.name}),u.show_stock&&Be.jsxs("div",{className:"part-stock",style:{fontSize:"0.9em",opacity:.8},children:["Stock: ",null!==(i=e.in_stock)&&void 0!==i?i:"N/A"," ",e.units||""]}),u.show_ipn&&e.IPN&&Be.jsxs("div",{className:"part-ipn",style:{fontSize:"0.8em",opacity:.7},children:["IPN: ",e.IPN]}),u.show_description&&e.description&&Be.jsx("p",{className:"part-description",style:{fontSize:"0.85em",margin:"4px 0 0 0",opacity:.9,fontStyle:"italic"},children:e.description})]}),(u.show_buttons||o.length>0)&&n&&Be.jsxs("div",{className:"list-item-actions-footer",style:{marginLeft:"auto",flexShrink:0,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:[u.show_buttons&&t&&Be.jsx("div",{style:{marginBottom:o.length>0?"4px":"0"},children:Be.jsx(As,{partItem:e,config:t,hass:n})}),o.length>0&&Be.jsx("div",{className:"parameter-action-buttons",style:{display:"flex",gap:"4px",marginTop:"4px"},children:o.map((e=>Be.jsx("button",{className:"param-action-button",onClick:t=>((e,t)=>{e.stopPropagation(),a&&a(l,t)})(t,e),title:e.label,style:{fontSize:"0.75em",padding:"3px 6px",cursor:"pointer"},children:e.icon?Be.jsx("ha-icon",{icon:e.icon}):e.label},`${l}-${e.id||e.label}`)))})]})]},l)},js=({hass:t,config:n,parts:r})=>{var a,o,i;const l=xe.useMemo((()=>e.getInstance()),[]),s=lt();ut((e=>el(e)));const c=ut(vs),u=ut((e=>e.parameters.parameterLoadingStatus||{})),d=ut((e=>{var t;return(null===(t=e.parameters.config)||void 0===t?void 0:t.actions)||[]})),[p,f]=xe.useState(new Set),[h,g]=xe.useState(!1),m=xe.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);if(r&&r[1]){const e=parseInt(r[1],10);isNaN(e)||t.add(e)}}})),Array.from(t)}),[]);xe.useEffect((()=>{var e;l.log("ListLayout React","useEffect[parts, parameterConfigGlobal.conditions] - Recalculating required IDs.",{numParts:r.length,conditions:null===(e=null==c?void 0:c.conditions)||void 0===e?void 0:e.length});const t=r.map((e=>e.pk)),n=m(null==c?void 0:c.conditions),a=new Set([...t,...n]);p.size===a.size&&[...p].every((e=>a.has(e)))?l.log("ListLayout React","No change to requiredParameterPartIds."):(l.log("ListLayout React",`Setting new requiredParameterPartIds. Old: [${Array.from(p).join(", ")}], New: [${Array.from(a).join(", ")}]`),f(a))}),[r,null==c?void 0:c.conditions,m,l,p.size]),xe.useEffect((()=>{var e;if(l.log("ListLayout React","useEffect[requiredPartIds, allLoadingStatuses] - Recalculating isLoadingParameters.",{requiredNum:p.size}),!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===p.size)return void(h&&g(!1));let t=!1;for(const e of p)if("loading"===u[e]){t=!0;break}h!==t&&(l.log("ListLayout React",`Setting isLoadingParameters to ${t}.`),g(t))}),[p,u,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,l,h]);const v=xe.useCallback((()=>{var e,t,r;if(l.log("ListLayout React","calculateCurrentIdsToFetch - Recalculating.",{directApiEnabled:null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled,requiredNum:p.size}),!(null===(t=null==n?void 0:n.direct_api)||void 0===t?void 0:t.enabled)||0===p.size)return l.log("ListLayout React","FetchParameters useMemo (calc): Skipped (Direct API disabled or no required part IDs)"),[];const a=[],o={};return p.forEach((e=>{const t=u[e]||"idle";o[e]=t,"idle"!==t&&"failed"!==t||a.push(e)})),a.sort(((e,t)=>e-t)),l.log("ListLayout React","FetchParameters useMemo (calc): Evaluation Complete",{requiredPartIds:Array.from(p),allStatuses:o,memoizedIdsToFetch:a,directApiEnabled:null===(r=null==n?void 0:n.direct_api)||void 0===r?void 0:r.enabled}),a}),[null===(o=null==n?void 0:n.direct_api)||void 0===o?void 0:o.enabled,p,u,l]),y=xe.useMemo((()=>v()),[v]),b=xe.useRef("");xe.useEffect((()=>{const e=y.join(","),t=b.current;if(l.log("ListLayout React","useEffect[fetchParameters] - Evaluation Start.",{currentIdsString:e,previousIdsString:t,numToFetch:y.length}),e===t&&y.length>0)l.log("ListLayout React","useEffect[fetchParameters] - Skip dispatch: IDs to fetch are the same as previously dispatched (and not empty).");else{if(0===y.length&&(""===t||0===t.length))return l.log("ListLayout React","useEffect[fetchParameters] - Skip dispatch: No IDs to fetch and no change from empty/initial state."),void(b.current=e);y.length>0?(l.log("ListLayout React",`Dispatching fetchParametersForReferencedParts for IDs: [${y.join(", ")}] (Prev: [${t}])`),s(si(y))):l.log("ListLayout React",`No parameter IDs to fetch in this cycle (idsToFetch is empty). Previously dispatched: [${t}]`),b.current=e}}),[s,y,l]);const S=xe.useMemo((()=>{if(l.log("ListLayout React","useMemo[filteredAndSortedParts] - Recalculating.",{numParts:r.length}),!r)return[];let e=r;return e.sort(((e,t)=>e.pk-t.pk)),l.log("ListLayout React",`Parts after basic sorting: ${e.length}`),e}),[r,l]),k=xe.useCallback((e=>{l.log("ListLayout React",`Locating part: ${e}`),s(Oi(e))}),[s,l]),w=xe.useCallback(((e,t)=>{l.log("ListLayout React",`Handling parameter action click: "${t.label}" for part ${e}`,{action:t}),s(ci({partId:e,paramName:t.parameter,value:t.value}))}),[s,l]);return n?r&&0!==r.length?h&&(null===(i=n.parameters)||void 0===i?void 0:i.enabled)?(l.log("ListLayout React Render","Showing Loading Parameters state."),Be.jsx("div",{className:"list-container loading-container",children:Be.jsx("div",{className:"loading",children:"Loading parameters..."})})):0===S.length?(l.log("ListLayout React Render","No parts to display after filtering."),Be.jsx("div",{className:"list-container no-parts",children:Be.jsx("p",{children:"All parts filtered out or parameters still loading for relevant items."})})):(n.display,l.log("ListLayout React Render",`Rendering with ${S.length} parts.`),Be.jsx("div",{className:"list-container",style:{padding:"8px"},children:S.map((e=>e&&"number"==typeof e.pk?Be.jsx(Ds,{part:e,config:n,hass:t,onLocate:k,onParameterAction:w,parameterActions:d},e.pk):null))})):Be.jsx("div",{className:"list-container no-parts",children:Be.jsx("p",{children:"No parts to display."})}):Be.jsx("div",{className:"list-container loading-container",children:Be.jsx("div",{className:"loading",children:"Loading config..."})})};const $s={searchContainer:{display:"flex",alignItems:"center",border:"1px solid #ccc",borderRadius:"4px",padding:"4px 8px",backgroundColor:"#f9f9f9",position:"relative",marginBottom:"1rem"},input:{flexGrow:1,border:"none",background:"none",outline:"none",padding:"8px",fontSize:"1rem"},iconButton:{border:"none",background:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#555"},clearButton:{color:"#333"},statusIndicator:{marginLeft:"8px",display:"flex",alignItems:"center"},loadingSpinner:{border:"2px solid #f3f3f3",borderTop:"2px solid #3498db",borderRadius:"50%",width:"16px",height:"16px",animation:"spin 1s linear infinite"},errorMessage:{color:"red",fontSize:"0.8em",marginTop:"4px",paddingLeft:"8px"}},Os=t=>{const n=xe.useMemo((()=>e.getInstance()),[]),r=lt(),a=ut(sl),o=ut(ul),i=ut(dl),[l,s]=xe.useState(a);xe.useEffect((()=>{a!==l&&s(a)}),[a,l]);const c=xe.useCallback(function(e,t){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>e(...r)),t)}}((e=>{e.trim().length>1?(n.log("SearchBar React",`Dispatching debounced search for: "${e}"`),r(rl(e.trim()))):0===e.trim().length&&(n.log("SearchBar React","Dispatching clearSearch due to empty debounced query"),r(ll()))}),300),[r,n]);return Be.jsxs("form",{onSubmit:e=>{null==e||e.preventDefault(),l.trim().length>1?(n.log("SearchBar React",`Dispatching immediate search for: "${l}"`),r(rl(l.trim()))):0===l.trim().length&&(n.log("SearchBar React","Dispatching clearSearch from submit (empty query)"),r(ll()))},style:{width:"100%"},children:[Be.jsx("style",{children:"\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n"})," ",Be.jsxs("div",{style:$s.searchContainer,children:[Be.jsx("span",{style:{paddingRight:"8px",color:"#555"},children:"üîç"}),Be.jsx("input",{type:"text",placeholder:"Search Parts...",value:l,onChange:e=>{const t=e.target.value;s(t),r(il(t)),c(t)},style:$s.input}),Be.jsx("div",{style:$s.statusIndicator,children:"pending"===o&&Be.jsx("div",{style:$s.loadingSpinner})}),l?Be.jsx("button",{type:"button",onClick:()=>{n.log("SearchBar React","Dispatching clearSearch from clear button"),r(ll()),s("")},style:Object.assign(Object.assign({},$s.iconButton),$s.clearButton),title:"Clear Search",children:"‚úï"}):Be.jsx("button",{type:"submit",style:$s.iconButton,title:"Search",children:"üîç"})]}),i&&Be.jsx("div",{style:$s.errorMessage,children:i})]})},Ls=({hass:t,config:n,parts:r})=>{var a,o,i;xe.useMemo((()=>e.getInstance()),[]);const l=lt(),s=ut((e=>el(e))),c=ut(vs),u=ut((e=>e.parameters.loadingStatus||{})),d=ut((e=>e.parameters.parameterValues||{})),p=ut(sl),f=ut(cl),h=ut(ul),[g,m]=xe.useState(new Set),[v,y]=xe.useState(!1),b=xe.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);r&&r[1]&&t.add(parseInt(r[1],10))}})),Array.from(t)}),[]);xe.useEffect((()=>{const e=r.map((e=>e.pk)),t=b(null==c?void 0:c.conditions),n=new Set([...e,...t]);g.size===n.size&&[...g].every((e=>n.has(e)))||m(n)}),[r,null==c?void 0:c.conditions,b,g.size]),xe.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===g.size)return void(v&&y(!1));let t=!1;for(const e of g)if("loading"===u[e]){t=!0;break}v!==t&&y(t)}),[g,u,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,v]),xe.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===g.size)return;const t=[];g.forEach((e=>{const n=u[e]||"idle";"idle"!==n&&"failed"!==n||t.push(e)})),t.length>0&&l(si(t))}),[l,null===(o=null==n?void 0:n.direct_api)||void 0===o?void 0:o.enabled,g,u]);const S=xe.useMemo((()=>{var e;let t=r;const a=new Set(f.map((e=>e.pk)));return p.trim().length>0&&("succeeded"===h||f.length>0?t=r.filter((e=>a.has(e.pk))):"pending"!==h&&(t=[])),(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)&&n.parameters.conditions&&(t=t.filter((e=>e&&ws(e.pk,n.parameters)))),p.trim().length>0&&("pending"===h||0===f.length)&&(t=t.filter((e=>e.name.toLowerCase().includes(p.toLowerCase())))),t.sort(((e,t)=>{const n=d[e.pk]?Ss({parameters:{parameterValues:d,config:c,loadingStatus:u}},e.pk):{},r=d[t.pk]?Ss({parameters:{parameterValues:d,config:c,loadingStatus:u}},t.pk):{};if("top"===n.sort&&"top"!==r.sort)return-1;if("top"!==n.sort&&"top"===r.sort)return 1;if("bottom"===n.sort&&"bottom"!==r.sort)return 1;if("bottom"!==n.sort&&"bottom"===r.sort)return-1;const a="high"===n.priority?3:"medium"===n.priority?2:1,o="high"===r.priority?3:"medium"===r.priority?2:1;return a!==o?o-a:e.name.localeCompare(t.name)})),t}),[r,null==n?void 0:n.parameters,u,d,p,f,h,c]),k=xe.useCallback((e=>{l(Oi(e))}),[l]),w=xe.useCallback(((e,t)=>{l(ci({partId:e,parameterName:t.parameter,value:t.value}))}),[l]);if(!n)return Be.jsx("div",{className:"parts-layout loading",children:Be.jsx("p",{children:"Loading config..."})});if(!r&&"pending"!==h)return Be.jsx("div",{className:"parts-layout no-parts",children:Be.jsx("p",{children:"No parts to display."})});if(v&&(null===(i=n.parameters)||void 0===i?void 0:i.enabled))return Be.jsx("div",{className:"parts-layout loading",children:Be.jsx("p",{children:"Loading parameters..."})});const _=n.display||{},C=n.parts_layout_mode||"grid",x={display:"grid",gridTemplateColumns:`repeat(${n.columns||3}, 1fr)`,gap:`${n.grid_spacing||8}px`,padding:"8px"};let E="No parts match the current filters or search.";p.trim().length>0&&0===S.length&&"pending"!==h&&(E=`No parts found matching "${p}".`);return Be.jsxs("div",{className:"parts-layout",style:{padding:"8px"},children:[Be.jsx(Os,{}),0===S.length?Be.jsx("div",{className:"no-parts",children:Be.jsx("p",{children:E})}):Be.jsx("div",{style:"grid"===C?x:{padding:"8px"},children:S.map((e=>(e=>{if(!e)return null;const r=e.pk,a=Ss({parameters:{parameterValues:d,config:c,loadingStatus:u}},r),o=(null==c?void 0:c.actions)||[],i=s===r,l=((e,t,n)=>{const r={border:"1px solid #ddd",padding:"8px",cursor:"pointer",marginBottom:"list"===t?"4px":"0",display:"flex",flexDirection:"list"===t?"row":"column",alignItems:"list"===t?"center":"stretch",textAlign:"grid"===t?"center":"left"};return"grid"===t&&(r.height=(null==n?void 0:n.item_height)?`${n.item_height}px`:"auto",r.justifyContent="space-between"),(null==e?void 0:e.highlight)&&(r.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(r.border=`2px solid ${e.border}`),r})(a,C,n),p=(f=a)&&f.textColor?{color:f.textColor}:{};var f;const h=["grid"===C?"part-container":"list-item",i?"locating":"",(null==a?void 0:a.priority)?`priority-${a.priority}`:""].filter(Boolean).join(" ");return Be.jsxs("div",{className:h,style:l,onClick:()=>k(r),children:[Be.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",flexDirection:"grid"===C?"column":"row"},children:[_.show_image&&Be.jsxs("div",{className:"grid"===C?"part-thumbnail":"list-item-image",style:{marginBottom:"grid"===C?"8px":"0",marginRight:"list"===C?"8px":"0",display:"flex",justifyContent:"center",alignItems:"center"},children:[Be.jsx(_s,{partData:e,config:n,layout:C}),(null==a?void 0:a.icon)&&Be.jsxs("span",{style:{fontSize:"0.7em"},children:[" (Icon: ",a.icon,")"]})]}),Be.jsxs("div",{className:"grid"===C?"part-info":"list-item-info",style:Object.assign(Object.assign({},p),{flexGrow:1,textAlign:"grid"===C?"center":"left"}),children:[_.show_name&&Be.jsx("div",{className:"part-name",style:{fontWeight:"bold"},children:e.name}),_.show_stock&&Be.jsxs("div",{className:"part-stock",children:["Stock: ",e.in_stock," ",e.units||""]})]}),Be.jsxs("div",{className:"item-actions-footer",style:{marginTop:"grid"===C?"auto":"0",marginLeft:"list"===C?"auto":"0",paddingTop:"4px"},children:[o.length>0&&Be.jsx("div",{className:"parameter-action-buttons",style:{display:"flex",justifyContent:"grid"===C?"center":"flex-start",gap:"4px",marginBottom:"4px"},children:o.map((e=>Be.jsx("button",{className:"param-action-button",onClick:t=>{t.stopPropagation(),w(r,e)},title:e.label,style:{fontSize:"0.7em",padding:"2px 4px"},children:e.icon?Be.jsxs("span",{children:["(",e.icon,")"]}):e.label},`${r}-${e.label}`)))}),_.show_buttons&&t&&n&&Be.jsx(As,{partItem:e,config:n,hass:t})]})]}),i&&Be.jsx("div",{className:"locating-indicator",children:"Locating..."})]},r)})(e)))})]})};e.getInstance();class Ms{constructor(t){this.logger=e.getInstance(),this.hass=t}static getTemplateKey(e){const t=e.parameters||[];if(t.length>0){const n=t.find((e=>{var t,n,r;return"Food_State"===(null===(t=e.template_detail)||void 0===t?void 0:t.name)||"Color"===(null===(n=e.template_detail)||void 0===n?void 0:n.name)||"Size"===(null===(r=e.template_detail)||void 0===r?void 0:r.name)}));if(n)return e.name.split(" ")[0]}return e.name}static getVariants(e){const t={};return e.forEach((e=>{const n=this.getTemplateKey(e);t[n]||(t[n]=[]),t[n].push(e)})),t}static groupVariants(e,t){var n,r;const a={};if(!(null===(n=t.variants)||void 0===n?void 0:n.show_variants))return a;return((null===(r=t.variants)||void 0===r?void 0:r.variant_groups)||[]).forEach((t=>{const n=e.find((e=>e.pk===t.main_pk));n&&(a[n.pk]=[n,...e.filter((e=>(t.variantPks||[]).includes(e.pk)))])})),a}static processVariants(t,n){var r;if(!(null===(r=n.variants)||void 0===r?void 0:r.show_variants))return t;try{this.groupVariants(t,n);return t}catch(n){return e.getInstance().error("VariantService","Failed to process variants:",n),t}}static getTotalStock(e,t){return(e.in_stock||0)+t.reduce(((e,t)=>e+(t.in_stock||0)),0)}static isVariant(e){return!!e.variant_of}static isTemplate(e){return!!e.is_template&&!e.variant_of}async getVariants(e){var t;if(!(null===(t=e.variants)||void 0===t?void 0:t.show_variants))return[];try{return e.variants.variant_groups||[]}catch(e){return this.logger.error("VariantService","Failed to get variants:",e),[]}}detectVariantGroups(e){this.logger.log("VariantService",`Detecting variant groups from ${e.length} parts`,{subsystem:"detectVariantGroupsFn"}),e.filter((e=>e.is_template));const t=e.filter((e=>null!==e.variant_of)),n={};t.forEach((e=>{e.variant_of&&(n[e.variant_of]||(n[e.variant_of]=[]),n[e.variant_of].push(e))}));const r=Object.keys(n).map((t=>{const r=Number(t),a=n[r],o=e.find((e=>e.pk===r));return{main_pk:r,templatePk:r,variantPks:a.map((e=>e.pk)),template_id:r,name:(null==o?void 0:o.name)||`Group ${r}`,parts:a.map((e=>e.pk))}}));return this.logger.log("VariantService",`Detected ${r.length} variant groups`,{subsystem:"detectVariantGroupsFn"}),r}processVariantGroups(e,t){const n={};e.forEach((e=>{n[e.pk]=e}));const r=t.map((e=>{const t=n[e.template_id];if(!t)return this.logger.warn("VariantService",`Template part not found for group ${e.template_id}`),null;const r=(e.parts||[]).map((e=>n[e])).filter((e=>void 0!==e)),a=this.getTotalStock(t,r);return Object.assign(Object.assign({},t),{variants:r,is_variant_group:!0,totalStock:a})})).filter((e=>null!==e)),a=new Set;r.forEach((e=>{a.add(e.pk),e.variants&&e.variants.forEach((e=>{a.add(e.pk)}))}));const o=e.filter((e=>!a.has(e.pk)));return[...r,...o]}getTotalStock(e,t){let n=e.in_stock||0;return t.forEach((e=>{n+=e.in_stock||0})),n}async getVariantData(e){try{if(!this.hass||!e)return[];const t=this.hass.states[e];return t&&t.attributes&&t.attributes.items?t.attributes.items:[]}catch(e){return this.logger.error("VariantService","Failed to get variant data:",e),[]}}}const zs=e.getInstance();class Fs{constructor(t){this.hass=t,this.variantService=new Ms(t),this.logger=e.getInstance()}static processItems(t,n){var r,a;if(zs.log("VariantHandler","Processing items with config:",{data:{auto_detect:n.auto_detect_variants,variant_view_type:n.variant_view_type,variants_config:n.variants},subsystem:"processItems"}),!t||0===t.length)return[];if(!(null===(r=n.variants)||void 0===r?void 0:r.show_variants))return t;try{const e=[...t],r=[],o=new Set;if(n.variants.auto_detect){zs.log("VariantHandler",`Auto-detecting variants from ${t.length} items`,{subsystem:"processItems"});const n=e.filter((e=>null!==e.variant_of));zs.log("VariantHandler",`Found ${n.length} parts with variant_of set`,{subsystem:"processItems"});const a={};n.forEach((e=>{e.variant_of&&(a[e.variant_of]||(a[e.variant_of]=[]),a[e.variant_of].push(e))})),Object.keys(a).forEach((t=>{const n=Number(t),i=a[n],l=e.find((e=>e.pk===n));l&&(r.push({pk:l.pk,name:l.name,template:l,variants:i,totalStock:Fs.calculateTotalStock(l,i)}),o.add(l.pk),i.forEach((e=>o.add(e.pk))))})),zs.log("VariantHandler",`Created ${r.length} variant groups`,{subsystem:"processItems"})}else(null===(a=n.variants.variant_groups)||void 0===a?void 0:a.length)&&(zs.log("VariantHandler",`Processing ${n.variants.variant_groups.length} configured variant groups`,{subsystem:"processItems"}),n.variants.variant_groups.forEach((t=>{const n=t.templatePk,a=t.variantPks||[];if(n&&a.length){const i=e.find((e=>e.pk===n));if(i){const n=e.filter((e=>a.includes(e.pk)));n.length>0&&(r.push({pk:i.pk,name:t.name||i.name,template:i,variants:n,totalStock:Fs.calculateTotalStock(i,n)}),o.add(i.pk),n.forEach((e=>o.add(e.pk))))}}})));const i=e.filter((e=>!o.has(e.pk))),l=[...r,...i];return zs.log("VariantHandler",`Processed ${r.length} variant groups and ${i.length} regular items`,{subsystem:"processItems"}),l}catch(n){return e.getInstance().error("VariantHandler","Error processing variants:",{data:n,subsystem:"processItems"}),t}}static isVariant(e){return void 0!==e.template&&void 0!==e.variants&&Array.isArray(e.variants)}static calculateTotalStock(e,t){let n=e.in_stock||0;return t.forEach((e=>{n+=e.in_stock||0})),n}processVariants(e,t){var n;if(!(null===(n=null==t?void 0:t.variants)||void 0===n?void 0:n.show_variants))return e;let r=[];return t.variants.auto_detect?r=this.variantService.detectVariantGroups(e):t.variants.variant_groups&&t.variants.variant_groups.length>0&&(r=t.variants.variant_groups),this.variantService.processVariantGroups(e,r)}getTotalStock(e,t){return Fs.calculateTotalStock(e,t)}}const Gs=({hass:t,config:n,parts:r})=>{var a,o,i;const l=xe.useMemo((()=>e.getInstance()),[]),s=lt(),c=ut((e=>el(e))),u=ut(vs),d=ut((e=>e.parameters.loadingStatus||{})),p=ut((e=>e.parameters.parameterValues||{})),[f,h]=xe.useState([]),[g,m]=xe.useState(new Set),[v,y]=xe.useState(!1);xe.useState(null);const[b,S]=xe.useState(new Set);xe.useEffect((()=>{if(n&&r){l.log("VariantLayout React","useEffect[parts, config] - Processing variants",{numParts:r.length});const e=Fs.processItems(r,n);h(e)}else h([])}),[r,n,l]);const k=xe.useCallback((e=>{if(!e)return[];const t=new Set,n=/^part:(\d+):/;return e.forEach((e=>{if("string"==typeof e.parameter){const r=e.parameter.match(n);r&&r[1]&&t.add(parseInt(r[1],10))}})),Array.from(t)}),[]);xe.useEffect((()=>{l.log("VariantLayout React","useEffect[processedVariants, conditions] - Recalculating requiredPartIds");const e=new Set;f.forEach((t=>{Fs.isVariant(t)?(e.add(t.template.pk),t.variants.forEach((t=>e.add(t.pk)))):e.add(t.pk)}));const t=k(null==u?void 0:u.conditions),n=new Set([...Array.from(e),...t]);g.size===n.size&&[...g].every((e=>n.has(e)))||m(n)}),[f,null==u?void 0:u.conditions,k,l,g.size]),xe.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)||0===g.size)return void(v&&y(!1));let t=!1;for(const e of g)if("loading"===d[e]){t=!0;break}v!==t&&y(t)}),[g,d,null===(a=null==n?void 0:n.parameters)||void 0===a?void 0:a.enabled,l,v]),xe.useEffect((()=>{var e;if(!(null===(e=null==n?void 0:n.direct_api)||void 0===e?void 0:e.enabled)||0===g.size)return;const t=[];g.forEach((e=>{const n=d[e]||"idle";"idle"!==n&&"failed"!==n||t.push(e)})),t.length>0&&s(si(t))}),[s,null===(o=null==n?void 0:n.direct_api)||void 0===o?void 0:o.enabled,g,d,l]);const w=xe.useMemo((()=>{var e;return(null===(e=null==n?void 0:n.parameters)||void 0===e?void 0:e.enabled)?f.filter((e=>{const t=Fs.isVariant(e)?e.template.pk:e.pk;return"succeeded"!==(d[t]||"idle")||ws(0,n.parameters)})):f}),[f,null==n?void 0:n.parameters,d,p]),_=xe.useCallback((e=>{e.currentTarget.style.display="none"}),[]),C=xe.useCallback((e=>{s(Oi(e))}),[s]);xe.useCallback(((e,t)=>{s(ci({partId:e,parameterName:t.parameter,value:t.value}))}),[s]);const x=xe.useCallback((e=>{S((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),E=xe.useCallback(((e,r=!1,a=!1)=>{const o=e.pk,i=Ss({parameters:{parameterValues:p,config:u,loadingStatus:d}},o),l=c===o,s=(null==n?void 0:n.display)||{},f=Object.assign({},s);a?(f.show_buttons=!1,f.show_part_details_component=!1,f.show_stock_status_border=!1!==s.show_stock_status_border_for_templates):r&&(f.show_buttons=void 0!==s.show_buttons_for_variants&&s.show_buttons_for_variants,f.show_part_details_component=void 0!==s.show_part_details_component_for_variants&&s.show_part_details_component_for_variants,f.show_image=void 0===s.show_image_for_variants||s.show_image_for_variants,f.show_stock=void 0===s.show_stock_for_variants||s.show_stock_for_variants,f.show_name=void 0===s.show_name_for_variants||s.show_name_for_variants);const h=Object.assign(Object.assign({},n),{display:f}),g=((e,t)=>{const n={border:"1px solid #e0e0e0",padding:"8px",marginBottom:"8px",cursor:"pointer"};return t&&(n.backgroundColor="#f5f5f5"),(null==e?void 0:e.highlight)&&(n.backgroundColor=e.highlight),(null==e?void 0:e.border)&&(n.border=`2px solid ${e.border}`),n})(i,a);return Be.jsxs("div",{className:`variant-part-item ${r?"variant-member":""} ${a?"group-header":""}`,style:g,onClick:()=>!a&&C(o),children:[Be.jsx(Rs,{partId:o,config:h,hass:t}),l&&Be.jsx("div",{className:"locating-indicator",style:{marginTop:"5px",textAlign:"center",color:"blue"},children:"Locating..."})]},o)}),[n,t,p,u,d,c,C,_]);if(!n)return Be.jsx("div",{className:"variant-layout loading",children:Be.jsx("p",{children:"Loading config..."})});if(v&&(null===(i=n.parameters)||void 0===i?void 0:i.enabled))return Be.jsx("div",{className:"variant-layout loading",children:Be.jsx("p",{children:"Loading parameters..."})});if(!f||0===f.length)return Be.jsx("div",{className:"variant-layout no-variants",children:Be.jsx("p",{children:"No parts or variants to display."})});if(0===w.length&&f.length>0)return Be.jsx("div",{className:"variant-layout no-variants",children:Be.jsx("p",{children:"All items filtered out."})});const A=n.variant_view_type||"grid";l.log("VariantLayout React Render",`Rendering in ${A} mode with ${w.length} visible items.`);switch(A){case"list":return Be.jsx("div",{style:{padding:"10px"},children:w.map((e=>Fs.isVariant(e)?Be.jsxs("div",{className:"variant-group-list",style:{marginBottom:"15px"},children:[E(e.template,!1,!0),Be.jsx("div",{style:{marginLeft:"30px",paddingTop:"5px"},children:e.variants.map((e=>E(e,!0)))})]},e.template.pk):E(e)))});case"tree":return Be.jsx("div",{style:{padding:"10px"},children:w.map((e=>{if(Fs.isVariant(e)){const t=b.has(e.template.pk);return Be.jsxs("div",{className:"variant-group-tree",style:{marginBottom:"5px"},children:[Be.jsxs("div",{onClick:()=>x(e.template.pk),style:{display:"flex",alignItems:"center"},children:[Be.jsx("span",{style:{marginRight:"5px"},children:t?"‚ñº":"‚ñ∫"}),E(e.template,!1,!0)]}),t&&Be.jsx("div",{style:{marginLeft:"30px",paddingTop:"5px",borderLeft:"1px dashed #ccc"},children:e.variants.map((e=>E(e,!0)))})]},e.template.pk)}return E(e)}))});default:return Be.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${(null==n?void 0:n.item_width)||150}px, 1fr))`,gap:"10px",padding:"10px"},children:w.map((e=>Fs.isVariant(e)?Be.jsxs("div",{className:"variant-group-grid",children:[E(e.template,!1,!0)," ",Be.jsx("div",{style:{marginLeft:"20px",borderLeft:"2px solid #f0f0f0",paddingLeft:"10px"},children:e.variants.map((e=>E(e,!0)))})]},e.template.pk):E(e)))})}},Us=e.getInstance();const Bs=e=>{if(!e||!e.rules||0===e.rules.length)return[];const t=[];return e.rules.forEach((e=>{if("field"in e){const n=e;t.push({parameter:n.field,operator:n.operator,value:n.value,action:"highlight",action_value:"yellow"})}})),Us.log("InventreeCard.tsx","Transformed RuleGroup to ConditionRuleDefinition[] (simplified)",{count:t.length,originalRules:e}),t},Hs=({hass:e,config:t})=>{var n,r,a,o,i;const l=lt(),s=null===(n=null==t?void 0:t.performance)||void 0===n?void 0:n.rendering,c=null!==(r=null==s?void 0:s.debounceTime)&&void 0!==r?r:50,u=null!==(a=null==s?void 0:s.idleRenderInterval)&&void 0!==a?a:5e3,d=xe.useMemo((()=>{var e;if(!t)return[];const n=t.entity?[t.entity]:[];return Array.isArray(t.selected_entities)&&n.push(...t.selected_entities),(null===(e=t.data_sources)||void 0===e?void 0:e.inventree_hass_sensors)&&n.push(...t.data_sources.inventree_hass_sensors),[...new Set(n.filter((e=>"string"==typeof e&&""!==e)))]}),[null==t?void 0:t.entity,null==t?void 0:t.selected_entities,null===(o=null==t?void 0:t.data_sources)||void 0===o?void 0:o.inventree_hass_sensors]),p=ut((e=>Ji(e,d))),f=xe.useMemo((()=>{var e;return(null===(e=null==t?void 0:t.data_sources)||void 0===e?void 0:e.inventree_pks)?t.data_sources.inventree_pks.filter((e=>"number"==typeof e&&!isNaN(e))):[]}),[null===(i=null==t?void 0:t.data_sources)||void 0===i?void 0:i.inventree_pks]),h=ut((e=>tl(e,f))),g=xe.useMemo((()=>{const e=[...p,...h],t=new Map;return e.forEach((e=>{e&&"number"==typeof e.pk&&(t.has(e.pk)||t.set(e.pk,e))})),Array.from(t.values())}),[p,h]),m=ut((e=>{if(t&&g&&0!==g.length)return"detail"===t.view_type||"variants"===t.view_type?t.part_id&&g.find((e=>e.pk===t.part_id))||g[0]:void 0}));xe.useEffect((()=>{t&&(Us.log("InventreeCard.tsx","Config updated or available.",{config:t}),Us.setDebugConfig(t))}),[t]);const v=xe.useCallback(function(e,t){let n=null;return(...r)=>new Promise((a=>{n&&clearTimeout(n),n=setTimeout((()=>{n=null,a(e(...r))}),t)}))}((async(e,t,n)=>{var r,a,o,i,l,s,c,u,d,p,f;if(e&&t){Us.log("InventreeCard.tsx","Debounced Effect: HASS and Config are available. Initializing.",{hass:!!e,config:!!t}),Us.log("InventreeCard.tsx","Debounced Effect: Dispatching clearCache() from parametersSlice."),n(bi()),Us.log("InventreeCard.tsx","Debounced Effect: Dispatching setConfigAction with currentConfig."),n(fr(t)),(null===(r=t.direct_api)||void 0===r?void 0:r.enabled)?(t.direct_api.url&&t.direct_api.api_key?(Us.log("InventreeCard.tsx","üöÄ Debounced Effect: Dispatching initializeDirectApi thunk"),n(us({directApiConfig:t.direct_api,logger:Us}))):Us.warn("InventreeCard.tsx","‚ö†Ô∏è Debounced Effect: Direct API URL or API Key missing, skipping initialization."),"hass"!==t.direct_api.method&&(t.direct_api.url||t.direct_api.websocket_url?(Us.log("InventreeCard.tsx","üîå Debounced Effect: Dispatching initializeWebSocketPlugin thunk"),n(ds({directApiConfig:t.direct_api,cardDebugWebSocket:t.debug_websocket,logger:Us}))):Us.warn("InventreeCard.tsx","‚ö†Ô∏è Debounced Effect: Cannot initialize WebSocket, base URL for WS derivation is missing when method is not HASS."))):Us.log("InventreeCard.tsx","Debounced Effect: Direct API not enabled, skipping API/WebSocket initialization.");const h=[];t.entity&&h.push(t.entity),Array.isArray(t.selected_entities)&&h.push(...t.selected_entities),Array.isArray(null===(a=t.data_sources)||void 0===a?void 0:a.inventree_hass_sensors)&&h.push(...t.data_sources.inventree_hass_sensors);const g=[...new Set(h.filter((e=>"string"==typeof e&&""!==e)))];g.length>0?(Us.log("InventreeCard.tsx",`Dispatching processHassEntities for sensors: ${g.join(", ")}`),n(ps({hass:e,entityIds:g,logger:Us}))):Us.log("InventreeCard.tsx","No InvenTree HASS sensor entities to process."),(null===(o=t.data_sources)||void 0===o?void 0:o.ha_entities)&&t.data_sources.ha_entities.length>0?(Us.log("InventreeCard.tsx",`Dispatching initializeGenericHaStatesFromConfig for entities: ${t.data_sources.ha_entities.join(", ")}`),n(fs({hass:e,logger:Us}))):Us.log("InventreeCard.tsx","No generic HA entities configured in data_sources.ha_entities to process.");const m=null===(i=t.data_sources)||void 0===i?void 0:i.inventree_pks;if(Array.isArray(m)&&m.length>0){const e=m.filter((e=>"number"==typeof e&&!isNaN(e)));e.length>0?(Us.log("InventreeCard.tsx",`Dispatching fetchPartsByPks for PKs: ${e.join(", ")}`),n(gs(e)).then((e=>{if(gs.fulfilled.match(e)){const t=e.payload;t.length>0?(Us.log("InventreeCard.tsx",`fetchPartsByPks fulfilled. Dispatching addParts for ${t.length} items.`),n(Fi(t))):Us.log("InventreeCard.tsx","fetchPartsByPks fulfilled, but no items were returned/fetched.")}else gs.rejected.match(e)&&Us.error("InventreeCard.tsx","fetchPartsByPks was rejected:",e.payload||e.error.message)})).catch((e=>{Us.error("InventreeCard.tsx","Error dispatching/handling fetchPartsByPks:",e)}))):m.length>0&&Us.warn("InventreeCard.tsx","Direct Part PKs configured, but none were valid numbers.",{configuredPks:m})}else Us.log("InventreeCard.tsx","No direct Part PKs to process.");let v=[];t.conditional_logic&&t.conditional_logic.rules&&t.conditional_logic.rules.length>0?Array.isArray(t.conditional_logic.rules)?t.conditional_logic.rules.every((e=>"string"==typeof e.parameter&&"string"==typeof e.operator))?(Us.log("InventreeCard.tsx","Debounced Effect: Using conditional_logic.rules (ConditionRuleDefinition[]) directly."),v=t.conditional_logic.rules):(Us.log("InventreeCard.tsx","Debounced Effect: Attempting to transform conditional_logic.rules (assumed RuleGroupType)."),v=Bs(t.conditional_logic.rules)):"object"==typeof t.conditional_logic.rules&&"rules"in t.conditional_logic.rules&&(Us.log("InventreeCard.tsx","Debounced Effect: Using new conditional_logic.rules (RuleGroupType) for initialization, transforming..."),v=Bs(t.conditional_logic.rules)):(null===(l=t.parameters)||void 0===l?void 0:l.conditions)&&t.parameters.conditions.length>0?(Us.log("InventreeCard.tsx","Debounced Effect: Falling back to legacy parameters.conditions for initialization."),v=t.parameters.conditions):Us.log("InventreeCard.tsx","Debounced Effect: No conditions found in new or legacy config for initialization."),(null===(s=t.direct_api)||void 0===s?void 0:s.enabled)&&((null===(c=t.parameters)||void 0===c?void 0:c.enabled)||t.conditional_logic)?(Us.log("InventreeCard.tsx","Debounced Effect: Dispatching initializeRuleDefinitionsThunk...",{numConditions:v.length}),n(ql(v))):(Us.log("InventreeCard.tsx","Debounced Effect: Skipping rule definitions initialization (Direct API or Parameters/ConditionalLogic disabled)."),n(ql([]))),(null===(u=t.direct_api)||void 0===u?void 0:u.enabled)?(Us.log("InventreeCard.tsx","Debounced Effect: Dispatching fetchConfiguredParameters...",{level:"info",inventreeParametersToFetch:(null===(d=t.data_sources)||void 0===d?void 0:d.inventreeParametersToFetch)||[]}),n(ui())):Us.log("InventreeCard.tsx","Debounced Effect: Skipping fetchConfiguredParameters (Direct API disabled)."),(null===(p=t.direct_api)||void 0===p?void 0:p.enabled)&&((null===(f=t.parameters)||void 0===f?void 0:f.enabled)||t.conditional_logic)&&(Us.log("InventreeCard.tsx","Debounced Effect: Dispatching evaluateAndApplyEffectsThunk after initial setup."),n(Ql()))}}),c),[c,Us]);if(xe.useEffect((()=>{v(e,t,l)}),[e,t,l,v]),xe.useEffect((()=>{if(u<=0)return;Us.log("InventreeCard.tsx",`Setting up idle render interval: ${u}ms`);const e=setInterval((()=>{Us.log("InventreeCard.tsx","Idle render interval fired.",{interval:u})}),u);return()=>{Us.log("InventreeCard.tsx","Clearing idle render interval."),clearInterval(e)}}),[u,Us]),!t)return Ee.createElement("div",null,"Loading configuration...");return Be.jsxs("div",{style:{padding:"16px",border:"2px solid navy"},children:[Be.jsx("h1",{style:{marginTop:0,marginBottom:"8px"},children:"InvenTree Card (React)"}),Be.jsxs("p",{style:{fontSize:"12px",color:"#555",marginTop:0,marginBottom:"16px"},children:["Config Entity: ",t.entity||"N/A"," | View: ",t.view_type||"N/A"," | Parts in Store for Config: ",g.length," | Selected Item PK: ",(null==m?void 0:m.pk)||"N/A"]}),(()=>{let n={hass:e,config:t};switch(t.view_type){case"detail":return Ee.createElement(Is,Object.assign(Object.assign({},n),{selectedPartId:null==m?void 0:m.pk}));case"grid":return Ee.createElement(Ps,Object.assign(Object.assign({},n),{parts:g,item:m}));case"list":return Ee.createElement(js,Object.assign(Object.assign({},n),{parts:g,item:m}));case"parts":return Ee.createElement(Ls,Object.assign(Object.assign({},n),{parts:g}));case"variants":return Ee.createElement(Gs,Object.assign(Object.assign({},n),{item:m,parts:g}));default:return Us.warn("InventreeCard.tsx",`Unknown view_type: ${t.view_type}. Defaulting to Detail view or placeholder.`),Ee.createElement("div",null,`Unknown view_type: ${t.view_type}. Please configure a valid view.`)}})()]})},Vs=e.getInstance(),Ws=({hass:e,config:t})=>(Ee.useEffect((()=>{Vs.log("ReactApp","ReactApp component mounted or props updated.",{hasHass:!!e,hasConfig:!!t,viewType:null==t?void 0:t.view_type})}),[e,t]),e&&t?Be.jsx(tt,{store:os,children:Be.jsx(Hs,{hass:e,config:t})}):(Vs.warn("ReactApp","ReactApp rendered without HASS or config. Displaying loading/error."),Be.jsxs("div",{style:{padding:"16px",border:"1px dashed red"},children:[!e&&Be.jsx("p",{children:"Waiting for Home Assistant connection..."}),!t&&Be.jsx("p",{children:"Waiting for card configuration..."})]}))),qs=({hass:e,value:t,label:n,includeDomains:r,disabled:a,onValueChanged:o,placeholder:i})=>{const[l,s]=xe.useState([]);xe.useEffect((()=>{if(!e||!e.states)return void s([]);let t=Object.values(e.states);r&&r.length>0&&(t=t.filter((e=>r.some((t=>e.entity_id.startsWith(`${t}.`))))));const n=t.map((e=>({value:e.entity_id,label:e.attributes.friendly_name||e.entity_id}))).sort(((e,t)=>e.label.localeCompare(t.label)));s(n)}),[e,r]);const c=xe.useMemo((()=>`custom-entity-picker-${(null==n?void 0:n.replace(/\s+/g,"-"))||Math.random().toString(36).substring(7)}`),[n]);return e?Be.jsxs("div",{style:{marginBottom:"16px"},children:[n&&Be.jsx("label",{htmlFor:c,style:{display:"block",marginBottom:"4px"},children:n}),Be.jsxs("select",{id:c,value:t||"",onChange:e=>{o(e.target.value)},disabled:a||0===l.length,style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[i&&!t&&Be.jsx("option",{value:"",disabled:!0,children:i}),0===l.length&&!i&&Be.jsxs("option",{value:"",disabled:!0,children:["No entities found",r?` for domains: ${r.join(", ")}`:""]}),l.map((e=>Be.jsx("option",{value:e.value,children:e.label},e.value)))]})]}):Be.jsx("div",{children:"Loading Home Assistant data..."})},Qs=e.getInstance(),Ks=["sensor"],Xs=({hass:e,selectedSensors:t,onSensorsChanged:n})=>{const r=xe.useCallback((e=>{if(e&&!t.includes(e)){const r=[...t,e];n(r),Qs.log("Editor:HassSensors",`Added InvenTree HASS sensor: ${e}`,{newSensors:r})}}),[t,n]),a=xe.useCallback((e=>{const r=t.filter((t=>t!==e));n(r),Qs.log("Editor:HassSensors",`Removed InvenTree HASS sensor: ${e}`,{newSensors:r})}),[t,n]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"InvenTree HASS Sensors"}),Be.jsx("div",{className:"helper-text",children:"Select Home Assistant sensor entities that represent InvenTree parts or provide InvenTree-related data."}),Be.jsx(qs,{hass:e,label:"Add InvenTree Sensor Entity",onValueChanged:r,includeDomains:Ks,value:"",placeholder:"Select an InvenTree sensor..."}),t.length>0&&Be.jsxs("div",{className:"selected-entities-list",style:{marginTop:"16px"},children:[Be.jsx("h5",{children:"Selected Sensors:"}),t.map((t=>{var n;return Be.jsxs("div",{className:"selected-entity-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Be.jsx("span",{children:(null===(n=e.states[t])||void 0===n?void 0:n.attributes.friendly_name)||t}),Be.jsx("button",{onClick:()=>a(t),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},t)}))]})]})},Js=e.getInstance(),Ys=({hass:e,selectedEntities:t,onEntitiesChanged:n})=>{const r=xe.useCallback((e=>{if(e&&!t.includes(e)){const r=[...t,e];n(r),Js.log("Editor:HaEntities",`Added HA entity: ${e}`,{newEntities:r})}}),[t,n]),a=xe.useCallback((e=>{const r=t.filter((t=>t!==e));n(r),Js.log("Editor:HaEntities",`Removed HA entity: ${e}`,{newEntities:r})}),[t,n]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"Home Assistant Entities (Other)"}),Be.jsx("div",{className:"helper-text",children:"Select any Home Assistant entities whose states or attributes you want to use in conditional logic."}),Be.jsx(qs,{hass:e,label:"Add Home Assistant Entity",onValueChanged:r,value:"",placeholder:"Select an HA entity..."}),t.length>0&&Be.jsxs("div",{className:"selected-entities-list",style:{marginTop:"16px"},children:[Be.jsx("h5",{children:"Selected Entities:"}),t.map((t=>{var n;return Be.jsxs("div",{className:"selected-entity-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Be.jsx("span",{children:(null===(n=e.states[t])||void 0===n?void 0:n.attributes.friendly_name)||t}),Be.jsx("button",{onClick:()=>a(t),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},t)}))]})]})},Zs=e.getInstance(),ec=({hass:e,selectedPks:t,onPksChanged:n})=>{const[r,a]=xe.useState(""),[o,i]=xe.useState(null),l=xe.useCallback((()=>{if(!r.trim())return;const e=r.split(",").map((e=>e.trim())).filter((e=>""!==e)),o=[];let l=!1;for(const n of e){const e=parseInt(n,10);if(isNaN(e)){l=!0;break}t.includes(e)||o.includes(e)||o.push(e)}if(l)i("Invalid input: Please enter comma-separated numbers (e.g., 101, 102).");else{if(o.length>0){const e=[...t,...o].sort(((e,t)=>e-t));n(e),Zs.log("Editor:InventreePk",`Added InvenTree PKs: ${o.join(", ")}`,{newPks:e})}a(""),i(null)}}),[r,t,n]),s=xe.useCallback((e=>{const r=t.filter((t=>t!==e));n(r),Zs.log("Editor:InventreePk",`Removed InvenTree PK: ${e}`,{newPks:r})}),[t,n]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"By InvenTree Part PK"}),Be.jsx("div",{className:"helper-text",children:"Enter comma-separated InvenTree Part Primary Keys (PKs) to fetch their data directly via API."}),Be.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[Be.jsx("input",{type:"text",value:r,onChange:e=>{a(e.target.value),o&&i(null)},placeholder:"e.g., 101, 102, 145",style:{flexGrow:1,padding:"8px",border:o?"1px solid red":"1px solid var(--divider-color)"}}),Be.jsx("button",{onClick:l,style:{padding:"8px 12px"},children:"Add PKs"})]}),o&&Be.jsx("div",{style:{color:"red",fontSize:"0.9em",marginBottom:"8px"},children:o}),t.length>0&&Be.jsxs("div",{className:"selected-pks-list",style:{marginTop:"16px"},children:[Be.jsx("h5",{children:"Selected Part PKs:"}),t.map((e=>Be.jsxs("div",{className:"selected-pk-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Be.jsxs("span",{children:["Part PK: ",e]}),Be.jsx("button",{onClick:()=>s(e),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},e)))]})]})},tc=e.getInstance(),nc=({hass:e,selectedParameters:t,onParametersChanged:n})=>{const[r,a]=xe.useState(""),[o,i]=xe.useState(null),l=e=>{const t=e.split(":");return 3===t.length&&("part"===t[0].toLowerCase()&&(!isNaN(parseInt(t[1],10))&&!(!t[2]||""===t[2].trim())))},s=xe.useCallback((()=>{if(!r.trim())return;const e=r.split(",").map((e=>e.trim())).filter((e=>""!==e)),o=[];let s=!1;for(const n of e){if(!l(n)){s=!0;break}t.includes(n)||o.includes(n)||o.push(n)}if(s)i("Invalid format: Use comma-separated strings like 'part:ID:PARAM_NAME' (e.g., part:123:color, part:456:size).");else{if(o.length>0){const e=[...t,...o].sort();n(e),tc.log("Editor:InventreeParams",`Added InvenTree Parameters: ${o.join(", ")}`,{newParams:e})}a(""),i(null)}}),[r,t,n]),c=xe.useCallback((e=>{const r=t.filter((t=>t!==e));n(r),tc.log("Editor:InventreeParams",`Removed InvenTree Parameter: ${e}`,{newParams:r})}),[t,n]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"InvenTree Parameters (Direct API)"}),Be.jsxs("div",{className:"helper-text",children:["Enter comma-separated parameter strings in the format ",Be.jsx("code",{children:"part:ID:PARAMETER_NAME"}),". These will be fetched directly via the InvenTree API."]}),Be.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[Be.jsx("input",{type:"text",value:r,onChange:e=>{a(e.target.value),o&&i(null)},placeholder:"e.g., part:145:microwavables, part:101:length_cm",style:{flexGrow:1,padding:"8px",border:o?"1px solid red":"1px solid var(--divider-color)"}}),Be.jsx("button",{onClick:s,style:{padding:"8px 12px"},children:"Add Parameters"})]}),o&&Be.jsx("div",{style:{color:"red",fontSize:"0.9em",marginBottom:"8px"},children:o}),t.length>0&&Be.jsxs("div",{className:"selected-parameters-list",style:{marginTop:"16px"},children:[Be.jsx("h5",{children:"Selected Parameters:"}),t.map((e=>Be.jsxs("div",{className:"selected-parameter-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:"1px solid var(--divider-color)"},children:[Be.jsx("span",{children:e}),Be.jsx("button",{onClick:()=>c(e),style:{color:"var(--error-color)",background:"none",border:"none",cursor:"pointer"},children:"Remove"})]},e)))]})]})},rc=e.getInstance(),ac=({hass:e,directApiConfig:t={enabled:!1,url:"",api_key:""},onDirectApiConfigChanged:n})=>{const r=xe.useCallback((e=>{const{name:r,value:a,type:o}=e.target;let i=a;"checkbox"===o?i=e.target.checked:"number"===o&&(i=parseFloat(a));const l=Object.assign(Object.assign({},t),{[r]:i});n(l),rc.log("Editor:ApiConfig",`API Config changed: ${r} = ${i}`,{newConfig:l})}),[t,n]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"InvenTree API Configuration"}),Be.jsx("div",{className:"config-item",style:{marginBottom:"16px"},children:Be.jsxs("label",{htmlFor:"direct_api_enabled",style:{display:"flex",alignItems:"center"},children:[Be.jsx("input",{type:"checkbox",id:"direct_api_enabled",name:"enabled",checked:t.enabled,onChange:r,style:{marginRight:"8px"}}),"Enable Direct API Communication"]})}),t.enabled&&Be.jsxs(Be.Fragment,{children:[Be.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"direct_api_url",children:"InvenTree API URL:"}),Be.jsx("input",{type:"text",id:"direct_api_url",name:"url",value:t.url||"",onChange:r,placeholder:"e.g., http://inventree.local:8000",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"direct_api_key",children:"API Key:"}),Be.jsx("input",{type:"password",id:"direct_api_key",name:"api_key",value:t.api_key||"",onChange:r,placeholder:"Enter your InvenTree API Key",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"direct_api_websocket_url",children:"WebSocket URL (Optional):"}),Be.jsx("input",{type:"text",id:"direct_api_websocket_url",name:"websocket_url",value:t.websocket_url||"",onChange:r,placeholder:"e.g., ws://inventree.local:8000/ws/api",style:{width:"100%",padding:"8px",boxSizing:"border-box"}}),Be.jsx("div",{className:"helper-text",style:{fontSize:"0.9em",color:"var(--secondary-text-color)"},children:"Leave blank to auto-derive from API URL. Needed for reverse proxies or custom setups."})]}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"direct_api_idle_render_time",children:"Idle Render Time (seconds):"}),Be.jsx("input",{type:"number",id:"direct_api_idle_render_time",name:"idle_render_time",value:void 0===t.idle_render_time?60:t.idle_render_time,onChange:r,min:"10",max:"600",style:{width:"100px",padding:"8px"}}),Be.jsx("div",{className:"helper-text",style:{fontSize:"0.9em",color:"var(--secondary-text-color)"},children:"How often to refresh when no changes are detected (10-600s). Set in API performance settings if not here."})]})]})]})},oc=e.getInstance(),ic=["detail","grid","list","parts","variants","base","debug","custom"],lc=({viewType:e="detail",layoutOptions:t={},onLayoutConfigChanged:n})=>{const r=xe.useCallback((e=>{const t=e.target.value;n(t,{}),oc.log("Editor:LayoutSection",`View type changed to: ${t}`)}),[n]),a=xe.useCallback((r=>{const{name:a,value:o}=r.target;let i;if(""===o)i=void 0;else{const e=parseFloat(o);isNaN(e)||(i=e)}const l=Object.assign(Object.assign({},t),{[a]:i}),s=Object.entries(l).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=n),e)),{});n(e,s),oc.log("Editor:LayoutSection",`Layout option changed: ${a} = ${i}`,{newLayoutOptions:s})}),[e,t,n]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"Layout Configuration"}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"view_type_select",children:"View Type:"}),Be.jsx("select",{id:"view_type_select",name:"view_type",value:e,onChange:r,style:{marginLeft:"8px",padding:"8px",minWidth:"150px"},children:ic.map((e=>Be.jsxs("option",{value:e,children:[e.charAt(0).toUpperCase()+e.slice(1)," "]},e)))})]}),"grid"===e?Be.jsxs("div",{className:"grid-options",style:{marginTop:"10px",paddingLeft:"20px",borderLeft:"2px solid #eee"},children:[Be.jsx("h5",{style:{marginBottom:"8px"},children:"Grid Layout Options:"}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"8px"},children:[Be.jsx("label",{htmlFor:"layout_columns",children:"Columns:"}),Be.jsx("input",{type:"number",id:"layout_columns",name:"columns",value:void 0===t.columns?"":t.columns,onChange:a,min:"1",max:"6",style:{width:"60px",marginLeft:"8px",padding:"6px"}})]}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"8px"},children:[Be.jsx("label",{htmlFor:"layout_grid_spacing",children:"Grid Spacing (px):"}),Be.jsx("input",{type:"number",id:"layout_grid_spacing",name:"grid_spacing",value:void 0===t.grid_spacing?"":t.grid_spacing,onChange:a,min:"0",max:"32",style:{width:"60px",marginLeft:"8px",padding:"6px"}})]}),Be.jsxs("div",{className:"config-item",style:{marginBottom:"8px"},children:[Be.jsx("label",{htmlFor:"layout_item_height",children:"Item Height (px):"}),Be.jsx("input",{type:"number",id:"layout_item_height",name:"item_height",value:void 0===t.item_height?"":t.item_height,onChange:a,min:"50",max:"500",style:{width:"70px",marginLeft:"8px",padding:"6px"}})]})]}):null]})},sc=e.getInstance(),cc=e=>{const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},uc=({displayConfig:e={},onDisplayConfigChanged:t})=>{const n=xe.useCallback((n=>{const{name:r,checked:a}=n.target,o=Object.assign(Object.assign({},e),{[r]:a});t(o),sc.log("Editor:VisibilitySection",`Display option changed: ${r} = ${a}`,{newDisplayConfig:o})}),[e,t]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"Element Visibility"}),Be.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:["show_header","show_image","show_name","show_stock","show_description","show_category","show_ipn","show_location","show_supplier","show_manufacturer","show_notes","show_buttons","show_parameters","show_stock_status_border","show_stock_status_colors","show_related_parts","show_part_details_component","show_stock_status_border_for_templates","show_buttons_for_variants","show_part_details_component_for_variants","show_image_for_variants","show_stock_for_variants","show_name_for_variants"].map((t=>Be.jsx("div",{className:"config-item",children:Be.jsxs("label",{htmlFor:`display_${t}`,style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[Be.jsx("input",{type:"checkbox",id:`display_${t}`,name:t,checked:!!e[t],onChange:n,style:{marginRight:"8px"}}),cc(t).replace(/^Show /,"")," "]})},t)))})]})},dc=e.getInstance(),pc=({styleConfig:e={},onStyleConfigChanged:t})=>{const n=xe.useCallback((n=>{const{name:r,value:a,type:o}=n.target;let i=a;if("number"===o)if(""===a)i=void 0;else{const e=parseFloat(a);i=isNaN(e)?void 0:e}const l=Object.assign(Object.assign({},e),{[r]:i});t(l),dc.log("Editor:StylingSection",`Style option changed: ${r} = ${i}`,{newStyleConfig:l})}),[e,t]);return Be.jsxs("div",{className:"sub-section-container",children:[Be.jsx("h4",{className:"sub-section-title",children:"Overall Card Styling"}),Be.jsxs("div",{className:"config-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[Be.jsxs("div",{className:"config-item",children:[Be.jsx("label",{htmlFor:"style_background",children:"Background CSS:"}),Be.jsx("input",{type:"text",id:"style_background",name:"background",value:(null==e?void 0:e.background)||"",onChange:n,placeholder:"e.g., #f0f0f0, var(--ha-card-background)",style:{width:"100%",padding:"8px",boxSizing:"border-box"}}),Be.jsx("small",{children:"CSS value for card background (color, image, etc.)"})]}),Be.jsxs("div",{className:"config-item",children:[Be.jsx("label",{htmlFor:"style_spacing",children:"Overall Spacing (px):"}),Be.jsx("input",{type:"number",id:"style_spacing",name:"spacing",value:void 0===(null==e?void 0:e.spacing)?"":e.spacing,onChange:n,placeholder:"e.g., 16",min:"0",style:{width:"100px",padding:"8px"}}),Be.jsx("small",{children:"Default spacing/padding unit."})]}),Be.jsxs("div",{className:"config-item",children:[Be.jsx("label",{htmlFor:"style_image_size",children:"Default Image Size (px):"}),Be.jsx("input",{type:"number",id:"style_image_size",name:"image_size",value:void 0===(null==e?void 0:e.image_size)?"":e.image_size,onChange:n,placeholder:"e.g., 50",min:"10",max:"300",style:{width:"100px",padding:"8px"}}),Be.jsx("small",{children:"Default size for thumbnails/images."})]})]})]})},fc=e.getInstance(),hc=({hass:e,label:t,value:n,placeholder:r,disabled:a,onValueChanged:o})=>{const i=xe.useRef(null);return xe.useEffect((()=>{if(i.current){const o=i.current;void 0!==e&&(o.hass=e),void 0!==t&&(o.label=t),void 0!==n&&(o.value=n),void 0!==r&&(o.placeholder=r),void 0!==a&&(o.disabled=a)}}),[e,t,n,r,a]),xe.useEffect((()=>{const e=i.current;if(e){const t=e=>{fc.log("Editor:HaIconPickerWrapper","value-changed event received from ha-icon-picker",{detail:e.detail}),e.detail&&"string"==typeof e.detail.value&&o(e.detail.value)};return e.addEventListener("value-changed",t),fc.log("Editor:HaIconPickerWrapper","Added event listener for value-changed"),()=>{e.removeEventListener("value-changed",t),fc.log("Editor:HaIconPickerWrapper","Removed event listener for value-changed")}}}),[o]),Be.jsx("ha-icon-picker",{ref:i})},gc=e.getInstance(),mc=["ha-service","navigate","internal-function"],vc=({hass:e,initialAction:t,onSave:n,onCancel:r})=>{const[a,o]=xe.useState(t||{label:"",type:"ha-service",icon:"",confirmation:!1,service_data:{}}),[i,l]=xe.useState("");xe.useEffect((()=>{if(t)o(t),l("object"==typeof t.service_data?JSON.stringify(t.service_data,null,2):t.service_data||"");else{o({label:"",type:"ha-service",icon:"",confirmation:!1,service_data:{}}),l("{}")}}),[t]);const s=xe.useCallback((e=>{const{name:t,value:n,type:r}=e.target,a="checkbox"===r;o((r=>Object.assign(Object.assign({},r),{[t]:a?e.target.checked:n})))}),[]),c=xe.useCallback((e=>{o((t=>Object.assign(Object.assign({},t),{icon:e})))}),[]),u=xe.useCallback((e=>{o((t=>Object.assign(Object.assign({},t),{target_entity_id:e})))}),[]),d=xe.useCallback((e=>{l(e.target.value)}),[]),p=xe.useCallback((()=>{if(!a.label)return void alert("Action label is required.");let e=Object.assign({},a);if("ha-service"===a.type)try{e.service_data=i?JSON.parse(i):{}}catch(e){return gc.error("Editor:ActionForm","Invalid JSON in service_data",{serviceDataString:i,error:e}),void alert("Invalid JSON in Service Data. Please correct it.")}n(e)}),[a,n,i]);return Be.jsxs("div",{className:"action-editor-form",style:{padding:"16px",background:"#f9f9f9",borderRadius:"8px"},children:[Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-label",style:{display:"block",marginBottom:"4px"},children:"Label*:"}),Be.jsx("input",{type:"text",id:"action-label",name:"label",value:a.label||"",onChange:s,required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-icon",style:{display:"block",marginBottom:"4px"},children:"Icon:"}),Be.jsx(hc,{hass:e,value:a.icon||"",onValueChanged:c})]}),Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-type",style:{display:"block",marginBottom:"4px"},children:"Action Type:"}),Be.jsx("select",{id:"action-type",name:"type",value:a.type||"ha-service",onChange:s,style:{width:"100%",padding:"8px"},children:mc.map((e=>Be.jsx("option",{value:e,children:e.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))},e)))})]}),"ha-service"===a.type&&Be.jsxs("div",{className:"service-fields",style:{border:"1px solid #eee",padding:"10px",marginTop:"10px",borderRadius:"4px"},children:[Be.jsx("h4",{children:"HA Service Details"}),Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-service",style:{display:"block",marginBottom:"4px"},children:"Service Call*:"}),Be.jsx("input",{type:"text",id:"action-service",name:"service",value:a.service||"",onChange:s,placeholder:"e.g., light.turn_on",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-target_entity_id",style:{display:"block",marginBottom:"4px"},children:"Target Entity ID:"}),Be.jsx(qs,{hass:e,value:a.target_entity_id||"",onValueChanged:u,placeholder:"Select target entity..."})]}),Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-service_data",style:{display:"block",marginBottom:"4px"},children:"Service Data (JSON):"}),Be.jsx("textarea",{id:"action-service_data",name:"service_data",value:i,onChange:d,placeholder:'{ "brightness_pct": 50 }',rows:4,style:{width:"100%",padding:"8px",boxSizing:"border-box"}}),Be.jsx("small",{children:"Enter as JSON. Will be parsed when saving."})]})]}),"navigate"===a.type&&Be.jsxs("div",{className:"navigate-fields",style:{border:"1px solid #eee",padding:"10px",marginTop:"10px",borderRadius:"4px"},children:[Be.jsx("h4",{children:"Navigation Details"}),Be.jsxs("div",{className:"form-field",style:{marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-navigation_path",style:{display:"block",marginBottom:"4px"},children:"Navigation Path*:"}),Be.jsx("input",{type:"text",id:"action-navigation_path",name:"navigation_path",value:a.navigation_path||"",onChange:s,placeholder:"e.g., /lovelace/my-view",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]})]}),"internal-function"===a.type&&Be.jsxs("div",{className:"internal-fn-fields",style:{border:"1px solid #eee",padding:"10px",marginTop:"10px",borderRadius:"4px"},children:[Be.jsx("h4",{children:"Internal Function Details (Future)"}),Be.jsx("p",{children:"Configuration for internal card functions will go here."})]}),Be.jsxs("div",{className:"form-field",style:{marginTop:"16px",display:"flex",alignItems:"center"},children:[Be.jsx("input",{type:"checkbox",id:"action-confirmation",name:"confirmation",checked:a.confirmation||!1,onChange:s,style:{marginRight:"8px"}}),Be.jsx("label",{htmlFor:"action-confirmation",children:"Require Confirmation"})]}),a.confirmation&&Be.jsxs("div",{className:"form-field",style:{marginTop:"8px",marginBottom:"12px"},children:[Be.jsx("label",{htmlFor:"action-confirmation_text",style:{display:"block",marginBottom:"4px"},children:"Confirmation Text:"}),Be.jsx("input",{type:"text",id:"action-confirmation_text",name:"confirmation_text",value:a.confirmation_text||"",onChange:s,placeholder:"Are you sure?",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),Be.jsxs("div",{className:"form-buttons",style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:[Be.jsx("button",{type:"button",onClick:r,style:{marginRight:"10px",padding:"8px 16px"},children:"Cancel"}),Be.jsx("button",{type:"button",onClick:p,style:{padding:"8px 16px",background:"#4CAF50",color:"white",border:"none"},children:"Save Action"})]})]})},yc=e.getInstance(),bc=({hass:e,interactionsConfig:t={buttons:[]},onInteractionsConfigChanged:n})=>{const[r,a]=xe.useState(!1),[o,i]=xe.useState(void 0),[l,s]=xe.useState(null),c=xe.useCallback(((e,t)=>{i(e?Object.assign({},e):void 0),s(void 0!==t?t:null),a(!0),yc.log("Editor:InteractionsSection","Modal opened",{action:e,index:t})}),[]),u=xe.useCallback((()=>{a(!1),i(void 0),s(null),yc.log("Editor:InteractionsSection","Modal closed")}),[]),d=xe.useCallback((e=>{const r=t.buttons||[];let a;null!==l?(a=r.map(((t,n)=>n===l?Object.assign(Object.assign({},e),{id:t.id||String(Date.now())}):t)),yc.log("Editor:InteractionsSection","Action updated",{savedAction:e,index:l})):(a=[...r,Object.assign(Object.assign({},e),{id:String(Date.now())})],yc.log("Editor:InteractionsSection","New action added",{savedAction:e})),n(Object.assign(Object.assign({},t),{buttons:a})),u()}),[t,n,u,l]),p=xe.useCallback((e=>{const r=(t.buttons||[]).filter(((t,n)=>n!==e));n(Object.assign(Object.assign({},t),{buttons:r})),yc.log("Editor:InteractionsSection","Action deleted",{index:e})}),[t,n]);return Be.jsxs("div",{className:"interactions-section",style:{border:"1px solid #ccc",padding:"16px",margin:"10px 0"},children:[Be.jsx("h4",{children:"Custom Interactions (Actions/Buttons)"}),t.buttons&&t.buttons.length>0?Be.jsx("ul",{style:{listStyle:"none",padding:0},children:t.buttons.map(((e,t)=>Be.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",borderBottom:"1px solid #eee"},children:[Be.jsxs("span",{children:[e.label," (",e.type,")"]}),Be.jsxs("div",{children:[Be.jsx("button",{onClick:()=>c(e,t),style:{marginRight:"8px"},children:"Edit"}),Be.jsx("button",{onClick:()=>p(t),children:"Delete"})]})]},e.id||t)))}):Be.jsx("p",{children:"No custom actions defined yet."}),Be.jsx("button",{onClick:()=>c(),style:{marginTop:"10px"},children:"+ Add New Action"}),r&&Be.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:u,children:Be.jsxs("div",{className:"modal-content",style:{background:"white",padding:"20px",borderRadius:"8px",minWidth:"400px",maxWidth:"600px"},onClick:e=>e.stopPropagation(),children:[Be.jsx("h5",{style:{marginTop:0},children:o?"Edit Action":"Add New Action"}),Be.jsx(vc,{hass:e,initialAction:o,onSave:d,onCancel:u})]})})]})};var Sc={"¬º":"1/4","¬Ω":"1/2","¬æ":"3/4","‚Öê":"1/7","‚Öë":"1/9","‚Öí":"1/10","‚Öì":"1/3","‚Öî":"2/3","‚Öï":"1/5","‚Öñ":"2/5","‚Öó":"3/5","‚Öò":"4/5","‚Öô":"1/6","‚Öö":"5/6","‚Öõ":"1/8","‚Öú":"3/8","‚Öù":"5/8","‚Öû":"7/8","‚Öü":"1/"},kc=/^(?=-?\s*\.\d|-?\s*\d)(-)?\s*((?:\d(?:[\d,_]*\d)?)*)(([eE][+-]?\d(?:[\d,_]*\d)?)?|\.\d(?:[\d,_]*\d)?([eE][+-]?\d(?:[\d,_]*\d)?)?|(\s+\d(?:[\d,_]*\d)?\s*)?\s*\/\s*\d(?:[\d,_]*\d)?)?$/,wc=new RegExp(kc.source.replace(/\$$/,"(?:\\s*[^\\.\\d\\/].*)?")),_c=new RegExp(`(${Object.keys(Sc).join("|")})`),Cc={MMM:3e3,MM:2e3,M:1e3,CM:900,DCCC:800,DCC:700,DC:600,D:500,CD:400,CCC:300,CC:200,C:100,XC:90,LXXX:80,LXX:70,LX:60,L:50,XL:40,XXX:30,XX:20,XII:12,XI:11,X:10,IX:9,VIII:8,VII:7,VI:6,V:5,IV:4,III:3,II:2,I:1},xc={"‚Ö†":"I","‚Ö°":"II","‚Ö¢":"III","‚Ö£":"IV","‚Ö§":"V","‚Ö•":"VI","‚Ö¶":"VII","‚Öß":"VIII","‚Ö®":"IX","‚Ö©":"X","‚Ö™":"XI","‚Ö´":"XII","‚Ö¨":"L","‚Ö≠":"C","‚ÖÆ":"D","‚ÖØ":"M","‚Ö∞":"I","‚Ö±":"II","‚Ö≤":"III","‚Ö≥":"IV","‚Ö¥":"V","‚Öµ":"VI","‚Ö∂":"VII","‚Ö∑":"VIII","‚Ö∏":"IX","‚Öπ":"X","‚Ö∫":"XI","‚Öª":"XII","‚Öº":"L","‚ÖΩ":"C","‚Öæ":"D","‚Öø":"M"},Ec=new RegExp(`(${Object.keys(xc).join("|")})`,"gi"),Ac=/^(?=[MDCLXVI])(M{0,3})(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i,Rc={round:3,allowTrailingInvalid:!1,romanNumerals:!1},Ic=/^\s*\//,Nc=(e,t=Rc)=>{if("number"==typeof e||"bigint"==typeof e)return e;let n=NaN;const r=`${e}`.replace(_c,((e,t)=>` ${Sc[t]}`)).replace("‚ÅÑ","/").trim();if(0===r.length)return NaN;const a={...Rc,...t},o=(a.allowTrailingInvalid?wc:kc).exec(r);if(!o)return a.romanNumerals?(e=>{const t=`${e}`.replace(Ec,((e,t)=>xc[t])).toUpperCase(),n=Ac.exec(t);if(!n)return NaN;const[,r,a,o,i]=n;return(Cc[r]??0)+(Cc[a]??0)+(Cc[o]??0)+(Cc[i]??0)})(r):NaN;const[,i,l,s]=o,c=l.replace(/[,_]/g,""),u=null==s?void 0:s.replace(/[,_]/g,"");if(n=!c&&u&&u.startsWith(".")?0:parseInt(c),!u)return i?-1*n:n;const d=!1===a.round?NaN:parseFloat(`1e${Math.floor(Math.max(0,a.round))}`);if(u.startsWith(".")||u.startsWith("e")||u.startsWith("E")){const e=parseFloat(`${n}${u}`);n=isNaN(d)?e:Math.round(e*d)/d}else if(Ic.test(u)){const e=parseInt(c),t=parseInt(u.replace("/",""));n=isNaN(d)?e/t:Math.round(e*d/t)/d}else{const e=u.split("/"),[t,r]=e.map((e=>parseInt(e)));n+=isNaN(d)?t/r:Math.round(t*d/r)/d}return i?-1*n:n},Pc=xe.createContext({}),Tc=e=>Be.jsx("button",{type:"button","data-testid":e.testID,disabled:e.disabled&&!e.disabledTranslation,className:e.className,title:e.disabledTranslation&&e.disabled?e.disabledTranslation.title:e.title,onClick:t=>e.handleOnClick(t),children:e.disabledTranslation&&e.disabled?e.disabledTranslation.label:e.label}),Dc=xe.forwardRef(((e,t)=>Be.jsx("span",{"data-testid":e.testID,ref:t,className:e.className,title:e.title,children:e.label}))),jc="------",$c=jc,Oc=jc,Lc=jc,Mc=jc,zc=jc,Fc=jc,Gc=[{name:"=",value:"=",label:"="},{name:"!=",value:"!=",label:"!="},{name:"<",value:"<",label:"<"},{name:">",value:">",label:">"},{name:"<=",value:"<=",label:"<="},{name:">=",value:">=",label:">="},{name:"contains",value:"contains",label:"contains"},{name:"beginsWith",value:"beginsWith",label:"begins with"},{name:"endsWith",value:"endsWith",label:"ends with"},{name:"doesNotContain",value:"doesNotContain",label:"does not contain"},{name:"doesNotBeginWith",value:"doesNotBeginWith",label:"does not begin with"},{name:"doesNotEndWith",value:"doesNotEndWith",label:"does not end with"},{name:"null",value:"null",label:"is null"},{name:"notNull",value:"notNull",label:"is not null"},{name:"in",value:"in",label:"in"},{name:"notIn",value:"notIn",label:"not in"},{name:"between",value:"between",label:"between"},{name:"notBetween",value:"notBetween",label:"not between"}],Uc=[{name:"and",value:"and",label:"AND"},{name:"or",value:"or",label:"OR"}],Bc="queryBuilder",Hc="ruleGroup",Vc="ruleGroup-header",Wc="ruleGroup-body",qc="ruleGroup-combinators",Qc="ruleGroup-addRule",Kc="ruleGroup-addGroup",Xc="rule-cloneRule",Jc="ruleGroup-cloneGroup",Yc="ruleGroup-remove",Zc="ruleGroup-notToggle",eu="rule",tu="rule-fields",nu="rule-operators",ru="rule-value",au="rule-remove",ou="betweenRules",iu="queryBuilder-valid",lu="queryBuilder-invalid",su="shiftActions",cu="dndDragging",uu="dndOver",du="dndCopy",pu="dndGroup",fu="queryBuilder-dragHandle",hu="queryBuilder-disabled",gu="rule-lock",mu="ruleGroup-lock",vu="rule-valueSource",yu="rule-value-list-item",bu={queryBuilder:"",ruleGroup:"",header:"",body:"",combinators:"",addRule:"",addGroup:"",cloneRule:"",cloneGroup:"",removeGroup:"",notToggle:"",rule:"",fields:"",operators:"",value:"",removeRule:"",shiftActions:"",dragHandle:"",lockRule:"",lockGroup:"",valueSource:"",actionElement:"",valueSelector:"",betweenRules:"",valid:"",invalid:"",dndDragging:"",dndOver:"",dndGroup:"",dndCopy:"",disabled:"",valueListItem:"",branches:""},Su="rule",ku="rule-group",wu="inline-combinator",_u="add-group",Cu="remove-group",xu="clone-group",Eu="clone-rule",Au="add-rule",Ru="remove-rule",Iu="combinators",Nu="fields",Pu="operators",Tu="value-editor",Du="not-toggle",ju="shift-actions",$u="drag-handle",Ou="lock-rule",Lu="lock-group",Mu="value-source-selector",zu="action aborted: parent path disabled",Fu="action aborted: path is disabled",Gu="onAddRule callback returned false",Uu="onAddGroup callback returned false",Bu="onGroupRule callback returned false",Hu="onGroupGroup callback returned false",Vu="onMoveRule callback returned false",Wu="onMoveGroup callback returned false",qu="onRemove callback returned false",Qu="rule or group added",Ku="rule or group removed",Xu="rule or group updated",Ju="rule or group moved",Yu="rule or group grouped with another",Zu=[];function ed(e){let t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){const a=e.length;for(t=0;t<a;t++)e[t]&&(n=ed(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function td(){let e,t,n=0,r="";const a=arguments.length;for(;n<a;n++)(e=n<0||arguments.length<=n?void 0:arguments[n])&&(t=ed(e))&&(r&&(r+=" "),r+=t);return r}var nd=td,rd="QueryBuilder was rendered with a truthy independentCombinators prop. This prop is deprecated and unnecessary. Furthermore, the initial query/defaultQuery prop was of type RuleGroupType instead of type RuleGroupIC. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",ad="QueryBuilder was rendered with the deprecated and unnecessary independentCombinators prop. To use independent combinators, make sure the query/defaultQuery prop is of type RuleGroupIC when the component mounts. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",od="A custom RuleGroup component has rendered a standard RuleGroup component with deprecated props. The combinator, not, and rules props should not be used. Instead, the full group object should be passed as the ruleGroup prop.",id="A custom RuleGroup component has rendered a standard Rule component with deprecated props. The field, operator, value, and valueSource props should not be used. Instead, the full rule object should be passed as the rule prop.",ld="QueryBuilder was rendered with both query and defaultQuery props. QueryBuilder must be either controlled or uncontrolled (specify either the query prop, or the defaultQuery prop, but not both). Decide between using a controlled or uncontrolled query builder and remove one of these props. More info: https://reactjs.org/link/controlled-components",sd="QueryBuilder is changing from an uncontrolled component to be controlled. This is likely caused by the query changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",cd="QueryBuilder is changing from a controlled component to be uncontrolled. This is likely caused by the query changing from defined to undefined, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",ud="QueryBuilder was rendered with the enableDragAndDrop prop set to true, but either react-dnd was not detected or one of react-dnd-html5-backend or react-dnd-touch-backend was not detected. To enable drag-and-drop functionality, install react-dnd and one of the backend packages and wrap QueryBuilder in QueryBuilderDnD from @react-querybuilder/dnd.",dd=xe.createContext(null),pd=Gn({name:"queries",initialState:{},reducers:{setQueryState:(e,t)=>{let{payload:{qbId:n,query:r}}=t;e[n]=r}},selectors:{getQuerySelectorById:(e,t)=>e[t]}}),fd=Gn({name:"warnings",initialState:{[rd]:!1,[ad]:!1,[od]:!1,[id]:!1,[ld]:!1,[sd]:!1,[cd]:!1,[ud]:!1},reducers:{rqbWarn:(e,t)=>{let{payload:n}=t;e[n]||(console.error(n),e[n]=!0)}}}),hd=e=>{let{payload:t,onQueryChange:n}=e;return e=>{e(pd.actions.setQueryState(t)),"function"==typeof n&&n(t.query)}},gd=it(dd),md=at(dd);fd.actions;var vd={queries:pd.getInitialState(),warnings:fd.getInitialState()},yd={reducer:{queries:pd.reducer,warnings:fd.reducer},preloadedState:vd,middleware:e=>e({serializableCheck:{ignoredActions:[pd.actions.setQueryState.type],ignoredPaths:[/^queries\b.*\.rules\.\d+\.value$/]}})};function bd(e,t,n){gd()}var Sd=Symbol.for("react.memo_cache_sentinel");function kd(e){return xe.useMemo((()=>{const t=Array.from({length:e});for(let n=0;n<e;n++)t[n]=Sd;return t[Sd]=!0,t}),[])}var wd=e=>{const t=kd(2);let n;return t[0]!==e?(n=(t,n)=>{t?.preventDefault(),t?.stopPropagation(),e(t,n)},t[0]=e,t[1]=n):n=t[1],n},_d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map((e=>`${e??""}`.replaceAll(t[0],`\\${t[0]}`))).join(t)},Cd=function(e){let{retainEmptyStrings:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)?e.map((e=>{return"string"==typeof(t=e)?t.trim():t;var t})):"string"==typeof e?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return"string"==typeof e?e.split(`\\${t}`).map((e=>e.split(t))).reduce(((e,n,r)=>0===r?n:[...e.slice(0,-1),`${e.at(-1)}${t}${n[0]}`,...n.slice(1)]),[]):[]}(e,",").filter(t?()=>!0:e=>!/^\s*$/.test(e)).map((e=>e.trim())):"number"==typeof e?[e]:[]};new RegExp(kc.source.replace(/^\^/,String.raw`^\s*`).replace(/\$$/,String.raw`\s*$`));var xd=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,Ed=e=>xd(e)&&Array.isArray(e.rules),Ad=e=>Ed(e)&&"string"==typeof e.combinator,Rd=e=>Ed(e)&&void 0===e.combinator,Id=e=>xd(e)&&"name"in e&&"string"==typeof e.name,Nd=e=>xd(e)&&"value"in e&&"string"==typeof e.value;function Pd(e,t){return cn((e=>{const n={};let r=!!t;if(Id(e)&&!Nd(e)?(n.value=e.name,r=!0):!Id(e)&&Nd(e)&&(n.name=e.value,r=!0),r)return Object.assign({},t,e,n)}))(e)}function Td(e,t){if(!Array.isArray(e))return[];return cn((e=>{if(Od(e))for(const n of e)for(const[e,r]of n.options.entries())n.options[e]=Pd(r,t);else for(const[n,r]of e.entries())e[n]=Pd(r,t)}))(e)}function Dd(e,t){return Object.fromEntries(Object.entries(e).map((e=>{let[n,r]=e;return[n,Pd(r,t)]})))}var jd=e=>{const t=new Set,n=[];for(const r of e)t.has(r.value??r.name)||(t.add(r.value??r.name),n.push(r));return e.length===n.length?e:n},$d=e=>{let t=!1;if(Array.isArray(e))for(const n of e){if(!Id(n)&&!Nd(n))return!1;t=!0}return t},Od=function(e){let{allowEmpty:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;if(Array.isArray(e))for(const r of e){if(!(xd(r)&&"options"in r&&($d(r.options)||t&&Array.isArray(r.options)&&0===r.options.length)))return!1;n=!0}return n},Ld=(e,t)=>(Od(e,{allowEmpty:!0})?e.flatMap((e=>e.options)):e).find((e=>e.value===t||e.name===t)),Md=e=>{if(!Array.isArray(e)||0===e.length)return null;if(Od(e,{allowEmpty:!0})){for(const t of e)if(t.options.length>0)return t.options[0].value??t.options[0].name;return null}return e[0].value??e[0].name},zd=e=>{const t=new Set,n=new Set,r=[];for(const a of e)if(!t.has(a.label)){t.add(a.label);const e=[];for(const t of a.options)n.has(t.value??t.name)||(n.add(t.value??t.name),e.push(Pd(t)));r.push({...a,options:e})}return r},Fd=(e,t,n)=>{const r=Pd(e),a=Pd(n);return r.value!==a.value&&("string"==typeof r.comparator?r[r.comparator]===a[r.comparator]:r.comparator?.(a,t)??!1)},Gd=(e,t,n)=>{if(!e.comparator){const n=t=>(t.value??t.name)!==(e.value??e.name);return Od(t)?t.map((e=>({...e,options:e.options.filter((e=>n(e)))}))):t.filter((e=>n(e)))}return Od(t)?t.map((t=>({...t,options:t.options.filter((t=>Fd(e,n,t)))}))).filter((e=>e.options.length>0)):t.filter((t=>Fd(e,n,t)))},Ud=function(e){let{parseNumbers:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"bigint"==typeof e||"number"==typeof e)return e;if("native"===t)return parseFloat(e);const n=Nc(e,{allowTrailingInvalid:"enhanced"===t,romanNumerals:!1,round:!1});return isNaN(n)?e:n},Bd=(e,t)=>{let n=t,r=0;for(;r<e.length&&n&&Ed(n);){const t=n.rules[e[r]];n="string"==typeof t?null:t,r++}return n},Hd=(e,t)=>{if(t.id===e)return t;for(const n of t.rules)if("string"!=typeof n){if(n.id===e)return n;if(Ed(n)){const t=Hd(e,n);if(t)return t}}return null},Vd=(e,t)=>{if(t.id===e)return[];const n=t.rules.findIndex((t=>!("string"==typeof t)&&t.id===e));if(n>=0)return[n];for(const[n,r]of Object.entries(t.rules))if(Ed(r)){const t=Vd(e,r);if(Array.isArray(t))return[parseInt(n),...t]}return null},Wd=e=>e.slice(0,-1),qd=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n])),Qd=(e,t)=>{const n=[],r=Wd(e),a=Wd(t);let o=0;for(;o<r.length&&o<a.length&&r[o]===a[o];)n.push(a[o]),o++;return n},Kd=(e,t)=>{let n=!!t.disabled,r=t,a=0;for(;a<e.length&&!n&&Ed(r);){const t=r.rules[e[a]];xd(t)&&(Ed(t)||"field"in t&&t.field)&&(n=!!t.disabled,r=t),a++}return n},Xd=e=>qd([],e.path)?"Query builder":`Rule group at path ${e.path.join("-")}`,Jd=globalThis.crypto,Yd=()=>"00-0-4-2-000".replaceAll(/[^-]/g,(e=>(65536*(Math.random()+Math.trunc(e))>>parseInt(e)).toString(16).padStart(4,"0")));if(Jd)if("function"==typeof Jd.randomUUID)Yd=()=>Jd.randomUUID();else if("function"==typeof Jd.getRandomValues){const e="89ab",t=new Uint32Array(32);Yd=()=>{Jd.getRandomValues(t);let n=(t[0]%16).toString(16);for(let r=1;r<32;r++)n=12===r?`${n}4`:16===r?`${n}${e[t[17]%4]}`:`${n}${(t[r]%16).toString(16)}`,7!==r&&11!==r&&15!==r&&19!==r||(n=`${n}-`);return n}}var Zd=(e,t,n)=>((e,t,n)=>e?((e,t)=>!1!==e&&(!!e||!1!==t))(t,n):((e,t)=>!!e||!1!==e&&!!t)(t,n))(e,t,n),ep=e=>{const t="boolean"==typeof e?e:"object"==typeof e&&null!==e?e.valid:null;return"boolean"==typeof t?t?iu:lu:""},tp=["value"],np={name:"name",value:"name",valueSources:null,label:"label"},rp=(e,t)=>td(t.map((t=>td(t?.[e])))),ap=Object.keys,op=Object.entries,ip=(e,t,n)=>{const r=op(t).map((t=>{let[r,[a,o]]=t;return[r,a??o??(n?Ep:{})[e]?.[r]]})).filter((e=>!!e[1]));return r.length>0?{[e]:Object.fromEntries(r)}:void 0},lp=function(e){let{idGenerator:t=Yd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cn(e,(e=>{e.id||(e.id=t())}))},sp=function(e){let{idGenerator:t=Yd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cn(e,(e=>{e.id||(e.id=t()),e.rules=e.rules.map((e=>"string"==typeof e?e:Ed(e)?sp(e,{idGenerator:t}):lp(e,{idGenerator:t})))}))},cp=function(e){let{idGenerator:t=Yd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ed(e)?sp(e,{idGenerator:t}):lp(e,{idGenerator:t})},up=function(e){let{idGenerator:t=Yd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return structuredClone({...e,id:t()})},dp=function(e){let{idGenerator:t=Yd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!xd(e))return e;if(!Ed(e))return structuredClone({...e,id:t()});if(Ad(e)){const n=e.rules.map((e=>Ed(e)?dp(e,{idGenerator:t}):up(e,{idGenerator:t})));return{...e,id:t(),rules:n}}const n=e.rules.map((e=>"string"==typeof e?e:Ed(e)?dp(e,{idGenerator:t}):up(e,{idGenerator:t})));return{...e,id:t(),rules:n}},pp=function(e,t,n){let{combinators:r=Uc,combinatorPreceding:a,idGenerator:o=Yd}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return cn(e,(e=>{const i=Array.isArray(n)?Bd(n,e):Hd(n,e);if(i&&Ed(i)){if(Rd(i)&&i.rules.length>0){const e=i.rules.at(-2);i.rules.push(a??("string"==typeof e?e:Md(r)))}i.rules.push(cp(t,{idGenerator:o}))}}))},fp=(e,t,n)=>{if(Array.isArray(n))return n;const r=Rd(e);if("up"===n){if(qd(t,[0]))return t;if(0===t.at(-1)){const e=Wd(t);return[...Wd(e),Math.max(0,e.at(-1)-(r?1:0))]}{const n=[...Wd(t),Math.max(0,t.at(-1)-(r?2:1))],a=Bd(n,e);if(Ed(a))return[...n,a.rules.length];return[...Wd(t),Math.max(0,t.at(-1)-(r?3:1))]}}if("down"===n){if(qd([e.rules.length-1],t))return t;if(t.at(-1)===Bd(Wd(t),e).rules.length-1){const e=Wd(t);return[...Wd(e),e.at(-1)+1]}{const n=[...Wd(t),t.at(-1)+(r?2:1)],a=Bd(n,e);if(Ed(a))return[...n,0];return[...Wd(t),t.at(-1)+(r?3:2)]}}return t},hp=e=>(e=>Array.isArray(e)&&e.length>0&&xd(e[0])&&"options"in e[0]&&Array.isArray(e[0].options))(e)?e.map((e=>Be.jsx("optgroup",{label:e.label,children:e.options.map((e=>Be.jsx("option",{value:e.name,disabled:e.disabled,children:e.label},e.name)))},e.label))):Array.isArray(e)?e.map((e=>Be.jsx("option",{value:e.name,disabled:e.disabled,children:e.label},e.name))):null,gp=xe.memo((function(e){const t=kd(7),n=vp(e),r=wd(n.cloneRule),a=wd(n.toggleLockRule),o=wd(n.removeRule),i=wd(n.shiftRuleUp),l=wd(n.shiftRuleDown);let s;return t[0]!==r||t[1]!==n||t[2]!==o||t[3]!==l||t[4]!==i||t[5]!==a?(s=Be.jsx("div",{ref:n.dndRef,"data-testid":Su,"data-dragmonitorid":n.dragMonitorId,"data-dropmonitorid":n.dropMonitorId,className:n.outerClassName,"data-rule-id":n.id,"data-level":n.path.length,"data-path":JSON.stringify(n.path),children:Be.jsx(mp,{...n,cloneRule:r,toggleLockRule:a,removeRule:o,shiftRuleUp:i,shiftRuleDown:l})}),t[0]=r,t[1]=n,t[2]=o,t[3]=l,t[4]=i,t[5]=a,t[6]=s):s=t[6],s})),mp=xe.memo((function(e){const{schema:{controls:{shiftActions:t,dragHandle:n,fieldSelector:r,operatorSelector:a,valueSourceSelector:o,valueEditor:i,cloneRuleAction:l,lockRuleAction:s,removeRuleAction:c}}}=e;return Be.jsxs(Be.Fragment,{children:[e.schema.showShiftActions&&Be.jsx(t,{testID:ju,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftRuleUp,shiftDown:e.shiftRuleDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule},ju),e.schema.enableDragAndDrop&&Be.jsx(n,{testID:$u,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule},$u),Be.jsx(r,{testID:Nu,options:e.schema.fields,title:e.translations.fields.title,value:e.rule.field,operator:e.rule.operator,className:e.classNames.fields,handleOnChange:e.onChangeField,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},Nu),(e.schema.autoSelectField||e.rule.field!==e.translations.fields.placeholderName)&&Be.jsxs(Be.Fragment,{children:[Be.jsx(a,{testID:Pu,field:e.rule.field,fieldData:e.fieldData,title:e.translations.operators.title,options:e.operators,value:e.rule.operator,className:e.classNames.operators,handleOnChange:e.onChangeOperator,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},Pu),(e.schema.autoSelectOperator||e.rule.operator!==e.translations.operators.placeholderName)&&!e.hideValueControls&&Be.jsxs(Be.Fragment,{children:[!["null","notNull"].includes(e.rule.operator)&&e.valueSources.length>1&&Be.jsx(o,{testID:Mu,field:e.rule.field,fieldData:e.fieldData,title:e.translations.valueSourceSelector.title,options:e.valueSourceOptions,value:e.rule.valueSource??"value",className:e.classNames.valueSource,handleOnChange:e.onChangeValueSource,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},Mu),Be.jsx(i,{testID:Tu,field:e.rule.field,fieldData:e.fieldData,title:e.translations.value.title,operator:e.rule.operator,value:e.rule.value,valueSource:e.rule.valueSource??"value",type:e.valueEditorType,inputType:e.inputType,values:e.values,listsAsArrays:e.schema.listsAsArrays,parseNumbers:e.schema.parseNumbers,separator:e.valueEditorSeparator,className:e.classNames.value,handleOnChange:e.onChangeValue,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},Tu)]})]}),e.schema.showCloneButtons&&Be.jsx(l,{testID:Eu,label:e.translations.cloneRule.label,title:e.translations.cloneRule.title,className:e.classNames.cloneRule,handleOnClick:e.cloneRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},Eu),e.schema.showLockButtons&&Be.jsx(s,{testID:Ou,label:e.translations.lockRule.label,title:e.translations.lockRule.title,className:e.classNames.lockRule,handleOnClick:e.toggleLockRule,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockRuleDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},Ou),Be.jsx(c,{testID:Ru,label:e.translations.removeRule.label,title:e.translations.removeRule.title,className:e.classNames.removeRule,handleOnClick:e.removeRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},Ru)]})})),vp=e=>{const{id:t,path:n,rule:r,schema:{classNames:a,fields:o,fieldMap:i,getInputType:l,getOperators:s,getValueEditorType:c,getValueEditorSeparator:u,getValueSources:d,getValues:p,validationMap:f,enableDragAndDrop:h,getRuleClassname:g,suppressStandardClassnames:m},actions:{moveRule:v,onPropChange:y,onRuleRemove:b},disabled:S,parentDisabled:k,shiftUpDisabled:w,shiftDownDisabled:_,field:C,operator:x,value:E,valueSource:A,dropEffect:R="move",groupItems:I=!1,dragMonitorId:N="",dropMonitorId:P="",dndRef:T=null,dragRef:D=null,isDragging:j=!1,isOver:$=!1}=e;bd();const O=!!k||!!S,L=xe.useMemo((()=>r??{id:t,field:C??"",operator:x??"",value:E,valueSource:A}),[C,t,x,r,E,A]),M=xe.useMemo((()=>({shiftActions:td(m||su,a.shiftActions),dragHandle:td(m||fu,a.dragHandle),fields:td(m||tu,a.valueSelector,a.fields),operators:td(m||nu,a.valueSelector,a.operators),valueSource:td(m||vu,a.valueSelector,a.valueSource),value:td(m||ru,a.value),cloneRule:td(m||Xc,a.actionElement,a.cloneRule),lockRule:td(m||gu,a.actionElement,a.lockRule),removeRule:td(m||au,a.actionElement,a.removeRule),valueListItem:td(m||yu,a.valueListItem)})),[a.shiftActions,a.dragHandle,a.valueSelector,a.fields,a.operators,a.valueSource,a.value,a.actionElement,a.cloneRule,a.lockRule,a.removeRule,a.valueListItem,m]),z=xe.useCallback((e=>(t,r)=>{O||y(e,t,n,r)}),[O,y,n]),F=xe.useMemo((()=>z("field")),[z]),G=xe.useMemo((()=>z("operator")),[z]),U=xe.useMemo((()=>z("valueSource")),[z]),B=xe.useMemo((()=>z("value")),[z]),H=xe.useCallback(((e,t)=>{if(!O){const e=[...Wd(n),n.at(-1)+1];v(n,e,!0,t)}}),[O,v,n]),V=xe.useCallback(((e,t)=>y("disabled",!O,n,t)),[O,y,n]),W=xe.useCallback(((e,t)=>{O||b(n)}),[O,b,n]),q=xe.useCallback(((e,t)=>{O||w||v(n,"up",e?.altKey,t)}),[O,v,n,w]),Q=xe.useCallback(((e,t)=>{O||_||v(n,"down",e?.altKey,t)}),[O,v,n,_]),K=xe.useMemo((()=>i?.[L.field]??{name:L.field,value:L.field,label:L.field}),[i,L.field]),X=xe.useMemo((()=>K.inputType??l(L.field,L.operator,{fieldData:K})),[K,l,L.field,L.operator]),J=xe.useMemo((()=>s(L.field,{fieldData:K})),[K,s,L.field]),Y=xe.useMemo((()=>Ld(J,L.operator)),[J,L.operator]),Z=Y?.arity,ee="string"==typeof Z&&"unary"===Z||"number"==typeof Z&&Z<2,te=xe.useMemo((()=>"function"==typeof K.valueSources?K.valueSources(L.operator):K.valueSources??d(L.field,L.operator,{fieldData:K})),[K,d,L.field,L.operator]),ne=xe.useMemo((()=>"field"===L.valueSource?"select":c(L.field,L.operator,{fieldData:K})),[K,c,L.field,L.operator,L.valueSource]),re=xe.useMemo((()=>u(L.field,L.operator,{fieldData:K})),[K,u,L.field,L.operator]),ae=xe.useMemo((()=>{const e="field"===L.valueSource?Gd(K,o,L.operator):p(L.field,L.operator,{fieldData:K});return $d(e)||Od(e)?Td(e):e}),[K,o,p,L.field,L.operator,L.valueSource]),oe=xe.useMemo((()=>te.map((e=>({name:e,value:e,label:e})))),[te]),ie=xe.useMemo((()=>f[t??""]??("function"==typeof K.validator?K.validator(L):null)),[K,t,L,f]),le=xe.useMemo((()=>ep(ie)),[ie]),se=xe.useMemo((()=>K?.className??""),[K?.className]),ce=xe.useMemo((()=>Y?.className??""),[Y?.className]),ue=xe.useMemo((()=>td(g(L,{fieldData:K}),se,ce,m||eu,a.rule,O&&a.disabled,j&&a.dndDragging,$&&a.dndOver,$&&"copy"===R&&a.dndCopy,$&&I&&a.dndGroup,m||{[hu]:O,[cu]:j,[uu]:$,[du]:$&&"copy"===R,[pu]:$&&I},le)),[a.disabled,a.dndCopy,a.dndDragging,a.dndGroup,a.dndOver,a.rule,O,R,se,K,g,I,j,$,ce,L,m,le]);return{...e,classNames:M,cloneRule:H,disabled:O,dndRef:T,dragMonitorId:N,dragRef:D,dropMonitorId:P,fieldData:K,generateOnChangeHandler:z,onChangeField:F,onChangeOperator:G,onChangeValueSource:U,onChangeValue:B,hideValueControls:ee,inputType:X,operators:J,outerClassName:ue,removeRule:W,rule:L,shiftRuleUp:q,shiftRuleDown:Q,toggleLockRule:V,validationResult:ie,valueEditorSeparator:re,valueEditorType:ne,values:ae,valueSourceOptions:oe,valueSources:te}},yp=xe.memo((function(e){const t=kd(11),n=kp(e),{schema:r}=n,{controls:a}=r,{ruleGroupBodyElements:o,ruleGroupHeaderElements:i}=a,l=wd(n.addRule),s=wd(n.addGroup),c=wd(n.cloneGroup),u=wd(n.toggleLockGroup),d=wd(n.removeGroup),p=wd(n.shiftGroupUp),f=wd(n.shiftGroupDown);let h;return t[0]!==o||t[1]!==i||t[2]!==s||t[3]!==l||t[4]!==c||t[5]!==d||t[6]!==n||t[7]!==f||t[8]!==p||t[9]!==u?(h=Be.jsxs("div",{ref:n.previewRef,title:n.accessibleDescription,className:n.outerClassName,"data-testid":ku,"data-dragmonitorid":n.dragMonitorId,"data-dropmonitorid":n.dropMonitorId,"data-rule-group-id":n.id,"data-level":n.path.length,"data-path":JSON.stringify(n.path),children:[Be.jsx("div",{ref:n.dropRef,className:n.classNames.header,children:Be.jsx(i,{...n,addRule:l,addGroup:s,cloneGroup:c,toggleLockGroup:u,removeGroup:d,shiftGroupUp:p,shiftGroupDown:f})}),Be.jsx("div",{className:n.classNames.body,children:Be.jsx(o,{...n,addRule:l,addGroup:s,cloneGroup:c,toggleLockGroup:u,removeGroup:d,shiftGroupUp:p,shiftGroupDown:f})})]}),t[0]=o,t[1]=i,t[2]=s,t[3]=l,t[4]=c,t[5]=d,t[6]=n,t[7]=f,t[8]=p,t[9]=u,t[10]=h):h=t[10],h})),bp=xe.memo((function(e){const{schema:{controls:{shiftActions:t,dragHandle:n,combinatorSelector:r,notToggle:a,addRuleAction:o,addGroupAction:i,cloneGroupAction:l,lockGroupAction:s,removeGroupAction:c}}}=e;return Be.jsxs(Be.Fragment,{children:[e.schema.showShiftActions&&e.path.length>0&&Be.jsx(t,{testID:ju,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftGroupUp,shiftDown:e.shiftGroupDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup},ju),e.path.length>0&&e.schema.enableDragAndDrop&&Be.jsx(n,{testID:$u,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup},$u),!e.schema.showCombinatorsBetweenRules&&!e.schema.independentCombinators&&Be.jsx(r,{testID:Iu,options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema},Iu),e.schema.showNotToggle&&Be.jsx(a,{testID:Du,className:e.classNames.notToggle,title:e.translations.notToggle.title,label:e.translations.notToggle.label,checked:e.ruleGroup.not,handleOnChange:e.onNotToggleChange,level:e.path.length,disabled:e.disabled,path:e.path,context:e.context,validation:e.validationResult,schema:e.schema,ruleGroup:e.ruleGroup},Du),Be.jsx(o,{testID:Au,label:e.translations.addRule.label,title:e.translations.addRule.title,className:e.classNames.addRule,handleOnClick:e.addRule,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},Au),Be.jsx(i,{testID:_u,label:e.translations.addGroup.label,title:e.translations.addGroup.title,className:e.classNames.addGroup,handleOnClick:e.addGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},_u),e.schema.showCloneButtons&&e.path.length>0&&Be.jsx(l,{testID:xu,label:e.translations.cloneRuleGroup.label,title:e.translations.cloneRuleGroup.title,className:e.classNames.cloneGroup,handleOnClick:e.cloneGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},xu),e.schema.showLockButtons&&Be.jsx(s,{testID:Lu,label:e.translations.lockGroup.label,title:e.translations.lockGroup.title,className:e.classNames.lockGroup,handleOnClick:e.toggleLockGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockGroupDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},Lu),e.path.length>0&&Be.jsx(c,{testID:Cu,label:e.translations.removeGroup.label,title:e.translations.removeGroup.title,className:e.classNames.removeGroup,handleOnClick:e.removeGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},Cu)]})})),Sp=xe.memo((function(e){const{schema:{controls:{combinatorSelector:t,inlineCombinator:n,ruleGroup:r,rule:a}}}=e;return Be.jsx(Be.Fragment,{children:e.ruleGroup.rules.map(((o,i,l)=>{let{length:s}=l;const c=e.pathsMemo[i],u=c.path,d=c.disabled||"string"!=typeof o&&o.disabled,p=qd([0],u),f=0===e.path.length&&i===s-1,h="string"==typeof o?[...u,o].join("-"):o.id;return Be.jsxs(xe.Fragment,{children:[i>0&&!e.schema.independentCombinators&&e.schema.showCombinatorsBetweenRules&&Be.jsx(n,{options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:t,path:u,disabled:e.disabled,schema:e.schema},wu),"string"==typeof o?Be.jsx(n,{options:e.schema.combinators,value:o,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:t=>e.onIndependentCombinatorChange(t,i),rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:t,path:u,disabled:d,schema:e.schema},`${wu}-independent`):Ed(o)?Be.jsx(r,{id:o.id,schema:e.schema,actions:e.actions,path:u,translations:e.translations,ruleGroup:o,rules:o.rules,combinator:Ad(o)?o.combinator:void 0,not:!!o.not,disabled:d,parentDisabled:e.parentDisabled||e.disabled,shiftUpDisabled:p,shiftDownDisabled:f,context:e.context},ku):Be.jsx(a,{id:o.id,rule:o,field:o.field,operator:o.operator,value:o.value,valueSource:o.valueSource,schema:e.schema,actions:e.actions,path:u,disabled:d,parentDisabled:e.parentDisabled||e.disabled,translations:e.translations,shiftUpDisabled:p,shiftDownDisabled:f,context:e.context},Su)]},h)}))})})),kp=e=>{const{id:t,path:n,ruleGroup:r,schema:{qbId:a,accessibleDescriptionGenerator:o,classNames:i,combinators:l,createRule:s,createRuleGroup:c,disabledPaths:u,independentCombinators:d,validationMap:p,enableDragAndDrop:f,getRuleGroupClassname:h,suppressStandardClassnames:g},actions:{onGroupAdd:m,onGroupRemove:v,onPropChange:y,onRuleAdd:b,moveRule:S},disabled:k,parentDisabled:w,shiftUpDisabled:_,shiftDownDisabled:C,combinator:x,rules:E,not:A,dropEffect:R="move",groupItems:I=!1,dragMonitorId:N="",dropMonitorId:P="",previewRef:T=null,dragRef:D=null,dropRef:j=null,isDragging:$=!1,isOver:O=!1}=e;bd();const L=!!w||!!k,M=xe.useMemo((()=>r&&Ad(r)?r.combinator:r?Md(l):x??Md(l)),[x,l,r]),z=xe.useMemo((()=>{if(r){if(r.combinator===M||d)return r;const e=structuredClone(r);return e.combinator=M,e}return{rules:E,not:A}}),[M,d,A,r,E]),F=xe.useMemo((()=>({header:td(g||Vc,i.header,O&&"copy"===R&&i.dndCopy,g||{[uu]:O,[du]:O&&"copy"===R}),shiftActions:td(g||su,i.shiftActions),dragHandle:td(g||fu,i.dragHandle),combinators:td(g||qc,i.valueSelector,i.combinators),notToggle:td(g||Zc,i.notToggle),addRule:td(g||Qc,i.actionElement,i.addRule),addGroup:td(g||Kc,i.actionElement,i.addGroup),cloneGroup:td(g||Jc,i.actionElement,i.cloneGroup),lockGroup:td(g||mu,i.actionElement,i.lockGroup),removeGroup:td(g||Yc,i.actionElement,i.removeGroup),body:td(g||Wc,i.body)})),[i.actionElement,i.addGroup,i.addRule,i.body,i.cloneGroup,i.combinators,i.dndCopy,i.dragHandle,i.header,i.lockGroup,i.notToggle,i.removeGroup,i.shiftActions,i.valueSelector,R,O,g]),G=xe.useCallback((e=>{L||y("combinator",e,n)}),[L,y,n]),U=xe.useCallback(((e,t,r)=>{L||y("combinator",e,[...n,t])}),[L,y,n]),B=xe.useCallback(((e,t)=>{L||y("not",e,n)}),[L,y,n]),H=xe.useCallback(((e,t)=>{if(!L){const e=s();b(e,n,t)}}),[s,L,b,n]),V=xe.useCallback(((e,t)=>{if(!L){const e=c(d);m(e,n,t)}}),[c,L,d,m,n]),W=xe.useCallback((()=>{if(!L){const e=[...Wd(n),n.at(-1)+1];S(n,e,!0)}}),[L,S,n]),q=xe.useCallback(((e,t)=>{L||_||S(n,"up",e?.altKey)}),[L,S,n,_]),Q=xe.useCallback(((e,t)=>{L||C||S(n,"down",e?.altKey)}),[L,S,n,C]),K=xe.useCallback((()=>{y("disabled",!L,n)}),[L,y,n]),X=xe.useCallback((()=>{L||v(n)}),[L,v,n]),J=xe.useMemo((()=>p[t??""]),[t,p]),Y=xe.useMemo((()=>ep(J)),[J]),Z=xe.useMemo((()=>d?null:Ld(l,M)?.className??""),[M,l,d]),ee=xe.useMemo((()=>h(z)),[h,z]),te=xe.useMemo((()=>td(ee,Z,g||Hc,i.ruleGroup,L&&i.disabled,$&&i.dndDragging,O&&I&&i.dndGroup,g||{[hu]:L,[cu]:$,[pu]:O&&I},Y)),[i.disabled,i.dndDragging,i.dndGroup,i.ruleGroup,Z,L,I,$,O,ee,g,Y]),ne=xe.useMemo((()=>{const e=[];for(let t=0;t<z.rules.length;t++){const r=[...n,t];e[t]={path:r,disabled:L||u.some((e=>qd(r,e)))}}return e}),[L,n,z.rules.length,u]),re=xe.useMemo((()=>o({path:n,qbId:a})),[o,n,a]);return{...e,addGroup:V,addRule:H,accessibleDescription:re,classNames:F,cloneGroup:W,combinator:M,disabled:L,dragMonitorId:N,dragRef:D,dropMonitorId:P,dropRef:j,isDragging:$,isOver:O,onCombinatorChange:G,onGroupAdd:m,onIndependentCombinatorChange:U,onNotToggleChange:B,outerClassName:te,parentDisabled:w,pathsMemo:ne,previewRef:T,removeGroup:X,ruleGroup:z,shiftGroupUp:q,shiftGroupDown:Q,toggleLockGroup:K,validationClassName:Y,validationResult:J}},wp=e=>{const t=kd(29),{handleOnChange:n,inputType:r,operator:a,value:o,listsAsArrays:i,parseNumbers:l,values:s,type:c,skipHook:u,schema:d}=e,{classNames:p,suppressStandardClassnames:f}=d;let h,g,m,v;t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==u||t[4]!==c||t[5]!==o?(h=()=>{u||"multiselect"===c||["between","notBetween","in","notIn"].includes(a)||!(Array.isArray(o)||"number"===r&&"string"==typeof o&&o.includes(","))||n(Cd(o,{retainEmptyStrings:!0})[0]??"")},g=[n,r,a,u,c,o],t[0]=n,t[1]=r,t[2]=a,t[3]=u,t[4]=c,t[5]=o,t[6]=h,t[7]=g):(h=t[6],g=t[7]),xe.useEffect(h,g),t[8]!==o?(v=Cd(o,{retainEmptyStrings:!0}),t[8]=o,t[9]=v):v=t[9],m=v;const y=m;let b,S;t[10]!==r||t[11]!==l?(S=(e=>{let{parseNumbers:t,inputType:n}=e;if("string"==typeof t){const[e,r]=t.split("-");return"limited"===r?"number"===n&&e:e}return!!t&&"strict"})({parseNumbers:l,inputType:r}),t[10]=r,t[11]=l,t[12]=S):S=t[12],b=S;const k=b;let w;t[13]!==n||t[14]!==i||t[15]!==a||t[16]!==k||t[17]!==y||t[18]!==s?(w=(e,t)=>{const r=cn(y,(n=>{n[t]=Ud(e,{parseNumbers:k}),0!==t||"between"!==a&&"notBetween"!==a||!(n.length<2||void 0===n[1])||(n[1]=Md(s))}));n(i?r:_d(r,","))},t[13]=n,t[14]=i,t[15]=a,t[16]=k,t[17]=y,t[18]=s,t[19]=w):w=t[19];const _=w,C=f||yu,x=p?.valueListItem;let E;t[20]!==C||t[21]!==x?(E=nd(C,x),t[20]=C,t[21]=x,t[22]=E):E=t[22];const A=E,R="in"===a||"notIn"===a?"text":r||"text";let I;return t[23]!==R||t[24]!==_||t[25]!==k||t[26]!==y||t[27]!==A?(I={valueAsArray:y,multiValueHandler:_,parseNumberMethod:k,valueListItemClassName:A,inputTypeCoerced:R},t[23]=R,t[24]=_,t[25]=k,t[26]=y,t[27]=A,t[28]=I):I=t[28],I};function _p(e){return e.value}var Cp=e=>{const t=kd(12),{onChange:n,val:r}=xp(e);let a;t[0]!==n||t[1]!==e.multiple?(a={multiple:e.multiple,onChange:n},t[0]=n,t[1]=e.multiple,t[2]=a):a=t[2];const o=(e=>{const t=kd(3),{multiple:n,onChange:r}=e;let a,o;return t[0]!==n||t[1]!==r?(o=n?e=>r(Array.from(e.target.selectedOptions).map(_p)):e=>r(e.target.value),t[0]=n,t[1]=r,t[2]=o):o=t[2],a=o,a})(a),i=!!e.multiple;let l;return t[3]!==e.className||t[4]!==e.disabled||t[5]!==e.options||t[6]!==e.testID||t[7]!==e.title||t[8]!==o||t[9]!==i||t[10]!==r?(l=Be.jsx("select",{"data-testid":e.testID,className:e.className,value:r,title:e.title,disabled:e.disabled,multiple:i,onChange:o,children:hp(e.options)}),t[3]=e.className,t[4]=e.disabled,t[5]=e.options,t[6]=e.testID,t[7]=e.title,t[8]=o,t[9]=i,t[10]=r,t[11]=l):l=t[11],l},xp=e=>{const t=kd(10),{handleOnChange:n,listsAsArrays:r,multiple:a,value:o}=e,i=void 0!==r&&r,l=void 0!==a&&a;let s;t[0]!==n||t[1]!==i||t[2]!==l?(s=e=>{if(l){const t=Cd(e);n(i?t:_d(t,","))}else n(e)},t[0]=n,t[1]=i,t[2]=l,t[3]=s):s=t[3];const c=s;let u,d;t[4]!==l||t[5]!==o?(d=l?Cd(o):o,t[4]=l,t[5]=o,t[6]=d):d=t[6],u=d;const p=u;let f;return t[7]!==c||t[8]!==p?(f={onChange:c,val:p},t[7]=c,t[8]=p,t[9]=f):f=t[9],f},Ep={fields:{title:"Fields",placeholderName:"~",placeholderLabel:$c,placeholderGroupLabel:Oc},operators:{title:"Operators",placeholderName:"~",placeholderLabel:Lc,placeholderGroupLabel:Mc},values:{title:"Values",placeholderName:"~",placeholderLabel:zc,placeholderGroupLabel:Fc},value:{title:"Value"},removeRule:{label:"‚®Ø",title:"Remove rule"},removeGroup:{label:"‚®Ø",title:"Remove group"},addRule:{label:"+ Rule",title:"Add rule"},addGroup:{label:"+ Group",title:"Add group"},combinators:{title:"Combinators"},notToggle:{label:"Not",title:"Invert this group"},cloneRule:{label:"‚ßâ",title:"Clone rule"},cloneRuleGroup:{label:"‚ßâ",title:"Clone group"},shiftActionUp:{label:"ÀÑ",title:"Shift up"},shiftActionDown:{label:"ÀÖ",title:"Shift down"},dragHandle:{label:"‚Åû‚Åû",title:"Drag handle"},lockRule:{label:"üîì",title:"Lock rule"},lockGroup:{label:"üîì",title:"Lock group"},lockRuleDisabled:{label:"üîí",title:"Unlock rule"},lockGroupDisabled:{label:"üîí",title:"Unlock group"},valueSourceSelector:{title:"Value source"}},Ap={actionElement:Tc,addGroupAction:Tc,addRuleAction:Tc,cloneGroupAction:Tc,cloneRuleAction:Tc,combinatorSelector:Cp,dragHandle:Dc,fieldSelector:Cp,inlineCombinator:e=>{const{component:t,...n}=e,r=td(n.schema.suppressStandardClassnames||ou,n.schema.classNames.betweenRules);return Be.jsx("div",{className:r,"data-testid":wu,children:Be.jsx(t,{...n,testID:Iu})})},lockGroupAction:Tc,lockRuleAction:Tc,notToggle:e=>Be.jsxs("label",{"data-testid":e.testID,className:e.className,title:e.title,children:[Be.jsx("input",{type:"checkbox",onChange:t=>e.handleOnChange(t.target.checked),checked:!!e.checked,disabled:e.disabled}),e.label]}),operatorSelector:Cp,removeGroupAction:Tc,removeRuleAction:Tc,rule:gp,ruleGroup:yp,ruleGroupBodyElements:Sp,ruleGroupHeaderElements:bp,shiftActions:e=>Be.jsxs("div",{"data-testid":e.testID,className:e.className,children:[Be.jsx("button",{disabled:e.disabled||e.shiftUpDisabled,onClick:e.shiftUp,title:e.titles?.shiftUp,children:e.labels?.shiftUp}),Be.jsx("button",{disabled:e.disabled||e.shiftDownDisabled,onClick:e.shiftDown,title:e.titles?.shiftDown,children:e.labels?.shiftDown})]}),valueEditor:e=>{const{operator:t,value:n,handleOnChange:r,title:a,className:o,type:i="text",values:l=[],listsAsArrays:s,fieldData:c,disabled:u,separator:d=null,testID:p,selectorComponent:f=e.schema.controls.valueSelector,inputType:h,parseNumbers:g,skipHook:m,valueSource:v,...y}=e,{valueAsArray:b,multiValueHandler:S,parseNumberMethod:k,valueListItemClassName:w,inputTypeCoerced:_}=wp(e);if("null"===t||"notNull"===t)return null;const C=c?.placeholder??"";if(!("between"!==t&&"notBetween"!==t||"select"!==i&&"text"!==i)){const t=["from","to"].map(((t,n)=>"text"===i?Be.jsx("input",{type:_,placeholder:C,value:b[n]??"",className:w,disabled:u,onChange:e=>S(e.target.value,n)},t):Be.jsx(f,{...y,schema:e.schema,className:w,handleOnChange:e=>S(e,n),disabled:u,value:b[n]??Md(l),options:l,listsAsArrays:s},t)));return Be.jsxs("span",{"data-testid":p,className:o,title:a,children:[t[0],d,t[1]]})}switch(i){case"select":case"multiselect":return Be.jsx(f,{...y,schema:e.schema,testID:p,className:o,title:a,handleOnChange:r,disabled:u,value:n,options:l,multiple:"multiselect"===i,listsAsArrays:s});case"textarea":return Be.jsx("textarea",{"data-testid":p,placeholder:C,value:n,title:a,className:o,disabled:u,onChange:e=>r(e.target.value)});case"switch":case"checkbox":return Be.jsx("input",{"data-testid":p,type:"checkbox",className:o,title:a,onChange:e=>r(e.target.checked),checked:!!n,disabled:u});case"radio":return Be.jsx("span",{"data-testid":p,className:o,title:a,children:l.map((e=>Be.jsxs("label",{children:[Be.jsx("input",{type:"radio",value:e.name,disabled:u,checked:n===e.name,onChange:e=>r(e.target.value)}),e.label]},e.name)))})}return Be.jsx("input",{"data-testid":p,type:_,placeholder:C,value:n,title:a,className:o,disabled:u,onChange:e=>r(Ud(e.target.value,{parseNumbers:k}))})},valueSelector:Cp,valueSourceSelector:Cp},Rp=()=>null,Ip=xe.forwardRef(Rp),Np={},Pp=e=>{const t=kd(193);let n,r;t[0]!==e?(({finalize:n,...r}=e),t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);const a=xe.useContext(Pc),o=Zd(!1,r.debugMode,a.debugMode),i=n?o:r.debugMode??a.debugMode,l=Zd(!0,r.enableMountQueryChange,a.enableMountQueryChange),s=n?l:r.enableMountQueryChange??a.enableMountQueryChange,c=Zd(!1,r.enableDragAndDrop,a.enableDragAndDrop)&&!1!==a.enableDragAndDrop,u=n?c:r.enableDragAndDrop??a.enableDragAndDrop;let d,p;t[3]!==n||t[4]!==r.controlClassnames||t[5]!==a.controlClassnames?(p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{queryBuilder:rp("queryBuilder",t),ruleGroup:rp("ruleGroup",t),header:rp("header",t),body:rp("body",t),combinators:rp("combinators",t),addRule:rp("addRule",t),addGroup:rp("addGroup",t),cloneRule:rp("cloneRule",t),cloneGroup:rp("cloneGroup",t),removeGroup:rp("removeGroup",t),rule:rp("rule",t),fields:rp("fields",t),operators:rp("operators",t),value:rp("value",t),removeRule:rp("removeRule",t),notToggle:rp("notToggle",t),shiftActions:rp("shiftActions",t),dragHandle:rp("dragHandle",t),lockRule:rp("lockRule",t),lockGroup:rp("lockGroup",t),valueSource:rp("valueSource",t),actionElement:rp("actionElement",t),valueSelector:rp("valueSelector",t),betweenRules:rp("betweenRules",t),valid:rp("valid",t),invalid:rp("invalid",t),dndDragging:rp("dndDragging",t),dndOver:rp("dndOver",t),dndCopy:rp("dndCopy",t),dndGroup:rp("dndGroup",t),disabled:rp("disabled",t),valueListItem:rp("valueListItem",t),branches:rp("branches",t)}}(n?Object.assign({},bu):Np,a.controlClassnames,r.controlClassnames),t[3]=n,t[4]=r.controlClassnames,t[5]=a.controlClassnames,t[6]=p):p=t[6],d=p;const f=d;let h,g;t[7]!==f.actionElement||t[8]!==f.addGroup||t[9]!==f.addRule||t[10]!==f.betweenRules||t[11]!==f.body||t[12]!==f.branches||t[13]!==f.cloneGroup||t[14]!==f.cloneRule||t[15]!==f.combinators||t[16]!==f.disabled||t[17]!==f.dndCopy||t[18]!==f.dndDragging||t[19]!==f.dndGroup||t[20]!==f.dndOver||t[21]!==f.dragHandle||t[22]!==f.fields||t[23]!==f.header||t[24]!==f.invalid||t[25]!==f.lockGroup||t[26]!==f.lockRule||t[27]!==f.notToggle||t[28]!==f.operators||t[29]!==f.queryBuilder||t[30]!==f.removeGroup||t[31]!==f.removeRule||t[32]!==f.rule||t[33]!==f.ruleGroup||t[34]!==f.shiftActions||t[35]!==f.valid||t[36]!==f.value||t[37]!==f.valueListItem||t[38]!==f.valueSelector||t[39]!==f.valueSource?(g={actionElement:f.actionElement,addGroup:f.addGroup,addRule:f.addRule,body:f.body,cloneGroup:f.cloneGroup,cloneRule:f.cloneRule,combinators:f.combinators,dragHandle:f.dragHandle,fields:f.fields,header:f.header,lockGroup:f.lockGroup,lockRule:f.lockRule,notToggle:f.notToggle,operators:f.operators,queryBuilder:f.queryBuilder,removeGroup:f.removeGroup,removeRule:f.removeRule,rule:f.rule,ruleGroup:f.ruleGroup,shiftActions:f.shiftActions,value:f.value,valueSelector:f.valueSelector,valueSource:f.valueSource,betweenRules:f.betweenRules,valid:f.valid,invalid:f.invalid,dndDragging:f.dndDragging,dndOver:f.dndOver,dndCopy:f.dndCopy,dndGroup:f.dndGroup,disabled:f.disabled,valueListItem:f.valueListItem,branches:f.branches},t[7]=f.actionElement,t[8]=f.addGroup,t[9]=f.addRule,t[10]=f.betweenRules,t[11]=f.body,t[12]=f.branches,t[13]=f.cloneGroup,t[14]=f.cloneRule,t[15]=f.combinators,t[16]=f.disabled,t[17]=f.dndCopy,t[18]=f.dndDragging,t[19]=f.dndGroup,t[20]=f.dndOver,t[21]=f.dragHandle,t[22]=f.fields,t[23]=f.header,t[24]=f.invalid,t[25]=f.lockGroup,t[26]=f.lockRule,t[27]=f.notToggle,t[28]=f.operators,t[29]=f.queryBuilder,t[30]=f.removeGroup,t[31]=f.removeRule,t[32]=f.rule,t[33]=f.ruleGroup,t[34]=f.shiftActions,t[35]=f.valid,t[36]=f.value,t[37]=f.valueListItem,t[38]=f.valueSelector,t[39]=f.valueSource,t[40]=g):g=t[40],h=g;const m=h,v=a.controlElements??Np,y=r.controlElements??Np;let b;t[41]!==v.actionElement||t[42]!==v.valueSelector||t[43]!==n||t[44]!==y.actionElement||t[45]!==y.valueSelector?(b=(e,t,r)=>{const a="dragHandle"===e?Ip:Rp,o=(e.endsWith("Action")&&y.actionElement?y.actionElement:void 0)??(e.endsWith("Selector")&&y.valueSelector?y.valueSelector:void 0),i=(e.endsWith("Action")&&v.actionElement?v.actionElement:void 0)??(e.endsWith("Selector")&&v.valueSelector?v.valueSelector:void 0),l=null===t?a:t??(n?o:void 0)??(null===r?a:r??(n?i:void 0));return l?{[e]:l}:n?{[e]:Ap[e]}:Np},t[41]=v.actionElement,t[42]=v.valueSelector,t[43]=n,t[44]=y.actionElement,t[45]=y.valueSelector,t[46]=b):b=t[46];const S=b;let k,w;t[47]!==v.actionElement||t[48]!==v.addGroupAction||t[49]!==v.addRuleAction||t[50]!==v.cloneGroupAction||t[51]!==v.cloneRuleAction||t[52]!==v.combinatorSelector||t[53]!==v.dragHandle||t[54]!==v.fieldSelector||t[55]!==v.inlineCombinator||t[56]!==v.lockGroupAction||t[57]!==v.lockRuleAction||t[58]!==v.notToggle||t[59]!==v.operatorSelector||t[60]!==v.removeGroupAction||t[61]!==v.removeRuleAction||t[62]!==v.rule||t[63]!==v.ruleGroup||t[64]!==v.ruleGroupBodyElements||t[65]!==v.ruleGroupHeaderElements||t[66]!==v.shiftActions||t[67]!==v.valueEditor||t[68]!==v.valueSelector||t[69]!==v.valueSourceSelector||t[70]!==n||t[71]!==S||t[72]!==y.actionElement||t[73]!==y.addGroupAction||t[74]!==y.addRuleAction||t[75]!==y.cloneGroupAction||t[76]!==y.cloneRuleAction||t[77]!==y.combinatorSelector||t[78]!==y.dragHandle||t[79]!==y.fieldSelector||t[80]!==y.inlineCombinator||t[81]!==y.lockGroupAction||t[82]!==y.lockRuleAction||t[83]!==y.notToggle||t[84]!==y.operatorSelector||t[85]!==y.removeGroupAction||t[86]!==y.removeRuleAction||t[87]!==y.rule||t[88]!==y.ruleGroup||t[89]!==y.ruleGroupBodyElements||t[90]!==y.ruleGroupHeaderElements||t[91]!==y.shiftActions||t[92]!==y.valueEditor||t[93]!==y.valueSelector||t[94]!==y.valueSourceSelector?(w=Object.assign({},S("addGroupAction",y.addGroupAction,v.addGroupAction),S("addRuleAction",y.addRuleAction,v.addRuleAction),S("cloneGroupAction",y.cloneGroupAction,v.cloneGroupAction),S("cloneRuleAction",y.cloneRuleAction,v.cloneRuleAction),S("combinatorSelector",y.combinatorSelector,v.combinatorSelector),S("dragHandle",y.dragHandle,v.dragHandle),S("fieldSelector",y.fieldSelector,v.fieldSelector),S("inlineCombinator",y.inlineCombinator,v.inlineCombinator),S("lockGroupAction",y.lockGroupAction,v.lockGroupAction),S("lockRuleAction",y.lockRuleAction,v.lockRuleAction),S("notToggle",y.notToggle,v.notToggle),S("operatorSelector",y.operatorSelector,v.operatorSelector),S("removeGroupAction",y.removeGroupAction,v.removeGroupAction),S("removeRuleAction",y.removeRuleAction,v.removeRuleAction),S("shiftActions",y.shiftActions,v.shiftActions),{valueEditor:null===y.valueEditor?Rp:y.valueEditor??(null===v.valueEditor?Rp:v.valueEditor)??Ap.valueEditor},S("valueSourceSelector",y.valueSourceSelector,v.valueSourceSelector),S("rule",y.rule,v.rule),S("ruleGroup",y.ruleGroup,v.ruleGroup),S("ruleGroupBodyElements",y.ruleGroupBodyElements,v.ruleGroupBodyElements),S("ruleGroupHeaderElements",y.ruleGroupHeaderElements,v.ruleGroupHeaderElements),{actionElement:y.actionElement??v.actionElement??(n?Ap.actionElement:void 0)},{valueSelector:y.valueSelector??v.valueSelector??(n?Ap.valueSelector:void 0)}),t[47]=v.actionElement,t[48]=v.addGroupAction,t[49]=v.addRuleAction,t[50]=v.cloneGroupAction,t[51]=v.cloneRuleAction,t[52]=v.combinatorSelector,t[53]=v.dragHandle,t[54]=v.fieldSelector,t[55]=v.inlineCombinator,t[56]=v.lockGroupAction,t[57]=v.lockRuleAction,t[58]=v.notToggle,t[59]=v.operatorSelector,t[60]=v.removeGroupAction,t[61]=v.removeRuleAction,t[62]=v.rule,t[63]=v.ruleGroup,t[64]=v.ruleGroupBodyElements,t[65]=v.ruleGroupHeaderElements,t[66]=v.shiftActions,t[67]=v.valueEditor,t[68]=v.valueSelector,t[69]=v.valueSourceSelector,t[70]=n,t[71]=S,t[72]=y.actionElement,t[73]=y.addGroupAction,t[74]=y.addRuleAction,t[75]=y.cloneGroupAction,t[76]=y.cloneRuleAction,t[77]=y.combinatorSelector,t[78]=y.dragHandle,t[79]=y.fieldSelector,t[80]=y.inlineCombinator,t[81]=y.lockGroupAction,t[82]=y.lockRuleAction,t[83]=y.notToggle,t[84]=y.operatorSelector,t[85]=y.removeGroupAction,t[86]=y.removeRuleAction,t[87]=y.rule,t[88]=y.ruleGroup,t[89]=y.ruleGroupBodyElements,t[90]=y.ruleGroupHeaderElements,t[91]=y.shiftActions,t[92]=y.valueEditor,t[93]=y.valueSelector,t[94]=y.valueSourceSelector,t[95]=w):w=t[95],k=w;const _=k,C=r.translations??Np,x=a.translations??Np;let E,A;x.addGroup,x.addGroup,x.addRule,x.addRule,x.cloneRule,x.cloneRule,x.cloneRuleGroup,x.cloneRuleGroup,x.combinators,x.dragHandle,x.dragHandle,x.fields,x.fields,x.fields,x.fields,x.lockGroup,x.lockGroup,x.lockGroupDisabled,x.lockGroupDisabled,x.lockRule,x.lockRule,x.lockRuleDisabled,x.lockRuleDisabled,x.notToggle,x.notToggle,x.operators,x.operators,x.operators,x.operators,x.removeGroup,x.removeGroup,x.removeRule,x.removeRule,x.shiftActionDown,x.shiftActionDown,x.shiftActionUp,x.shiftActionUp,x.value,x.values,x.values,x.values,x.values,x.valueSourceSelector,C.addGroup,C.addGroup,C.addRule,C.addRule,C.cloneRule,C.cloneRule,C.cloneRuleGroup,C.cloneRuleGroup,C.combinators,C.dragHandle,C.dragHandle,C.fields,C.fields,C.fields,C.fields,C.lockGroup,C.lockGroup,C.lockGroupDisabled,C.lockGroupDisabled,C.lockRule,C.lockRule,C.lockRuleDisabled,C.lockRuleDisabled,C.notToggle,C.notToggle,C.operators,C.operators,C.operators,C.operators,C.removeGroup,C.removeGroup,C.removeRule,C.removeRule,C.shiftActionDown,C.shiftActionDown,C.shiftActionUp,C.shiftActionUp,C.value,C.values,C.values,C.values,C.values,C.valueSourceSelector,t[96]!==x.addGroup?.label||t[97]!==x.addGroup?.title||t[98]!==x.addRule?.label||t[99]!==x.addRule?.title||t[100]!==x.cloneRule?.label||t[101]!==x.cloneRule?.title||t[102]!==x.cloneRuleGroup?.label||t[103]!==x.cloneRuleGroup?.title||t[104]!==x.combinators?.title||t[105]!==x.dragHandle?.label||t[106]!==x.dragHandle?.title||t[107]!==x.fields?.placeholderGroupLabel||t[108]!==x.fields?.placeholderLabel||t[109]!==x.fields?.placeholderName||t[110]!==x.fields?.title||t[111]!==x.lockGroup?.label||t[112]!==x.lockGroup?.title||t[113]!==x.lockGroupDisabled?.label||t[114]!==x.lockGroupDisabled?.title||t[115]!==x.lockRule?.label||t[116]!==x.lockRule?.title||t[117]!==x.lockRuleDisabled?.label||t[118]!==x.lockRuleDisabled?.title||t[119]!==x.notToggle?.label||t[120]!==x.notToggle?.title||t[121]!==x.operators?.placeholderGroupLabel||t[122]!==x.operators?.placeholderLabel||t[123]!==x.operators?.placeholderName||t[124]!==x.operators?.title||t[125]!==x.removeGroup?.label||t[126]!==x.removeGroup?.title||t[127]!==x.removeRule?.label||t[128]!==x.removeRule?.title||t[129]!==x.shiftActionDown?.label||t[130]!==x.shiftActionDown?.title||t[131]!==x.shiftActionUp?.label||t[132]!==x.shiftActionUp?.title||t[133]!==x.value?.title||t[134]!==x.valueSourceSelector?.title||t[135]!==x.values?.placeholderGroupLabel||t[136]!==x.values?.placeholderLabel||t[137]!==x.values?.placeholderName||t[138]!==x.values?.title||t[139]!==n||t[140]!==C.addGroup?.label||t[141]!==C.addGroup?.title||t[142]!==C.addRule?.label||t[143]!==C.addRule?.title||t[144]!==C.cloneRule?.label||t[145]!==C.cloneRule?.title||t[146]!==C.cloneRuleGroup?.label||t[147]!==C.cloneRuleGroup?.title||t[148]!==C.combinators?.title||t[149]!==C.dragHandle?.label||t[150]!==C.dragHandle?.title||t[151]!==C.fields?.placeholderGroupLabel||t[152]!==C.fields?.placeholderLabel||t[153]!==C.fields?.placeholderName||t[154]!==C.fields?.title||t[155]!==C.lockGroup?.label||t[156]!==C.lockGroup?.title||t[157]!==C.lockGroupDisabled?.label||t[158]!==C.lockGroupDisabled?.title||t[159]!==C.lockRule?.label||t[160]!==C.lockRule?.title||t[161]!==C.lockRuleDisabled?.label||t[162]!==C.lockRuleDisabled?.title||t[163]!==C.notToggle?.label||t[164]!==C.notToggle?.title||t[165]!==C.operators?.placeholderGroupLabel||t[166]!==C.operators?.placeholderLabel||t[167]!==C.operators?.placeholderName||t[168]!==C.operators?.title||t[169]!==C.removeGroup?.label||t[170]!==C.removeGroup?.title||t[171]!==C.removeRule?.label||t[172]!==C.removeRule?.title||t[173]!==C.shiftActionDown?.label||t[174]!==C.shiftActionDown?.title||t[175]!==C.shiftActionUp?.label||t[176]!==C.shiftActionUp?.title||t[177]!==C.value?.title||t[178]!==C.valueSourceSelector?.title||t[179]!==C.values?.placeholderGroupLabel||t[180]!==C.values?.placeholderLabel||t[181]!==C.values?.placeholderName||t[182]!==C.values?.title?(A=Object.assign(n?Object.assign({},Ep):{},ip("addGroup",{label:[C.addGroup?.label,x.addGroup?.label],title:[C.addGroup?.title,x.addGroup?.title]},n),ip("addRule",{label:[C.addRule?.label,x.addRule?.label],title:[C.addRule?.title,x.addRule?.title]},n),ip("cloneRule",{label:[C.cloneRule?.label,x.cloneRule?.label],title:[C.cloneRule?.title,x.cloneRule?.title]},n),ip("cloneRuleGroup",{label:[C.cloneRuleGroup?.label,x.cloneRuleGroup?.label],title:[C.cloneRuleGroup?.title,x.cloneRuleGroup?.title]},n),ip("combinators",{title:[C.combinators?.title,x.combinators?.title]},n),ip("dragHandle",{label:[C.dragHandle?.label,x.dragHandle?.label],title:[C.dragHandle?.title,x.dragHandle?.title]},n),ip("fields",{placeholderGroupLabel:[C.fields?.placeholderGroupLabel,x.fields?.placeholderGroupLabel],placeholderLabel:[C.fields?.placeholderLabel,x.fields?.placeholderLabel],placeholderName:[C.fields?.placeholderName,x.fields?.placeholderName],title:[C.fields?.title,x.fields?.title]},n),ip("lockGroup",{label:[C.lockGroup?.label,x.lockGroup?.label],title:[C.lockGroup?.title,x.lockGroup?.title]},n),ip("lockGroupDisabled",{label:[C.lockGroupDisabled?.label,x.lockGroupDisabled?.label],title:[C.lockGroupDisabled?.title,x.lockGroupDisabled?.title]},n),ip("lockRule",{label:[C.lockRule?.label,x.lockRule?.label],title:[C.lockRule?.title,x.lockRule?.title]},n),ip("lockRuleDisabled",{label:[C.lockRuleDisabled?.label,x.lockRuleDisabled?.label],title:[C.lockRuleDisabled?.title,x.lockRuleDisabled?.title]},n),ip("notToggle",{label:[C.notToggle?.label,x.notToggle?.label],title:[C.notToggle?.title,x.notToggle?.title]},n),ip("operators",{placeholderGroupLabel:[C.operators?.placeholderGroupLabel,x.operators?.placeholderGroupLabel],placeholderLabel:[C.operators?.placeholderLabel,x.operators?.placeholderLabel],placeholderName:[C.operators?.placeholderName,x.operators?.placeholderName],title:[C.operators?.title,x.operators?.title]},n),ip("values",{placeholderGroupLabel:[C.values?.placeholderGroupLabel,x.values?.placeholderGroupLabel],placeholderLabel:[C.values?.placeholderLabel,x.values?.placeholderLabel],placeholderName:[C.values?.placeholderName,x.values?.placeholderName],title:[C.values?.title,x.values?.title]},n),ip("removeGroup",{label:[C.removeGroup?.label,x.removeGroup?.label],title:[C.removeGroup?.title,x.removeGroup?.title]},n),ip("removeRule",{label:[C.removeRule?.label,x.removeRule?.label],title:[C.removeRule?.title,x.removeRule?.title]},n),ip("shiftActionDown",{label:[C.shiftActionDown?.label,x.shiftActionDown?.label],title:[C.shiftActionDown?.title,x.shiftActionDown?.title]},n),ip("shiftActionUp",{label:[C.shiftActionUp?.label,x.shiftActionUp?.label],title:[C.shiftActionUp?.title,x.shiftActionUp?.title]},n),ip("value",{title:[C.value?.title,x.value?.title]},n),ip("valueSourceSelector",{title:[C.valueSourceSelector?.title,x.valueSourceSelector?.title]},n)),t[96]=x.addGroup?.label,t[97]=x.addGroup?.title,t[98]=x.addRule?.label,t[99]=x.addRule?.title,t[100]=x.cloneRule?.label,t[101]=x.cloneRule?.title,t[102]=x.cloneRuleGroup?.label,t[103]=x.cloneRuleGroup?.title,t[104]=x.combinators?.title,t[105]=x.dragHandle?.label,t[106]=x.dragHandle?.title,t[107]=x.fields?.placeholderGroupLabel,t[108]=x.fields?.placeholderLabel,t[109]=x.fields?.placeholderName,t[110]=x.fields?.title,t[111]=x.lockGroup?.label,t[112]=x.lockGroup?.title,t[113]=x.lockGroupDisabled?.label,t[114]=x.lockGroupDisabled?.title,t[115]=x.lockRule?.label,t[116]=x.lockRule?.title,t[117]=x.lockRuleDisabled?.label,t[118]=x.lockRuleDisabled?.title,t[119]=x.notToggle?.label,t[120]=x.notToggle?.title,t[121]=x.operators?.placeholderGroupLabel,t[122]=x.operators?.placeholderLabel,t[123]=x.operators?.placeholderName,t[124]=x.operators?.title,t[125]=x.removeGroup?.label,t[126]=x.removeGroup?.title,t[127]=x.removeRule?.label,t[128]=x.removeRule?.title,t[129]=x.shiftActionDown?.label,t[130]=x.shiftActionDown?.title,t[131]=x.shiftActionUp?.label,t[132]=x.shiftActionUp?.title,t[133]=x.value?.title,t[134]=x.valueSourceSelector?.title,t[135]=x.values?.placeholderGroupLabel,t[136]=x.values?.placeholderLabel,t[137]=x.values?.placeholderName,t[138]=x.values?.title,t[139]=n,t[140]=C.addGroup?.label,t[141]=C.addGroup?.title,t[142]=C.addRule?.label,t[143]=C.addRule?.title,t[144]=C.cloneRule?.label,t[145]=C.cloneRule?.title,t[146]=C.cloneRuleGroup?.label,t[147]=C.cloneRuleGroup?.title,t[148]=C.combinators?.title,t[149]=C.dragHandle?.label,t[150]=C.dragHandle?.title,t[151]=C.fields?.placeholderGroupLabel,t[152]=C.fields?.placeholderLabel,t[153]=C.fields?.placeholderName,t[154]=C.fields?.title,t[155]=C.lockGroup?.label,t[156]=C.lockGroup?.title,t[157]=C.lockGroupDisabled?.label,t[158]=C.lockGroupDisabled?.title,t[159]=C.lockRule?.label,t[160]=C.lockRule?.title,t[161]=C.lockRuleDisabled?.label,t[162]=C.lockRuleDisabled?.title,t[163]=C.notToggle?.label,t[164]=C.notToggle?.title,t[165]=C.operators?.placeholderGroupLabel,t[166]=C.operators?.placeholderLabel,t[167]=C.operators?.placeholderName,t[168]=C.operators?.title,t[169]=C.removeGroup?.label,t[170]=C.removeGroup?.title,t[171]=C.removeRule?.label,t[172]=C.removeRule?.title,t[173]=C.shiftActionDown?.label,t[174]=C.shiftActionDown?.title,t[175]=C.shiftActionUp?.label,t[176]=C.shiftActionUp?.title,t[177]=C.value?.title,t[178]=C.valueSourceSelector?.title,t[179]=C.values?.placeholderGroupLabel,t[180]=C.values?.placeholderLabel,t[181]=C.values?.placeholderName,t[182]=C.values?.title,t[183]=A):A=t[183],E=A;const R=E;let I;return t[184]!==m||t[185]!==_||t[186]!==i||t[187]!==u||t[188]!==s||t[189]!==r.initialQuery||t[190]!==r.qbId||t[191]!==R?(I={controlClassnames:m,controlElements:_,debugMode:i,enableDragAndDrop:u,enableMountQueryChange:s,translations:R,initialQuery:r.initialQuery,qbId:r.qbId},t[184]=m,t[185]=_,t[186]=i,t[187]=u,t[188]=s,t[189]=r.initialQuery,t[190]=r.qbId,t[191]=R,t[192]=I):I=t[192],I},Tp=e=>{gd();const{defaultQuery:t,queryProp:n}=e;(e=>{const t=xe.useRef({value:e,prev:null}),n=t.current.value;e!==n&&(t.current={value:e,prev:n}),t.current.prev})(!!n)},Dp=e=>t=>pd.selectors.getQuerySelectorById({queries:t.queries},e),jp=ct(dd),$p={},Op={},Lp=[],Mp={},zp=()=>null,Fp=()=>"",Gp=()=>!0,Up=function(){console.log(...arguments)};function Bp(e,t){const{query:n,defaultQuery:r,getValueEditorSeparator:a=zp,getRuleClassname:o=Fp,getRuleGroupClassname:i=Fp,onAddRule:l=Gp,onAddGroup:s=Gp,onMoveRule:c=Gp,onMoveGroup:u=Gp,onGroupRule:d=Gp,onGroupGroup:p=Gp,onRemove:f=Gp,onQueryChange:h,showCombinatorsBetweenRules:g=!1,showNotToggle:m=!1,showShiftActions:v=!1,showCloneButtons:y=!1,showLockButtons:b=!1,suppressStandardClassnames:S=!1,resetOnFieldChange:k=!0,resetOnOperatorChange:w=!1,autoSelectField:_=!0,autoSelectOperator:C=!0,autoSelectValue:x=!0,addRuleToNewGroups:E=!1,listsAsArrays:A=!1,parseNumbers:R=!1,disabled:I=!1,validator:N,onLog:P=Up,idGenerator:T,accessibleDescriptionGenerator:D=Xd}=e,{qbId:j,rqbContext:$,fields:O,fieldMap:L,combinators:M,getOperatorsMain:z,getRuleDefaultOperator:F,getValueEditorTypeMain:G,getValueSourcesMain:U,getValuesMain:B,getRuleDefaultValue:H,getInputTypeMain:V,createRule:W,createRuleGroup:q}=t,{controlClassnames:Q,controlElements:K,debugMode:X,enableDragAndDrop:J,enableMountQueryChange:Y,translations:Z}=$,ee=!!g,te=!!m,ne=!!v,re=!!y,ae=!!b,oe=!!k,ie=!!w,le=!!_,se=!!C,ce=!!x,ue=!!E,de=!!A,pe=!!S,fe=xe.useCallback((function(){X&&P(...arguments)}),[X,P]);Tp({defaultQuery:r,queryProp:n});const he=md(),ge=gd(),me=xe.useMemo((()=>Dp(j)),[j]),ve=((e,t)=>{const n=xe.useContext(Pc);return jp(e,t)??n?.initialQuery})(me),ye=xe.useCallback((()=>me(he.getState())),[he,me]),be=xe.useMemo((()=>q()),[q]),Se=n??ve??r??be,ke=Se.id?Se:sp(Se,{idGenerator:T}),[we]=xe.useState(ke),_e=xe.useMemo((()=>({...$,initialQuery:we})),[$,we]);xe.useEffect((()=>{n&&!Object.is(n,ve)&&ge(hd({payload:{qbId:j,query:n},onQueryChange:void 0}))}),[n,j,ve,ge]);const Ce=xe.useMemo((()=>Rd(ke)),[ke]),Ee=!!e.independentCombinators&&!Ce;bd(0,Ee||!Ee&&e.independentCombinators);const Ae=xe.useRef(!1);xe.useEffect((()=>{Ae.current||(Ae.current=!0,ge(hd({payload:{qbId:j,query:ke},onQueryChange:Y&&"function"==typeof h?h:void 0})))}),[Y,h,j,ge,ke]);const Re=xe.useCallback((e=>{ge(hd({payload:{qbId:j,query:e},onQueryChange:h}))}),[h,j,ge]),Ie=xe.useMemo((()=>Array.isArray(I)&&I||Lp),[I]),Ne=!0===I,Pe=xe.useMemo((()=>ke.disabled||Ie.some((e=>0===e.length))),[Ie,ke.disabled]),Te=xe.useCallback(((e,t,n)=>{const r=Dp(j)(he.getState());if(!r)return;if(Kd(t,r)||Ne)return void fe({qbId:j,type:zu,rule:e,parentPath:t,query:r});const a=l(e,t,r,n);if(!a)return void fe({qbId:j,type:Gu,rule:e,parentPath:t,query:r});const o=!0===a?e:a,i=pp(r,o,t,{combinators:M,combinatorPreceding:o.combinatorPreceding??void 0,idGenerator:T});fe({qbId:j,type:Qu,query:r,newQuery:i,newRule:o,parentPath:t}),Re(i)}),[j,he,Ne,l,M,T,fe,Re]),De=xe.useCallback(((e,t,n)=>{const r=Dp(j)(he.getState());if(!r)return;if(Kd(t,r)||Ne)return void fe({qbId:j,type:zu,ruleGroup:e,parentPath:t,query:r});const a=s(e,t,r,n);if(!a)return void fe({qbId:j,type:Uu,ruleGroup:e,parentPath:t,query:r});const o=!0===a?e:a,i=pp(r,o,t,{combinators:M,combinatorPreceding:o.combinatorPreceding??void 0,idGenerator:T});fe({qbId:j,type:Qu,query:r,newQuery:i,newGroup:o,parentPath:t}),Re(i)}),[j,he,Ne,s,M,T,fe,Re]),je=xe.useCallback(((e,t,n)=>{const r=Dp(j)(he.getState());if(!r)return;if(Kd(n,r)&&"disabled"!==e||Ne)return void fe({qbId:j,type:Fu,path:n,prop:e,value:t,query:r});const a=function(e,t,n,r){let{resetOnFieldChange:a=!0,resetOnOperatorChange:o=!1,getRuleDefaultOperator:i=()=>"=",getValueSources:l=()=>["value"],getRuleDefaultValue:s=()=>""}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return cn(e,(e=>{const c=Array.isArray(r)?r:Vd(r,e);if(!c)return;if("combinator"===t&&!Ad(e)){const t=Bd(Wd(c),e).rules;return void(c.at(-1)%2==1&&(t[c.at(-1)]=n))}const u=Bd(c,e);if(!u)return;const d=Ed(u);if(u[t]===n)return;if("valueSource"!==t&&(u[t]=n),d)return;let p=!1,f=!1;a&&"field"===t&&(u.operator=i(n),p=!0,f=!0),o&&"operator"===t&&(p=!0,f=!0);const h=l(u.field,u.operator)[0];(p&&u.valueSource&&h!==u.valueSource||"valueSource"===t&&n!==u.valueSource)&&(f=!!u.valueSource||!u.valueSource&&n!==h,u.valueSource=p?h:n),f&&(u.value=s(u))}))}(r,e,t,n,{resetOnFieldChange:oe,resetOnOperatorChange:ie,getRuleDefaultOperator:F,getValueSources:U,getRuleDefaultValue:H});fe({qbId:j,type:Xu,query:r,newQuery:a,prop:e,value:t,path:n}),Re(a)}),[j,he,Ne,oe,ie,F,U,H,fe,Re]),$e=xe.useCallback(((e,t)=>{const n=Dp(j)(he.getState());if(!n)return;if(Kd(e,n)||Ne)return void fe({qbId:j,type:Fu,path:e,query:n});const r=Bd(e,n);if(r)if(f(r,e,n,t)){const t=((e,t)=>{const n=Array.isArray(t)?t:Vd(t,e);return n?0===n.length||!Ad(e)&&!Bd(n,e)?e:cn(e,(e=>{const t=n.at(-1),r=Bd(Wd(n),e);if(r&&Ed(r))if(!Ad(r)&&r.rules.length>1){const e=0===t?0:t-1;r.rules.splice(e,2)}else r.rules.splice(t,1)})):e})(n,e);fe({qbId:j,type:Ku,query:n,newQuery:t,path:e,ruleOrGroup:r}),Re(t)}else fe({qbId:j,type:qu,ruleOrGroup:r,path:e,query:n})}),[j,he,Ne,fe,f,Re]),Oe=xe.useCallback(((e,t,n,r)=>{const a=Dp(j)(he.getState());if(!a)return;if(Kd(e,a)||Ne)return void fe({qbId:j,type:Fu,oldPath:e,newPath:t,query:a});const o=function(e,t,n){let{clone:r=!1,combinators:a=Uc,idGenerator:o=Yd}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Array.isArray(t)?t:Vd(t,e);if(!i)return e;const l=fp(e,i,n);if(0===i.length||qd(i,l)||!Bd(Wd(l),e))return e;const s=Bd(i,e);if(!s)return e;const c=r?dp(s,{idGenerator:o}):s;return cn(e,(e=>{const t=Rd(e),n=Bd(Wd(i),e),o=i.at(-1),s=t&&o>0?n.rules[o-1]:null,u=t&&o<n.rules.length-1?n.rules[o+1]:null;if(!r){const e=t?Math.max(0,o-1):o,r=t?2:1;n.rules.splice(e,r)}const d=[...l],p=Qd(i,l);!r&&i.length===p.length+1&&l[p.length]>i[p.length]&&(d[p.length]-=t?2:1);const f=Wd(d),h=Bd(f,e),g=d.at(-1),m=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.rules.splice(g,0,...t)};if(0!==h.rules.length&&t)if(0===g)if(0===o&&u)m(c,u);else{const e=h.rules[1]??s??Md(a);m(c,e)}else m(s||(h.rules[g-2]??u??Md(a)),c);else m(c)}))}(a,e,t,{clone:n,combinators:M,idGenerator:T}),i=Bd(e,a),l=Ed(i),s=(l?u:c)(i,e,t,a,o,{clone:n,combinators:M},r);if(!s)return void fe({qbId:j,type:l?Wu:Vu,ruleOrGroup:i,oldPath:e,newPath:t,clone:n,query:a,nextQuery:o});const d=Ed(s)?s:o;fe({qbId:j,type:Ju,query:a,newQuery:d,oldPath:e,newPath:t,clone:n}),Re(d)}),[j,he,Ne,M,T,u,c,fe,Re]),Le=xe.useCallback(((e,t,n,r)=>{const a=Dp(j)(he.getState());if(!a)return;if(Kd(e,a)||Ne)return void fe({qbId:j,type:Fu,sourcePath:e,targetPath:t,query:a});const o=function(e,t,n){let{clone:r=!1,combinators:a=Uc,idGenerator:o=Yd}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Array.isArray(t)?t:Vd(t,e),l=Array.isArray(n)?n:Vd(n,e);if(!i||!l)return e;const s=fp(e,i,l);if(0===i.length||qd(i,s)||!Bd(Wd(s),e))return e;const c=Bd(i,e),u=Bd(l,e);if(!c||!u)return e;const d=r?dp(c,{idGenerator:o}):c;return cn(e,(e=>{const t=Rd(e),n=Bd(Wd(i),e),l=i.at(-1);if(!r){const e=t?Math.max(0,l-1):l,r=t?2:1;n.rules.splice(e,r)}const c=[...s],p=Qd(i,s);!r&&i.length===p.length+1&&s[p.length]>i[p.length]&&(c[p.length]-=t?2:1);const f=Wd(c),h=Bd(f,e),g=c.at(-1);h.rules.splice(g,1,cp(t?{rules:[u,Md(a),d]}:{combinator:Md(a),rules:[u,d]},{idGenerator:o}))}))}(a,e,t,{clone:n,combinators:M,idGenerator:T}),i=Bd(e,a),l=Ed(i),s=(l?p:d)(i,e,t,a,o,{clone:n,combinators:M},r);if(!s)return void fe({qbId:j,type:l?Hu:Bu,ruleOrGroup:i,sourcePath:e,targetPath:t,clone:n,query:a,nextQuery:o});const c=Ed(s)?s:o;fe({qbId:j,type:Yu,query:a,newQuery:c,sourcePath:e,targetPath:t,clone:n}),Re(c)}),[j,he,Ne,M,T,p,d,fe,Re]),{validationResult:Me,validationMap:ze}=xe.useMemo((()=>{const e="function"==typeof N&&ke?N(ke):$p;return{validationResult:e,validationMap:"boolean"==typeof e?Op:e}}),[ke,N]),Fe=xe.useMemo((()=>J?"enabled":"disabled"),[J]),Ge=xe.useMemo((()=>Ce||ee?"enabled":"disabled"),[Ce,ee]),Ue=xe.useMemo((()=>"string"==typeof ke.combinator?{combinator:ke.combinator}:Mp),[ke.combinator]),Be=xe.useMemo((()=>td(pe||Bc,td(Q.queryBuilder),Ne&&Q.disabled,"boolean"==typeof Me&&Me&&Q.valid,"boolean"==typeof Me&&!Me&&Q.invalid,pe||{[hu]:Ne,[iu]:"boolean"==typeof Me&&Me,[lu]:"boolean"==typeof Me&&!Me})),[Q.disabled,Q.invalid,Q.queryBuilder,Q.valid,Ne,pe,Me]),He=xe.useMemo((()=>({addRuleToNewGroups:ue,accessibleDescriptionGenerator:D,autoSelectField:le,autoSelectOperator:se,autoSelectValue:ce,classNames:Q,combinators:M,controls:K,createRule:W,createRuleGroup:q,disabledPaths:Ie,enableDragAndDrop:J,fieldMap:L,fields:O,dispatchQuery:Re,getQuery:ye,getInputType:V,getOperators:z,getRuleClassname:o,getRuleGroupClassname:i,getValueEditorSeparator:a,getValueEditorType:G,getValues:B,getValueSources:U,independentCombinators:Ce,listsAsArrays:de,parseNumbers:R,qbId:j,showCloneButtons:re,showCombinatorsBetweenRules:ee,showLockButtons:ae,showNotToggle:te,showShiftActions:ne,suppressStandardClassnames:pe,validationMap:ze})),[D,ue,le,se,ce,M,Q,K,W,q,Ie,Re,J,L,O,V,z,ye,o,i,a,G,B,U,Ce,de,R,j,re,ee,ae,te,ne,pe,ze]);return{actions:xe.useMemo((()=>({moveRule:Oe,onGroupAdd:De,onGroupRemove:$e,onPropChange:je,onRuleAdd:Te,onRuleRemove:$e,groupRule:Le})),[Le,Oe,De,je,Te,$e]),rootGroup:ke,rootGroupDisabled:Pe,queryDisabled:Ne,rqbContext:_e,schema:He,translations:Z,wrapperClassName:Be,dndEnabledAttr:Fe,inlineCombinatorsAttr:Ge,combinatorPropObject:Ue}}var Hp=(e,t,n)=>{const r=Md(e);if("between"===t.operator||"notBetween"===t.operator){const e=[r,r];return n?e:_d(e.map((e=>e??"")),",")}return r},Vp=e=>{const[t]=xe.useState(Yd),{fields:n,baseField:r,operators:a,baseOperator:o,combinators:i=Uc,baseCombinator:l,translations:s,enableMountQueryChange:c=!0,controlClassnames:u,controlElements:d,getDefaultField:p,getDefaultOperator:f,getDefaultValue:h,getOperators:g,getValueEditorType:m,getValueSources:v,getInputType:y,getValues:b,autoSelectField:S=!0,autoSelectOperator:k=!0,autoSelectValue:w=!0,addRuleToNewGroups:_=!1,enableDragAndDrop:C,listsAsArrays:x=!1,debugMode:E=!1,idGenerator:A=Yd}=e,R=a??Gc,[I]=xe.useState(e.query??e.defaultQuery),N=Pp({controlClassnames:u,controlElements:d,debugMode:E,enableDragAndDrop:C,enableMountQueryChange:c,translations:s,initialQuery:I,qbId:t,finalize:!0}),{translations:P}=N,T=xe.useMemo((()=>({id:P.fields.placeholderName,name:P.fields.placeholderName,value:P.fields.placeholderName,label:P.fields.placeholderLabel})),[P.fields.placeholderLabel,P.fields.placeholderName]),D=xe.useMemo((()=>n??[T]),[T,n]),j=xe.useMemo((()=>{const e=Array.isArray(D)?Td(D,r):ap(Dd(D,r)).map((e=>({...D[e],name:e,value:e}))).sort(((e,t)=>e.label.localeCompare(t.label)));return Od(e)?zd(S?e:[{label:P.fields.placeholderGroupLabel,options:[T]},...e]):jd(S?e:[T,...e])}),[S,r,T,D,P.fields.placeholderGroupLabel]),$=xe.useMemo((()=>{if(!Array.isArray(D)){const e=Dd(D,r);return S?e:{...e,[P.fields.placeholderName]:T}}const e={};if(Od(j))for(const t of j)for(const n of t.options)e[n.value??n.name]=Pd(n,r);else for(const t of j)e[t.value??t.name]=Pd(t,r);return e}),[S,r,T,j,D,P.fields.placeholderName]),O=xe.useMemo((()=>Td(i,l)),[l,i]),L=xe.useMemo((()=>({id:P.operators.placeholderName,name:P.operators.placeholderName,value:P.operators.placeholderName,label:P.operators.placeholderLabel})),[P.operators.placeholderLabel,P.operators.placeholderName]),M=xe.useCallback(((e,t)=>{let{fieldData:n}=t,r=Td(R,o);if(n?.operators)r=Td(n.operators,o);else if(g){const t=g(e,{fieldData:n});t&&(r=Td(t,o))}return k||(r=Od(r)?[{label:P.operators.placeholderGroupLabel,options:[L]},...r]:[L,...r]),Od(a=r)?zd(a):jd(a.map((e=>Pd(e))));var a}),[k,o,L,g,R,P.operators.placeholderGroupLabel]),z=xe.useCallback((e=>{const t=$[e];if(t?.defaultOperator)return t.defaultOperator;if(f)return"function"==typeof f?f(e,{fieldData:t}):f;const n=M(e,{fieldData:t})??[];return Md(n)??""}),[$,f,M]),F=xe.useCallback(((e,t,n)=>{let{fieldData:r}=n;return r.valueEditorType?"function"==typeof r.valueEditorType?r.valueEditorType(t):r.valueEditorType:m?.(e,t,{fieldData:r})??"text"}),[m]),G=xe.useCallback(((e,t)=>((e,t,n)=>{const r=e?Pd(e):np;if(r.valueSources)return"function"==typeof r.valueSources?r.valueSources(t):r.valueSources;if(n){const e=n(r.value,t,{fieldData:Pd(r)});if(e)return e}return tp})($[e],t,v)),[$,v]),U=xe.useMemo((()=>({id:P.values.placeholderName,name:P.values.placeholderName,value:P.values.placeholderName,label:P.values.placeholderLabel})),[P.values.placeholderLabel,P.values.placeholderName]),B=xe.useCallback(((e,t,n)=>{let{fieldData:r}=n,a=[];return r?.values&&(a=Td(r.values)),b&&(a=Td(b(e,t,{fieldData:r}))),w||(a=Od(a)?[{label:P.values.placeholderGroupLabel,options:[U]},...a]:[U,...a]),a}),[w,U,b,P.values.placeholderGroupLabel]),H=xe.useCallback((e=>{const t=$[e.field]??{};if(void 0!==t?.defaultValue&&null!==t.defaultValue)return t.defaultValue;if(h)return h(e,{fieldData:t});let n="";const r=B(e.field,e.operator,{fieldData:t});if("field"===e.valueSource){const r=Gd(t,j,e.operator);n=r.length>0?Hp(r,e,x):""}else if(r.length>0){const a=F(e.field,e.operator,{fieldData:t});"multiselect"===a?n=x?[]:"":"select"!==a&&"radio"!==a||(n=Hp(r,e,x))}else{"checkbox"===F(e.field,e.operator,{fieldData:t})&&(n=!1)}return n}),[$,j,h,F,B,x]),V=xe.useCallback(((e,t,n)=>{let{fieldData:r}=n;if(y){const n=y(e,t,{fieldData:r});if(n)return n}return"text"}),[y]),W=xe.useCallback((()=>{let e="";const t=j;if(t?.length>0&&t[0]){const n=Md(t);n&&(e=n)}if(p)if("function"==typeof p){const n=p(t);n&&(e=n)}else e=p;const n=z(e),r=G(e,n)[0]??"value",a={id:A(),field:e,operator:n,valueSource:r,value:""},o=H(a);return{...a,value:o}}),[j,p,z,H,G,A]),q=xe.useCallback((e=>e?{id:A(),rules:_?[W()]:[],not:!1}:{id:A(),rules:_?[W()]:[],combinator:Md(O)??"",not:!1}),[_,O,W,A]);return{qbId:t,rqbContext:N,fields:j,fieldMap:$,combinators:O,getOperatorsMain:M,getRuleDefaultOperator:z,getValueEditorTypeMain:F,getValueSourcesMain:G,getValuesMain:B,getRuleDefaultValue:H,getInputTypeMain:V,createRule:W,createRuleGroup:q}},Wp=e=>{const t=kd(15),{props:n}=e,r=(e=>Bp(e,Vp(e)))(n),a=r.schema.controls.ruleGroup,o=!!r.rootGroup.not;let i;return t[0]!==a||t[1]!==n.context||t[2]!==r.actions||t[3]!==r.combinatorPropObject||t[4]!==r.dndEnabledAttr||t[5]!==r.inlineCombinatorsAttr||t[6]!==r.queryDisabled||t[7]!==r.rootGroup||t[8]!==r.rootGroupDisabled||t[9]!==r.rqbContext||t[10]!==r.schema||t[11]!==r.translations||t[12]!==r.wrapperClassName||t[13]!==o?(i=Be.jsx(Pc.Provider,{value:r.rqbContext,children:Be.jsx("div",{role:"form",className:r.wrapperClassName,"data-dnd":r.dndEnabledAttr,"data-inlinecombinators":r.inlineCombinatorsAttr,children:Be.jsx(a,{translations:r.translations,ruleGroup:r.rootGroup,rules:r.rootGroup.rules,...r.combinatorPropObject,not:o,schema:r.schema,actions:r.actions,id:r.rootGroup.id,path:Zu,disabled:r.rootGroupDisabled,shiftUpDisabled:!0,shiftDownDisabled:!0,parentDisabled:r.queryDisabled,context:n.context})})},r.dndEnabledAttr),t[0]=a,t[1]=n.context,t[2]=r.actions,t[3]=r.combinatorPropObject,t[4]=r.dndEnabledAttr,t[5]=r.inlineCombinatorsAttr,t[6]=r.queryDisabled,t[7]=r.rootGroup,t[8]=r.rootGroupDisabled,t[9]=r.rqbContext,t[10]=r.schema,t[11]=r.translations,t[12]=r.wrapperClassName,t[13]=o,t[14]=i):i=t[14],i},qp=An({...yd,devTools:!1}),Qp=e=>Be.jsx(tt,{context:dd,store:qp,children:e.children}),Kp=e=>Be.jsx(Qp,{children:Be.jsx(Wp,{props:e})});const Xp=[];for(let e=0;e<256;++e)Xp.push((e+256).toString(16).slice(1));let Jp;const Yp=new Uint8Array(16);var Zp={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function ef(e,t,n){if(Zp.randomUUID&&!t&&!e)return Zp.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!Jp){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Jp=crypto.getRandomValues.bind(crypto)}return Jp(Yp)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(Xp[e[t+0]]+Xp[e[t+1]]+Xp[e[t+2]]+Xp[e[t+3]]+"-"+Xp[e[t+4]]+Xp[e[t+5]]+"-"+Xp[e[t+6]]+Xp[e[t+7]]+"-"+Xp[e[t+8]]+Xp[e[t+9]]+"-"+Xp[e[t+10]]+Xp[e[t+11]]+Xp[e[t+12]]+Xp[e[t+13]]+Xp[e[t+14]]+Xp[e[t+15]]).toLowerCase()}(r)}const tf=e.getInstance(),nf={id:ef(),combinator:"and",rules:[],not:!1},rf=e=>({id:e.id||ef(),combinator:e.combinator||"and",rules:e.rules.map((e=>"combinator"in e?rf(e):e)),not:e.not||!1}),af=({conditionalLogicConfig:e,onConfigChanged:t,configuredDataSources:n,hass:r,directApiConfig:a,allParameterValues:o})=>{const[i,l]=xe.useState((null==e?void 0:e.definedLogics)||[]),s=xe.useMemo((()=>((e,t,n,r)=>{const a=[];return e?((e.inventree_hass_sensors||[]).forEach((e=>{const n=null==t?void 0:t.states[e],r=(null==n?void 0:n.attributes.friendly_name)||e;a.push({name:`inv_sensor_state_${e}`,label:`InvSensor: ${r} State`})})),(e.ha_entities||[]).forEach((e=>{const n=null==t?void 0:t.states[e],r=(null==n?void 0:n.attributes.friendly_name)||e;a.push({name:`ha_entity_state_${e}`,label:`HA: ${r} State`}),(null==n?void 0:n.attributes.temperature)&&a.push({name:`ha_entity_attr_${e}_temperature`,label:`HA: ${r} Temperature`,inputType:"number"})})),(e.inventree_pks||[]).forEach((e=>{isNaN(e)||(a.push({name:`part_${e}_name`,label:`Part ${e}: Name`,inputType:"text"}),a.push({name:`part_${e}_IPN`,label:`Part ${e}: IPN`,inputType:"text"}),a.push({name:`part_${e}_description`,label:`Part ${e}: Description`,inputType:"text"}),a.push({name:`part_${e}_category_name`,label:`Part ${e}: Category`,inputType:"text"}),a.push({name:`part_${e}_stock`,label:`Part ${e}: Stock`,inputType:"number"}),a.push({name:`part_${e}_is_template`,label:`Part ${e}: Is Template`,inputType:"boolean"}),a.push({name:`part_${e}_assembly`,label:`Part ${e}: Is Assembly`,inputType:"boolean"}),a.push({name:`part_${e}_virtual`,label:`Part ${e}: Is Virtual`,inputType:"boolean"}))})),(e.inventree_parameters||[]).forEach((e=>{const t=e.split(":");if(3===t.length&&"part"===t[0]){const i=t[1],l=t[2],s=parseInt(i,10);if(isNaN(s))a.push({name:`inv_param_raw_${e.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${e} (Invalid PK)`});else{let e="text";(null==n?void 0:n.enabled)&&r&&r[s]&&r[s][l]&&(e=(o=r[s][l])&&o.template_detail?o.template_detail.checkbox?"boolean":o.template_detail.units||"number"==typeof o.data_numeric?"number":"text":"text"),a.push({name:`inv_param_${s}_${l}`,label:`InvParam: ${l} (Part ${s})`,inputType:e})}}else a.push({name:`inv_param_raw_${e.replace(/[^a-zA-Z0-9_]/g,"_")}`,label:`InvParam: ${e} (Malformed)`});var o})),0===a.length&&a.push({name:"generic_part_name",label:"Part Name (Any)"},{name:"generic_stock_level",label:"Stock Level (Any)",inputType:"number"}),tf.log("ConditionalLogicSection","Generated fields for QueryBuilder",{count:a.length}),a):[{name:"default_field",label:"Default Field (No Data Sources)"}]})(n,r,a,o)),[n,r,a,o]);xe.useEffect((()=>{l((null==e?void 0:e.definedLogics)||[])}),[null==e?void 0:e.definedLogics]);return Be.jsxs("div",{className:"conditional-logic-section",children:[Be.jsx("h4",{children:"Conditional Logic Blocks"}),Be.jsx("p",{style:{fontSize:"0.9em",color:"gray",marginBottom:"15px"},children:"Define sets of conditions (logic blocks). Each block can have its own rules and associated effects (effects UI coming soon)."}),Be.jsx("button",{onClick:()=>{const e={id:ef(),name:`New Logic Block ${i.length+1}`,conditionRules:Object.assign(Object.assign({},nf),{id:ef()}),effects:[]},n=[...i,e];l(n),t({definedLogics:n}),tf.log("ConditionalLogicSection","Added new logic block",{newLogicItem:e})},style:{marginBottom:"15px"},children:"+ Add New Logic Block"}),i.map(((e,n)=>Be.jsxs("div",{style:{border:"1px solid #ccc",padding:"15px",marginBottom:"15px",borderRadius:"4px"},children:[Be.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[Be.jsx("input",{type:"text",value:e.name,onChange:n=>((e,n)=>{const r=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{name:n}):t));l(r),t({definedLogics:r})})(e.id,n.target.value),placeholder:"Logic Block Name",style:{fontSize:"1.1em",fontWeight:"bold",border:"none",borderBottom:"1px solid #eee",padding:"5px"}}),Be.jsx("button",{onClick:()=>(e=>{const n=i.filter((t=>t.id!==e));l(n),t({definedLogics:n}),tf.log("ConditionalLogicSection","Removed logic block",{id:e})})(e.id),style:{color:"red",background:"none",border:"none",cursor:"pointer"},children:"Remove Block"})]}),Be.jsx("h5",{children:"Conditions (IF...):"}),Be.jsx(Kp,{fields:s,query:e.conditionRules,onQueryChange:n=>((e,n)=>{const r=rf(n),a=i.map((t=>t.id===e?Object.assign(Object.assign({},t),{conditionRules:r}):t));l(a),t({definedLogics:a}),tf.log("ConditionalLogicSection","Query changed for logic block",{logicItemId:e,internalQuery:r})})(e.id,n)}),Be.jsxs("div",{style:{marginTop:"10px"},children:[Be.jsx("h5",{children:"Actions/Effects (THEN...):"}),Be.jsx("p",{style:{fontSize:"0.8em",color:"gray"},children:Be.jsxs("em",{children:["UI for defining effects (e.g., show/hide, change style, call service) for this block will be here. Currently, ",e.effects.length," effects defined."]})})]}),Be.jsxs("details",{style:{marginTop:"10px"},children:[Be.jsx("summary",{children:"Debug: Logic Item JSON"}),Be.jsx("pre",{style:{fontSize:"0.8em",backgroundColor:"#f0f0f0",padding:"10px",borderRadius:"4px",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:JSON.stringify(e,null,2)})]})]},e.id))),0===i.length&&Be.jsx("p",{children:"No logic blocks defined yet."})]})},of=e.getInstance(),lf=({hass:e,lovelace:t,config:n,onConfigChanged:r})=>{var a,o,i,l;const[s,c]=xe.useState(n||{}),u=ut((e=>e.parameters.parameterValues));xe.useEffect((()=>{of.log("Editor:Main","Editor mounted or initialConfig changed",{initialConfig:n}),c((e=>{var t,r,a,o;const i=Object.assign(Object.assign({},e),n);return i.data_sources||(i.data_sources={inventree_hass_sensors:[],ha_entities:[],inventree_pks:[],inventree_parameters:[]}),i.direct_api||(i.direct_api={enabled:!1,url:"",api_key:""}),i.layout||(i.layout={viewType:"detail"}),!i.view_type&&(null===(t=i.layout)||void 0===t?void 0:t.viewType)?i.view_type=i.layout.viewType:i.view_type||(i.view_type="detail"),!i.columns&&(null===(r=i.layout)||void 0===r?void 0:r.columns)&&(i.columns=i.layout.columns),!i.grid_spacing&&(null===(a=i.layout)||void 0===a?void 0:a.grid_spacing)&&(i.grid_spacing=i.layout.grid_spacing),!i.item_height&&(null===(o=i.layout)||void 0===o?void 0:o.item_height)&&(i.item_height=i.layout.item_height),i.display||(i.display={show_header:!0,show_image:!0,show_name:!0,show_stock:!0}),i.style||(i.style={background:"var(--ha-card-background, var(--card-background-color, white))",spacing:8,image_size:50}),i.interactions||(i.interactions={buttons:[]}),i.conditional_logic?i.conditional_logic.definedLogics||(i.conditional_logic.definedLogics=[]):i.conditional_logic={definedLogics:[]},i}))}),[n]);const d=xe.useCallback(((e,t)=>{c((n=>{const a=Object.assign(Object.assign({},n),{[e]:t});return r(a),a}))}),[r]),p=xe.useCallback(((e,t)=>{c((n=>{const a=Object.assign(Object.assign({},n),{data_sources:Object.assign(Object.assign({},n.data_sources||{}),{[e]:t})});return r(a),a}))}),[r]),f=xe.useCallback((e=>{p("inventree_hass_sensors",e)}),[p]),h=xe.useCallback((e=>{p("ha_entities",e)}),[p]),g=xe.useCallback((e=>{p("inventree_pks",e)}),[p]),m=xe.useCallback((e=>{p("inventree_parameters",e)}),[p]),v=xe.useCallback((e=>{d("direct_api",e)}),[d]),y=xe.useCallback(((e,t)=>{c((n=>{var a,o,i,l,s,c,u,d,p;const f={viewType:e,columns:null!==(a=t.columns)&&void 0!==a?a:null===(o=n.layout)||void 0===o?void 0:o.columns,grid_spacing:null!==(i=t.grid_spacing)&&void 0!==i?i:null===(l=n.layout)||void 0===l?void 0:l.grid_spacing,item_height:null!==(s=t.item_height)&&void 0!==s?s:null===(c=n.layout)||void 0===c?void 0:c.item_height},h=Object.assign(Object.assign({},n),{view_type:e,columns:null!==(u=t.columns)&&void 0!==u?u:n.columns,grid_spacing:null!==(d=t.grid_spacing)&&void 0!==d?d:n.grid_spacing,item_height:null!==(p=t.item_height)&&void 0!==p?p:n.item_height,layout:f});return r(h),h}))}),[r]),b=xe.useCallback((e=>{d("display",e)}),[d]),S=xe.useCallback((e=>{d("style",e)}),[d]),k=xe.useCallback((e=>{d("interactions",e)}),[d]),w=xe.useCallback((e=>{d("conditional_logic",e)}),[d]);if(!e)return Be.jsx("p",{children:"Loading Home Assistant..."});const _=xe.useMemo((()=>({name:s.name||"",entity:s.entity||"",type:s.type||"inventree-card",view_type:s.view_type||"detail",columns:s.columns,grid_spacing:s.grid_spacing,item_height:s.item_height,data_sources:s.data_sources||{inventree_hass_sensors:[],ha_entities:[],inventree_pks:[],inventree_parameters:[]},direct_api:s.direct_api||{enabled:!1,url:"",api_key:""},layout:s.layout||{viewType:"detail"},display:s.display||{show_header:!0,show_image:!0,show_name:!0,show_stock:!0},style:s.style||{background:"var(--ha-card-background, var(--card-background-color, white))",spacing:8,image_size:50},interactions:s.interactions||{buttons:[]},conditional_logic:s.conditional_logic||{definedLogics:[]}})),[s]);return Be.jsxs("div",{className:"inventree-card-editor",children:[Be.jsx("h2",{children:"InvenTree Card Configuration (React Editor)"}),Be.jsxs("section",{className:"editor-section",children:[Be.jsx("h3",{children:"Data Sources"}),Be.jsx(Xs,{hass:e,selectedSensors:(null===(a=_.data_sources)||void 0===a?void 0:a.inventree_hass_sensors)||[],onSensorsChanged:f}),Be.jsx(Ys,{hass:e,selectedEntities:(null===(o=_.data_sources)||void 0===o?void 0:o.ha_entities)||[],onEntitiesChanged:h}),Be.jsx(ec,{selectedPks:(null===(i=_.data_sources)||void 0===i?void 0:i.inventree_pks)||[],onPksChanged:g}),Be.jsx(nc,{selectedParameters:(null===(l=_.data_sources)||void 0===l?void 0:l.inventree_parameters)||[],onParametersChanged:m}),Be.jsx(ac,{hass:e,directApiConfig:_.direct_api,onDirectApiConfigChanged:v})]}),Be.jsxs("section",{className:"editor-section",children:[Be.jsx("h3",{children:"Presentation"}),Be.jsx(lc,{viewType:_.view_type,layoutOptions:{columns:_.columns,grid_spacing:_.grid_spacing,item_height:_.item_height},onLayoutConfigChanged:y}),Be.jsx(uc,{displayConfig:_.display,onDisplayConfigChanged:b}),Be.jsx(pc,{styleConfig:_.style,onStyleConfigChanged:S})]}),Be.jsxs("section",{className:"editor-section",children:[Be.jsx("h3",{children:"Interactions (Actions)"}),Be.jsx(bc,{hass:e,interactionsConfig:_.interactions,onInteractionsConfigChanged:k})]}),Be.jsxs("section",{className:"editor-section",children:[Be.jsx("h3",{children:"Conditional Logic"}),Be.jsx(af,{conditionalLogicConfig:_.conditional_logic,onConfigChanged:w,configuredDataSources:_.data_sources,hass:e,directApiConfig:_.direct_api,allParameterValues:u})]}),Be.jsxs("section",{className:"editor-section",children:[Be.jsx("h3",{children:"System Settings"}),Be.jsx("p",{children:"Performance, caching, and advanced debug settings will go here."})]}),Be.jsxs("details",{children:[Be.jsx("summary",{children:"Current Editor Configuration State (Debug)"}),Be.jsx("pre",{style:{fontSize:"0.8em",backgroundColor:"#f0f0f0",padding:"10px",borderRadius:"4px",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:JSON.stringify(_,null,2)})]})]})},sf=`${n}-react-editor-host`;let cf=class extends se{constructor(){super(...arguments),this._reactRoot=null,this._mountPoint=null,this.logger=e.getInstance(),this._handleReactConfigChange=e=>{this.logger.log("ReactEditorHost","React editor changed config, attempting to fire event.",{newConfig:e}),console.log("[ReactEditorHost] _handleReactConfigChange (from React editor):",JSON.parse(JSON.stringify(e)));let t=this;this.lovelace&&"function"==typeof this.lovelace.dispatchEvent?(this.logger.log("ReactEditorHost","Using this.lovelace as event target."),t=this.lovelace):this.lovelace?this.logger.warn("ReactEditorHost","this.lovelace exists but has no dispatchEvent method or is not HTMLElement. Defaulting to dispatching on self.",{lovelaceObject:this.lovelace}):this.logger.log("ReactEditorHost","this.lovelace is not available. Dispatching event on self (this custom element).");try{Pi(t,"config-changed",{config:e}),this.logger.log("ReactEditorHost","Successfully fired config-changed event.",{target:t===this?"self":"lovelace"})}catch(n){this.logger.error("ReactEditorHost","Error firing config-changed event:",{error:n,target:t,newConfig:e})}}}setConfig(e){this.logger.log("ReactEditorHost","setConfig called",{config:e}),console.log("[ReactEditorHost] setConfig received:",JSON.parse(JSON.stringify(e))),this._config=e,this._renderReactApp()}firstUpdated(e){super.firstUpdated(e),this.shadowRoot&&(this._mountPoint=this.shadowRoot.getElementById("react-editor-mount-point")),this._mountPoint?this._renderReactApp():this.logger.error("ReactEditorHost","CRITICAL: react-editor-mount-point NOT FOUND in shadowRoot.")}updated(e){super.updated(e),(e.has("hass")||e.has("_config"))&&this._renderReactApp()}_renderReactApp(){if(!this._mountPoint){if(this.logger.warn("ReactEditorHost","Attempted to render React app, but mount point is not available. Re-checking..."),console.log("[ReactEditorHost] _renderReactApp: Mount point NOT available. Re-checking..."),!this.shadowRoot)return this.logger.error("ReactEditorHost","Shadow DOM not available for mount point re-check. Cannot render."),void console.log("[ReactEditorHost] _renderReactApp: Shadow DOM not available for re-check.");if(this._mountPoint=this.shadowRoot.getElementById("react-editor-mount-point"),!this._mountPoint)return this.logger.error("ReactEditorHost","Mount point still NOT available after re-check. Cannot render."),void console.log("[ReactEditorHost] _renderReactAoo: Mount point STILL NOT available after re-check.");this.logger.log("ReactEditorHost","Mount point re-acquired."),console.log("[ReactEditorHost] _renderReactApp: Mount point re-acquired.")}if(!this.hass||void 0===this._config)return this.logger.warn("ReactEditorHost","Hass or config is not yet available. Skipping React render.",{hasHass:!!this.hass,hasConfig:void 0!==this._config}),console.log("[ReactEditorHost] _renderReactApp: HASS or _config undefined. Skipping.",{hasHass:!!this.hass,hasConfig:void 0!==this._config}),void(this._reactRoot?this._reactRoot.render(Ee.createElement("div",null,"Loading editor resources...")):this._mountPoint&&(this._mountPoint.innerHTML="<div>Loading editor resources...</div>"));this._reactRoot||(this._reactRoot=ze.createRoot(this._mountPoint)),this.logger.log("ReactEditorHost","Rendering React editor component.",{hasHass:!!this.hass,hasConfig:!!this._config,config:this._config}),console.log("[ReactEditorHost] _renderReactApp: Rendering with props:",{hass:!!this.hass,config:JSON.parse(JSON.stringify(this._config))});const e={hass:this.hass,lovelace:this.lovelace,config:this._config,onConfigChanged:this._handleReactConfigChange},t=Ee.createElement(lf,e);this._reactRoot.render(Ee.createElement(tt,{store:os,children:t}))}disconnectedCallback(){super.disconnectedCallback(),this._reactRoot&&(this._reactRoot.unmount(),this._reactRoot=null,this.logger.log("ReactEditorHost","React editor unmounted.")),this._mountPoint=null}render(){return U`<div id="react-editor-mount-point"></div>`}};cf.styles=u`
    :host {
      display: block;
    }
    #react-editor-mount-point {
      width: 100%;
      height: 100%;
    }
  `,a([fe({attribute:!1})],cf.prototype,"hass",void 0),a([fe({attribute:!1})],cf.prototype,"lovelace",void 0),a([he()],cf.prototype,"_config",void 0),cf=a([ue(sf)],cf);const uf=se;try{let t=class extends uf{constructor(){super(),this.logger=e.getInstance(),this._cleanupFunctions=[],this._websocketSubscriptions=[],this._reactRoot=null,this._reactMountPoint=null,this._isDestroyed=!1,this.logger.log("InventreeCard","Creating InventreeCard instance (Lit Wrapper)",{category:"card",subsystem:"lifecycle"})}static async getConfigElement(){const t=e.getInstance();t.log("InventreeCard","getConfigElement called for React editor",{category:"card",subsystem:"editor"}),customElements.get(sf)||(customElements.define(sf,cf),e.getInstance().log("ReactEditorHost",`Defined custom element: ${sf}`)),t.log("InventreeCard",`Creating editor element: ${sf}`,{category:"card",subsystem:"editor"});const n=document.createElement(sf);if(!n)throw t.error("InventreeCard",`Failed to create editor element: ${sf}`),new Error(`Failed to create editor element: ${sf}`);return t.log("InventreeCard",`React editor host element created: ${sf}`,{category:"card",subsystem:"editor"}),n}static getStubConfig(e){const t=Object.keys(e.states).find((t=>{var n;return t.startsWith("sensor.")&&void 0!==(null===(n=e.states[t].attributes)||void 0===n?void 0:n.items)})),r=JSON.parse(JSON.stringify(me));return r.type=`custom:${n}`,r.name="InvenTree Card",r.data_sources.inventree_hass_sensors=t?[t]:[],delete r.entity,delete r.selected_entities,delete r.columns,delete r.grid_spacing,delete r.item_height,delete r.parts_config,delete r.thumbnails,delete r.buttons,delete r.services,delete r.variant_groups,delete r.variant_view_type,delete r.auto_detect_variants,r}setConfig(e){if(!e)throw new Error("No configuration provided");this.logger.log("InventreeCard","setConfig called with config (raw):",{category:"card",subsystem:"config",data:{config:JSON.stringify(e,null,2)}}),this.logger.info("Card","Setting configuration",{category:"card",subsystem:"config",data:{entityId:e.entity,viewType:e.view_type}}),this.config=e,this._setupDebugMode(e)}render(){return this.logger.log("InventreeCardLit","render() called, creating react-root-container div."),U`<div id="react-root-container"></div>`}firstUpdated(e){super.firstUpdated(e),this.logger.log("InventreeCardLit","firstUpdated() called."),this.shadowRoot?(this._reactMountPoint=this.shadowRoot.getElementById("react-root-container"),this._reactMountPoint?this.logger.log("InventreeCardLit","react-root-container found and cached in firstUpdated."):this.logger.error("InventreeCardLit","CRITICAL: react-root-container NOT FOUND in shadowRoot during firstUpdated.")):this.logger.error("InventreeCardLit","CRITICAL: shadowRoot NOT AVAILABLE during firstUpdated."),this._mountOrUpdateReactApp()}updated(e){super.updated(e),(e.has("_hass")||e.has("config"))&&(this.logger.log("InventreeCard","Hass or Config changed in Lit, triggering React update.",{changed:Array.from(e.keys())}),this._mountOrUpdateReactApp()),e.has("config")||e.has("_hass")}_mountOrUpdateReactApp(){if(!this._reactMountPoint){if(this.logger.error("InventreeCardLit","Cannot mount React app: _reactMountPoint is not set. Attempting to find it again."),!this.shadowRoot)return void this.logger.error("InventreeCardLit","shadowRoot not available in _mountOrUpdateReactApp for re-check.");if(this._reactMountPoint=this.shadowRoot.getElementById("react-root-container"),!this._reactMountPoint)return void this.logger.error("InventreeCardLit","Still cannot find react-root-container on re-check.");this.logger.warn("InventreeCardLit","Found react-root-container on re-check within _mountOrUpdateReactApp.")}if(!this._reactRoot){if(!this._reactMountPoint)return void this.logger.error("InventreeCardLit","Cannot create React root: _reactMountPoint is null just before createRoot.");this._reactRoot=ze.createRoot(this._reactMountPoint),this.logger.log("InventreeCardLit","Mounting React app for the first time.",{hass:!!this._hass,config:!!this.config})}this._hass&&this.config?(this.logger.log("InventreeCardLit","Rendering ReactApp with HASS and Config."),this._reactRoot.render(Ee.createElement(Ws,{hass:this._hass,config:this.config}))):(this.logger.warn("InventreeCardLit","HASS or Config object is null/undefined, not rendering ReactApp.",{hass:!!this._hass,config:!!this.config}),!this._reactRoot||this._hass&&this.config||this.logger.log("InventreeCardLit","Skipping render call as HASS or Config is missing."))}_unmountReactApp(){this._reactRoot&&(this._reactRoot.unmount(),this._reactRoot=null,this.logger.log("InventreeCard","React app unmounted successfully.")),this._reactMountPoint=null}getCardSize(){return 3}static getConfigForm(){}_setupDebugMode(e){this.logger.setDebugConfig(e),this.logger.log("Card","Debug mode configuration set (Lit wrapper)")}_cleanupEventListeners(){this._websocketSubscriptions.forEach((e=>e())),this._websocketSubscriptions=[],this.logger.log("Card","Cleaned up Lit event listeners/subscriptions",{category:"card",subsystem:"lifecycle"})}connectedCallback(){super.connectedCallback();try{this.logger.log("InventreeCard","Lit wrapper connected to DOM",{category:"card",subsystem:"lifecycle"})}catch(e){this.logger.error("InventreeCard","Error in connectedCallback (Lit wrapper):",{category:"card",subsystem:"lifecycle",data:e})}}get hass(){return this._hass?this._hass:void 0}set hass(e){e&&e!==this._hass&&(this.logger.log("Card Lit","HASS object received."),this._hass=e)}requestUpdate(e,t){try{super.requestUpdate(e,t)}catch(e){this.logger.error("InventreeCard",`Critical error in requestUpdate: ${e}`,{category:"card",subsystem:"lifecycle",data:e})}}disconnectedCallback(){super.disconnectedCallback(),this.logger.log("InventreeCard","Lit wrapper disconnectedCallback - cleaning up",{category:"card",subsystem:"lifecycle"}),this._isDestroyed=!0,this._unmountReactApp(),this._cleanupEventListeners(),this._cleanupFunctions.forEach((e=>e())),this._cleanupFunctions=[],ye("lit","cardDisconnected")}};t.styles=[u`
                :host { /* Style the host element itself */
                    display: block; /* Ensure it takes up space */
                    width: 100%;
                    height: 100%;
                }
                #react-root-container {
                    width: 100%;
                    height: 100%;
                }
            `],a([fe({attribute:!1})],t.prototype,"config",void 0),a([he()],t.prototype,"_hass",void 0),a([he()],t.prototype,"_reactRoot",void 0),t=a([ue("inventree-card")],t)}catch(pe){if(e.getInstance().error("InventreeCardGlobal","Error defining InventreeCard (Lit Wrapper):",{data:pe}),!customElements.get(n)){e.getInstance().log("InventreeCardGlobal","Attempting fallback definition for InventreeCard",{category:"card",subsystem:"lifecycle"});try{class t extends se{setConfig(t){e.getInstance().error("FallbackInventreeCard","setConfig called. Card failed to load properly.",{data:t}),this.shadowRoot&&(this.shadowRoot.innerHTML='<div style="color: red; padding: 16px;">Error: InvenTree Card failed to load. Check console.</div>')}getCardSize(){return 1}}customElements.define(n,t)}catch(t){e.getInstance().error("FallbackInventreeCard","Even fallback InventreeCard failed to register:",{data:t})}}}let df;try{df=customElements.get(n)}catch(pe){}"undefined"==typeof window||window.process||(window.process={env:{NODE_ENV:"production"}});const pf=e.getInstance();pf.info("Index","Starting React module initialization",{category:"initialization",subsystem:"index"}),pf.info("Index","Redux store initialized",{category:"initialization",subsystem:"redux"});try{!function(n,r,a){const o=e.getInstance();try{return t.has(r)?(o.log("CustomElements",`Constructor for ${n} already used for registration, skipping`,{category:"initialization",subsystem:"components"}),!1):customElements.get(n)?(o.log("CustomElements",`Element ${n} already registered, skipping`,{category:"initialization",subsystem:"components"}),!1):(customElements.define(n,r,a),t.add(r),o.log("CustomElements",`Successfully registered ${n}`,{category:"initialization",subsystem:"components"}),!0)}catch(e){return o.error("CustomElements",`Error registering ${n}: ${e}`,{category:"initialization",subsystem:"components"}),!1}}(r,df),pf.info("Index",`Registering main wrapper component: ${r}`,{category:"initialization",subsystem:"components"})}catch(e){pf.error("Index",`Error registering main wrapper component: ${e}`,{category:"initialization",subsystem:"components"})}window.customCards=window.customCards||[],window.customCards.push({type:r,name:"InvenTree Card",description:"Display and manage InvenTree inventory (React Version)",preview:!0}),pf.info("Index","Card registration complete",{category:"initialization",subsystem:"card"}),pf.info("Index","React Module initialization complete",{category:"initialization",subsystem:"index"});export{e as L,fi as a,Cr as b,_r as c,sr as s};
//# sourceMappingURL=inventree-card.js.map
